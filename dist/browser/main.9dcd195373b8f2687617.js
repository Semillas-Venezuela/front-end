(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+7AZ":function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return a}),n.d(e,"__decorate",function(){return s}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return l}),n.d(e,"__awaiter",function(){return c}),n.d(e,"__generator",function(){return h}),n.d(e,"__exportStar",function(){return p}),n.d(e,"__values",function(){return f}),n.d(e,"__read",function(){return d}),n.d(e,"__spread",function(){return m}),n.d(e,"__await",function(){return g}),n.d(e,"__asyncGenerator",function(){return y}),n.d(e,"__asyncDelegator",function(){return v}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return _}),n.d(e,"__importStar",function(){return w}),n.d(e,"__importDefault",function(){return x});var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function l(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function p(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function y(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||s(t,e)})})}function s(t,e){try{(n=i[t](e)).value instanceof g?Promise.resolve(n.value.v).then(u,l):c(o[0][2],n)}catch(t){c(o[0][3],t)}var n}function u(t){s("next",t)}function l(t){s("throw",t)}function c(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function v(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){t[r]&&(e[r]=function(e){return(n=!n)?{value:g(t[r](e)),done:"return"===r}:i?i(e):e})}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):f(t)}function _(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function x(t){return t&&t.__esModule?t:{default:t}}},"+qE3":function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,a,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(o(n=this._events[t]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),a=(l=n.slice()).length,u=0;u<a;u++)l[u].apply(this,s);return!0},n.prototype.on=n.prototype.addListener=function(t,e){var a;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.once=function(t,e){if(!r(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},n.prototype.removeListener=function(t,e){var n,o,a,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(n=this._events[t]).length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},"+tJ4":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}}},"+umK":function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},"/5Pc":function(t,e,n){"use strict";var r,i;function o(t){return t=t||r.unreserved,function(e){return function(t,e){if("string"!=typeof t)throw new Error("String required for URL encoding");return t.split("").map(function(t){if(e.hasOwnProperty(t))return t;var n=t.charCodeAt(0);if(n<=127){var r=n.toString(16).toUpperCase();return"%"+(r.length%2==1?"0":"")+r}return encodeURIComponent(t).toUpperCase()}).join("")}(e,t)}}(i={alpha:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",digit:"0123456789",genDelims:":/?#[]@",subDelims:"!$&'()*+,;="}).reserved=i.genDelims+i.subDelims,i.unreserved=i.alpha+i.digit+"-._~",i.url=i.reserved+i.unreserved,i.scheme=i.alpha+i.digit+"+-.",i.userinfo=i.unreserved+i.subDelims+":",i.host=i.unreserved+i.subDelims,i.port=i.digit,i.pchar=i.unreserved+i.subDelims+":@",i.segment=i.pchar,i.path=i.segment+"/",i.query=i.pchar+"/?",i.fragment=i.pchar+"/?",r=Object.keys(i).reduce(function(t,e){return t[e]=i[e].split("").reduce(function(t,e){return t[e]=!0,t},{}),t},{}),t.exports={decode:function(t){return decodeURIComponent(t)},encode:o(),encodeURL:o(r.url),encodeScheme:o(r.scheme),encodeUserInfo:o(r.userinfo),encodeHost:o(r.host),encodePort:o(r.port),encodePathSegment:o(r.segment),encodePath:o(r.path),encodeQuery:o(r.query),encodeFragment:o(r.fragment)}},"/IO6":function(t,e,n){!function(t,e,n){"use strict";var r={CHROME:"Chrome",FIREFOX:"Firefox",SAFARI:"Safari",OPERA:"Opera",IE:"IE",MS_EDGE:"MS-Edge",FB_MESSANGER:"FB-Messanger",SAMSUNG:"Samsung",UCBROWSER:"UC-Browser",UNKNOWN:"Unknown"},i={ANDROID:"Android",I_PAD:"iPad",IPHONE:"iPhone",I_POD:"iPod",BLACKBERRY:"Blackberry",FIREFOX_OS:"Firefox-OS",CHROME_BOOK:"Chrome-Book",WINDOWS_PHONE:"Windows-Phone",PS4:"PS4",VITA:"Vita",CHROMECAST:"Chromecast",APPLE_TV:"Apple-TV",GOOGLE_TV:"Google-TV",UNKNOWN:"Unknown"},o={WINDOWS:"Windows",MAC:"Mac",IOS:"iOS",ANDROID:"Android",LINUX:"Linux",UNIX:"Unix",FIREFOX_OS:"Firefox-OS",CHROME_OS:"Chrome-OS",WINDOWS_PHONE:"Windows-Phone",UNKNOWN:"Unknown"},a={WINDOWS_3_11:"windows-3-11",WINDOWS_95:"windows-95",WINDOWS_ME:"windows-me",WINDOWS_98:"windows-98",WINDOWS_CE:"windows-ce",WINDOWS_2000:"windows-2000",WINDOWS_XP:"windows-xp",WINDOWS_SERVER_2003:"windows-server-2003",WINDOWS_VISTA:"windows-vista",WINDOWS_7:"windows-7",WINDOWS_8_1:"windows-8-1",WINDOWS_8:"windows-8",WINDOWS_10:"windows-10",WINDOWS_PHONE_7_5:"windows-phone-7-5",WINDOWS_PHONE_8_1:"windows-phone-8-1",WINDOWS_PHONE_10:"windows-phone-10",WINDOWS_NT_4_0:"windows-nt-4-0",MACOSX_15:"mac-os-x-15",MACOSX_14:"mac-os-x-14",MACOSX_13:"mac-os-x-13",MACOSX_12:"mac-os-x-12",MACOSX_11:"mac-os-x-11",MACOSX_10:"mac-os-x-10",MACOSX_9:"mac-os-x-9",MACOSX_8:"mac-os-x-8",MACOSX_7:"mac-os-x-7",MACOSX_6:"mac-os-x-6",MACOSX_5:"mac-os-x-5",MACOSX_4:"mac-os-x-4",MACOSX_3:"mac-os-x-3",MACOSX_2:"mac-os-x-2",MACOSX:"mac-os-x",UNKNOWN:"unknown"},s={WINDOWS:{and:[{or:[/\bWindows|(Win\d\d)\b/,/\bWin 9x\b/]},{not:/\bWindows Phone\b/}]},MAC:{and:[/\bMac OS\b/,{not:{or:[/\biPhone\b/,/\bWindows Phone\b/]}}]},IOS:{and:[{or:[/\biPad\b/,/\biPhone\b/,/\biPod\b/]},{not:/\bWindows Phone\b/}]},ANDROID:{and:[/\bAndroid\b/,{not:/\bWindows Phone\b/}]},LINUX:/\bLinux\b/,UNIX:/\bUNIX\b/,FIREFOX_OS:{and:[/\bFirefox\b/,/Mobile\b/]},CHROME_OS:/\bCrOS\b/,WINDOWS_PHONE:{or:[/\bIEMobile\b/,/\bWindows Phone\b/]},PS4:/\bMozilla\/5.0 \(PlayStation 4\b/,VITA:/\bMozilla\/5.0 \(Play(S|s)tation Vita\b/},u={CHROME:{and:[{or:[/\bChrome\b/,/\bCriOS\b/]},{not:{or:[/\bOPR\b/,/\bEdg(e|A|iOS)\b/,/\bSamsungBrowser\b/,/\bUCBrowser\b/]}}]},FIREFOX:{or:[/\bFirefox\b/,/\bFxiOS\b/]},SAFARI:{and:[/^((?!CriOS).)*\Safari\b.*$/,{not:{or:[/\bOPR\b/,/\bEdg(e|A|iOS)\b/,/\bWindows Phone\b/,/\bSamsungBrowser\b/,/\bUCBrowser\b/]}}]},OPERA:{or:[/Opera\b/,/\bOPR\b/]},IE:{or:[/\bMSIE\b/,/\bTrident\b/,/^Mozilla\/5\.0 \(Windows NT 10\.0; Win64; x64\)$/]},MS_EDGE:{or:[/\bEdg(e|A|iOS)\b/]},PS4:/\bMozilla\/5.0 \(PlayStation 4\b/,VITA:/\bMozilla\/5.0 \(Play(S|s)tation Vita\b/,FB_MESSANGER:/\bFBAN\/MessengerForiOS\b/,SAMSUNG:/\bSamsungBrowser\b/,UCBROWSER:/\bUCBrowser\b/},l={ANDROID:{and:[/\bAndroid\b/,{not:/Windows Phone/}]},I_PAD:/\biPad\b/,IPHONE:{and:[/\biPhone\b/,{not:/Windows Phone/}]},I_POD:/\biPod\b/,BLACKBERRY:/\bblackberry\b/,FIREFOX_OS:{and:[/\bFirefox\b/,/\bMobile\b/]},CHROME_BOOK:/\bCrOS\b/,WINDOWS_PHONE:{or:[/\bIEMobile\b/,/\bWindows Phone\b/]},PS4:/\bMozilla\/5.0 \(PlayStation 4\b/,CHROMECAST:/\bCrKey\b/,APPLE_TV:/^iTunes-AppleTV\/4.1$/,GOOGLE_TV:/\bGoogleTV\b/,VITA:/\bMozilla\/5.0 \(Play(S|s)tation Vita\b/},c={WINDOWS_3_11:/Win16/,WINDOWS_95:/(Windows 95|Win95|Windows_95)/,WINDOWS_ME:/(Win 9x 4.90|Windows ME)/,WINDOWS_98:/(Windows 98|Win98)/,WINDOWS_CE:/Windows CE/,WINDOWS_2000:/(Windows NT 5.0|Windows 2000)/,WINDOWS_XP:/(Windows NT 5.1|Windows XP)/,WINDOWS_SERVER_2003:/Windows NT 5.2/,WINDOWS_VISTA:/Windows NT 6.0/,WINDOWS_7:/(Windows 7|Windows NT 6.1)/,WINDOWS_8_1:/(Windows 8.1|Windows NT 6.3)/,WINDOWS_8:/(Windows 8|Windows NT 6.2)/,WINDOWS_10:/(Windows NT 10.0)/,WINDOWS_PHONE_7_5:/(Windows Phone OS 7.5)/,WINDOWS_PHONE_8_1:/(Windows Phone 8.1)/,WINDOWS_PHONE_10:/(Windows Phone 10)/,WINDOWS_NT_4_0:{and:[/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/,{not:/Windows NT 10.0/}]},MACOSX:/(MAC OS X\s*[^ 0-9])/,MACOSX_3:/(Darwin 10.3|Mac OS X 10.3)/,MACOSX_4:/(Darwin 10.4|Mac OS X 10.4)/,MACOSX_5:/(Mac OS X 10.5)/,MACOSX_6:/(Mac OS X 10.6)/,MACOSX_7:/(Mac OS X 10.7)/,MACOSX_8:/(Mac OS X 10.8)/,MACOSX_9:/(Mac OS X 10.9)/,MACOSX_10:/(Mac OS X 10.10)/,MACOSX_11:/(Mac OS X 10.11)/,MACOSX_12:/(Mac OS X 10.12)/,MACOSX_13:/(Mac OS X 10.13)/,MACOSX_14:/(Mac OS X 10.14)/,MACOSX_15:/(Mac OS X 10.15)/},h={CHROME:[/\bChrome\/([\d\.]+)\b/,/\bCriOS\/([\d\.]+)\b/],FIREFOX:/\bFirefox\/([\d\.]+)\b/,SAFARI:/\bVersion\/([\d\.]+)\b/,OPERA:[/\bVersion\/([\d\.]+)\b/,/\bOPR\/([\d\.]+)\b/],IE:[/\bMSIE ([\d\.]+\w?)\b/,/\brv:([\d\.]+\w?)\b/],MS_EDGE:/\bEdg(?:e|A|iOS)\/([\d\.]+)\b/,SAMSUNG:/\bSamsungBrowser\/([\d\.]+)\b/,UCBROWSER:/\bUCBrowser\/([\d\.]+)\b/},p=Object.keys(h).reduce(function(t,e){return t[r[e]]=h[e],t},{}),f=Object.freeze({BROWSERS:r,DEVICES:i,OS:o,OS_VERSIONS:a,OS_RE:s,BROWSERS_RE:u,DEVICES_RE:l,OS_VERSIONS_RE:c,BROWSER_VERSIONS_RE_MAP:h,BROWSER_VERSIONS_RE:p}),d=function(){function t(){}return t.prototype.test=function(t,e){var n=this;return"string"==typeof e&&(e=new RegExp(e)),e instanceof RegExp?e.test(t):e&&Array.isArray(e.and)?e.and.every(function(e){return n.test(t,e)}):e&&Array.isArray(e.or)?e.or.some(function(e){return n.test(t,e)}):!(!e||!e.not||n.test(t,e.not))},t.prototype.exec=function(t,e){var n=this;return"string"==typeof e&&(e=new RegExp(e)),e instanceof RegExp?e.exec(t):e&&Array.isArray(e)?e.reduce(function(e,r){return e||n.exec(t,r)},null):null},t}(),m=function(){function t(t){this.platformId=t,this.ua="",this.userAgent="",this.os="",this.browser="",this.device="",this.os_version="",this.browser_version="",n.isPlatformBrowser(this.platformId)&&(this.ua=window.navigator.userAgent),this._setDeviceInfo()}return t.prototype._setDeviceInfo=function(){var t=this,e=new d,n=this.ua;this.userAgent=n;var i=[{const:"OS",prop:"os"},{const:"BROWSERS",prop:"browser"},{const:"DEVICES",prop:"device"},{const:"OS_VERSIONS",prop:"os_version"}];if(i.forEach(function(r){t[r.prop]=Object.keys(f[r.const]).reduce(function(t,i){return t[f[r.const][i]]=e.test(n,f[r.const+"_RE"][i]),t},{})}),i.forEach(function(e){t[e.prop]=Object.keys(f[e.const]).map(function(t){return f[e.const][t]}).reduce(function(n,r){return n===f[e.const].UNKNOWN&&t[e.prop][r]?r:n},f[e.const].UNKNOWN)}),this.browser_version="0",this.browser!==r.UNKNOWN){var o=e.exec(n,p[this.browser]);o&&(this.browser_version=o[1])}},t.prototype.getDeviceInfo=function(){return{userAgent:this.userAgent,os:this.os,browser:this.browser,device:this.device,os_version:this.os_version,browser_version:this.browser_version}},t.prototype.isMobile=function(){var t=this;return[i.ANDROID,i.IPHONE,i.I_POD,i.BLACKBERRY,i.FIREFOX_OS,i.WINDOWS_PHONE,i.VITA].some(function(e){return t.device===e})},t.prototype.isTablet=function(){var t=this;return[i.I_PAD,i.FIREFOX_OS].some(function(e){return t.device===e})},t.prototype.isDesktop=function(){var t=this;return[i.PS4,i.CHROME_BOOK,i.UNKNOWN].some(function(e){return t.device===e})},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[e.PLATFORM_ID]}]}]},t}();t.DeviceDetectorModule=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[m]}},t.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule]}]}],t}(),t.DeviceDetectorService=m,t.ReTree=d,t.BROWSERS=r,t.DEVICES=i,t.OS=o,t.OS_VERSIONS=a,t.OS_RE=s,t.BROWSERS_RE=u,t.DEVICES_RE=l,t.OS_VERSIONS_RE=c,t.BROWSER_VERSIONS_RE_MAP=h,t.BROWSER_VERSIONS_RE=p,Object.defineProperty(t,"__esModule",{value:!0})}(e,n("CcnG"),n("Ip0R"))},"/WYv":function(t,e,n){"use strict";function r(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},"0/uQ":function(t,e,n){"use strict";var r=n("6blF"),i=n("/WYv"),o=n("2ePl"),a=n("xTla"),s=n("En8+"),u=n("IUTb"),l=n("pugT"),c=n("S5XQ"),h=n("u67D"),p=n("JcRv"),f=n("Fxb1");function d(t,e){if(!e)return t instanceof r.a?t:new r.a(Object(f.a)(t));if(null!=t){if(function(t){return t&&"function"==typeof t[a.a]}(t))return function(t,e){return new r.a(e?function(n){var r=new l.a;return r.add(e.schedule(function(){var i=t[a.a]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}:Object(p.a)(t))}(t,e);if(Object(i.a)(t))return function(t,e){return new r.a(e?function(n){var r=new l.a;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}:Object(c.a)(t))}(t,e);if(Object(o.a)(t))return Object(u.a)(t,e);if(function(t){return t&&"function"==typeof t[s.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(e?function(n){var r,i=new l.a;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(function(){r=t[s.a](),i.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),i}:Object(h.a)(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}n.d(e,"a",function(){return d})},"0Gqm":function(t,e,n){"use strict";var r;r=n("r2d8"),t.exports=r({init:function(t){return t.code=t.code||400,t},response:function(t,e){return t.status&&t.status.code>=e.code?Promise.reject(t):t}})},"1fwK":function(t,e,n){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports={encode:function(t){if(/([^\u0000-\u00ff])/.test(t))throw new Error("Can't base64 encode non-ASCII characters.");for(var e,n,i,o=0,a=[];o<t.length;){switch(e=t.charCodeAt(o),i=o%3){case 0:a.push(r.charAt(e>>2));break;case 1:a.push(r.charAt((3&n)<<4|e>>4));break;case 2:a.push(r.charAt((15&n)<<2|e>>6)),a.push(r.charAt(63&e))}n=e,o+=1}return 0===i?(a.push(r.charAt((3&n)<<4)),a.push("==")):1===i&&(a.push(r.charAt((15&n)<<2)),a.push("=")),a.join("")},decode:function(t){if(t=t.replace(/\s/g,""),!/^[a-z0-9\+\/\s]+\={0,2}$/i.test(t)||t.length%4>0)throw new Error("Not a base64-encoded string.");var e,n,i=0,o=[];for(t=t.replace(/\=/g,"");i<t.length;){switch(e=r.indexOf(t.charAt(i)),i%4){case 1:o.push(String.fromCharCode(n<<2|e>>4));break;case 2:o.push(String.fromCharCode((15&n)<<4|e>>2));break;case 3:o.push(String.fromCharCode((3&n)<<6|e))}n=e,i+=1}return o.join("")}}},"2Bdj":function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},"2H9D":function(t,e,n){"use strict";var r,i,o;function a(t,e){var n;if((n=i[t.slice(0,1)])?t=t.slice(1):n=i[""],n.reserved)throw new Error("Reserved expression operations are not supported");return function(t,e,n){return e.split(",").reduce(function(e,i){var a,s;if(a={},"*"===i.slice(-1)&&(i=i.slice(0,-1),a.explode=!0),o.test(i)){var u=o.exec(i);i=u[1],a.maxLength=parseInt(u[2])}return i=r.decode(i),void 0===(s=n[i])||null===s?e:(Array.isArray(s)?e=s.reduce(function(e,n){return e.length?(e+=a.explode?t.separator:",",t.named&&a.explode&&(e+=t.encoder(i),e+=n.length?"=":t.empty)):(e+=t.first,t.named&&(e+=t.encoder(i),e+=n.length?"=":t.empty)),e+t.encoder(n)},e):"object"==typeof s?e=Object.keys(s).reduce(function(e,n){return e.length?e+=a.explode?t.separator:",":(e+=t.first,t.named&&!a.explode&&(e+=t.encoder(i),e+=s[n].length?"=":t.empty)),e+=t.encoder(n),(e+=a.explode?"=":",")+t.encoder(s[n])},e):(s=String(s),a.maxLength&&(s=s.slice(0,a.maxLength)),e+=e.length?t.separator:t.first,t.named&&(e+=t.encoder(i),e+=s.length?"=":t.empty),e+=t.encoder(s)),e)},"")}(n,t,e)}r=n("/5Pc"),o=/^([^:]*):([0-9]+)$/,i={"":{first:"",separator:",",named:!1,empty:"",encoder:r.encode},"+":{first:"",separator:",",named:!1,empty:"",encoder:r.encodeURL},"#":{first:"#",separator:",",named:!1,empty:"",encoder:r.encodeURL},".":{first:".",separator:".",named:!1,empty:"",encoder:r.encode},"/":{first:"/",separator:"/",named:!1,empty:"",encoder:r.encode},";":{first:";",separator:";",named:!0,empty:"",encoder:r.encode},"?":{first:"?",separator:"&",named:!0,empty:"=",encoder:r.encode},"&":{first:"&",separator:"&",named:!0,empty:"=",encoder:r.encode},"=":{reserved:!0},",":{reserved:!0},"!":{reserved:!0},"@":{reserved:!0},"|":{reserved:!0}},t.exports={expand:function(t,e){var n,r,i;for(i="",r=0;;){if(-1===(n=t.indexOf("{",r))){i+=t.slice(r);break}i+=t.slice(r,n),r=t.indexOf("}",n)+1,i+=a(t.slice(n+1,r-1),e)}return i}}},"2ePl":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},3:function(t,e,n){t.exports=n("zUnb")},"3U0i":function(t,e,n){"use strict";n.r(e),n.d(e,"TimeoutError",function(){return i});var r=n("mrSG"),i=function(t){function e(){var n=t.call(this,"Timeout has occurred")||this;return n.name="TimeoutError",Object.setPrototypeOf(n,e.prototype),n}return r.c(e,t),e}(Error)},"4Dop":function(t,e,n){"use strict";var r,i;r=n("r2d8"),i=n("4RZ8"),t.exports=r({request:function(t,e){var n,r,o;return e.prefix&&!new i(t.path).isFullyQualified()&&(n=e.prefix,t.path&&((r=n).lastIndexOf(o="/")+o.length===r.length||0===t.path.indexOf("/")||(n+="/"),n+=t.path),t.path=n),t}})},"4RZ8":function(t,e,n){"use strict";var r,i,o,a,s,u;function l(t,e){return 0===t.indexOf(e)}function c(t,e){if(!(this instanceof c))return new c(t,e);t instanceof c?(this._template=t.template,this._params=r({},this._params,e)):(this._template=(t||"").toString(),this._params=e||{})}r=n("LyWy"),i=n("gwTh"),a=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?(\/[^?#]*)?(\?[^#]*)?(#\S*)?/i,s=/^([a-z][a-z0-9\-\+\.]*:\/\/|\/)/i,u=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?\//i,c.prototype={append:function(t,e){return new c(this._template+t,r({},this._params,e))},fullyQualify:function(){if("undefined"==typeof location)return this;if(this.isFullyQualified())return this;var t=this._template;return l(t,"//")?t=o.protocol+t:l(t,"/")?t=o.origin+t:this.isAbsolute()||(t=o.origin+o.pathname.substring(0,o.pathname.lastIndexOf("/")+1)),-1===t.indexOf("/",8)&&(t+="/"),new c(t,this._params)},isAbsolute:function(){return s.test(this.build())},isFullyQualified:function(){return u.test(this.build())},isCrossOrigin:function(){if(!o)return!0;var t=this.parts();return t.protocol!==o.protocol||t.hostname!==o.hostname||t.port!==o.port},parts:function(){var t,e;return(e={href:(t=this.fullyQualify().build().match(a))[0],protocol:t[1],host:t[3]||"",hostname:t[4]||"",port:t[6],pathname:t[7]||"",search:t[8]||"",hash:t[9]||""}).origin=e.protocol+"//"+e.host,e.port=e.port||("https:"===e.protocol?"443":"http:"===e.protocol?"80":""),e},build:function(t){return function(t,e){var n,r,o,a,s;if(n=t,o={},e){for(r in e)(s=new RegExp("\\{"+r+"\\}")).test(n)?n=n.replace(s,encodeURIComponent(e[r]),"g"):o[r]=e[r];(a=i.write(o))&&(n+=-1===n.indexOf("?")?"?":"&",n+=a)}return n}(this._template,r({},this._params,t))},toString:function(){return this.build()}},o="undefined"!=typeof location?new c(location.href).parts():void 0,t.exports=c},"4ZJM":function(t,e,n){t.exports=function(){"use strict";var t,e,n;function r(r,i){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),(n=i(a)).workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))}else e=i;else t=i}return r(0,function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=r;function r(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var i=o;function o(t,e){this.x=t,this.y=e}function a(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!a(t[n],e[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(!a(t[r],e[r]))return!1;return!0}return t===e}function s(t,e,r,i){var o=new n(t,e,r,i);return function(t){return o.solve(t)}}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var u=s(.25,.1,.25,1);function l(t,e,n){return Math.min(n,Math.max(e,t))}function c(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function h(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}var p=1;function f(){return p++}function d(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function m(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function g(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function y(t,e){return-1!==t.indexOf(e,t.length-e.length)}function v(t,e,n){var r={};for(var i in t)r[i]=e.call(n||this,t[i],i,t);return r}function b(t,e,n){var r={};for(var i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function _(t){return Array.isArray(t)?t.map(_):"object"==typeof t&&t?v(t,_):t}var w={};function x(t){w[t]||("undefined"!=typeof console&&console.warn(t),w[t]=!0)}function C(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function E(t){for(var e=0,n=0,r=t.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)e+=((a=t[i]).x-(o=t[n]).x)*(o.y+a.y);return e}function S(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var T,A,P=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),I=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,O=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,D={now:P,frame:function(t){var e=I(t);return{cancel:function(){return O(e)}}},getImageData:function(t){var e=self.document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(0,0,t.width,t.height)},resolveURL:function(t){var e=self.document.createElement("a");return e.href=t,e.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio}},k={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return 0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":"https://events.mapbox.com/events/v2"},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},M={supported:!1,testSupport:function(t){!R&&A&&(N?L(t):T=t)}},R=!1,N=!1;function L(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,A),t.isContextLost())return;M.supported=!0}catch(t){}t.deleteTexture(e),R=!0}self.document&&((A=self.document.createElement("img")).onload=function(){T&&L(T),T=null,N=!0},A.onerror=function(){R=!0,T=null},A.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var F="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes";function B(t,e){var n=W(k.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"/"!==n.path&&(t.path=""+n.path+t.path),!k.REQUIRE_ACCESS_TOKEN)return K(t);if(!(e=e||k.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+F);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+F);return t.params.push("access_token="+e),K(t)}function j(t){return 0===t.indexOf("mapbox:")}var z=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function V(t){return z.test(t)}var U=/(\.(png|jpg)\d*)(?=$)/,q=/\.[\w]+$/,G=function(t){var e=W(t);if(!e.path.match(/(^\/v4\/)/)||!e.path.match(q))return t;var n="mapbox://tiles/";n+=e.path.replace("/v4/","");var r=e.params.filter(function(t){return!t.match(/^access_token=/)});return r.length&&(n+="?"+r.join("&")),n},H=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/;function W(t){var e=t.match(H);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function K(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function X(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(e[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(t){return null}}var Q=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Q.prototype.getStorageKey=function(t){var e,n=X(k.ACCESS_TOKEN);return e=n&&n.u?self.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(Number("0x"+e))})):k.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},Q.prototype.fetchEventData=function(){var t=S("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{var r=self.localStorage.getItem(e);r&&(this.eventData=JSON.parse(r));var i=self.localStorage.getItem(n);i&&(this.anonId=i)}catch(t){x("Unable to read from LocalStorage")}},Q.prototype.saveEventData=function(){var t=S("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{self.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){x("Unable to write to LocalStorage")}},Q.prototype.processRequests=function(){},Q.prototype.postEvent=function(t,e,n){var r=this,i=W(k.EVENTS_URL);i.params.push("access_token="+(k.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"0.53.0",userId:this.anonId},a=e?h(o,e):o,s={url:K(i),headers:{"Content-Type":"text/plain"},body:JSON.stringify([a])};this.pendingRequest=lt(s,function(t){r.pendingRequest=null,n(t),r.saveEventData(),r.processRequests()})},Q.prototype.queueRequest=function(t){this.queue.push(t),this.processRequests()};var Z=function(t){function e(){t.call(this,"map.load"),this.success={}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e){k.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return j(t)||V(t)})&&this.queueRequest({id:e,timestamp:Date.now()})},e.prototype.processRequests=function(){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var e=this.queue.shift(),n=e.id,r=e.timestamp;n&&this.success[n]||(this.anonId||this.fetchEventData(),m(this.anonId)||(this.anonId=d()),this.postEvent(r,{},function(e){e||n&&(t.success[n]=!0)}))}},e}(Q),Y=new(function(t){function e(){t.call(this,"appUserTurnstile")}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t){k.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return j(t)||V(t)})&&this.queueRequest(Date.now())},e.prototype.processRequests=function(){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var e=X(k.ACCESS_TOKEN),n=e?e.u:k.ACCESS_TOKEN,r=n!==this.eventData.tokenU;m(this.anonId)||(this.anonId=d(),r=!0);var i=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),a=new Date(i),s=(i-this.eventData.lastSuccess)/864e5;r=r||s>=1||s<-1||o.getDate()!==a.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(i,{"enabled.telemetry":!1},function(e){e||(t.eventData.lastSuccess=i,t.eventData.tokenU=n)})}},e}(Q)),J=Y.postTurnstileEvent.bind(Y),$=new Z,tt=$.postMapLoadEvent.bind($),et={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(et);var nt=function(t){function e(e,n,r){401===n&&V(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=n,this.url=r,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error);function rt(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}var it,ot,at=rt()?function(){return self.worker&&self.worker.referrer}:function(){var t=self.location.origin;if(t&&"null"!==t&&"file://"!==t)return t+self.location.pathname},st=function(t,e){if(!/^file:/.test(t.url)){if(self.fetch&&self.Request&&self.AbortController)return function(t,e){var n=new self.AbortController,r=new self.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:at(),signal:n.signal});return"json"===t.type&&r.headers.set("Accept","application/json"),self.fetch(r).then(function(n){n.ok?n[t.type||"text"]().then(function(t){e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires"))}).catch(function(t){return e(new Error(t.message))}):e(new nt(n.statusText,n.status,t.url))}).catch(function(t){20!==t.code&&e(new Error(t.message))}),{cancel:function(){return n.abort()}}}(t,e);if(rt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e)}return function(t,e){var n=new self.XMLHttpRequest;for(var r in n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer"),t.headers)n.setRequestHeader(r,t.headers[r]);return"json"===t.type&&n.setRequestHeader("Accept","application/json"),n.withCredentials="include"===t.credentials,n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===t.type)try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else e(new nt(n.statusText,n.status,t.url))},n.send(t.body),{cancel:function(){return n.abort()}}}(t,e)},ut=function(t,e){return st(h(t,{type:"arrayBuffer"}),e)},lt=function(t,e){return st(h(t,{method:"POST"}),e)};it=[],ot=0;var ct=function(t,e){if(ot>=k.MAX_PARALLEL_IMAGE_REQUESTS){var n={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return it.push(n),n}ot++;var r=!1,i=function(){if(!r)for(r=!0,ot--;it.length&&ot<k.MAX_PARALLEL_IMAGE_REQUESTS;){var t=it.shift();t.cancelled||(t.cancel=ct(t.requestParameters,t.callback).cancel)}},o=ut(t,function(t,n,r,o){if(i(),t)e(t);else if(n){var a=new self.Image,s=self.URL||self.webkitURL;a.onload=function(){e(null,a),s.revokeObjectURL(a.src)},a.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var u=new self.Blob([new Uint8Array(n)],{type:"image/png"});a.cacheControl=r,a.expires=o,a.src=n.byteLength?s.createObjectURL(u):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}});return{cancel:function(){o.cancel(),i()}}};function ht(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function pt(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}var ft=function(t,e){void 0===e&&(e={}),h(this,e),this.type=t},dt=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,"error",h({error:e},n))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(ft),mt=function(){};mt.prototype.on=function(t,e){return this._listeners=this._listeners||{},ht(t,e,this._listeners),this},mt.prototype.off=function(t,e){return pt(t,e,this._listeners),pt(t,e,this._oneTimeListeners),this},mt.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},ht(t,e,this._oneTimeListeners),this},mt.prototype.fire=function(t,e){"string"==typeof t&&(t=new ft(t,e||{}));var n=t.type;if(this.listens(n)){t.target=this;for(var r=0,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];r<i.length;r+=1)i[r].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];o<a.length;o+=1){var s=a[o];pt(n,s,this._oneTimeListeners),s.call(this,t)}var u=this._eventedParent;u&&(h(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(t))}else t instanceof dt&&console.error(t.error);return this},mt.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},mt.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var gt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},yt=function(t,e,n,r){this.message=(t?t+": ":"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)};function vt(t){var e=t.value;return e?[new yt(t.key,e,"constants have been deprecated as of v8")]:[]}function bt(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}function _t(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function wt(t){return Array.isArray(t)?t.map(wt):_t(t)}var xt=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Ct=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.bindings[i[0]]=i[1]}};Ct.prototype.concat=function(t){return new Ct(this,t)},Ct.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Ct.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Et={kind:"null"},St={kind:"number"},Tt={kind:"string"},At={kind:"boolean"},Pt={kind:"color"},It={kind:"object"},Ot={kind:"value"},Dt={kind:"collator"},kt={kind:"formatted"};function Mt(t,e){return{kind:"array",itemType:t,N:e}}function Rt(t){if("array"===t.kind){var e=Rt(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var Nt=[Et,St,Tt,At,Pt,kt,It,Mt(Ot)];function Lt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Lt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,r=Nt;n<r.length;n+=1)if(!Lt(r[n],e))return null}return"Expected "+Rt(t)+" but found "+Rt(e)+" instead."}var Ft=e(function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return r("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return function(t){return t<0?0:t>1?1:t}("%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))}function a(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=s.indexOf("("),l=s.indexOf(")");if(-1!==u&&l+1===s.length){var c=s.substr(0,u),h=s.substr(u+1,l-(u+1)).split(","),p=1;switch(c){case"rgba":if(4!==h.length)return null;p=o(h.pop());case"rgb":return 3!==h.length?null:[i(h[0]),i(h[1]),i(h[2]),p];case"hsla":if(4!==h.length)return null;p=o(h.pop());case"hsl":if(3!==h.length)return null;var f=(parseFloat(h[0])%360+360)%360/360,d=o(h[1]),m=o(h[2]),g=m<=.5?m*(d+1):m+d-m*d,y=2*m-g;return[r(255*a(y,g,f+1/3)),r(255*a(y,g,f)),r(255*a(y,g,f-1/3)),p];default:return null}}return null}}catch(t){}}).parseCSSColor,Bt=function(t,e,n,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=n,this.a=r};Bt.parse=function(t){if(t){if(t instanceof Bt)return t;if("string"==typeof t){var e=Ft(t);if(e)return new Bt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Bt.prototype.toString=function(){var t=this.toArray(),e=t[1],n=t[2],r=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(n)+","+r+")"},Bt.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},Bt.black=new Bt(0,0,0,1),Bt.white=new Bt(1,1,1,1),Bt.transparent=new Bt(0,0,0,0),Bt.red=new Bt(1,0,0,1);var jt=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};jt.prototype.compare=function(t,e){return this.collator.compare(t,e)},jt.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var zt=function(t,e,n){this.text=t,this.scale=e,this.fontStack=n},Vt=function(t){this.sections=t};function Ut(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function qt(t){if(null===t)return Et;if("string"==typeof t)return Tt;if("boolean"==typeof t)return At;if("number"==typeof t)return St;if(t instanceof Bt)return Pt;if(t instanceof jt)return Dt;if(t instanceof Vt)return kt;if(Array.isArray(t)){for(var e,n=t.length,r=0,i=t;r<i.length;r+=1){var o=qt(i[r]);if(e){if(e===o)continue;e=Ot;break}e=o}return Mt(e||Ot,n)}return It}function Gt(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Bt||t instanceof Vt?t.toString():JSON.stringify(t)}Vt.fromString=function(t){return new Vt([new zt(t,null,null)])},Vt.prototype.toString=function(){return this.sections.map(function(t){return t.text}).join("")},Vt.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),t.push(i)}return t};var Ht=function(t,e){this.type=t,this.value=e};Ht.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Bt)return!0;if(e instanceof jt)return!0;if(e instanceof Vt)return!0;if(Array.isArray(e)){for(var n=0,r=e;n<r.length;n+=1)if(!t(r[n]))return!1;return!0}if("object"==typeof e){for(var i in e)if(!t(e[i]))return!1;return!0}return!1}(t[1]))return e.error("invalid value");var n=t[1],r=qt(n),i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new Ht(r,n)},Ht.prototype.evaluate=function(){return this.value},Ht.prototype.eachChild=function(){},Ht.prototype.possibleOutputs=function(){return[this.value]},Ht.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Bt?["rgba"].concat(this.value.toArray()):this.value instanceof Vt?this.value.serialize():this.value};var Wt=function(t){this.name="ExpressionEvaluationError",this.message=t};Wt.prototype.toJSON=function(){return this.message};var Kt={string:Tt,number:St,boolean:At,object:It},Xt=function(t,e){this.type=t,this.args=e};Xt.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n,r=1,i=t[0];if("array"===i){var o,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in Kt)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=Kt[s],r++}else o=Ot;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],r++}n=Mt(o,a)}else n=Kt[i];for(var u=[];r<t.length;r++){var l=e.parse(t[r],r,Ot);if(!l)return null;u.push(l)}return new Xt(n,u)},Xt.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!Lt(this.type,qt(n)))return n;if(e===this.args.length-1)throw new Wt("Expected value to be of type "+Rt(this.type)+", but found "+Rt(qt(n))+" instead.")}return null},Xt.prototype.eachChild=function(t){this.args.forEach(t)},Xt.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},Xt.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map(function(t){return t.serialize()}))};var Qt=function(t){this.type=kt,this.sections=t};Qt.parse=function(t,e){if(t.length<3)return e.error("Expected at least two arguments.");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");for(var n=[],r=1;r<t.length-1;r+=2){var i=e.parse(t[r],1,Ot);if(!i)return null;var o=i.type.kind;if("string"!==o&&"value"!==o&&"null"!==o)return e.error("Formatted text type must be 'string', 'value', or 'null'.");var a=t[r+1];if("object"!=typeof a||Array.isArray(a))return e.error("Format options argument must be an object.");var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,St)))return null;var u=null;if(a["text-font"]&&!(u=e.parse(a["text-font"],1,Mt(Tt))))return null;n.push({text:i,scale:s,font:u})}return new Qt(n)},Qt.prototype.evaluate=function(t){return new Vt(this.sections.map(function(e){return new zt(Gt(e.text.evaluate(t)),e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null)}))},Qt.prototype.eachChild=function(t){for(var e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t(r.text),r.scale&&t(r.scale),r.font&&t(r.font)}},Qt.prototype.possibleOutputs=function(){return[void 0]},Qt.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t.push(r.text.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),t.push(i)}return t};var Zt={"to-boolean":At,"to-color":Pt,"to-number":St,"to-string":Tt},Yt=function(t,e){this.type=t,this.args=e};Yt.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");for(var r=Zt[n],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,Ot);if(!a)return null;i.push(a)}return new Yt(r,i)},Yt.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,n,r=0,i=this.args;r<i.length;r+=1){if(n=null,(e=i[r].evaluate(t))instanceof Bt)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":Ut(e[0],e[1],e[2],e[3])))return new Bt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Wt(n||"Could not parse color from value '"+("string"==typeof e?e:JSON.stringify(e))+"'")}if("number"===this.type.kind){for(var a=null,s=0,u=this.args;s<u.length;s+=1){if(null===(a=u[s].evaluate(t)))return 0;var l=Number(a);if(!isNaN(l))return l}throw new Wt("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?Vt.fromString(Gt(this.args[0].evaluate(t))):Gt(this.args[0].evaluate(t))},Yt.prototype.eachChild=function(t){this.args.forEach(t)},Yt.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},Yt.prototype.serialize=function(){if("formatted"===this.type.kind)return new Qt([{text:this.args[0],scale:null,font:null}]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var Jt=["Unknown","Point","LineString","Polygon"],$t=function(){this.globals=null,this.feature=null,this.featureState=null,this._parseColorCache={}};$t.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},$t.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Jt[this.feature.type]:this.feature.type:null},$t.prototype.properties=function(){return this.feature&&this.feature.properties||{}},$t.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Bt.parse(t)),e};var te=function(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r};te.prototype.evaluate=function(t){return this._evaluate(t,this.args)},te.prototype.eachChild=function(t){this.args.forEach(t)},te.prototype.possibleOutputs=function(){return[void 0]},te.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},te.parse=function(t,e){var n,r=t[0],i=te.definitions[r];if(!i)return e.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter(function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1}),u=null,l=0,c=s;l<c.length;l+=1){var h=c[l],p=h[0],f=h[1];u=new ae(e.registry,e.path,null,e.scope);for(var d=[],m=!1,g=1;g<t.length;g++){var y=t[g],v=Array.isArray(p)?p[g-1]:p.type,b=u.parse(y,1+d.length,v);if(!b){m=!0;break}d.push(b)}if(!m)if(Array.isArray(p)&&p.length!==d.length)u.error("Expected "+p.length+" arguments, but found "+d.length+" instead.");else{for(var _=0;_<d.length;_++){var w=Array.isArray(p)?p[_]:p.type,x=d[_];u.concat(_+1).checkSubtype(w,x.type)}if(0===u.errors.length)return new te(r,o,f,d)}}if(1===s.length)(n=e.errors).push.apply(n,u.errors);else{for(var C=(s.length?s:a).map(function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Rt).join(", ")+")":"("+Rt(e.type)+"...)"}).join(" | "),E=[],S=1;S<t.length;S++){var T=e.parse(t[S],1+E.length);if(!T)return null;E.push(Rt(T.type))}e.error("Expected arguments of type "+C+", but found ("+E.join(", ")+") instead.")}return null},te.register=function(t,e){for(var n in te.definitions=e,e)t[n]=te};var ee=function(t,e,n){this.type=Dt,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};function ne(t){if(t instanceof te){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild(function(t){e&&!ne(t)&&(e=!1)}),e}function re(t){if(t instanceof te&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!re(t)&&(e=!1)}),e}function ie(t,e){if(t instanceof te&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild(function(t){n&&!ie(t,e)&&(n=!1)}),n}ee.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,At);if(!r)return null;var i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,At);if(!i)return null;var o=null;return n.locale&&!(o=e.parse(n.locale,1,Tt))?null:new ee(r,i,o)},ee.prototype.evaluate=function(t){return new jt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},ee.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},ee.prototype.possibleOutputs=function(){return[void 0]},ee.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var oe=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};oe.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new oe(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},oe.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},oe.prototype.eachChild=function(){},oe.prototype.possibleOutputs=function(){return[void 0]},oe.prototype.serialize=function(){return["var",this.name]};var ae=function(t,e,n,r,i){void 0===e&&(e=[]),void 0===r&&(r=new Ct),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=r,this.errors=i,this.expectedType=n};function se(t,e){for(var n,r=0,i=t.length-1,o=0;r<=i;){if(e===(n=t[o=Math.floor((r+i)/2)])||e>n&&e<t[o+1])return o;if(n<e)r=o+1;else{if(!(n>e))throw new Wt("Input is not a number.");i=o-1}}return Math.max(o-1,0)}ae.prototype.parse=function(t,e,n,r,i){return void 0===i&&(i={}),e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)},ae.prototype._parse=function(t,e){function n(t,e,n){return"assert"===n?new Xt(e,[t]):"coerce"===n?new Yt(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[r];if(i){var o=i.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,e.typeAnnotation||"coerce");else o=n(o,a,e.typeAnnotation||"assert")}if(!(o instanceof Ht)&&function t(e){if(e instanceof oe)return t(e.boundExpression);if(e instanceof te&&"error"===e.name)return!1;if(e instanceof ee)return!1;var n=e instanceof Yt||e instanceof Xt,r=!0;return e.eachChild(function(e){r=n?r&&t(e):r&&e instanceof Ht}),!!r&&ne(e)&&ie(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var u=new $t;try{o=new Ht(o.type,o.evaluate(u))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},ae.prototype.concat=function(t,e,n){var r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new ae(this.registry,r,e||null,i,this.errors)},ae.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new xt(r,t))},ae.prototype.checkSubtype=function(t,e){var n=Lt(t,e);return n&&this.error(n),n};var ue=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=i[r],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};function le(t,e,n){return t*(1-n)+e*n}ue.parse=function(t,e){var n=t[1],r=t.slice(2);if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,1,St)))return null;var i=[],o=null;e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType),r.unshift(-1/0);for(var a=0;a<r.length;a+=2){var s=r[a],u=r[a+1],l=a+1,c=a+2;if("number"!=typeof s)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=s)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var h=e.parse(u,c,o);if(!h)return null;o=o||h.type,i.push([s,h])}return new ue(o,n,i)},ue.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[se(e,r)].evaluate(t)},ue.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},ue.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}))},ue.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var ce=Object.freeze({number:le,color:function(t,e,n){return new Bt(le(t.r,e.r,n),le(t.g,e.g,n),le(t.b,e.b,n),le(t.a,e.a,n))},array:function(t,e,n){return t.map(function(t,r){return le(t,e[r],n)})}}),he=.95047,pe=1,fe=1.08883,de=4/29,me=6/29,ge=3*me*me,ye=me*me*me,ve=Math.PI/180,be=180/Math.PI;function _e(t){return t>ye?Math.pow(t,1/3):t/ge+de}function we(t){return t>me?t*t*t:ge*(t-de)}function xe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ce(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ee(t){var e=Ce(t.r),n=Ce(t.g),r=Ce(t.b),i=_e((.4124564*e+.3575761*n+.1804375*r)/he),o=_e((.2126729*e+.7151522*n+.072175*r)/pe);return{l:116*o-16,a:500*(i-o),b:200*(o-_e((.0193339*e+.119192*n+.9503041*r)/fe)),alpha:t.a}}function Se(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=pe*we(e),n=he*we(n),r=fe*we(r),new Bt(xe(3.2404542*n-1.5371385*e-.4985314*r),xe(-.969266*n+1.8760108*e+.041556*r),xe(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}var Te={forward:Ee,reverse:Se,interpolate:function(t,e,n){return{l:le(t.l,e.l,n),a:le(t.a,e.a,n),b:le(t.b,e.b,n),alpha:le(t.alpha,e.alpha,n)}}},Ae={forward:function(t){var e=Ee(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*be;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}},reverse:function(t){var e=t.h*ve,n=t.c;return Se({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:function(t,e,n){var r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}(t.h,e.h,n),c:le(t.c,e.c,n),l:le(t.l,e.l,n),alpha:le(t.alpha,e.alpha,n)}}},Pe=Object.freeze({lab:Te,hcl:Ae}),Ie=function(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(var o=0,a=i;o<a.length;o+=1){var s=a[o],u=s[1];this.labels.push(s[0]),this.outputs.push(u)}};function Oe(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}Ie.interpolationFactor=function(t,e,r,i){var o=0;if("exponential"===t.name)o=Oe(e,t.base,r,i);else if("linear"===t.name)o=Oe(e,1,r,i);else if("cubic-bezier"===t.name){var a=t.controlPoints;o=new n(a[0],a[1],a[2],a[3]).solve(Oe(e,1,r,i))}return o},Ie.parse=function(t,e){var n=t[0],r=t[1],i=t[2],o=t.slice(3);if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,St)))return null;var u=[],l=null;"interpolate-hcl"===n||"interpolate-lab"===n?l=Pt:e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var c=0;c<o.length;c+=2){var h=o[c],p=o[c+1],f=c+3,d=c+4;if("number"!=typeof h)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(u.length&&u[u.length-1][0]>=h)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);var m=e.parse(p,d,l);if(!m)return null;l=l||m.type,u.push([h,m])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new Ie(l,n,r,i,u):e.error("Type "+Rt(l)+" is not interpolatable.")},Ie.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);var o=se(e,r),a=Ie.interpolationFactor(this.interpolation,r,e[o],e[o+1]),s=n[o].evaluate(t),u=n[o+1].evaluate(t);return"interpolate"===this.operator?ce[this.type.kind.toLowerCase()](s,u,a):"interpolate-hcl"===this.operator?Ae.reverse(Ae.interpolate(Ae.forward(s),Ae.forward(u),a)):Te.reverse(Te.interpolate(Te.forward(s),Te.forward(u),a))},Ie.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Ie.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}))},Ie.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e};var De=function(t,e){this.type=t,this.args=e};De.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,r=e.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=e.parse(a[o],1+i.length,n,void 0,{typeAnnotation:"omit"});if(!s)return null;n=n||s.type,i.push(s)}var u=r&&i.some(function(t){return Lt(r,t.type)});return new De(u?Ot:n,i)},De.prototype.evaluate=function(t){for(var e=null,n=0,r=this.args;n<r.length&&null===(e=r[n].evaluate(t));n+=1);return e},De.prototype.eachChild=function(t){this.args.forEach(t)},De.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},De.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var ke=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};ke.prototype.evaluate=function(t){return this.result.evaluate(t)},ke.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},ke.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],r=1;r<t.length-1;r+=2){var i=t[r];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;n.push([i,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return a?new ke(n,a):null},ke.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},ke.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var r=n[e];t.push(r[0],r[1].serialize())}return t.push(this.result.serialize()),t};var Me=function(t,e,n){this.type=t,this.index=e,this.input=n};Me.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,St),r=e.parse(t[2],2,Mt(e.expectedType||Ot));return n&&r?new Me(r.type.itemType,n,r):null},Me.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new Wt("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new Wt("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new Wt("Array index must be an integer, but found "+e+" instead.");return n[e]},Me.prototype.eachChild=function(t){t(this.index),t(this.input)},Me.prototype.possibleOutputs=function(){return[void 0]},Me.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Re=function(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};Re.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],u=t[a+1];Array.isArray(s)||(s=[s]);var l=e.concat(a);if(0===s.length)return l.error("Expected at least one branch label.");for(var c=0,h=s;c<h.length;c+=1){var p=h[c];if("number"!=typeof p&&"string"!=typeof p)return l.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof p&&Math.floor(p)!==p)return l.error("Numeric branch labels must be integer values.");if(n){if(l.checkSubtype(n,qt(p)))return null}else n=qt(p);if(void 0!==i[String(p)])return l.error("Branch labels must be unique.");i[String(p)]=o.length}var f=e.parse(u,a,r);if(!f)return null;r=r||f.type,o.push(f)}var d=e.parse(t[1],1,Ot);if(!d)return null;var m=e.parse(t[t.length-1],t.length-1,r);return m?"value"!==d.type.kind&&e.concat(1).checkSubtype(n,d.type)?null:new Re(n,r,d,i,o,m):null},Re.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(qt(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Re.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Re.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Re.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i];void 0===(h=r[this.cases[a]])?(r[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[h][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,l=n;u<l.length;u+=1){var c=l[u],h=c[0],p=c[1];e.push(1===p.length?s(p[0]):p.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var Ne=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};function Le(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Fe(t,e,n,r){return 0===r.compare(e,n)}function Be(t,e,n){var r="=="!==t&&"!="!==t;return function(){function i(t,e,n){this.type=At,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return i.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],o=e.parse(t[1],1,Ot);if(!o)return null;if(!Le(n,o.type))return e.concat(1).error('"'+n+"\" comparisons are not supported for type '"+Rt(o.type)+"'.");var a=e.parse(t[2],2,Ot);if(!a)return null;if(!Le(n,a.type))return e.concat(2).error('"'+n+"\" comparisons are not supported for type '"+Rt(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+Rt(o.type)+"' and '"+Rt(a.type)+"'.");r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Xt(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Xt(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,Dt)))return null}return new i(o,a,s)},i.prototype.evaluate=function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=qt(o),u=qt(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new Wt('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var l=qt(o),c=qt(a);if("string"!==l.kind||"string"!==c.kind)return e(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):e(i,o,a)},i.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},i.prototype.possibleOutputs=function(){return[!0,!1]},i.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},i}()}Ne.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var r=[],i=1;i<t.length-1;i+=2){var o=e.parse(t[i],i,At);if(!o)return null;var a=e.parse(t[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var s=e.parse(t[t.length-1],t.length-1,n);return s?new Ne(n,r,s):null},Ne.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[1];if(r[0].evaluate(t))return i.evaluate(t)}return this.otherwise.evaluate(t)},Ne.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[1];t(r[0]),t(i)}t(this.otherwise)},Ne.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.branches.map(function(t){return t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Ne.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var je=Be("==",function(t,e,n){return e===n},Fe),ze=Be("!=",function(t,e,n){return e!==n},function(t,e,n,r){return!Fe(0,e,n,r)}),Ve=Be("<",function(t,e,n){return e<n},function(t,e,n,r){return r.compare(e,n)<0}),Ue=Be(">",function(t,e,n){return e>n},function(t,e,n,r){return r.compare(e,n)>0}),qe=Be("<=",function(t,e,n){return e<=n},function(t,e,n,r){return r.compare(e,n)<=0}),Ge=Be(">=",function(t,e,n){return e>=n},function(t,e,n,r){return r.compare(e,n)>=0}),He=function(t,e,n,r,i){this.type=Tt,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i};He.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,St);if(!n)return null;var r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");var i=null;if(r.locale&&!(i=e.parse(r.locale,1,Tt)))return null;var o=null;if(r.currency&&!(o=e.parse(r.currency,1,Tt)))return null;var a=null;if(r["min-fraction-digits"]&&!(a=e.parse(r["min-fraction-digits"],1,St)))return null;var s=null;return r["max-fraction-digits"]&&!(s=e.parse(r["max-fraction-digits"],1,St))?null:new He(n,i,o,a,s)},He.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},He.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},He.prototype.possibleOutputs=function(){return[void 0]},He.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var We=function(t){this.type=St,this.input=t};We.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+Rt(n.type)+" instead."):new We(n):null},We.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Wt("Expected value to be of type string or array, but found "+Rt(qt(e))+" instead.")},We.prototype.eachChild=function(t){t(this.input)},We.prototype.possibleOutputs=function(){return[void 0]},We.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Ke={"==":je,"!=":ze,">":Ue,"<":Ve,">=":Ge,"<=":qe,array:Xt,at:Me,boolean:Xt,case:Ne,coalesce:De,collator:ee,format:Qt,interpolate:Ie,"interpolate-hcl":Ie,"interpolate-lab":Ie,length:We,let:ke,literal:Ht,match:Re,number:Xt,"number-format":He,object:Xt,step:ue,string:Xt,"to-boolean":Yt,"to-color":Yt,"to-number":Yt,"to-string":Yt,var:oe};function Xe(t,e){var n=e[0],r=e[1],i=e[2],o=e[3];n=n.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);var a=o?o.evaluate(t):1,s=Ut(n,r,i,a);if(s)throw new Wt(s);return new Bt(n/255*a,r/255*a,i/255*a,a)}function Qe(t,e){return t in e}function Ze(t,e){var n=e[t];return void 0===n?null:n}function Ye(t){return{type:t}}function Je(t){return{result:"success",value:t}}function $e(t){return{result:"error",value:t}}function tn(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function en(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function nn(t){return!!t.expression&&t.expression.interpolated}function rn(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function on(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function an(t){return t}function sn(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function un(t,e,n,r,i){return sn(typeof n===i?r[n]:void 0,t.default,e.default)}function ln(t,e,n){if("number"!==rn(n))return sn(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var i=pn(t.stops,n);return t.stops[i][1]}function cn(t,e,n){var r=void 0!==t.base?t.base:1;if("number"!==rn(n))return sn(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var o=pn(t.stops,n),a=function(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],u=t.stops[o+1][1],l=ce[e.type]||an;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=Pe[t.colorSpace];l=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=s.evaluate.apply(void 0,t),r=u.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==r)return l(n,r,a)}}:l(s,u,a)}function hn(t,e,n){return"color"===e.type?n=Bt.parse(n):"formatted"===e.type?n=Vt.fromString(n.toString()):rn(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),sn(n,t.default,e.default)}function pn(t,e){for(var n,r=0,i=t.length-1,o=0;r<=i;){if(e===(n=t[o=Math.floor((r+i)/2)][0])||e>n&&e<t[o+1][0])return o;n<e?r=o+1:n>e&&(i=o-1)}return Math.max(o-1,0)}te.register(Ke,{error:[{kind:"error"},[Tt],function(t,e){throw new Wt(e[0].evaluate(t))}],typeof:[Tt,[Ot],function(t,e){return Rt(qt(e[0].evaluate(t)))}],"to-rgba":[Mt(St,4),[Pt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Pt,[St,St,St],Xe],rgba:[Pt,[St,St,St,St],Xe],has:{type:At,overloads:[[[Tt],function(t,e){return Qe(e[0].evaluate(t),t.properties())}],[[Tt,It],function(t,e){var n=e[1];return Qe(e[0].evaluate(t),n.evaluate(t))}]]},get:{type:Ot,overloads:[[[Tt],function(t,e){return Ze(e[0].evaluate(t),t.properties())}],[[Tt,It],function(t,e){var n=e[1];return Ze(e[0].evaluate(t),n.evaluate(t))}]]},"feature-state":[Ot,[Tt],function(t,e){return Ze(e[0].evaluate(t),t.featureState||{})}],properties:[It,[],function(t){return t.properties()}],"geometry-type":[Tt,[],function(t){return t.geometryType()}],id:[Ot,[],function(t){return t.id()}],zoom:[St,[],function(t){return t.globals.zoom}],"heatmap-density":[St,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[St,[],function(t){return t.globals.lineProgress||0}],accumulated:[Ot,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[St,Ye(St),function(t,e){for(var n=0,r=0,i=e;r<i.length;r+=1)n+=i[r].evaluate(t);return n}],"*":[St,Ye(St),function(t,e){for(var n=1,r=0,i=e;r<i.length;r+=1)n*=i[r].evaluate(t);return n}],"-":{type:St,overloads:[[[St,St],function(t,e){var n=e[1];return e[0].evaluate(t)-n.evaluate(t)}],[[St],function(t,e){return-e[0].evaluate(t)}]]},"/":[St,[St,St],function(t,e){var n=e[1];return e[0].evaluate(t)/n.evaluate(t)}],"%":[St,[St,St],function(t,e){var n=e[1];return e[0].evaluate(t)%n.evaluate(t)}],ln2:[St,[],function(){return Math.LN2}],pi:[St,[],function(){return Math.PI}],e:[St,[],function(){return Math.E}],"^":[St,[St,St],function(t,e){var n=e[1];return Math.pow(e[0].evaluate(t),n.evaluate(t))}],sqrt:[St,[St],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[St,[St],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[St,[St],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[St,[St],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[St,[St],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[St,[St],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[St,[St],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[St,[St],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[St,[St],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[St,[St],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[St,Ye(St),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[St,Ye(St),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[St,[St],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[St,[St],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[St,[St],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[St,[St],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[At,[Tt,Ot],function(t,e){var n=e[0],r=e[1];return t.properties()[n.value]===r.value}],"filter-id-==":[At,[Ot],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[At,[Tt],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[At,[Tt,Ot],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[At,[Ot],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[At,[Tt,Ot],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[At,[Ot],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[At,[Tt,Ot],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[At,[Ot],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[At,[Tt,Ot],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[At,[Ot],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[At,[Ot],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[At,[],function(t){return null!==t.id()}],"filter-type-in":[At,[Mt(Tt)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[At,[Mt(Ot)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[At,[Tt,Mt(Ot)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[At,[Tt,Mt(Ot)],function(t,e){var n=e[0],r=e[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:At,overloads:[[[At,At],function(t,e){var n=e[1];return e[0].evaluate(t)&&n.evaluate(t)}],[Ye(At),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(!r[n].evaluate(t))return!1;return!0}]]},any:{type:At,overloads:[[[At,At],function(t,e){var n=e[1];return e[0].evaluate(t)||n.evaluate(t)}],[Ye(At),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(r[n].evaluate(t))return!0;return!1}]]},"!":[At,[At],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[At,[Tt],function(t,e){var n=t.globals&&t.globals.isSupportedScript;return!n||n(e[0].evaluate(t))}],upcase:[Tt,[Tt],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Tt,[Tt],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Tt,Ye(Ot),function(t,e){return e.map(function(e){return Gt(e.evaluate(t))}).join("")}],"resolved-locale":[Tt,[Dt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var fn=function(t,e){var n;this.expression=t,this._warningHistory={},this._evaluator=new $t,this._defaultValue=e?"color"===(n=e).type&&on(n.default)?new Bt(0,0,0,0):"color"===n.type?Bt.parse(n.default)||null:void 0===n.default?null:n.default:null,this._enumValues=e&&"enum"===e.type?e.values:null};function dn(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Ke}function mn(t,e){var n=new ae(Ke,[],e?function(t){var e={color:Pt,string:Tt,number:St,enum:Tt,boolean:At,formatted:kt};return"array"===t.type?Mt(e[t.value]||Ot,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?Je(new fn(r,e)):$e(n.errors)}fn.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this.expression.evaluate(this._evaluator)},fn.prototype.evaluate=function(t,e,n){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null;try{var r=this.expression.evaluate(this._evaluator);if(null==r)return this._defaultValue;if(this._enumValues&&!(r in this._enumValues))throw new Wt("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(r)+" instead.");return r}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var gn=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!re(e.expression)};gn.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},gn.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)};var yn=function(t,e,n){this.kind=t,this.zoomStops=n.labels,this._styleExpression=e,this.isStateDependent="camera"!==t&&!re(e.expression),n instanceof Ie&&(this._interpolationType=n.interpolation)};function vn(t,e){if("error"===(t=mn(t,e)).result)return t;var n=t.value.expression,r=ne(n);if(!r&&!tn(e))return $e([new xt("","data expressions not supported")]);var i=ie(n,["zoom"]);if(!i&&!en(e))return $e([new xt("","zoom expressions not supported")]);var o=function t(e){var n=null;if(e instanceof ke)n=t(e.result);else if(e instanceof De)for(var r=0,i=e.args;r<i.length&&!(n=t(i[r]));r+=1);else(e instanceof ue||e instanceof Ie)&&e.input instanceof te&&"zoom"===e.input.name&&(n=e);return n instanceof xt?n:(e.eachChild(function(e){var r=t(e);r instanceof xt?n=r:!n&&r?n=new xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new xt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n)}(n);return o||i?o instanceof xt?$e([o]):o instanceof Ie&&!nn(e)?$e([new xt("",'"interpolate" expressions cannot be used with this property')]):Je(o?new yn(r?"camera":"composite",t.value,o):new gn(r?"constant":"source",t.value)):$e([new xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}yn.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},yn.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)},yn.prototype.interpolationFactor=function(t,e,n){return this._interpolationType?Ie.interpolationFactor(this._interpolationType,t,e,n):0};var bn=function(t,e){this._parameters=t,this._specification=e,bt(this,function t(e,n){var r,i,o,a="color"===n.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||!(s||void 0!==e.property),l=e.type||(nn(n)?"exponential":"interval");if(a&&((e=bt({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],Bt.parse(t[1])]})),e.default=Bt.parse(e.default?e.default:n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Pe[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===l)r=cn;else if("interval"===l)r=ln;else if("categorical"===l){r=un,i=Object.create(null);for(var c=0,h=e.stops;c<h.length;c+=1){var p=h[c];i[p[0]]=p[1]}o=typeof e.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'+l+'"');r=hn}if(s){for(var f={},d=[],m=0;m<e.stops.length;m++){var g=e.stops[m],y=g[0].zoom;void 0===f[y]&&(f[y]={zoom:y,type:e.type,property:e.property,default:e.default,stops:[]},d.push(y)),f[y].stops.push([g[0].value,g[1]])}for(var v=[],b=0,_=d;b<_.length;b+=1){var w=_[b];v.push([f[w].zoom,t(f[w],n)])}return{kind:"composite",interpolationFactor:Ie.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:v.map(function(t){return t[0]}),evaluate:function(t,r){var i=t.zoom;return cn({stops:v,base:e.base},n,i).evaluate(i,r)}}}return u?{kind:"camera",interpolationFactor:"exponential"===l?Ie.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){return r(e,n,t.zoom,i,o)}}:{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?sn(e.default,n.default):r(e,n,s,i,o)}}}(this._parameters,this._specification))};function _n(t,e){if(on(t))return new bn(t,e);if(dn(t)){var n=vn(t,e);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return n.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=Bt.parse(t)),{kind:"constant",evaluate:function(){return r}}}function wn(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],u=rn(n);if("object"!==u)return[new yt(e,n,"object expected, "+u+" found")];for(var l in n){var c=l.split(".")[0],h=r[c]||r["*"],p=void 0;if(i[c])p=i[c];else if(r[c])p=Hn;else if(i["*"])p=i["*"];else{if(!r["*"]){s.push(new yt(e,n[l],'unknown property "'+l+'"'));continue}p=Hn}s=s.concat(p({key:(e?e+".":e)+l,value:n[l],valueSpec:h,style:o,styleSpec:a,object:n,objectKey:l},n))}for(var f in r)i[f]||r[f].required&&void 0===r[f].default&&void 0===n[f]&&s.push(new yt(e,n,'missing required property "'+f+'"'));return s}function xn(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||Hn;if("array"!==rn(e))return[new yt(o,e,"array expected, "+rn(e)+" found")];if(n.length&&e.length!==n.length)return[new yt(o,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new yt(o,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var s={type:n.value};i.$version<7&&(s.function=n.function),"object"===rn(n.value)&&(s=n.value);for(var u=[],l=0;l<e.length;l++)u=u.concat(a({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:r,styleSpec:i,key:o+"["+l+"]"}));return u}function Cn(t){var e=t.key,n=t.value,r=t.valueSpec,i=rn(n);return"number"!==i?[new yt(e,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new yt(e,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new yt(e,n,n+" is greater than the maximum value "+r.maximum)]:[]}function En(t){var e,n,r,i=t.valueSpec,o=_t(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,u=!s,l="array"===rn(t.value.stops)&&"array"===rn(t.value.stops[0])&&"object"===rn(t.value.stops[0][0]),c=wn({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new yt(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value;return e=e.concat(xn({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===rn(n)&&0===n.length&&e.push(new yt(t.key,n,"array must have at least one stop")),e},default:function(t){return Hn({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&c.push(new yt(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||c.push(new yt(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!nn(t.valueSpec)&&c.push(new yt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!tn(t.valueSpec)?c.push(new yt(t.key,t.value,"property functions not supported")):s&&!en(t.valueSpec)&&c.push(new yt(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!l||void 0!==t.value.property||c.push(new yt(t.key,t.value,'"property" property is required')),c;function h(t){var e=[],o=t.value,s=t.key;if("array"!==rn(o))return[new yt(s,o,"array expected, "+rn(o)+" found")];if(2!==o.length)return[new yt(s,o,"array length 2 expected, length "+o.length+" found")];if(l){if("object"!==rn(o[0]))return[new yt(s,o,"object expected, "+rn(o[0])+" found")];if(void 0===o[0].zoom)return[new yt(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new yt(s,o,"object stop key must have value")];if(r&&r>_t(o[0].zoom))return[new yt(s,o[0].zoom,"stop zoom values must appear in ascending order")];_t(o[0].zoom)!==r&&(r=_t(o[0].zoom),n=void 0,a={}),e=e.concat(wn({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Cn,value:p}}))}else e=e.concat(p({key:s+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return dn(wt(o[1]))?e.concat([new yt(s+"[1]",o[1],"expressions are not allowed in function stops.")]):e.concat(Hn({key:s+"[1]",value:o[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function p(t,r){var s=rn(t.value),u=_t(t.value),l=null!==t.value?t.value:r;if(e){if(s!==e)return[new yt(t.key,l,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new yt(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, "+s+" found";return tn(i)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new yt(t.key,l,c)]}return"categorical"!==o||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==o&&"number"===s&&void 0!==n&&u<n?[new yt(t.key,l,"stop domain values must appear in ascending order")]:(n=u,"categorical"===o&&u in a?[new yt(t.key,l,"stop domain values must be unique")]:(a[u]=!0,[])):[new yt(t.key,l,"integer expected, found "+u)]}}function Sn(t){var e=("property"===t.expressionContext?vn:mn)(wt(t.value),t.valueSpec);if("error"===e.result)return e.value.map(function(e){return new yt(""+t.key+e.key,t.value,e.message)});var n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==n.possibleOutputs().indexOf(void 0))return[new yt(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!re(n))return[new yt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!re(n))return[new yt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!ie(n,["zoom","feature-state"]))return[new yt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!ne(n))return[new yt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Tn(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(_t(n))&&i.push(new yt(e,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(_t(n))&&i.push(new yt(e,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i}function An(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var r=n[e];if(!An(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}bn.deserialize=function(t){return new bn(t._parameters,t._specification)},bn.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var Pn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function In(t){if(null==t)return function(){return!0};An(t)||(t=Dn(t));var e=mn(t,Pn);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,n){return e.value.evaluate(t,n)}}function On(t,e){return t<e?-1:t>e?1:0}function Dn(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?kn(t[1],t[2],"=="):"!="===n?Nn(kn(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?kn(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(Dn))):"all"===n?["all"].concat(t.slice(1).map(Dn)):"none"===n?["all"].concat(t.slice(1).map(Dn).map(Nn)):"in"===n?Mn(t[1],t.slice(2)):"!in"===n?Nn(Mn(t[1],t.slice(2))):"has"===n?Rn(t[1]):"!has"!==n||Nn(Rn(t[1]))}function kn(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function Mn(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(On)]]:["filter-in-small",t,["literal",e]]}}function Rn(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Nn(t){return["!",t]}function Ln(t){return An(wt(t.value))?Sn(bt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,r=e.key;if("array"!==rn(n))return[new yt(r,n,"array expected, "+rn(n)+" found")];var i,o=e.styleSpec,a=[];if(n.length<1)return[new yt(r,n,"filter array must have at least 1 element")];switch(a=a.concat(Tn({key:r+"[0]",value:n[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),_t(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===_t(n[1])&&a.push(new yt(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new yt(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(i=rn(n[1]))&&a.push(new yt(r+"[1]",n[1],"string expected, "+i+" found"));for(var s=2;s<n.length;s++)i=rn(n[s]),"$type"===_t(n[1])?a=a.concat(Tn({key:r+"["+s+"]",value:n[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new yt(r+"["+s+"]",n[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var u=1;u<n.length;u++)a=a.concat(t({key:r+"["+u+"]",value:n[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=rn(n[1]),2!==n.length?a.push(new yt(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==i&&a.push(new yt(r+"[1]",n[1],"string expected, "+i+" found"))}return a}(t)}function Fn(t,e){var n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return Hn({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var l,c=t.valueSpec||s[a];if(!c)return[new yt(n,o,'unknown property "'+a+'"')];if("string"===rn(o)&&tn(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new yt(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var h=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new yt(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&on(wt(o))&&"identity"===_t(o.type)&&h.push(new yt(n,o,'"text-font" does not support identity functions'))),h.concat(Hn({key:t.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function Bn(t){return Fn(t,"paint")}function jn(t){return Fn(t,"layout")}function zn(t){var e=[],n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new yt(r,n,'either "type" or "ref" is required'));var a,s=_t(n.type),u=_t(n.ref);if(n.id)for(var l=_t(n.id),c=0;c<t.arrayIndex;c++){var h=i.layers[c];_t(h.id)===l&&e.push(new yt(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+h.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new yt(r,n[t],'"'+t+'" is prohibited for ref layers'))}),i.layers.forEach(function(t){_t(t.id)===u&&(a=t)}),a?a.ref?e.push(new yt(r,n.ref,"ref cannot reference another ref layer")):s=_t(a.type):e.push(new yt(r,n.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(n.source){var p=i.sources&&i.sources[n.source],f=p&&_t(p.type);p?"vector"===f&&"raster"===s?e.push(new yt(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===f&&"raster"!==s?e.push(new yt(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==f||n["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new yt(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===f&&p.lineMetrics||e.push(new yt(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new yt(r,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new yt(r,n.source,'source "'+n.source+'" not found'))}else e.push(new yt(r,n,'missing required property "source"'));return e=e.concat(wn({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Hn({key:r+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:Ln,layout:function(t){return wn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return jn(bt({layerType:s},t))}}})},paint:function(t){return wn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Bn(bt({layerType:s},t))}}})}}}))}function Vn(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new yt(n,e,'"type" is required')];var o,a=_t(e.type);switch(a){case"vector":case"raster":case"raster-dem":if(o=wn({key:n,value:e,valueSpec:r["source_"+a.replace("-","_")],style:t.style,styleSpec:r}),"url"in e)for(var s in e)["type","url","tileSize"].indexOf(s)<0&&o.push(new yt(n+"."+s,e[s],'a source with a "url" property may not include a "'+s+'" property'));return o;case"geojson":if(o=wn({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r}),e.cluster)for(var u in e.clusterProperties){var l=e.clusterProperties[u],c=l[0],h="string"==typeof c?[c,["accumulated"],["get",u]]:c;o.push.apply(o,Sn({key:n+"."+u+".map",value:l[1],expressionContext:"cluster-map"})),o.push.apply(o,Sn({key:n+"."+u+".reduce",value:h,expressionContext:"cluster-reduce"}))}return o;case"video":return wn({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return wn({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new yt(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Tn({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function Un(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,o=[],a=rn(e);if(void 0===e)return o;if("object"!==a)return o.concat([new yt("light",e,"object expected, "+a+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);o=o.concat(u&&r[u[1]]&&r[u[1]].transition?Hn({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?Hn({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}):[new yt(s,e[s],'unknown property "'+s+'"')])}return o}function qn(t){var e=t.value,n=t.key,r=rn(e);return"string"!==r?[new yt(n,e,"string expected, "+r+" found")]:[]}var Gn={"*":function(){return[]},array:xn,boolean:function(t){var e=t.value,n=t.key,r=rn(e);return"boolean"!==r?[new yt(n,e,"boolean expected, "+r+" found")]:[]},number:Cn,color:function(t){var e=t.key,n=t.value,r=rn(n);return"string"!==r?[new yt(e,n,"color expected, "+r+" found")]:null===Ft(n)?[new yt(e,n,'color expected, "'+n+'" found')]:[]},constants:vt,enum:Tn,filter:Ln,function:En,layer:zn,object:wn,source:Vn,light:Un,string:qn,formatted:function(t){return 0===qn(t).length?[]:Sn(t)}};function Hn(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&on(_t(e))?En(t):n.expression&&dn(wt(e))?Sn(t):n.type&&Gn[n.type]?Gn[n.type](t):wn(bt({},t,{valueSpec:n.type?r[n.type]:n}))}function Wn(t){var e=t.value,n=t.key,r=qn(t);return r.length?r:(-1===e.indexOf("{fontstack}")&&r.push(new yt(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new yt(n,e,'"glyphs" url must include a "{range}" token')),r)}function Kn(t,e){var n=[];return n=n.concat(Hn({key:"",value:t,valueSpec:(e=e||gt).$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Wn,"*":function(){return[]}}})),t.constants&&(n=n.concat(vt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Xn(n)}function Xn(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function Qn(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return Xn(t.apply(this,e))}}Kn.source=Qn(Vn),Kn.light=Qn(Un),Kn.layer=Qn(zn),Kn.filter=Qn(Ln),Kn.paintProperty=Qn(Bn),Kn.layoutProperty=Qn(jn);var Zn=Kn,Yn=Kn.light,Jn=Kn.paintProperty,$n=Kn.layoutProperty;function tr(t,e){var n=!1;if(e&&e.length)for(var r=0,i=e;r<i.length;r+=1)t.fire(new dt(new Error(i[r].message))),n=!0;return n}var er=rr,nr=3;function rr(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[nr+o],s=i[nr+o+1];r.push(a===s?null:i.subarray(a,s))}var u=i[nr+r.length+1];this.keys=i.subarray(i[nr+r.length],u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var l=0;l<this.d*this.d;l++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var c=n/e*t;this.min=-c,this.max=t+c}rr.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},rr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},rr.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},rr.prototype.query=function(t,e,n,r,i){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,r,this._queryCell,s,{},i),s},rr.prototype._queryCell=function(t,e,n,r,i,o,a,s){var u=this.cells[i];if(null!==u)for(var l=this.keys,c=this.bboxes,h=0;h<u.length;h++){var p=u[h];if(void 0===a[p]){var f=4*p;(s?s(c[f+0],c[f+1],c[f+2],c[f+3]):t<=c[f+2]&&e<=c[f+3]&&n>=c[f+0]&&r>=c[f+1])?(a[p]=!0,o.push(l[p])):a[p]=!1}}},rr.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var u=this._convertToCellCoord(t),l=this._convertToCellCoord(e),c=this._convertToCellCoord(n),h=this._convertToCellCoord(r),p=u;p<=c;p++)for(var f=l;f<=h;f++){var d=this.d*f+p;if((!s||s(this._convertFromCellCoord(p),this._convertFromCellCoord(f),this._convertFromCellCoord(p+1),this._convertFromCellCoord(f+1)))&&i.call(this,t,e,n,r,d,o,a,s))return}},rr.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},rr.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},rr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=nr+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[nr+a]=o,i.set(s,o),o+=s.length}return i[nr+t.length]=o,i.set(this.keys,o),i[nr+t.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var ir=self.ImageData,or={};function ar(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),or[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}for(var sr in ar("Object",Object),er.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},er.deserialize=function(t){return new er(t.buffer)},ar("Grid",er),ar("Color",Bt),ar("Error",Error),ar("StylePropertyFunction",bn),ar("StyleExpression",fn,{omit:["_evaluator"]}),ar("ZoomDependentExpression",yn),ar("ZoomConstantExpression",gn),ar("CompoundExpression",te,{omit:["_evaluate"]}),Ke)Ke[sr]._classRegistryKey||ar("Expression_"+sr,Ke[sr]);function ur(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof ir)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],i=0,o=t;i<o.length;i+=1)r.push(ur(o[i],e));return r}if("object"==typeof t){var a=t.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var u=a.serialize?a.serialize(t,e):{};if(!a.serialize){for(var l in t)if(t.hasOwnProperty(l)&&!(or[s].omit.indexOf(l)>=0)){var c=t[l];u[l]=or[s].shallow.indexOf(l)>=0?c:ur(c,e)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}throw new Error("can't serialize object of type "+typeof t)}function lr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof ir)return t;if(Array.isArray(t))return t.map(lr);if("object"==typeof t){var e=t.$name||"Object",n=or[e].klass;if(!n)throw new Error("can't deserialize unregistered class "+e);if(n.deserialize)return n.deserialize(t);for(var r=Object.create(n.prototype),i=0,o=Object.keys(t);i<o.length;i+=1){var a=o[i];if("$name"!==a){var s=t[a];r[a]=or[e].shallow.indexOf(a)>=0?s:lr(s)}}return r}throw new Error("can't deserialize object of type "+typeof t)}var cr=function(){this.first=!0};cr.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var hr={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function pr(t){for(var e=0,n=t;e<n.length;e+=1)if(dr(n[e].charCodeAt(0)))return!0;return!1}function fr(t){return!(hr.Arabic(t)||hr["Arabic Supplement"](t)||hr["Arabic Extended-A"](t)||hr["Arabic Presentation Forms-A"](t)||hr["Arabic Presentation Forms-B"](t))}function dr(t){return!(746!==t&&747!==t&&(t<4352||!(hr["Bopomofo Extended"](t)||hr.Bopomofo(t)||hr["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||hr["CJK Compatibility Ideographs"](t)||hr["CJK Compatibility"](t)||hr["CJK Radicals Supplement"](t)||hr["CJK Strokes"](t)||!(!hr["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||hr["CJK Unified Ideographs Extension A"](t)||hr["CJK Unified Ideographs"](t)||hr["Enclosed CJK Letters and Months"](t)||hr["Hangul Compatibility Jamo"](t)||hr["Hangul Jamo Extended-A"](t)||hr["Hangul Jamo Extended-B"](t)||hr["Hangul Jamo"](t)||hr["Hangul Syllables"](t)||hr.Hiragana(t)||hr["Ideographic Description Characters"](t)||hr.Kanbun(t)||hr["Kangxi Radicals"](t)||hr["Katakana Phonetic Extensions"](t)||hr.Katakana(t)&&12540!==t||!(!hr["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!hr["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||hr["Unified Canadian Aboriginal Syllabics"](t)||hr["Unified Canadian Aboriginal Syllabics Extended"](t)||hr["Vertical Forms"](t)||hr["Yijing Hexagram Symbols"](t)||hr["Yi Syllables"](t)||hr["Yi Radicals"](t))))}function mr(t){return!(dr(t)||function(t){return!!(hr["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||hr["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||hr["Letterlike Symbols"](t)||hr["Number Forms"](t)||hr["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||hr["Control Pictures"](t)&&9251!==t||hr["Optical Character Recognition"](t)||hr["Enclosed Alphanumerics"](t)||hr["Geometric Shapes"](t)||hr["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||hr["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||hr["CJK Symbols and Punctuation"](t)||hr.Katakana(t)||hr["Private Use Area"](t)||hr["CJK Compatibility Forms"](t)||hr["Small Form Variants"](t)||hr["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function gr(t,e){return!(!e&&(t>=1424&&t<=2303||hr["Arabic Presentation Forms-A"](t)||hr["Arabic Presentation Forms-B"](t))||t>=2304&&t<=3583||t>=3840&&t<=4255||hr.Khmer(t))}var yr,vr=!1,br=null,_r=!1,wr=new mt,xr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return _r||null!=xr.applyArabicShaping}},Cr=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new cr,this.transition={})};Cr.prototype.isSupportedScript=function(t){return function(t,e){for(var n=0,r=t;n<r.length;n+=1)if(!gr(r[n].charCodeAt(0),e))return!1;return!0}(t,xr.isLoaded())},Cr.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Cr.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}};var Er=function(t,e){this.property=t,this.value=e,this.expression=_n(void 0===e?t.specification.default:e,t.specification)};Er.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Er.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)};var Sr=function(t){this.property=t,this.value=new Er(t,void 0)};Sr.prototype.transitioned=function(t,e){return new Ar(this.property,this.value,e,h({},t.transition,this.transition),t.now)},Sr.prototype.untransitioned=function(){return new Ar(this.property,this.value,null,{},0)};var Tr=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};Tr.prototype.getValue=function(t){return _(this._values[t].value.value)},Tr.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Sr(this._values[t].property)),this._values[t].value=new Er(this._values[t].property,null===e?void 0:_(e))},Tr.prototype.getTransition=function(t){return _(this._values[t].transition)},Tr.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Sr(this._values[t].property)),this._values[t].transition=_(e)||void 0},Tr.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i);var o=this.getTransition(r);void 0!==o&&(t[r+"-transition"]=o)}return t},Tr.prototype.transitioned=function(t,e){for(var n=new Pr(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n},Tr.prototype.untransitioned=function(){for(var t=new Pr(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e];t._values[r]=this._values[r].untransitioned()}return t};var Ar=function(t,e,n,r,i){this.property=t,this.value=e,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};Ar.prototype.possiblyEvaluate=function(t){var e=t.now||0,n=this.value.possiblyEvaluate(t),r=this.prior;if(r){if(e>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(e<this.begin)return r.possiblyEvaluate(t);var i=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(t),n,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(i))}return n};var Pr=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};Pr.prototype.possiblyEvaluate=function(t){for(var e=new Dr(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];e._values[i]=this._values[i].possiblyEvaluate(t)}return e},Pr.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var Ir=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Ir.prototype.getValue=function(t){return _(this._values[t].value)},Ir.prototype.setValue=function(t,e){this._values[t]=new Er(this._values[t].property,null===e?void 0:_(e))},Ir.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i)}return t},Ir.prototype.possiblyEvaluate=function(t){for(var e=new Dr(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];e._values[i]=this._values[i].possiblyEvaluate(t)}return e};var Or=function(t,e,n){this.property=t,this.value=e,this.parameters=n};Or.prototype.isConstant=function(){return"constant"===this.value.kind},Or.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},Or.prototype.evaluate=function(t,e){return this.property.evaluate(this.value,this.parameters,t,e)};var Dr=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Dr.prototype.get=function(t){return this._values[t]};var kr=function(t){this.specification=t};kr.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},kr.prototype.interpolate=function(t,e,n){var r=ce[this.specification.type];return r?r(t,e,n):t};var Mr=function(t){this.specification=t};Mr.prototype.possiblyEvaluate=function(t,e){return new Or(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e)}:t.expression,e)},Mr.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Or(this,{kind:"constant",value:void 0},t.parameters);var r=ce[this.specification.type];return r?new Or(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t},Mr.prototype.evaluate=function(t,e,n,r){return"constant"===t.kind?t.value:t.evaluate(e,n,r)};var Rr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e){if(void 0===t.value)return new Or(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var n=t.expression.evaluate(e),r=this._calculate(n,n,n,e);return new Or(this,{kind:"constant",value:r},e)}if("camera"===t.expression.kind){var i=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Or(this,{kind:"constant",value:i},e)}return new Or(this,t.expression,e)},e.prototype.evaluate=function(t,e,n,r){if("source"===t.kind){var i=t.evaluate(e,n,r);return this._calculate(i,i,i,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,r),t.evaluate({zoom:Math.floor(e.zoom)},n,r),t.evaluate({zoom:Math.floor(e.zoom)+1},n,r),e):t.value},e.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},e.prototype.interpolate=function(t){return t},e}(Mr),Nr=function(t){this.specification=t};Nr.prototype.possiblyEvaluate=function(t,e){if(void 0!==t.value){if("constant"===t.expression.kind){var n=t.expression.evaluate(e);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate(new Cr(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Cr(Math.floor(e.zoom),e)),t.expression.evaluate(new Cr(Math.floor(e.zoom+1),e)),e)}},Nr.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},Nr.prototype.interpolate=function(t){return t};var Lr=function(t){this.specification=t};Lr.prototype.possiblyEvaluate=function(t,e){return!!t.expression.evaluate(e)},Lr.prototype.interpolate=function(){return!1};var Fr=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var n=t[e],r=this.defaultPropertyValues[e]=new Er(n,void 0),i=this.defaultTransitionablePropertyValues[e]=new Sr(n);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}};ar("DataDrivenProperty",Mr),ar("DataConstantProperty",kr),ar("CrossFadedDataDrivenProperty",Rr),ar("CrossFadedProperty",Nr),ar("ColorRampProperty",Lr);var Br=function(t){function e(e,n){if(t.call(this),this.id=e.id,this.type=e.type,this.visibility="visible",this._featureFilter=function(){return!0},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),n.layout&&(this._unevaluatedLayout=new Ir(n.layout)),n.paint)){for(var r in this._transitionablePaint=new Tr(n.paint),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){void 0===n&&(n={}),null!=e&&this._validate($n,"layers."+this.id+".layout."+t,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility="none"===e?e:"visible")},e.prototype.getPaintProperty=function(t){return y(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){if(void 0===n&&(n={}),null!=e&&this._validate(Jn,"layers."+this.id+".paint."+t,t,e,n))return!1;if(y(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var r=this._transitionablePaint._values[t],i="cross-faded-data-driven"===r.property.specification["property-type"]&&!r.value.value&&e,o=this._transitionablePaint._values[t].value.isDataDriven();this._transitionablePaint.setValue(t,e);var a=this._transitionablePaint._values[t].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(t),a||o||i},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(t.layout=t.layout||{},t.layout.visibility="none"),b(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,n,r,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&tr(this,t.call(Zn,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:gt,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof Or&&tn(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(mt),jr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},zr=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Vr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Ur(t,e){void 0===e&&(e=1);var n=0,r=0;return{members:t.map(function(t){var i=jr[t.type].BYTES_PER_ELEMENT,o=n=qr(n,Math.max(e,i)),a=t.components||1;return r=Math.max(r,i),n+=i*a,{name:t.name,type:t.type,components:a,offset:o}}),size:qr(n,Math.max(r,e)),alignment:e}}function qr(t,e){return Math.ceil(t/e)*e}Vr.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Vr.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Vr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Vr.prototype.clear=function(){this.length=0},Vr.prototype.resize=function(t){this.reserve(t),this.length=t},Vr.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Vr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Gr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t},e}(Vr);Gr.prototype.bytesPerElement=4,ar("StructArrayLayout2i4",Gr);var Hr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t},e}(Vr);Hr.prototype.bytesPerElement=8,ar("StructArrayLayout4i8",Hr);var Wr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Vr);Wr.prototype.bytesPerElement=12,ar("StructArrayLayout2i4i12",Wr);var Kr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,r,i,o,a,s)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u){var l=6*t,c=12*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.uint8[c+8]=o,this.uint8[c+9]=a,this.uint8[c+10]=s,this.uint8[c+11]=u,t},e}(Vr);Kr.prototype.bytesPerElement=12,ar("StructArrayLayout4i4ub12",Kr);var Xr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,r,i,o,a,s)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u){var l=8*t;return this.uint16[l+0]=e,this.uint16[l+1]=n,this.uint16[l+2]=r,this.uint16[l+3]=i,this.uint16[l+4]=o,this.uint16[l+5]=a,this.uint16[l+6]=s,this.uint16[l+7]=u,t},e}(Vr);Xr.prototype.bytesPerElement=16,ar("StructArrayLayout8ui16",Xr);var Qr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,r,i,o,a,s)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u){var l=8*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.uint16[l+4]=o,this.uint16[l+5]=a,this.uint16[l+6]=s,this.uint16[l+7]=u,t},e}(Vr);Qr.prototype.bytesPerElement=16,ar("StructArrayLayout4i4ui16",Qr);var Zr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t},e}(Vr);Zr.prototype.bytesPerElement=12,ar("StructArrayLayout3f12",Zr);var Yr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(Vr);Yr.prototype.bytesPerElement=4,ar("StructArrayLayout1ul4",Yr);var Jr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,n,r,i,o,a,s,u,l,c)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,h){var p=12*t,f=6*t;return this.int16[p+0]=e,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.int16[p+4]=o,this.int16[p+5]=a,this.uint32[f+3]=s,this.uint16[p+8]=u,this.uint16[p+9]=l,this.int16[p+10]=c,this.int16[p+11]=h,t},e}(Vr);Jr.prototype.bytesPerElement=24,ar("StructArrayLayout6i1ul2ui2i24",Jr);var $r=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Vr);$r.prototype.bytesPerElement=12,ar("StructArrayLayout2i2i2i12",$r);var ti=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=4*t;return this.uint8[r+0]=e,this.uint8[r+1]=n,t},e}(Vr);ti.prototype.bytesPerElement=4,ar("StructArrayLayout2ub4",ti);var ei=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c,h,p,f){var d=this.length;return this.resize(d+1),this.emplace(d,t,e,n,r,i,o,a,s,u,l,c,h,p,f)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,h,p,f,d){var m=20*t,g=10*t,y=40*t;return this.int16[m+0]=e,this.int16[m+1]=n,this.uint16[m+2]=r,this.uint16[m+3]=i,this.uint32[g+2]=o,this.uint32[g+3]=a,this.uint32[g+4]=s,this.uint16[m+10]=u,this.uint16[m+11]=l,this.uint16[m+12]=c,this.float32[g+7]=h,this.float32[g+8]=p,this.uint8[y+36]=f,this.uint8[y+37]=d,t},e}(Vr);ei.prototype.bytesPerElement=40,ar("StructArrayLayout2i2ui3ul3ui2f2ub40",ei);var ni=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c,h,p,f){var d=this.length;return this.resize(d+1),this.emplace(d,t,e,n,r,i,o,a,s,u,l,c,h,p,f)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,h,p,f,d){var m=16*t,g=8*t;return this.int16[m+0]=e,this.int16[m+1]=n,this.int16[m+2]=r,this.int16[m+3]=i,this.uint16[m+4]=o,this.uint16[m+5]=a,this.uint16[m+6]=s,this.uint16[m+7]=u,this.uint16[m+8]=l,this.uint16[m+9]=c,this.uint16[m+10]=h,this.uint16[m+11]=p,this.uint16[m+12]=f,this.uint32[g+7]=d,t},e}(Vr);ni.prototype.bytesPerElement=32,ar("StructArrayLayout4i9ui1ul32",ni);var ri=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(Vr);ri.prototype.bytesPerElement=4,ar("StructArrayLayout1f4",ri);var ii=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t},e}(Vr);ii.prototype.bytesPerElement=6,ar("StructArrayLayout3i6",ii);var oi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=4*t;return this.uint32[2*t+0]=e,this.uint16[i+2]=n,this.uint16[i+3]=r,t},e}(Vr);oi.prototype.bytesPerElement=8,ar("StructArrayLayout1ul2ui8",oi);var ai=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t},e}(Vr);ai.prototype.bytesPerElement=6,ar("StructArrayLayout3ui6",ai);var si=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t},e}(Vr);si.prototype.bytesPerElement=4,ar("StructArrayLayout2ui4",si);var ui=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(Vr);ui.prototype.bytesPerElement=2,ar("StructArrayLayout1ui2",ui);var li=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t},e}(Vr);li.prototype.bytesPerElement=8,ar("StructArrayLayout2f8",li);var ci=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t},e}(Vr);ci.prototype.bytesPerElement=16,ar("StructArrayLayout4f16",ci);var hi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},n.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(zr);hi.prototype.size=24;var pi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new hi(this,t)},e}(Jr);ar("CollisionBoxArray",pi);var fi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t},Object.defineProperties(e.prototype,n),e}(zr);fi.prototype.size=40;var di=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new fi(this,t)},e}(ei);ar("PlacedSymbolArray",di);var mi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},horizontalPlacedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},crossTileID:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.horizontalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.horizontalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+2]=t},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.verticalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+3]=t},n.key.get=function(){return this._structArray.uint16[this._pos2+4]},n.key.set=function(t){this._structArray.uint16[this._pos2+4]=t},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+5]},n.textBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+5]=t},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+6]},n.textBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+6]=t},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+7]},n.iconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+7]=t},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.iconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.featureIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.numGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+10]},n.numGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+11]},n.numVerticalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+12]},n.numIconVertices.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+7]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+7]=t},Object.defineProperties(e.prototype,n),e}(zr);mi.prototype.size=32;var gi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new mi(this,t)},e}(ni);ar("SymbolInstanceArray",gi);var yi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={offsetX:{configurable:!0}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,n),e}(zr);yi.prototype.size=4;var vi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new yi(this,t)},e}(ri);ar("GlyphOffsetArray",vi);var bi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(t){this._structArray.int16[this._pos2+0]=t},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(t){this._structArray.int16[this._pos2+1]=t},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,n),e}(zr);bi.prototype.size=6;var _i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new bi(this,t)},e}(ii);ar("SymbolLineVertexArray",_i);var wi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,n),e}(zr);wi.prototype.size=8;var xi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new wi(this,t)},e}(oi);ar("FeatureIndexArray",xi);var Ci=Ur([{name:"a_pos",components:2,type:"Int16"}],4).members,Ei=function(t){void 0===t&&(t=[]),this.segments=t};function Si(t,e){return 256*(t=l(Math.floor(t),0,255))+l(Math.floor(e),0,255)}Ei.prototype.prepareSegment=function(t,e,n,r){var i=this.segments[this.segments.length-1];return t>Ei.MAX_VERTEX_ARRAY_LENGTH&&x("Max vertices per segment is "+Ei.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>Ei.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i},Ei.prototype.get=function(){return this.segments},Ei.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var r in n.vaos)n.vaos[r].destroy()}},Ei.simpleSegment=function(t,e,n,r){return new Ei([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])},Ei.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ar("SegmentVector",Ei);var Ti=function(){this.ids=[],this.positions=[],this.indexed=!1};function Ai(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}Ti.prototype.add=function(t,e,n,r){this.ids.push(t),this.positions.push(e,n,r)},Ti.prototype.getPositions=function(t){for(var e=0,n=this.ids.length-1;e<n;){var r=e+n>>1;this.ids[r]>=t?n=r:e=r+1}for(var i=[];this.ids[e]===t;)i.push({index:this.positions[3*e],start:this.positions[3*e+1],end:this.positions[3*e+2]}),e++;return i},Ti.serialize=function(t,e){var n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return function t(e,n,r,i){if(!(r>=i)){for(var o=e[r+i>>1],a=r-1,s=i+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;Ai(e,a,s),Ai(n,3*a,3*s),Ai(n,3*a+1,3*s+1),Ai(n,3*a+2,3*s+2)}t(e,n,r,s),t(e,n,s+1,i)}}(n,r,0,n.length-1),e.push(n.buffer,r.buffer),{ids:n,positions:r}},Ti.deserialize=function(t){var e=new Ti;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e},ar("FeaturePositionMap",Ti);var Pi=function(t,e){this.gl=t.gl,this.location=e},Ii=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(Pi),Oi=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(Pi),Di=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(Pi),ki=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(Pi),Mi=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(Pi),Ri=function(t){function e(e,n){t.call(this,e,n),this.current=Bt.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(Pi),Ni=new Float32Array(16),Li=function(t){function e(e,n){t.call(this,e,n),this.current=Ni}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(Pi);function Fi(t){return[Si(255*t.r,255*t.g),Si(255*t.b,255*t.a)]}var Bi=function(t,e,n){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=n,this.maxValue=-1/0};Bi.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},Bi.prototype.setConstantPatternPositions=function(){},Bi.prototype.populatePaintArray=function(){},Bi.prototype.updatePaintArray=function(){},Bi.prototype.upload=function(){},Bi.prototype.destroy=function(){},Bi.prototype.setUniforms=function(t,e,n,r){e.set(r.constantOr(this.value))},Bi.prototype.getBinding=function(t,e){return"color"===this.type?new Ri(t,e):new Oi(t,e)},Bi.serialize=function(t){var e=t.names,n=t.type;return{value:ur(t.value),names:e,type:n}},Bi.deserialize=function(t){var e=t.names,n=t.type;return new Bi(lr(t.value),e,n)};var ji=function(t,e,n){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=n,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};ji.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},ji.prototype.populatePaintArray=function(){},ji.prototype.updatePaintArray=function(){},ji.prototype.upload=function(){},ji.prototype.destroy=function(){},ji.prototype.setConstantPatternPositions=function(t,e){this.patternPositions.patternTo=t.tlbr,this.patternPositions.patternFrom=e.tlbr},ji.prototype.setUniforms=function(t,e,n,r,i){var o=this.patternPositions;"u_pattern_to"===i&&o.patternTo&&e.set(o.patternTo),"u_pattern_from"===i&&o.patternFrom&&e.set(o.patternFrom)},ji.prototype.getBinding=function(t,e){return new Mi(t,e)};var zi=function(t,e,n,r){this.expression=t,this.names=e,this.type=n,this.uniformNames=this.names.map(function(t){return"a_"+t}),this.maxValue=-1/0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}}),this.paintVertexArray=new r};zi.prototype.defines=function(){return[]},zi.prototype.setConstantPatternPositions=function(){},zi.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,r=n.length;n.reserve(t);var i=this.expression.evaluate(new Cr(0),e,{});if("color"===this.type)for(var o=Fi(i),a=r;a<t;a++)n.emplaceBack(o[0],o[1]);else{for(var s=r;s<t;s++)n.emplaceBack(i);this.maxValue=Math.max(this.maxValue,i)}},zi.prototype.updatePaintArray=function(t,e,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:0},n,r);if("color"===this.type)for(var a=Fi(o),s=t;s<e;s++)i.emplace(s,a[0],a[1]);else{for(var u=t;u<e;u++)i.emplace(u,o);this.maxValue=Math.max(this.maxValue,o)}},zi.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},zi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},zi.prototype.setUniforms=function(t,e){e.set(0)},zi.prototype.getBinding=function(t,e){return new Oi(t,e)};var Vi=function(t,e,n,r,i,o){this.expression=t,this.names=e,this.uniformNames=this.names.map(function(t){return"a_"+t+"_t"}),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=-1/0;var a=o;this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}}),this.paintVertexArray=new a};Vi.prototype.defines=function(){return[]},Vi.prototype.setConstantPatternPositions=function(){},Vi.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,r=n.length;n.reserve(t);var i=this.expression.evaluate(new Cr(this.zoom),e,{}),o=this.expression.evaluate(new Cr(this.zoom+1),e,{});if("color"===this.type)for(var a=Fi(i),s=Fi(o),u=r;u<t;u++)n.emplaceBack(a[0],a[1],s[0],s[1]);else{for(var l=r;l<t;l++)n.emplaceBack(i,o);this.maxValue=Math.max(this.maxValue,i,o)}},Vi.prototype.updatePaintArray=function(t,e,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:this.zoom},n,r),a=this.expression.evaluate({zoom:this.zoom+1},n,r);if("color"===this.type)for(var s=Fi(o),u=Fi(a),l=t;l<e;l++)i.emplace(l,s[0],s[1],u[0],u[1]);else{for(var c=t;c<e;c++)i.emplace(c,o,a);this.maxValue=Math.max(this.maxValue,o,a)}},Vi.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Vi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Vi.prototype.interpolationFactor=function(t){return this.expression.interpolationFactor(this.useIntegerZoom?Math.floor(t):t,this.zoom,this.zoom+1)},Vi.prototype.setUniforms=function(t,e,n){e.set(this.interpolationFactor(n.zoom))},Vi.prototype.getBinding=function(t,e){return new Oi(t,e)};var Ui=function(t,e,n,r,i,o,a){this.expression=t,this.names=e,this.type=n,this.uniformNames=this.names.map(function(t){return"a_"+t+"_t"}),this.useIntegerZoom=r,this.zoom=i,this.maxValue=-1/0,this.layerId=a,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o};Ui.prototype.defines=function(){return[]},Ui.prototype.setConstantPatternPositions=function(){},Ui.prototype.populatePaintArray=function(t,e,n){var r=this.zoomInPaintVertexArray,i=this.zoomOutPaintVertexArray,o=this.layerId,a=r.length;if(r.reserve(t),i.reserve(t),n&&e.patterns&&e.patterns[o]){var s=e.patterns[o],u=n[s.min],l=n[s.mid],c=n[s.max];if(!u||!l||!c)return;for(var h=a;h<t;h++)r.emplaceBack(l.tl[0],l.tl[1],l.br[0],l.br[1],u.tl[0],u.tl[1],u.br[0],u.br[1]),i.emplaceBack(l.tl[0],l.tl[1],l.br[0],l.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1])}},Ui.prototype.updatePaintArray=function(t,e,n,r,i){var o=this.zoomInPaintVertexArray,a=this.zoomOutPaintVertexArray,s=this.layerId;if(i&&n.patterns&&n.patterns[s]){var u=n.patterns[s],l=i[u.min],c=i[u.mid],h=i[u.max];if(!l||!c||!h)return;for(var p=t;p<e;p++)o.emplace(p,c.tl[0],c.tl[1],c.br[0],c.br[1],l.tl[0],l.tl[1],l.br[0],l.br[1]),a.emplace(p,c.tl[0],c.tl[1],c.br[0],c.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1])}},Ui.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ui.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},Ui.prototype.setUniforms=function(t,e){e.set(0)},Ui.prototype.getBinding=function(t,e){return new Oi(t,e)};var qi=function(){this.binders={},this.cacheKey="",this._buffers=[],this._featureMap=new Ti,this._bufferOffset=0};qi.createDynamic=function(t,e,n){var r=new qi,i=[];for(var o in t.paint._values)if(n(o)){var a=t.paint.get(o);if(a instanceof Or&&tn(a.property.specification)){var s=Hi(o,t.type),u=a.property.specification.type,l=a.property.useIntegerZoom;if("cross-faded"===a.property.specification["property-type"]||"cross-faded-data-driven"===a.property.specification["property-type"])if("constant"===a.value.kind)r.binders[o]=new ji(a.value.value,s,u),i.push("/u_"+o);else{var c=Wi(o,u,"source");r.binders[o]=new Ui(a.value,s,u,l,e,c,t.id),i.push("/a_"+o)}else if("constant"===a.value.kind)r.binders[o]=new Bi(a.value.value,s,u),i.push("/u_"+o);else if("source"===a.value.kind){var h=Wi(o,u,"source");r.binders[o]=new zi(a.value,s,u,h),i.push("/a_"+o)}else{var p=Wi(o,u,"composite");r.binders[o]=new Vi(a.value,s,u,l,e,p),i.push("/z_"+o)}}}return r.cacheKey=i.sort().join(""),r},qi.prototype.populatePaintArrays=function(t,e,n,r){for(var i in this.binders)this.binders[i].populatePaintArray(t,e,r);void 0!==e.id&&this._featureMap.add(+e.id,n,this._bufferOffset,t),this._bufferOffset=t},qi.prototype.setConstantPatternPositions=function(t,e){for(var n in this.binders)this.binders[n].setConstantPatternPositions(t,e)},qi.prototype.updatePaintArrays=function(t,e,n,r){var i=!1;for(var o in t)for(var a=0,s=this._featureMap.getPositions(+o);a<s.length;a+=1){var u=s[a],l=e.feature(u.index);for(var c in this.binders){var h=this.binders[c];if(!(h instanceof Bi||h instanceof ji)&&!0===h.expression.isStateDependent){var p=n.paint.get(c);h.expression=p.value,h.updatePaintArray(u.start,u.end,l,t[o],r),i=!0}}}return i},qi.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},qi.prototype.getPaintVertexBuffers=function(){return this._buffers},qi.prototype.getUniforms=function(t,e){var n={};for(var r in this.binders)for(var i=this.binders[r],o=0,a=i.uniformNames;o<a.length;o+=1){var s=a[o];n[s]=i.getBinding(t,e[s])}return n},qi.prototype.setUniforms=function(t,e,n,r){for(var i in this.binders)for(var o=this.binders[i],a=0,s=o.uniformNames;a<s.length;a+=1){var u=s[a];o.setUniforms(t,e[u],r,n.get(i),u)}},qi.prototype.updatePatternPaintBuffers=function(t){var e=[];for(var n in this.binders){var r=this.binders[n];if(r instanceof Ui){var i=2===t.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;i&&e.push(i)}else(r instanceof zi||r instanceof Vi)&&r.paintVertexBuffer&&e.push(r.paintVertexBuffer)}this._buffers=e},qi.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var n=[];for(var r in this.binders){var i=this.binders[r];(i instanceof zi||i instanceof Vi)&&i.paintVertexBuffer&&n.push(i.paintVertexBuffer)}this._buffers=n},qi.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var Gi=function(t,e,n,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var i=0,o=e;i<o.length;i+=1){var a=o[i];this.programConfigurations[a.id]=qi.createDynamic(a,n,r),this.programConfigurations[a.id].layoutAttributes=t}this.needsUpload=!1};function Hi(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function Wi(t,e,n){var r={color:{source:li,composite:ci},number:{source:ri,composite:li}},i=function(t){return{"line-pattern":{source:Xr,composite:Xr},"fill-pattern":{source:Xr,composite:Xr},"fill-extrusion-pattern":{source:Xr,composite:Xr}}[t]}(t);return i&&i[n]||r[e][n]}Gi.prototype.populatePaintArrays=function(t,e,n,r){for(var i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(t,e,n,r);this.needsUpload=!0},Gi.prototype.updatePaintArrays=function(t,e,n,r){for(var i=0,o=n;i<o.length;i+=1){var a=o[i];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,e,a,r)||this.needsUpload}},Gi.prototype.get=function(t){return this.programConfigurations[t]},Gi.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Gi.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},ar("ConstantBinder",Bi),ar("CrossFadedConstantBinder",ji),ar("SourceExpressionBinder",zi),ar("CrossFadedCompositeBinder",Ui),ar("CompositeExpressionBinder",Vi),ar("ProgramConfiguration",qi,{omit:["_buffers"]}),ar("ProgramConfigurationSet",Gi);var Ki=8192,Xi={min:-1*Math.pow(2,15),max:Math.pow(2,15)-1};function Qi(t){for(var e=Ki/t.extent,n=t.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],o=0;o<i.length;o++){var a=i[o];a.x=Math.round(a.x*e),a.y=Math.round(a.y*e),(a.x<Xi.min||a.x>Xi.max||a.y<Xi.min||a.y>Xi.max)&&x("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function Zi(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}var Yi=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Gr,this.indexArray=new ai,this.segments=new Ei,this.programConfigurations=new Gi(Ci,t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Ji(t,e){for(var n=0;n<t.length;n++)if(so(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(so(t,e[r]))return!0;return!!no(t,e)}function $i(t,e,n){return!!so(t,e)||!!io(e,t,n)}function to(t,e){if(1===t.length)return ao(e,t[0]);for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)if(so(t,r[i]))return!0;for(var o=0;o<t.length;o++)if(ao(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(no(t,e[a]))return!0;return!1}function eo(t,e,n){if(t.length>1){if(no(t,e))return!0;for(var r=0;r<e.length;r++)if(io(e[r],t,n))return!0}for(var i=0;i<t.length;i++)if(io(t[i],e,n))return!0;return!1}function no(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],o=0;o<e.length-1;o++)if(ro(r,i,e[o],e[o+1]))return!0;return!1}function ro(t,e,n,r){return C(t,n,r)!==C(e,n,r)&&C(t,e,n)!==C(t,e,r)}function io(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++)if(oo(t,e[i-1],e[i])<r)return!0;return!1}function oo(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))}function ao(t,e){for(var n,r,i,o=!1,a=0;a<t.length;a++)for(var s=0,u=(n=t[a]).length-1;s<n.length;u=s++)(r=n[s]).y>e.y!=(i=n[u]).y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function so(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function uo(t,e,n){var r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;var o=C(t,e,n[0]);return o!==C(t,e,n[1])||o!==C(t,e,n[2])||o!==C(t,e,n[3])}function lo(t,e,n){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).binders[t].maxValue}function co(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ho(t,e,n,r,o){if(!e[0]&&!e[1])return t;var a=i.convert(e)._mult(o);"viewport"===n&&a._rotate(-r);for(var s=[],u=0;u<t.length;u++)s.push(t[u].sub(a));return s}Yi.prototype.populate=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Cr(this.zoom),o)){var u=Qi(o);this.addFeature(o,u,a),e.featureIndex.insert(o,u,a,s,this.index)}}},Yi.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Yi.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Yi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Yi.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ci),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Yi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Yi.prototype.addFeature=function(t,e,n){for(var r=0,i=e;r<i.length;r+=1)for(var o=0,a=i[r];o<a.length;o+=1){var s=a[o],u=s.x,l=s.y;if(!(u<0||u>=Ki||l<0||l>=Ki)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=c.vertexLength;Zi(this.layoutVertexArray,u,l,-1,-1),Zi(this.layoutVertexArray,u,l,1,-1),Zi(this.layoutVertexArray,u,l,1,1),Zi(this.layoutVertexArray,u,l,-1,1),this.indexArray.emplaceBack(h,h+1,h+2),this.indexArray.emplaceBack(h,h+3,h+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{})},ar("CircleBucket",Yi,{omit:["layers"]});var po={paint:new Fr({"circle-radius":new Mr(gt.paint_circle["circle-radius"]),"circle-color":new Mr(gt.paint_circle["circle-color"]),"circle-blur":new Mr(gt.paint_circle["circle-blur"]),"circle-opacity":new Mr(gt.paint_circle["circle-opacity"]),"circle-translate":new kr(gt.paint_circle["circle-translate"]),"circle-translate-anchor":new kr(gt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new kr(gt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new kr(gt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Mr(gt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Mr(gt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Mr(gt.paint_circle["circle-stroke-opacity"])})},fo="undefined"!=typeof Float32Array?Float32Array:Array;function mo(){var t=new fo(9);return fo!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function go(){var t=new fo(3);return fo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function yo(t,e,n){var r=new fo(3);return r[0]=t,r[1]=e,r[2]=n,r}function vo(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function bo(){var t=new fo(4);return fo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}Math,go(),function(){var t;t=new fo(4),fo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}(),go(),yo(1,0,0),yo(0,1,0),bo(),bo(),mo(),function(){var t;t=new fo(2),fo!=Float32Array&&(t[0]=0,t[1]=0)}();var _o=function(t){function e(e){t.call(this,e,po)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new Yi(t)},e.prototype.queryRadius=function(t){var e=t;return lo("circle-radius",this,e)+lo("circle-stroke-width",this,e)+co(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a,s){for(var u=ho(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),l=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),c="map"===this.paint.get("circle-pitch-alignment"),h=c?u:function(t,e){return u.map(function(t){return wo(t,e)})}(0,s),p=c?l*a:l,f=0,d=r;f<d.length;f+=1)for(var m=0,g=d[f];m<g.length;m+=1){var y=g[m],v=c?y:wo(y,s),b=p,_=vo([],[y.x,y.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?b*=_[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(b*=o.cameraToCenterDistance/_[3]),$i(h,v,b))return!0}return!1},e}(Br);function wo(t,e){var n=vo([],[t.x,t.y,0,1],e);return new i(n[0]/n[3],n[1]/n[3])}var xo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Yi);function Co(t,e,n,r){var i=e.width,o=e.height;if(r){if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t}function Eo(t,e,n){var r=e.width,i=e.height;if(r!==t.width||i!==t.height){var o=Co({},{width:r,height:i},n);So(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=o.data}}function So(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,u=0;u<i.height;u++)for(var l=((n.y+u)*t.width+n.x)*o,c=((r.y+u)*e.width+r.x)*o,h=0;h<i.width*o;h++)s[c+h]=a[l+h];return e}ar("HeatmapBucket",xo,{omit:["layers"]});var To=function(t,e){Co(this,t,1,e)};To.prototype.resize=function(t){Eo(this,t,1)},To.prototype.clone=function(){return new To({width:this.width,height:this.height},new Uint8Array(this.data))},To.copy=function(t,e,n,r,i){So(t,e,n,r,i,1)};var Ao=function(t,e){Co(this,t,4,e)};Ao.prototype.resize=function(t){Eo(this,t,4)},Ao.prototype.clone=function(){return new Ao({width:this.width,height:this.height},new Uint8Array(this.data))},Ao.copy=function(t,e,n,r,i){So(t,e,n,r,i,4)},ar("AlphaImage",To),ar("RGBAImage",Ao);var Po={paint:new Fr({"heatmap-radius":new Mr(gt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Mr(gt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new kr(gt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Lr(gt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new kr(gt.paint_heatmap["heatmap-opacity"])})};function Io(t,e){for(var n=new Uint8Array(1024),r={},i=0,o=0;i<256;i++,o+=4){r[e]=i/255;var a=t.evaluate(r);n[o+0]=Math.floor(255*a.r/a.a),n[o+1]=Math.floor(255*a.g/a.a),n[o+2]=Math.floor(255*a.b/a.a),n[o+3]=Math.floor(255*a.a)}return new Ao({width:256,height:1},n)}var Oo=function(t){function e(e){t.call(this,e,Po),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new xo(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=Io(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(Br),Do={paint:new Fr({"hillshade-illumination-direction":new kr(gt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new kr(gt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new kr(gt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new kr(gt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new kr(gt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new kr(gt.paint_hillshade["hillshade-accent-color"])})},ko=function(t){function e(e){t.call(this,e,Do)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(Br),Mo=Ur([{name:"a_pos",components:2,type:"Int16"}],4).members,Ro=Lo,No=Lo;function Lo(t,e,n){n=n||2;var r,i,o,a,s,u,l,c=e&&e.length,h=c?e[0]*n:t.length,p=Fo(t,0,h,n,!0),f=[];if(!p||p.next===p.prev)return f;if(c&&(p=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=Fo(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(Ko(a));for(s.sort(Go),i=0;i<s.length;i++)Ho(s[i],n),n=Bo(n,n.next);return n}(t,e,p,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<h;d+=n)(s=t[d])<r&&(r=s),(u=t[d+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return jo(p,f,n,r,i,l),f}function Fo(t,e,n,r,i){var o,a;if(i===ia(t,e,n,r)>0)for(o=e;o<n;o+=r)a=ea(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=ea(o,t[o],t[o+1],a);return a&&Yo(a,a.next)&&(na(a),a=a.next),a}function Bo(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Yo(r,r.next)&&0!==Zo(r.prev,r,r.next))r=r.next;else{if(na(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function jo(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Wo(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?Vo(t,r,i,o):zo(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),na(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?jo(t=Uo(t,e,n),e,n,r,i,o,2):2===a&&qo(t,e,n,r,i,o):jo(Bo(t),e,n,r,i,o,1);break}}}function zo(t){var e=t.prev,n=t,r=t.next;if(Zo(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Xo(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Zo(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Vo(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Zo(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,l=Wo(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,e,n,r),c=Wo(s,u,e,n,r),h=t.prevZ,p=t.nextZ;h&&h.z>=l&&p&&p.z<=c;){if(h!==t.prev&&h!==t.next&&Xo(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Zo(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,p!==t.prev&&p!==t.next&&Xo(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Zo(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;h&&h.z>=l;){if(h!==t.prev&&h!==t.next&&Xo(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Zo(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=c;){if(p!==t.prev&&p!==t.next&&Xo(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Zo(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Uo(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Yo(i,o)&&Jo(i,r,r.next,o)&&$o(i,o)&&$o(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),na(r),na(r.next),r=t=o),r=r.next}while(r!==t);return r}function qo(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Qo(a,s)){var u=ta(a,s);return a=Bo(a,a.next),u=Bo(u,u.next),jo(a,e,n,r,i,o),void jo(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function Go(t,e){return t.x-e.x}function Ho(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,h=n.y,p=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&Xo(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&$o(r,t)&&(n=r,p=u),r=r.next;return n}(t,e)){var n=ta(e,t);Bo(n,n.next)}}function Wo(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ko(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Xo(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Qo(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Jo(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&$o(t,e)&&$o(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function Zo(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Yo(t,e){return t.x===e.x&&t.y===e.y}function Jo(t,e,n,r){return!!(Yo(t,e)&&Yo(n,r)||Yo(t,r)&&Yo(n,e))||Zo(t,e,n)>0!=Zo(t,e,r)>0&&Zo(n,r,t)>0!=Zo(n,r,e)>0}function $o(t,e){return Zo(t.prev,t,t.next)<0?Zo(t,e,t.next)>=0&&Zo(t,t.prev,e)>=0:Zo(t,e,t.prev)<0||Zo(t,t.next,e)<0}function ta(t,e){var n=new ra(t.i,t.x,t.y),r=new ra(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function ea(t,e,n,r){var i=new ra(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function na(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ra(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ia(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function oa(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*l/a+c)),Math.min(i,Math.floor(n+(a-s)*l/a+c)),o)}var h=e[n],p=r,f=i;for(aa(e,r,n),o(e[i],h)>0&&aa(e,r,i);p<f;){for(aa(e,p,f),p++,f--;o(e[p],h)<0;)p++;for(;o(e[f],h)>0;)f--}0===o(e[r],h)?aa(e,r,f):aa(e,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}(t,e,n||0,r||t.length-1,i||sa)}function aa(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function sa(t,e){return t<e?-1:t>e?1:0}function ua(t,e){var n=t.length;if(n<=1)return[t];for(var r,i,o=[],a=0;a<n;a++){var s=E(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&o.push(r),r=[t[a]]):r.push(t[a]))}if(r&&o.push(r),e>1)for(var u=0;u<o.length;u++)o[u].length<=e||(oa(o[u],e,1,o[u].length-1,la),o[u]=o[u].slice(0,e));return o}function la(t,e){return e.area-t.area}function ca(t,e,n){for(var r=n.patternDependencies,i=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(i=!0);var u=s.constantOr(null);u&&(i=!0,r[u.to]=!0,r[u.from]=!0)}return i}function ha(t,e,n,r,i){for(var o=i.patternDependencies,a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.paint.get(t+"-pattern").value;if("constant"!==l.kind){var c=l.evaluate({zoom:r-1},n,{}),h=l.evaluate({zoom:r},n,{}),p=l.evaluate({zoom:r+1},n,{});o[c]=!0,o[h]=!0,o[p]=!0,n.patterns[u.id]={min:c,mid:h,max:p}}}return n}Lo.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(ia(t,0,i?e[0]*n:t.length,n));if(i)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(ia(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var u=0;for(a=0;a<r.length;a+=3){var l=r[a]*n,c=r[a+1]*n,h=r[a+2]*n;u+=Math.abs((t[l]-t[h])*(t[c+1]-t[l+1])-(t[l]-t[c])*(t[h+1]-t[l+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},Lo.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&n.holes.push(r+=t[i-1].length)}return n},Ro.default=No;var pa=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Gr,this.indexArray=new ai,this.indexArray2=new si,this.programConfigurations=new Gi(Mo,t.layers,t.zoom),this.segments=new Ei,this.segments2=new Ei,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};pa.prototype.populate=function(t,e){this.features=[],this.hasPattern=ca("fill",this.layers,e);for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Cr(this.zoom),o)){var u=Qi(o),l={sourceLayerIndex:s,index:a,geometry:u,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(l.id=o.id),this.hasPattern?this.features.push(ha("fill",this.layers,l,this.zoom,e)):this.addFeature(l,u,a,{}),e.featureIndex.insert(o,u,a,s,this.index)}}},pa.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},pa.prototype.addFeatures=function(t,e){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n];this.addFeature(i,i.geometry,i.index,e)}},pa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},pa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},pa.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Mo),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},pa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},pa.prototype.addFeature=function(t,e,n,r){for(var i=0,o=ua(e,500);i<o.length;i+=1){for(var a=o[i],s=0,u=0,l=a;u<l.length;u+=1)s+=l[u].length;for(var c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),h=c.vertexLength,p=[],f=[],d=0,m=a;d<m.length;d+=1){var g=m[d];if(0!==g.length){g!==a[0]&&f.push(p.length/2);var y=this.segments2.prepareSegment(g.length,this.layoutVertexArray,this.indexArray2),v=y.vertexLength;this.layoutVertexArray.emplaceBack(g[0].x,g[0].y),this.indexArray2.emplaceBack(v+g.length-1,v),p.push(g[0].x),p.push(g[0].y);for(var b=1;b<g.length;b++)this.layoutVertexArray.emplaceBack(g[b].x,g[b].y),this.indexArray2.emplaceBack(v+b-1,v+b),p.push(g[b].x),p.push(g[b].y);y.vertexLength+=g.length,y.primitiveLength+=g.length}}for(var _=Ro(p,f),w=0;w<_.length;w+=3)this.indexArray.emplaceBack(h+_[w],h+_[w+1],h+_[w+2]);c.vertexLength+=s,c.primitiveLength+=_.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r)},ar("FillBucket",pa,{omit:["layers","features"]});var fa={paint:new Fr({"fill-antialias":new kr(gt.paint_fill["fill-antialias"]),"fill-opacity":new Mr(gt.paint_fill["fill-opacity"]),"fill-color":new Mr(gt.paint_fill["fill-color"]),"fill-outline-color":new Mr(gt.paint_fill["fill-outline-color"]),"fill-translate":new kr(gt.paint_fill["fill-translate"]),"fill-translate-anchor":new kr(gt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Rr(gt.paint_fill["fill-pattern"])})},da=function(t){function e(e){t.call(this,e,fa)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e);var n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new pa(t)},e.prototype.queryRadius=function(){return co(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){return to(ho(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},e}(Br),ma=Ur([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,ga=Math.pow(2,13);function ya(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,2*Math.floor(r*ga)+a,i*ga*2,o*ga*2,Math.round(s))}var va=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Wr,this.indexArray=new ai,this.programConfigurations=new Gi(ma,t.layers,t.zoom),this.segments=new Ei,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function ba(t,e){return t.x===e.x&&(t.x<0||t.x>Ki)||t.y===e.y&&(t.y<0||t.y>Ki)}function _a(t){return t.every(function(t){return t.x<0})||t.every(function(t){return t.x>Ki})||t.every(function(t){return t.y<0})||t.every(function(t){return t.y>Ki})}va.prototype.populate=function(t,e){this.features=[],this.hasPattern=ca("fill-extrusion",this.layers,e);for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Cr(this.zoom),o)){var u=Qi(o),l={sourceLayerIndex:s,index:a,geometry:u,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(l.id=o.id),this.hasPattern?this.features.push(ha("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,u,a,{}),e.featureIndex.insert(o,u,a,s,this.index,!0)}}},va.prototype.addFeatures=function(t,e){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n];this.addFeature(i,i.geometry,i.index,e)}},va.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},va.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},va.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},va.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ma),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},va.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},va.prototype.addFeature=function(t,e,n,r){for(var i=0,o=ua(e,500);i<o.length;i+=1){for(var a=o[i],s=0,u=0,l=a;u<l.length;u+=1)s+=l[u].length;for(var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=0,p=a;h<p.length;h+=1){var f=p[h];if(0!==f.length&&!_a(f))for(var d=0,m=0;m<f.length;m++){var g=f[m];if(m>=1){var y=f[m-1];if(!ba(g,y)){c.vertexLength+4>Ei.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=g.sub(y)._perp()._unit(),b=y.dist(g);d+b>32768&&(d=0),ya(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,0,d),ya(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,1,d),ya(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,0,d+=b),ya(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,1,d);var _=c.vertexLength;this.indexArray.emplaceBack(_,_+2,_+1),this.indexArray.emplaceBack(_+1,_+2,_+3),c.vertexLength+=4,c.primitiveLength+=2}}}}c.vertexLength+s>Ei.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray));for(var w=[],x=[],C=c.vertexLength,E=0,S=a;E<S.length;E+=1){var T=S[E];if(0!==T.length){T!==a[0]&&x.push(w.length/2);for(var A=0;A<T.length;A++){var P=T[A];ya(this.layoutVertexArray,P.x,P.y,0,0,1,1,0),w.push(P.x),w.push(P.y)}}}for(var I=Ro(w,x),O=0;O<I.length;O+=3)this.indexArray.emplaceBack(C+I[O],C+I[O+2],C+I[O+1]);c.primitiveLength+=I.length/3,c.vertexLength+=s}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r)},ar("FillExtrusionBucket",va,{omit:["layers","features"]});var wa={paint:new Fr({"fill-extrusion-opacity":new kr(gt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Mr(gt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new kr(gt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new kr(gt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Rr(gt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Mr(gt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Mr(gt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new kr(gt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},xa=function(t){function e(e){t.call(this,e,wa)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new va(t)},e.prototype.queryRadius=function(){return co(this.paint.get("fill-extrusion-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,o,a,s,u){var l=ho(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),c=this.paint.get("fill-extrusion-height").evaluate(e,n),h=this.paint.get("fill-extrusion-base").evaluate(e,n),p=function(t,e,n,r){for(var o=[],a=0,s=t;a<s.length;a+=1){var u=s[a],l=[u.x,u.y,0,1];vo(l,l,e),o.push(new i(l[0]/l[3],l[1]/l[3]))}return o}(l,u),f=function(t,e,n,r){for(var o=[],a=[],s=r[8]*e,u=r[9]*e,l=r[10]*e,c=r[11]*e,h=r[8]*n,p=r[9]*n,f=r[10]*n,d=r[11]*n,m=0,g=t;m<g.length;m+=1){for(var y=[],v=[],b=0,_=g[m];b<_.length;b+=1){var w=_[b],x=w.x,C=w.y,E=r[0]*x+r[4]*C+r[12],S=r[1]*x+r[5]*C+r[13],T=r[2]*x+r[6]*C+r[14],A=r[3]*x+r[7]*C+r[15],P=T+l,I=A+c,O=E+h,D=S+p,k=T+f,M=A+d,R=new i((E+s)/I,(S+u)/I);R.z=P/I,y.push(R);var N=new i(O/M,D/M);N.z=k/M,v.push(N)}o.push(y),a.push(v)}return[o,a]}(r,h,c,u);return function(t,e,n){var r=1/0;to(n,e)&&(r=Ea(n,e[0]));for(var i=0;i<e.length;i++)for(var o=e[i],a=t[i],s=0;s<o.length-1;s++){var u=o[s],l=[u,o[s+1],a[s+1],a[s],u];Ji(n,l)&&(r=Math.min(r,Ea(n,l)))}return r!==1/0&&r}(f[0],f[1],p)},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e}(Br);function Ca(t,e){return t.x*e.x+t.y*e.y}function Ea(t,e){if(1===t.length){var n=e[0],r=e[1],i=e[3],o=t[0],a=r.sub(n),s=i.sub(n),u=o.sub(n),l=Ca(a,a),c=Ca(a,s),h=Ca(s,s),p=Ca(u,a),f=Ca(u,s),d=l*h-c*c,m=(h*p-c*f)/d,g=(l*f-c*p)/d;return n.z*(1-m-g)+r.z*m+i.z*g}for(var y=1/0,v=0,b=e;v<b.length;v+=1)y=Math.min(y,b[v].z);return y}var Sa=Ur([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Ta=Aa;function Aa(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(Pa,this,e)}function Pa(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function Ia(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)r+=((n=t[a]).x-(e=t[i]).x)*(e.y+n.y);return r}Aa.types=["Unknown","Point","LineString","Polygon"],Aa.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,o=0,a=0,s=0,u=[];t.pos<n;){if(o<=0){var l=t.readVarint();r=7&l,o=l>>3}if(o--,1===r||2===r)a+=t.readSVarint(),s+=t.readSVarint(),1===r&&(e&&u.push(e),e=[]),e.push(new i(a,s));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&u.push(e),u},Aa.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},Aa.prototype.toGeoJSON=function(t,e,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,u=this.loadGeometry(),l=Aa.types[this.type];function c(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<u.length;r++)h[r]=u[r][0];c(u=h);break;case 2:for(r=0;r<u.length;r++)c(u[r]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=Ia(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(u),r=0;r<u.length;r++)for(i=0;i<u[r].length;i++)c(u[r][i])}1===u.length?u=u[0]:l="Multi"+l;var p={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(p.id=this.id),p};var Oa=Da;function Da(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(ka,this,e),this.length=this._features.length}function ka(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}function Ma(t,e,n){if(3===t){var r=new Oa(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}Da.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Ta(this._pbf,e,this.extent,this._keys,this._values)};var Ra={VectorTile:function(t,e){this.layers=t.readFields(Ma,{},e)},VectorTileFeature:Ta,VectorTileLayer:Oa},Na=Ra.VectorTileFeature.types,La=63,Fa=Math.cos(Math.PI/180*37.5),Ba=.5,ja=Math.pow(2,14)/Ba;function za(t,e,n,r,i,o,a){t.emplaceBack(e.x,e.y,r?1:0,i?1:-1,Math.round(La*n.x)+128,Math.round(La*n.y)+128,1+(0===o?0:o<0?-1:1)|(a*Ba&63)<<2,a*Ba>>6)}var Va=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.features=[],this.hasPattern=!1,this.layoutVertexArray=new Kr,this.indexArray=new ai,this.programConfigurations=new Gi(Sa,t.layers,t.zoom),this.segments=new Ei,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Ua(t,e){return(t/e.tileTotal*(e.end-e.start)+e.start)*(ja-1)}Va.prototype.populate=function(t,e){this.features=[],this.hasPattern=ca("line",this.layers,e);for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Cr(this.zoom),o)){var u=Qi(o),l={sourceLayerIndex:s,index:a,geometry:u,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(l.id=o.id),this.hasPattern?this.features.push(ha("line",this.layers,l,this.zoom,e)):this.addFeature(l,u,a,{}),e.featureIndex.insert(o,u,a,s,this.index)}}},Va.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Va.prototype.addFeatures=function(t,e){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n];this.addFeature(i,i.geometry,i.index,e)}},Va.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Va.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Va.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Sa),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Va.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Va.prototype.addFeature=function(t,e,n,r){for(var i=this.layers[0].layout,o=i.get("line-join").evaluate(t,{}),a=i.get("line-cap"),s=i.get("line-miter-limit"),u=i.get("line-round-limit"),l=0,c=e;l<c.length;l+=1)this.addLine(c[l],t,o,a,s,u,n,r)},Va.prototype.addLine=function(t,e,n,r,i,o,a,s){var u=null;e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")&&(u={start:e.properties.mapbox_clip_start,end:e.properties.mapbox_clip_end,tileTotal:void 0});for(var l="Polygon"===Na[e.type],c=t.length;c>=2&&t[c-1].equals(t[c-2]);)c--;for(var h=0;h<c-1&&t[h].equals(t[h+1]);)h++;if(!(c<(l?3:2))){u&&(u.tileTotal=function(t,e,n){for(var r=0,i=h;i<n-1;i++)r+=t[i].dist(t[i+1]);return r}(t,0,c)),"bevel"===n&&(i=1.05);var p=Ki/(512*this.overscaling)*15,f=t[h],d=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray);this.distance=0;var m,g,y,v=r,b=l?"butt":r,_=!0,w=void 0,x=void 0,C=void 0,E=void 0;this.e1=this.e2=this.e3=-1,l&&(E=f.sub(m=t[c-2])._unit()._perp());for(var S=h;S<c;S++)if(!(x=l&&S===c-1?t[h+1]:t[S+1])||!t[S].equals(x)){E&&(C=E),m&&(w=m),m=t[S],E=x?x.sub(m)._unit()._perp():C;var T=(C=C||E).add(E);0===T.x&&0===T.y||T._unit();var A=T.x*E.x+T.y*E.y,P=0!==A?1/A:1/0,I=A<Fa&&w&&x;if(I&&S>h){var O=m.dist(w);if(O>2*p){var D=m.sub(m.sub(w)._mult(p/O)._round());this.distance+=D.dist(w),this.addCurrentVertex(D,this.distance,C.mult(1),0,0,!1,d,u),w=D}}var k=w&&x,M=k?n:x?v:b;if(k&&"round"===M&&(P<o?M="miter":P<=2&&(M="fakeround")),"miter"===M&&P>i&&(M="bevel"),"bevel"===M&&(P>2&&(M="flipbevel"),P<i&&(M="miter")),w&&(this.distance+=m.dist(w)),"miter"===M)T._mult(P),this.addCurrentVertex(m,this.distance,T,0,0,!1,d,u);else if("flipbevel"===M){if(P>100)T=E.clone().mult(-1);else{var R=C.x*E.y-C.y*E.x>0?-1:1,N=P*C.add(E).mag()/C.sub(E).mag();T._perp()._mult(N*R)}this.addCurrentVertex(m,this.distance,T,0,0,!1,d,u),this.addCurrentVertex(m,this.distance,T.mult(-1),0,0,!1,d,u)}else if("bevel"===M||"fakeround"===M){var L=C.x*E.y-C.y*E.x>0,F=-Math.sqrt(P*P-1);if(L?(y=0,g=F):(g=0,y=F),_||this.addCurrentVertex(m,this.distance,C,g,y,!1,d,u),"fakeround"===M){for(var B=Math.floor(8*(.5-(A-.5))),j=void 0,z=0;z<B;z++)j=E.mult((z+1)/(B+1))._add(C)._unit(),this.addPieSliceVertex(m,this.distance,j,L,d,u);this.addPieSliceVertex(m,this.distance,T,L,d,u);for(var V=B-1;V>=0;V--)j=C.mult((V+1)/(B+1))._add(E)._unit(),this.addPieSliceVertex(m,this.distance,j,L,d,u)}x&&this.addCurrentVertex(m,this.distance,E,-g,-y,!1,d,u)}else"butt"===M?(_||this.addCurrentVertex(m,this.distance,C,0,0,!1,d,u),x&&this.addCurrentVertex(m,this.distance,E,0,0,!1,d,u)):"square"===M?(_||(this.addCurrentVertex(m,this.distance,C,1,1,!1,d,u),this.e1=this.e2=-1),x&&this.addCurrentVertex(m,this.distance,E,-1,-1,!1,d,u)):"round"===M&&(_||(this.addCurrentVertex(m,this.distance,C,0,0,!1,d,u),this.addCurrentVertex(m,this.distance,C,1,1,!0,d,u),this.e1=this.e2=-1),x&&(this.addCurrentVertex(m,this.distance,E,-1,-1,!0,d,u),this.addCurrentVertex(m,this.distance,E,0,0,!1,d,u)));if(I&&S<c-1){var U=m.dist(x);if(U>2*p){var q=m.add(x.sub(m)._mult(p/U)._round());this.distance+=q.dist(m),this.addCurrentVertex(q,this.distance,E.mult(1),0,0,!1,d,u),m=q}}_=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,s)}},Va.prototype.addCurrentVertex=function(t,e,n,r,i,o,a,s){var u,l=this.layoutVertexArray,c=this.indexArray;s&&(e=Ua(e,s)),u=n.clone(),r&&u._sub(n.perp()._mult(r)),za(l,t,u,o,!1,r,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),i&&u._sub(n.perp()._mult(i)),za(l,t,u,o,!0,-i,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>ja/2&&!s&&(this.distance=0,this.addCurrentVertex(t,this.distance,n,r,i,o,a))},Va.prototype.addPieSliceVertex=function(t,e,n,r,i,o){n=n.mult(r?-1:1);var a=this.layoutVertexArray,s=this.indexArray;o&&(e=Ua(e,o)),za(a,t,n,!1,r,0,e),this.e3=i.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),r?this.e2=this.e3:this.e1=this.e3},ar("LineBucket",Va,{omit:["layers","features"]});var qa=new Fr({"line-cap":new kr(gt.layout_line["line-cap"]),"line-join":new Mr(gt.layout_line["line-join"]),"line-miter-limit":new kr(gt.layout_line["line-miter-limit"]),"line-round-limit":new kr(gt.layout_line["line-round-limit"])}),Ga={paint:new Fr({"line-opacity":new Mr(gt.paint_line["line-opacity"]),"line-color":new Mr(gt.paint_line["line-color"]),"line-translate":new kr(gt.paint_line["line-translate"]),"line-translate-anchor":new kr(gt.paint_line["line-translate-anchor"]),"line-width":new Mr(gt.paint_line["line-width"]),"line-gap-width":new Mr(gt.paint_line["line-gap-width"]),"line-offset":new Mr(gt.paint_line["line-offset"]),"line-blur":new Mr(gt.paint_line["line-blur"]),"line-dasharray":new Nr(gt.paint_line["line-dasharray"]),"line-pattern":new Rr(gt.paint_line["line-pattern"]),"line-gradient":new Lr(gt.paint_line["line-gradient"])}),layout:qa},Ha=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new Cr(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,r,i){return n=h({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,r,i)},e}(Mr))(Ga.paint.properties["line-width"].specification);Ha.useIntegerZoom=!0;var Wa=function(t){function e(e){t.call(this,e,Ga)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){this.gradient=Io(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=Ha.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new Va(t)},e.prototype.queryRadius=function(t){var e=t,n=Ka(lo("line-width",this,e),lo("line-gap-width",this,e)),r=lo("line-offset",this,e);return n/2+Math.abs(r)+co(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,o,a,s){var u=ho(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),l=s/2*Ka(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),c=this.paint.get("line-offset").evaluate(e,n);return c&&(r=function(t,e){for(var n=[],r=new i(0,0),o=0;o<t.length;o++){for(var a=t[o],s=[],u=0;u<a.length;u++){var l=a[u],c=a[u+1],h=0===u?r:l.sub(a[u-1])._unit()._perp(),p=u===a.length-1?r:c.sub(l)._unit()._perp(),f=h._add(p)._unit();f._mult(1/(f.x*p.x+f.y*p.y)),s.push(f._mult(e)._add(l))}n.push(s)}return n}(r,c*s)),function(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];if(t.length>=3)for(var o=0;o<i.length;o++)if(so(t,i[o]))return!0;if(eo(t,i,n))return!0}return!1}(u,r,l)},e}(Br);function Ka(t,e){return e>0?e+2*t:t}var Xa=Ur([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),Qa=Ur([{name:"a_projected_pos",components:3,type:"Float32"}],4),Za=(Ur([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ur([{name:"a_placed",components:2,type:"Uint8"}],4)),Ya=(Ur([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),Ur([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ja=Ur([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function $a(t,e,n){return t.sections.forEach(function(t){t.text=function(t,e,n){var r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),xr.applyArabicShaping&&(t=xr.applyArabicShaping(t)),t}(t.text,e,n)}),t}Ur([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),Ur([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"horizontalPlacedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint32",name:"crossTileID"}]),Ur([{type:"Float32",name:"offsetX"}]),Ur([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ts={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},es=function(t){function e(e,n,r,i){t.call(this,e,n),this.angle=r,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(i);function ns(t,e){var n=e.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate(new Cr(t+1))};if("source"===n.kind)return{functionType:"source"};for(var r=n.zoomStops,i=0;i<r.length&&r[i]<=t;)i++;for(var o=i=Math.max(0,i-1);o<r.length&&r[o]<t+1;)o++;o=Math.min(r.length-1,o);var a={min:r[i],max:r[o]};return"composite"===n.kind?{functionType:"composite",zoomRange:a,propertyValue:e.value}:{functionType:"camera",layoutSize:n.evaluate(new Cr(t+1)),zoomRange:a,sizeRange:{min:n.evaluate(new Cr(a.min)),max:n.evaluate(new Cr(a.max))},propertyValue:e.value}}ar("Anchor",es);var rs=Ra.VectorTileFeature.types,is=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function os(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,a,s?s[0]:0,s?s[1]:0)}function as(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}var ss=function(t){this.layoutVertexArray=new Qr,this.indexArray=new ai,this.programConfigurations=t,this.segments=new Ei,this.dynamicLayoutVertexArray=new Zr,this.opacityVertexArray=new Yr,this.placedSymbolArray=new di};ss.prototype.upload=function(t,e,n,r){n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Xa.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Qa.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,is,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t)},ss.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ar("SymbolBuffers",ss);var us=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new Ei,this.collisionVertexArray=new ti};us.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Za.members,!0)},us.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ar("CollisionBuffers",us);var ls=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ns(this.zoom,e["text-size"]),this.iconSizeData=ns(this.zoom,e["icon-size"]);var n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&(n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id}),this.sourceID=t.sourceID};ls.prototype.createArrays=function(){this.text=new ss(new Gi(Xa.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new ss(new Gi(Xa.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new us($r,Ya.members,si),this.collisionCircle=new us($r,Ja.members,ai),this.glyphOffsetArray=new vi,this.lineVertexArray=new _i,this.symbolInstances=new gi},ls.prototype.calculateGlyphDependencies=function(t,e,n,r){for(var i=0;i<t.length;i++)if(e[t.charCodeAt(i)]=!0,n&&r){var o=ts[t.charAt(i)];o&&(e[o.charCodeAt(0)]=!0)}},ls.prototype.populate=function(t,e){var n=this.layers[0],r=n.layout,i=r.get("text-font"),o=r.get("text-field"),a=r.get("icon-image"),s=("constant"!==o.value.kind||o.value.value.toString().length>0)&&("constant"!==i.value.kind||i.value.value.length>0),u="constant"!==a.value.kind||a.value.value&&a.value.value.length>0,l=r.get("symbol-sort-key");if(this.features=[],s||u){for(var c=e.iconDependencies,h=e.glyphDependencies,p=new Cr(this.zoom),f=0,d=t;f<d.length;f+=1){var m=d[f],g=m.feature,y=m.index,v=m.sourceLayerIndex;if(n._featureFilter(p,g)){var b=void 0;if(s){var _=n.getValueAndResolveTokens("text-field",g);b=$a(_ instanceof Vt?_:Vt.fromString(_),n,g)}var w=void 0;if(u&&(w=n.getValueAndResolveTokens("icon-image",g)),b||w){var x=this.sortFeaturesByKey?l.evaluate(g,{}):void 0,C={text:b,icon:w,index:y,sourceLayerIndex:v,geometry:Qi(g),properties:g.properties,type:rs[g.type],sortKey:x};if(void 0!==g.id&&(C.id=g.id),this.features.push(C),w&&(c[w]=!0),b)for(var E=i.evaluate(g,{}).join(","),S="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement"),T=0,A=b.sections;T<A.length;T+=1){var P=A[T],I=pr(b.toString()),O=P.fontStack||E,D=h[O]=h[O]||{};this.calculateGlyphDependencies(P.text,D,S,I)}}}}"line"===r.get("symbol-placement")&&(this.features=function(t){var e={},n={},r=[],i=0;function o(e){r.push(t[e]),i++}function a(t,e,i){var o=n[t];return delete n[t],n[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(t,n,i){var o=e[n];return delete e[n],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function u(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var l=0;l<t.length;l++){var c=t[l],h=c.geometry,p=c.text?c.text.toString():null;if(p){var f=u(p,h),d=u(p,h,!0);if(f in n&&d in e&&n[f]!==e[d]){var m=s(f,d,h),g=a(f,d,r[m].geometry);delete e[f],delete n[d],n[u(p,r[g].geometry,!0)]=g,r[m].geometry=null}else f in n?a(f,d,h):d in e?s(f,d,h):(o(l),e[f]=i-1,n[d]=i-1)}else o(l)}return r.filter(function(t){return t.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(t,e){return t.sortKey-e.sortKey})}},ls.prototype.update=function(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))},ls.prototype.isEmpty=function(){return 0===this.symbolInstances.length},ls.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ls.prototype.upload=function(t){this.uploaded||(this.collisionBox.upload(t),this.collisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ls.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},ls.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a<e.length-1&&(r+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=o[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},ls.prototype.addSymbols=function(t,e,n,r,i,o,a,s,u,l){for(var c=t.indexArray,h=t.layoutVertexArray,p=t.dynamicLayoutVertexArray,f=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray,o.sortKey),d=this.glyphOffsetArray.length,m=f.vertexLength,g=0,y=e;g<y.length;g+=1){var v=y[g],b=v.tl,_=v.tr,w=v.bl,x=v.br,C=v.tex,E=f.vertexLength,S=v.glyphOffset[1];os(h,s.x,s.y,b.x,S+b.y,C.x,C.y,n),os(h,s.x,s.y,_.x,S+_.y,C.x+C.w,C.y,n),os(h,s.x,s.y,w.x,S+w.y,C.x,C.y+C.h,n),os(h,s.x,s.y,x.x,S+x.y,C.x+C.w,C.y+C.h,n),as(p,s,0),c.emplaceBack(E,E+1,E+2),c.emplaceBack(E+1,E+2,E+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(v.glyphOffset[0])}t.placedSymbolArray.emplaceBack(s.x,s.y,d,this.glyphOffsetArray.length-d,m,u,l,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,!1),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,o,o.index,{})},ls.prototype._addCollisionDebugVertex=function(t,e,n,r,i,o){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))},ls.prototype.addCollisionDebugVertices=function(t,e,n,r,o,a,s,u){var l=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),c=l.vertexLength,h=o.layoutVertexArray,p=o.collisionVertexArray,f=s.anchorX,d=s.anchorY;if(this._addCollisionDebugVertex(h,p,a,f,d,new i(t,e)),this._addCollisionDebugVertex(h,p,a,f,d,new i(n,e)),this._addCollisionDebugVertex(h,p,a,f,d,new i(n,r)),this._addCollisionDebugVertex(h,p,a,f,d,new i(t,r)),l.vertexLength+=4,u){var m=o.indexArray;m.emplaceBack(c,c+1,c+2),m.emplaceBack(c,c+2,c+3),l.primitiveLength+=2}else{var g=o.indexArray;g.emplaceBack(c,c+1),g.emplaceBack(c+1,c+2),g.emplaceBack(c+2,c+3),g.emplaceBack(c+3,c),l.primitiveLength+=4}},ls.prototype.addDebugCollisionBoxes=function(t,e,n){for(var r=t;r<e;r++){var i=this.collisionBoxArray.get(r),o=i.radius>0;this.addCollisionDebugVertices(i.x1,i.y1,i.x2,i.y2,o?this.collisionCircle:this.collisionBox,i.anchorPoint,n,o)}},ls.prototype.generateCollisionDebugBuffers=function(){for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e)}},ls.prototype._deserializeCollisionBoxesForSymbol=function(t,e,n,r,i){for(var o={},a=e;a<n;a++){var s=t.get(a);if(0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},o.textFeatureIndex=s.featureIndex;break}o.textCircles||(o.textCircles=[],o.textFeatureIndex=s.featureIndex),o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var u=r;u<i;u++){var l=t.get(u);if(0===l.radius){o.iconBox={x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,anchorPointX:l.anchorPointX,anchorPointY:l.anchorPointY},o.iconFeatureIndex=l.featureIndex;break}}return o},ls.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex))}},ls.prototype.hasTextData=function(){return this.text.segments.get().length>0},ls.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ls.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},ls.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},ls.prototype.addIndicesForPlacedTextSymbol=function(t){for(var e=this.text.placedSymbolArray.get(t),n=e.vertexStartIndex+4*e.numGlyphs,r=e.vertexStartIndex;r<n;r+=4)this.text.indexArray.emplaceBack(r,r+1,r+2),this.text.indexArray.emplaceBack(r+1,r+2,r+3)},ls.prototype.sortFeatures=function(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&(this.sortedAngle=t,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var e=[],n=0;n<this.symbolInstances.length;n++)e.push(n);for(var r=Math.sin(t),i=Math.cos(t),o=[],a=[],s=0;s<this.symbolInstances.length;s++){var u=this.symbolInstances.get(s);o.push(0|Math.round(r*u.anchorX+i*u.anchorY)),a.push(u.featureIndex)}e.sort(function(t,e){return o[t]-o[e]||a[e]-a[t]}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var l=0,c=e;l<c.length;l+=1){var h=c[l],p=this.symbolInstances.get(h);this.featureSortOrder.push(p.featureIndex),p.horizontalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(p.horizontalPlacedTextSymbolIndex),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(p.verticalPlacedTextSymbolIndex);var f=this.icon.placedSymbolArray.get(h);if(f.numGlyphs){var d=f.vertexStartIndex;this.icon.indexArray.emplaceBack(d,d+1,d+2),this.icon.indexArray.emplaceBack(d+1,d+2,d+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ar("SymbolBucket",ls,{omit:["layers","collisionBoxArray","features","compareText"]}),ls.MAX_GLYPHS=65535,ls.addDynamicAttributes=as;var cs=new Fr({"symbol-placement":new kr(gt.layout_symbol["symbol-placement"]),"symbol-spacing":new kr(gt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new kr(gt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Mr(gt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new kr(gt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new kr(gt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new kr(gt.layout_symbol["icon-ignore-placement"]),"icon-optional":new kr(gt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new kr(gt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Mr(gt.layout_symbol["icon-size"]),"icon-text-fit":new kr(gt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new kr(gt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Mr(gt.layout_symbol["icon-image"]),"icon-rotate":new Mr(gt.layout_symbol["icon-rotate"]),"icon-padding":new kr(gt.layout_symbol["icon-padding"]),"icon-keep-upright":new kr(gt.layout_symbol["icon-keep-upright"]),"icon-offset":new Mr(gt.layout_symbol["icon-offset"]),"icon-anchor":new Mr(gt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new kr(gt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new kr(gt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new kr(gt.layout_symbol["text-rotation-alignment"]),"text-field":new Mr(gt.layout_symbol["text-field"]),"text-font":new Mr(gt.layout_symbol["text-font"]),"text-size":new Mr(gt.layout_symbol["text-size"]),"text-max-width":new Mr(gt.layout_symbol["text-max-width"]),"text-line-height":new kr(gt.layout_symbol["text-line-height"]),"text-letter-spacing":new Mr(gt.layout_symbol["text-letter-spacing"]),"text-justify":new Mr(gt.layout_symbol["text-justify"]),"text-anchor":new Mr(gt.layout_symbol["text-anchor"]),"text-max-angle":new kr(gt.layout_symbol["text-max-angle"]),"text-rotate":new Mr(gt.layout_symbol["text-rotate"]),"text-padding":new kr(gt.layout_symbol["text-padding"]),"text-keep-upright":new kr(gt.layout_symbol["text-keep-upright"]),"text-transform":new Mr(gt.layout_symbol["text-transform"]),"text-offset":new Mr(gt.layout_symbol["text-offset"]),"text-allow-overlap":new kr(gt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new kr(gt.layout_symbol["text-ignore-placement"]),"text-optional":new kr(gt.layout_symbol["text-optional"])}),hs={paint:new Fr({"icon-opacity":new Mr(gt.paint_symbol["icon-opacity"]),"icon-color":new Mr(gt.paint_symbol["icon-color"]),"icon-halo-color":new Mr(gt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Mr(gt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Mr(gt.paint_symbol["icon-halo-blur"]),"icon-translate":new kr(gt.paint_symbol["icon-translate"]),"icon-translate-anchor":new kr(gt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Mr(gt.paint_symbol["text-opacity"]),"text-color":new Mr(gt.paint_symbol["text-color"]),"text-halo-color":new Mr(gt.paint_symbol["text-halo-color"]),"text-halo-width":new Mr(gt.paint_symbol["text-halo-width"]),"text-halo-blur":new Mr(gt.paint_symbol["text-halo-blur"]),"text-translate":new kr(gt.paint_symbol["text-translate"]),"text-translate-anchor":new kr(gt.paint_symbol["text-translate-anchor"])}),layout:cs},ps=function(t){function e(e){t.call(this,e,hs)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},e.prototype.getValueAndResolveTokens=function(t,e){var n,r=this.layout.get(t).evaluate(e,{}),i=this._unevaluatedLayout._values[t];return i.isDataDriven()||dn(i.value)?r:(n=e.properties,r.replace(/{([^{}]+)}/g,function(t,e){return e in n?String(n[e]):""}))},e.prototype.createBucket=function(t){return new ls(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e}(Br),fs={paint:new Fr({"background-color":new kr(gt.paint_background["background-color"]),"background-pattern":new Nr(gt.paint_background["background-pattern"]),"background-opacity":new kr(gt.paint_background["background-opacity"])})},ds=function(t){function e(e){t.call(this,e,fs)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Br),ms={paint:new Fr({"raster-opacity":new kr(gt.paint_raster["raster-opacity"]),"raster-hue-rotate":new kr(gt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new kr(gt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new kr(gt.paint_raster["raster-brightness-max"]),"raster-saturation":new kr(gt.paint_raster["raster-saturation"]),"raster-contrast":new kr(gt.paint_raster["raster-contrast"]),"raster-resampling":new kr(gt.paint_raster["raster-resampling"]),"raster-fade-duration":new kr(gt.paint_raster["raster-fade-duration"])})},gs=function(t){function e(e){t.call(this,e,ms)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Br),ys=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender||"3d"===this.implementation.renderingMode},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t)},e}(Br),vs={circle:_o,heatmap:Oo,hillshade:ko,fill:da,"fill-extrusion":xa,line:Wa,symbol:ps,background:ds,raster:gs};function bs(t){for(var e=0,n=0,r=0,i=t;r<i.length;r+=1){var o=i[r];e+=o.w*o.h,n=Math.max(n,o.w)}t.sort(function(t,e){return e.h-t.h});for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}],s=0,u=0,l=0,c=t;l<c.length;l+=1)for(var h=c[l],p=a.length-1;p>=0;p--){var f=a[p];if(!(h.w>f.w||h.h>f.h)){if(h.x=f.x,h.y=f.y,u=Math.max(u,h.y+h.h),s=Math.max(s,h.x+h.w),h.w===f.w&&h.h===f.h){var d=a.pop();p<a.length&&(a[p]=d)}else h.h===f.h?(f.x+=h.w,f.w-=h.w):h.w===f.w?(f.y+=h.h,f.h-=h.h):(a.push({x:f.x+h.w,y:f.y,w:f.w-h.w,h:h.h}),f.y+=h.h,f.h-=h.h);break}}return{w:s,h:u,fill:e/(s*u)||0}}var _s=function(t,e){var n=e.pixelRatio;this.paddedRect=t,this.pixelRatio=n},ws={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};ws.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},ws.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},ws.tlbr.get=function(){return this.tl.concat(this.br)},ws.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(_s.prototype,ws);var xs=function(t,e){var n={},r={},i=[];for(var o in t){var a=t[o],s={x:0,y:0,w:a.data.width+2,h:a.data.height+2};i.push(s),n[o]=new _s(s,a)}for(var u in e){var l=e[u],c={x:0,y:0,w:l.data.width+2,h:l.data.height+2};i.push(c),r[u]=new _s(c,l)}var h=bs(i),p=new Ao({width:h.w||1,height:h.h||1});for(var f in t){var d=t[f],m=n[f].paddedRect;Ao.copy(d.data,p,{x:0,y:0},{x:m.x+1,y:m.y+1},d.data)}for(var g in e){var y=e[g],v=r[g].paddedRect,b=v.x+1,_=v.y+1,w=y.data.width,x=y.data.height;Ao.copy(y.data,p,{x:0,y:0},{x:b,y:_},y.data),Ao.copy(y.data,p,{x:0,y:x-1},{x:b,y:_-1},{width:w,height:1}),Ao.copy(y.data,p,{x:0,y:0},{x:b,y:_+x},{width:w,height:1}),Ao.copy(y.data,p,{x:w-1,y:0},{x:b-1,y:_},{width:1,height:x}),Ao.copy(y.data,p,{x:0,y:0},{x:b+w,y:_},{width:1,height:x})}this.image=p,this.iconPositions=n,this.patternPositions=r};ar("ImagePosition",_s),ar("ImageAtlas",xs);var Cs=self.HTMLImageElement,Es=self.HTMLCanvasElement,Ss=self.HTMLVideoElement,Ts=self.ImageData,As=function(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)};As.prototype.update=function(t,e){var n=t.width,r=t.height,i=!this.size||this.size[0]!==n||this.size[1]!==r,o=this.context,a=o.gl;this.useMipmap=Boolean(e&&e.useMipmap),a.bindTexture(a.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===a.RGBA&&(!e||!1!==e.premultiply)),i?(this.size=[n,r],t instanceof Cs||t instanceof Es||t instanceof Ss||t instanceof Ts?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,t):a.texImage2D(a.TEXTURE_2D,0,this.format,n,r,0,this.format,a.UNSIGNED_BYTE,t.data)):t instanceof Cs||t instanceof Es||t instanceof Ss||t instanceof Ts?a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,t):a.texSubImage2D(a.TEXTURE_2D,0,0,0,n,r,a.RGBA,a.UNSIGNED_BYTE,t.data),this.useMipmap&&this.isSizePowerOfTwo()&&a.generateMipmap(a.TEXTURE_2D)},As.prototype.bind=function(t,e,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},As.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},As.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Ps=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,p=n?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=l}return(f?-1:1)*a*Math.pow(2,o-r)},Is=function(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?p/u:p*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+f]=255&a,f+=d,a/=256,l-=8);t[n+f-d]|=128*m},Os=Ds;function Ds(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function ks(t){return t.type===Ds.Bytes?t.readVarint()+t.pos:t.pos+1}function Ms(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Rs(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function Ns(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function Ls(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function Fs(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function Bs(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function js(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function zs(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function Vs(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function Us(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function qs(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function Gs(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Hs(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function Ws(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Ds.Varint=0,Ds.Fixed64=1,Ds.Bytes=2,Ds.Fixed32=5,Ds.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Gs(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Ws(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Gs(this.buf,this.pos)+4294967296*Gs(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=Gs(this.buf,this.pos)+4294967296*Ws(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Ps(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Ps(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return Ms(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return Ms(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return Ms(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return Ms(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return Ms(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return Ms(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,u=t[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(a=t[i+2],128==(192&(o=t[i+1]))&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(a=t[i+2],s=t[i+3],128==(192&(o=t[i+1]))&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=c}return r}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=ks(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=ks(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=ks(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=ks(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=ks(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=ks(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=ks(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=ks(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=ks(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Ds.Varint)for(;this.buf[this.pos++]>127;);else if(e===Ds.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Ds.Fixed32)this.pos+=4;else{if(e!==Ds.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Hs(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Hs(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Hs(this.buf,-1&t,this.pos),Hs(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Hs(this.buf,-1&t,this.pos),Hs(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Rs(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Is(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Is(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&Rs(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,Ds.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,Ns,e)},writePackedSVarint:function(t,e){this.writeMessage(t,Ls,e)},writePackedBoolean:function(t,e){this.writeMessage(t,js,e)},writePackedFloat:function(t,e){this.writeMessage(t,Fs,e)},writePackedDouble:function(t,e){this.writeMessage(t,Bs,e)},writePackedFixed32:function(t,e){this.writeMessage(t,zs,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,Vs,e)},writePackedFixed64:function(t,e){this.writeMessage(t,Us,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,qs,e)},writeBytesField:function(t,e){this.writeTag(t,Ds.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Ds.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Ds.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Ds.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Ds.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Ds.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Ds.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Ds.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Ds.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Ds.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var Ks=3;function Xs(t,e,n){1===t&&n.readMessage(Qs,e)}function Qs(t,e,n){if(3===t){var r=n.readMessage(Zs,{}),i=r.width,o=r.height,a=r.left,s=r.top,u=r.advance;e.push({id:r.id,bitmap:new To({width:i+2*Ks,height:o+2*Ks},r.bitmap),metrics:{width:i,height:o,left:a,top:s,advance:u}})}}function Zs(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}var Ys=Ks,Js=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.callbackID=0,g(["receive"],this),this.target.addEventListener("message",this.receive,!1)};function $s(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}Js.prototype.send=function(t,e,n,r){var i=this,o=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[o]=n);var a=[];if(this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:t,id:String(o),data:ur(e,a)},a),n)return{cancel:function(){return i.target.postMessage({targetMapId:r,sourceMapId:i.mapId,type:"<cancel>",id:String(o)})}}},Js.prototype.receive=function(t){var e,n=this,r=t.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var o=function(t,e){delete n.callbacks[i];var r=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:t?ur(t):null,data:ur(e,r)},r)};if("<response>"===r.type||"<cancel>"===r.type)e=this.callbacks[r.id],delete this.callbacks[r.id],e&&r.error?e(lr(r.error)):e&&e(null,lr(r.data));else if(void 0!==r.id&&this.parent[r.type]){this.callbacks[r.id]=null;var a=this.parent[r.type](r.sourceMapId,lr(r.data),o);a&&null===this.callbacks[r.id]&&(this.callbacks[r.id]=a)}else if(void 0!==r.id&&this.parent.getWorkerSource){var s=r.type.split("."),u=lr(r.data);this.parent.getWorkerSource(r.sourceMapId,s[0],u.source)[s[1]](u,o)}else this.parent[r.type](lr(r.data))}},Js.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var tu=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};tu.prototype.setNorthEast=function(t){return this._ne=t instanceof eu?new eu(t.lng,t.lat):eu.convert(t),this},tu.prototype.setSouthWest=function(t){return this._sw=t instanceof eu?new eu(t.lng,t.lat):eu.convert(t),this},tu.prototype.extend=function(t){var e,n,r=this._sw,i=this._ne;if(t instanceof eu)e=t,n=t;else{if(!(t instanceof tu))return Array.isArray(t)?t.every(Array.isArray)?this.extend(tu.convert(t)):this.extend(eu.convert(t)):this;if(n=t._ne,!(e=t._sw)||!n)return this}return r||i?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new eu(e.lng,e.lat),this._ne=new eu(n.lng,n.lat)),this},tu.prototype.getCenter=function(){return new eu((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},tu.prototype.getSouthWest=function(){return this._sw},tu.prototype.getNorthEast=function(){return this._ne},tu.prototype.getNorthWest=function(){return new eu(this.getWest(),this.getNorth())},tu.prototype.getSouthEast=function(){return new eu(this.getEast(),this.getSouth())},tu.prototype.getWest=function(){return this._sw.lng},tu.prototype.getSouth=function(){return this._sw.lat},tu.prototype.getEast=function(){return this._ne.lng},tu.prototype.getNorth=function(){return this._ne.lat},tu.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},tu.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},tu.prototype.isEmpty=function(){return!(this._sw&&this._ne)},tu.convert=function(t){return!t||t instanceof tu?t:new tu(t)};var eu=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};function nu(t){return 2*Math.PI*6378137*Math.cos(t*Math.PI/180)}function ru(t){return(180+t)/360}function iu(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function ou(t,e){return t/nu(e)}function au(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}eu.prototype.wrap=function(){return new eu(c(this.lng,-180,180),this.lat)},eu.prototype.toArray=function(){return[this.lng,this.lat]},eu.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},eu.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new tu(new eu(this.lng-n,this.lat-e),new eu(this.lng+n,this.lat+e))},eu.convert=function(t){if(t instanceof eu)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new eu(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new eu(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var su=function(t,e,n){void 0===n&&(n=0),this.x=+t,this.y=+e,this.z=+n};su.fromLngLat=function(t,e){void 0===e&&(e=0);var n=eu.convert(t);return new su(ru(n.lng),iu(n.lat),ou(e,n.lat))},su.prototype.toLngLat=function(){return new eu(360*this.x-180,au(this.y))},su.prototype.toAltitude=function(){return this.z*nu(au(this.y))};var uu=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=hu(0,t,e,n)};uu.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},uu.prototype.url=function(t,e){var n,r,i,o,a,s=(r=this.y,i=this.z,o=$s(256*(n=this.x),256*(r=Math.pow(2,i)-r-1),i),a=$s(256*(n+1),256*(r+1),i),o[0]+","+o[1]+","+a[0]+","+a[1]),u=function(t,e,n){for(var r,i="",o=t;o>0;o--)i+=(e&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},uu.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new i((t.x*e-this.x)*Ki,(t.y*e-this.y)*Ki)};var lu=function(t,e){this.wrap=t,this.canonical=e,this.key=hu(t,e.z,e.x,e.y)},cu=function(t,e,n,r,i){this.overscaledZ=t,this.wrap=e,this.canonical=new uu(n,+r,+i),this.key=hu(e,t,r,i)};function hu(t,e,n,r){(t*=2)<0&&(t=-1*t-1);var i=1<<e;return 32*(i*i*t+i*r+n)+e}cu.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},cu.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new cu(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new cu(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},cu.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},cu.prototype.children=function(t){if(this.overscaledZ>=t)return[new cu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new cu(e,this.wrap,e,n,r),new cu(e,this.wrap,e,n+1,r),new cu(e,this.wrap,e,n,r+1),new cu(e,this.wrap,e,n+1,r+1)]},cu.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},cu.prototype.wrapped=function(){return new cu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},cu.prototype.unwrapTo=function(t){return new cu(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},cu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},cu.prototype.toUnwrapped=function(){return new lu(this.wrap,this.canonical)},cu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},cu.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new su(t.x-this.wrap,t.y))},ar("CanonicalTileID",uu),ar("OverscaledTileID",cu,{omit:["posMatrix"]});var pu=function(t,e,n){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return x('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var r=this.dim=e.height;this.stride=this.dim+2,this.data=new Int32Array(this.stride*this.stride);for(var i=e.data,o="terrarium"===n?this._unpackTerrarium:this._unpackMapbox,a=0;a<r;a++)for(var s=0;s<r;s++){var u=4*(a*r+s);this.set(s,a,o(i[u],i[u+1],i[u+2]))}for(var l=0;l<r;l++)this.set(-1,l,this.get(0,l)),this.set(r,l,this.get(r-1,l)),this.set(l,-1,this.get(l,0)),this.set(l,r,this.get(l,r-1));this.set(-1,-1,this.get(0,0)),this.set(r,-1,this.get(r-1,0)),this.set(-1,r,this.get(0,r-1)),this.set(r,r,this.get(r-1,r-1))};pu.prototype.set=function(t,e,n){this.data[this._idx(t,e)]=n+65536},pu.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},pu.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},pu.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},pu.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},pu.prototype.getPixels=function(){return new Ao({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},pu.prototype.backfillBorder=function(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var r=e*this.dim,i=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,u=-n*this.dim,l=o;l<a;l++)for(var c=r;c<i;c++)this.set(c,l,t.get(c+s,l+u))},ar("DEMData",pu);var fu=Ur([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),du=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};du.prototype.encode=function(t){return this._stringToNumber[t]},du.prototype.decode=function(t){return this._numberToString[t]};var mu=function(t,e,n,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,null!=t.id&&(this.id=t.id)},gu={geometry:{configurable:!0}};gu.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},gu.geometry.set=function(t){this._geometry=t},mu.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(mu.prototype,gu);var yu=function(){this.state={},this.stateChanges={},this.deletedStates={}};yu.prototype.updateState=function(t,e,n){var r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},h(this.stateChanges[t][r],n),null===this.deletedStates[t])for(var i in this.deletedStates[t]={},this.state[t])i!==r&&(this.deletedStates[t][i]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][r])for(var o in this.deletedStates[t][r]={},this.state[t][r])n[o]||(this.deletedStates[t][r][o]=null);else for(var a in n)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][a]&&delete this.deletedStates[t][r][a]},yu.prototype.removeFeatureState=function(t,e,n){if(null!==this.deletedStates[t]){var r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][n]=null);else if(e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(n in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][n]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}},yu.prototype.getState=function(t,e){var n=String(e),r=h({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var i=this.deletedStates[t][e];if(null===i)return{};for(var o in i)delete r[o]}return r},yu.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},yu.prototype.coalesceChanges=function(t,e){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),h(this.state[r][o],this.stateChanges[r][o]),i[o]=this.state[r][o];n[r]=i}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a]){for(var u in this.state[a])s[u]={};this.state[a]={}}else for(var l in this.deletedStates[a]){if(null===this.deletedStates[a][l])this.state[a][l]={};else for(var c=0,p=Object.keys(this.deletedStates[a][l]);c<p.length;c+=1)delete this.state[a][l][p[c]];s[l]=this.state[a][l]}n[a]=n[a]||{},h(n[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var f in t)t[f].setFeatureState(n,e)};var vu=function(t,e,n){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new er(Ki,16,0),this.grid3D=new er(Ki,16,0),this.featureIndexArray=n||new xi};function bu(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),n=Math.min(n,s.y),r=Math.max(r,s.x),i=Math.max(i,s.y)}return{minX:e,minY:n,maxX:r,maxY:i}}function _u(t,e){return e-t}vu.prototype.insert=function(t,e,n,r,i,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=o?this.grid3D:this.grid,u=0;u<e.length;u++){for(var l=e[u],c=[1/0,1/0,-1/0,-1/0],h=0;h<l.length;h++){var p=l[h];c[0]=Math.min(c[0],p.x),c[1]=Math.min(c[1],p.y),c[2]=Math.max(c[2],p.x),c[3]=Math.max(c[3],p.y)}c[0]<Ki&&c[1]<Ki&&c[2]>=0&&c[3]>=0&&s.insert(a,c[0],c[1],c[2],c[3])}},vu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ra.VectorTile(new Os(this.rawTileData)).layers,this.sourceLayerCoder=new du(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},vu.prototype.query=function(t,e,n){var r=this;this.loadVTLayers();for(var o=t.params||{},a=Ki/t.tileSize/t.scale,s=In(o.filter),u=t.queryGeometry,l=t.queryPadding*a,c=bu(u),h=this.grid.query(c.minX-l,c.minY-l,c.maxX+l,c.maxY+l),p=bu(t.cameraQueryGeometry),f=0,d=this.grid3D.query(p.minX-l,p.minY-l,p.maxX+l,p.maxY+l,function(e,n,r,o){return function(t,e,n,r,o){for(var a=0,s=t;a<s.length;a+=1){var u=s[a];if(e<=u.x&&n<=u.y&&r>=u.x&&o>=u.y)return!0}var l=[new i(e,n),new i(e,o),new i(r,o),new i(r,n)];if(t.length>2)for(var c=0,h=l;c<h.length;c+=1)if(so(t,h[c]))return!0;for(var p=0;p<t.length-1;p++)if(uo(t[p],t[p+1],l))return!0;return!1}(t.cameraQueryGeometry,e-l,n-l,r+l,o+l)});f<d.length;f+=1)h.push(d[f]);h.sort(_u);for(var m,g={},y=function(i){var l=h[i];if(l!==m){m=l;var c=r.featureIndexArray.get(l),p=null;r.loadMatchingFeature(g,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,s,o.layers,e,function(e,i){p||(p=Qi(e));var o={};return e.id&&(o=n.getState(i.sourceLayer||"_geojsonTileLayer",e.id)),i.queryIntersectsFeature(u,e,o,p,r.z,t.transform,a,t.pixelPosMatrix)})}},v=0;v<h.length;v++)y(v);return g},vu.prototype.loadMatchingFeature=function(t,e,n,r,i,o,a,s){var u=this.bucketLayerIDs[e];if(!o||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,u)){var l=this.sourceLayerCoder.decode(n),c=this.vtLayers[l].feature(r);if(i(new Cr(this.tileID.overscaledZ),c))for(var h=0;h<u.length;h++){var p=u[h];if(!(o&&o.indexOf(p)<0)){var f=a[p];if(f){var d=!s||s(c,f);if(d){var m=new mu(c,this.z,this.x,this.y);m.layer=f.serialize();var g=t[p];void 0===g&&(g=t[p]=[]),g.push({featureIndex:r,feature:m,intersectionZ:d})}}}}}},vu.prototype.lookupSymbolFeatures=function(t,e,n,r,i,o){var a={};this.loadVTLayers();for(var s=In(r),u=0,l=t;u<l.length;u+=1)this.loadMatchingFeature(a,e,n,l[u],s,i,o);return a},vu.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var r=0,i=n[e];r<i.length;r+=1)if(t===i[r])return!0;return!1},ar("FeatureIndex",vu,{omit:["rawTileData","sourceLayerCoder"]});var wu=function(t,e){this.tileID=t,this.uid=f(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.expiredRequestCount=0,this.state="loading"};wu.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<D.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},wu.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},wu.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var r in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var r=function(){var t=o[i],r=t.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==r.length){t.layers=r,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map(function(t){return r.filter(function(e){return e.id===t})[0]}));for(var a=0,s=r;a<s.length;a+=1)n[s[a].id]=t}},i=0,o=t;i<o.length;i+=1)r();return n}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof ls){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}for(var o in this.queryPadding=0,this.buckets){var a=this.buckets[o];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(o).queryRadius(a))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new pi},wu.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},wu.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},wu.prototype.getBucket=function(t){return this.buckets[t.id]},wu.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new As(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new As(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},wu.prototype.queryRenderedFeatures=function(t,e,n,r,i,o,a,s,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,cameraQueryGeometry:r,scale:i,tileSize:this.tileSize,pixelPosMatrix:u,transform:a,params:o,queryPadding:this.queryPadding*s},t,e):{}},wu.prototype.querySourceFeatures=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var n=this.latestFeatureIndex.loadVTLayers(),r=n._geojsonTileLayer||n[e?e.sourceLayer:""];if(r)for(var i=In(e&&e.filter),o=this.tileID.canonical,a=o.z,s=o.x,u=o.y,l={z:a,x:s,y:u},c=0;c<r.length;c++){var h=r.feature(c);if(i(new Cr(this.tileID.overscaledZ),h)){var p=new mu(h,a,s,u);p.tile=l,t.push(p)}}}},wu.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},wu.prototype.setMask=function(t,e){if(!a(this.mask,t)&&(this.mask=t,this.clearMask(),!a(t,{0:!0}))){var n=new Hr,r=new ai;this.segments=new Ei,this.segments.prepareSegment(0,n,r);for(var o=Object.keys(t),s=0;s<o.length;s++){var u=t[o[s]],l=Ki>>u.z,c=new i(u.x*l,u.y*l),h=new i(c.x+l,c.y+l),p=this.segments.prepareSegment(4,n,r);n.emplaceBack(c.x,c.y,c.x,c.y),n.emplaceBack(h.x,c.y,h.x,c.y),n.emplaceBack(c.x,h.y,c.x,h.y),n.emplaceBack(h.x,h.y,h.x,h.y);var f=p.vertexLength;r.emplaceBack(f,f+1,f+2),r.emplaceBack(f+1,f+2,f+3),p.vertexLength+=4,p.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(n,fu.members),this.maskedIndexBuffer=e.createIndexBuffer(r)}},wu.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},wu.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},wu.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=function(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,n,r,i){var o=r||i;return e[n]=!o||o.toLowerCase(),""}),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var o=this.expirationTime-e;o?this.expirationTime=r+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},wu.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},wu.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets){var i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=t[o];a&&s&&0!==Object.keys(s).length&&(i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(r).queryRadius(i))))}}},wu.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},wu.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<D.now()},wu.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},wu.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=D.now()+t};var xu={horizontal:1,vertical:2,horizontalOnly:3},Cu=function(){this.text="",this.sectionIndex=[],this.sections=[]};Cu.fromFeature=function(t,e){for(var n=new Cu,r=0;r<t.sections.length;r++){var i=t.sections[r];n.sections.push({scale:i.scale||1,fontStack:i.fontStack||e}),n.text+=i.text;for(var o=0;o<i.text.length;o++)n.sectionIndex.push(r)}return n},Cu.prototype.length=function(){return this.text.length},Cu.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},Cu.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},Cu.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;r&&mr(r)&&!ts[t[n+1]]||i&&mr(i)&&!ts[t[n-1]]||!ts[t[n]]?e+=t[n]:e+=ts[t[n]]}return e}(this.text)},Cu.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&Eu[this.text.charCodeAt(e)];e++)t++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=t&&Eu[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)},Cu.prototype.substring=function(t,e){var n=new Cu;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n},Cu.prototype.toString=function(){return this.text},Cu.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce(function(e,n){return Math.max(e,t.sections[n].scale)},0)};var Eu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Su={};function Tu(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function Au(t,e){var n=0;return 10===t&&(n-=1e4),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function Pu(t,e,n,r,i,o){for(var a=null,s=Tu(e,n,i,o),u=0,l=r;u<l.length;u+=1){var c=l[u],h=Tu(e-c.x,n,i,o)+c.badness;h<=s&&(a=c,s=h)}return{index:t,x:e,priorBreak:a,badness:s}}function Iu(t,e,n,r){if(!n)return[];if(!t)return[];for(var i,o=[],a=function(t,e,n,r){for(var i=0,o=0;o<t.length();o++){var a=t.getSection(o),s=r[a.fontStack],u=s&&s[t.getCharCode(o)];u&&(i+=u.metrics.advance*a.scale+e)}return i/Math.max(1,Math.ceil(i/n))}(t,e,n,r),s=0,u=0;u<t.length();u++){var l=t.getSection(u),c=t.getCharCode(u),h=r[l.fontStack],p=h&&h[c];p&&!Eu[c]&&(s+=p.metrics.advance*l.scale+e),u<t.length()-1&&(Su[c]||!((i=c)<11904)&&(hr["Bopomofo Extended"](i)||hr.Bopomofo(i)||hr["CJK Compatibility Forms"](i)||hr["CJK Compatibility Ideographs"](i)||hr["CJK Compatibility"](i)||hr["CJK Radicals Supplement"](i)||hr["CJK Strokes"](i)||hr["CJK Symbols and Punctuation"](i)||hr["CJK Unified Ideographs Extension A"](i)||hr["CJK Unified Ideographs"](i)||hr["Enclosed CJK Letters and Months"](i)||hr["Halfwidth and Fullwidth Forms"](i)||hr.Hiragana(i)||hr["Ideographic Description Characters"](i)||hr["Kangxi Radicals"](i)||hr["Katakana Phonetic Extensions"](i)||hr.Katakana(i)||hr["Vertical Forms"](i)||hr["Yi Radicals"](i)||hr["Yi Syllables"](i)))&&o.push(Pu(u+1,s,a,o,Au(c,t.getCharCode(u+1)),!1))}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Pu(t.length(),s,a,o,0,!0))}function Ou(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Du(t,e,n,r,i){if(i){var o=t[r],a=e[o.fontStack],s=a&&a[o.glyph];if(s)for(var u=(t[r].x+s.metrics.advance*o.scale)*i,l=n;l<=r;l++)t[l].x-=u}}Su[10]=!0,Su[32]=!0,Su[38]=!0,Su[40]=!0,Su[41]=!0,Su[43]=!0,Su[45]=!0,Su[47]=!0,Su[173]=!0,Su[183]=!0,Su[8203]=!0,Su[8208]=!0,Su[8211]=!0,Su[8231]=!0,t.createCommonjsModule=e,t.window=self,t.Point=i,t.browser=D,t.getJSON=function(t,e){return st(h(t,{type:"json"}),e)},t.normalizeSpriteURL=function(t,e,n,r){var i=W(t);return j(t)?(i.path="/styles/v1"+i.path+"/sprite"+e+n,B(i,r)):(i.path+=""+e+n,K(i))},t.ResourceType=et,t.getImage=ct,t.RGBAImage=Ao,t.ImagePosition=_s,t.Texture=As,t.potpack=bs,t.normalizeGlyphsURL=function(t,e){if(!j(t))return t;var n=W(t);return n.path="/fonts/v1"+n.path,B(n,e)},t.getArrayBuffer=ut,t.parseGlyphPBF=function(t){return new Os(t).readFields(Xs,[])},t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach(function(t,a){e(t,function(t,e){t&&(o=t),i[a]=e,0==--r&&n(o,i)})})},t.isChar=hr,t.AlphaImage=To,t.Properties=Fr,t.DataConstantProperty=kr,t.styleSpec=gt,t.validateLight=Yn,t.endsWith=y,t.emitValidationErrors=tr,t.validateStyle=Zn,t.extend=h,t.Evented=mt,t.sphericalToCartesian=function(t){var e=t[0],n=t[1],r=t[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(r),y:e*Math.sin(n)*Math.sin(r),z:e*Math.cos(r)}},t.number=le,t.Transitionable=Tr,t.warnOnce=x,t.uniqueId=f,t.Actor=Js,t.normalizeSourceURL=function(t,e){if(!j(t))return t;var n=W(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),B(n,e)},t.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n},t.canonicalizeTileset=function(t,e){if(!j(e))return t.tiles||[];for(var n=[],r=0,i=t.tiles;r<i.length;r+=1){var o=G(i[r]);n.push(o)}return n},t.LngLatBounds=tu,t.mercatorXfromLng=ru,t.mercatorYfromLat=iu,t.Event=ft,t.ErrorEvent=dt,t.postTurnstileEvent=J,t.postMapLoadEvent=tt,t.normalizeTileURL=function(t,e,n){if(!e||!j(e))return t;var r=W(t);return r.path=r.path.replace(U,(D.devicePixelRatio>=2||512===n?"@2x":"")+(M.supported?".webp":"$1")),r.path="/v4"+r.path,B(r)},t.OverscaledTileID=cu,t.EXTENT=Ki,t.MercatorCoordinate=su,t.CanonicalTileID=uu,t.StructArrayLayout4i8=Hr,t.rasterBoundsAttributes=fu,t.SegmentVector=Ei,t.getVideo=function(t,e){var n,r,i=self.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(var o=0;o<t.length;o++){var a=self.document.createElement("source");n=t[o],r=void 0,(r=self.document.createElement("a")).href=n,(r.protocol!==self.document.location.protocol||r.host!==self.document.location.host)&&(i.crossOrigin="Anonymous"),a.src=t[o],i.appendChild(a)}return{cancel:function(){}}},t.ValidationError=yt,t.bindAll=g,t.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],m=e[12],g=e[13],y=e[14],v=e[15],b=n[0],_=n[1],w=n[2],x=n[3];return t[0]=b*r+_*s+w*h+x*m,t[1]=b*i+_*u+w*p+x*g,t[2]=b*o+_*l+w*f+x*y,t[3]=b*a+_*c+w*d+x*v,t[4]=(b=n[4])*r+(_=n[5])*s+(w=n[6])*h+(x=n[7])*m,t[5]=b*i+_*u+w*p+x*g,t[6]=b*o+_*l+w*f+x*y,t[7]=b*a+_*c+w*d+x*v,t[8]=(b=n[8])*r+(_=n[9])*s+(w=n[10])*h+(x=n[11])*m,t[9]=b*i+_*u+w*p+x*g,t[10]=b*o+_*l+w*f+x*y,t[11]=b*a+_*c+w*d+x*v,t[12]=(b=n[12])*r+(_=n[13])*s+(w=n[14])*h+(x=n[15])*m,t[13]=b*i+_*u+w*p+x*g,t[14]=b*o+_*l+w*f+x*y,t[15]=b*a+_*c+w*d+x*v,t},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.translate=function(t,e,n){var r,i,o,a,s,u,l,c,h,p,f,d,m=n[0],g=n[1],y=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=p,t[10]=f,t[11]=d,t[12]=r*m+s*g+h*y+e[12],t[13]=i*m+u*g+p*y+e[13],t[14]=o*m+l*g+f*y+e[14],t[15]=a*m+c*g+d*y+e[15]),t},t.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.Color=Bt,t.isEqual=a,t.keysDifference=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},t.Tile=wu,t.SourceFeatureState=yu,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+h*r,t[3]=u*i+p*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=h*i-s*r,t[7]=p*i-u*r,t},t.evaluateSizeForZoom=function(t,e,n){if("constant"===t.functionType)return{uSizeT:0,uSize:t.layoutSize};if("source"===t.functionType)return{uSizeT:0,uSize:0};if("camera"===t.functionType){var r=t.zoomRange,i=t.sizeRange,o=l(_n(t.propertyValue,n.specification).interpolationFactor(e,r.min,r.max),0,1);return{uSizeT:0,uSize:i.min+o*(i.max-i.min)}}var a=t.zoomRange;return{uSizeT:l(_n(t.propertyValue,n.specification).interpolationFactor(e,a.min,a.max),0,1),uSize:0}},t.WritingMode=xu,t.transformMat4=vo,t.evaluateSizeForFeature=function(t,e,n){var r=e;return"source"===t.functionType?n.lowerSize/256:"composite"===t.functionType?le(n.lowerSize/256,n.upperSize/256,r.uSizeT):r.uSize},t.addDynamicAttributes=as,t.properties=hs,t.polygonIntersectsPolygon=Ji,t.isMapboxURL=j,t.normalizeStyleURL=function(t,e){if(!j(t))return t;var n=W(t);return n.path="/styles/v1"+n.path,B(n,e)},t.createStyleLayer=function(t){return"custom"===t.type?new ys(t):new vs[t.type](t)},t.clone=_,t.validateCustomStyleLayer=function(t){var e=[],n=t.id;return void 0===n&&e.push({message:"layers."+n+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+n+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),e},t.filterObject=b,t.mapObject=v,t.evented=wr,t.makeRequest=st,t.registerForPluginAvailability=function(t){return br?t({pluginURL:br,completionCallback:yr}):wr.once("pluginAvailable",t),t},t.ZoomHistory=cr,t.getReferrer=at,t.createLayout=Ur,t.UniformMatrix4f=Li,t.Uniform3f=ki,t.Uniform1f=Oi,t.Uniform1i=Ii,t.Uniform2f=Di,t.Uniform4f=Mi,t.create=mo,t.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},t.create$1=function(){var t=new fo(16);return fo!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*l,t[15]=1,t},t.UniformColor=Ri,t.clamp=l,t.StructArrayLayout2i4=Gr,t.StructArrayLayout2ui4=si,t.ProgramConfiguration=qi,t.StructArrayLayout1ui2=ui,t.StructArrayLayout3ui6=ai,t.wrap=c,t.create$2=function(){var t=new fo(4);return fo!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},t.LngLat=eu,t.UnwrappedTileID=lu,t.perspective=function(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(o=1/(r-i)),t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},t.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+h*r,t[7]=u*i+p*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=h*i-s*r,t[11]=p*i-u*r,t},t.mercatorZfromAltitude=ou,t.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],p=e[10],f=e[11],d=e[12],m=e[13],g=e[14],y=e[15],v=n*s-r*a,b=n*u-i*a,_=n*l-o*a,w=r*u-i*s,x=r*l-o*s,C=i*l-o*u,E=c*m-h*d,S=c*g-p*d,T=c*y-f*d,A=h*g-p*m,P=h*y-f*m,I=p*y-f*g,O=v*I-b*P+_*A+w*T-x*S+C*E;return O?(t[0]=(s*I-u*P+l*A)*(O=1/O),t[1]=(i*P-r*I-o*A)*O,t[2]=(m*C-g*x+y*w)*O,t[3]=(p*x-h*C-f*w)*O,t[4]=(u*T-a*I-l*S)*O,t[5]=(n*I-i*T+o*S)*O,t[6]=(g*_-d*C-y*b)*O,t[7]=(c*C-p*_+f*b)*O,t[8]=(a*P-s*T+l*E)*O,t[9]=(r*T-n*P-o*E)*O,t[10]=(d*x-m*_+y*v)*O,t[11]=(h*_-c*x-f*v)*O,t[12]=(s*S-a*A-u*E)*O,t[13]=(n*A-r*S+i*E)*O,t[14]=(m*b-d*w-g*v)*O,t[15]=(c*w-h*b+p*v)*O,t):null},t.ease=u,t.bezier=s,t.config=k,t.webpSupported=M,t.EvaluationParameters=Cr,t.version="0.53.0",t.setRTLTextPlugin=function(t,e){if(vr)throw new Error("setRTLTextPlugin cannot be called multiple times.");vr=!0,br=D.resolveURL(t),yr=function(t){t?(vr=!1,br=null,e&&e(t)):_r=!0},wr.fire(new ft("pluginAvailable",{pluginURL:br,completionCallback:yr}))},t.featureFilter=In,t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.Anchor=es,t.GLYPH_PBF_BORDER=Ys,t.distToSegmentSquared=oo,t.allowsLetterSpacing=function(t){for(var e=0,n=t;e<n.length;e+=1)if(!fr(n[e].charCodeAt(0)))return!1;return!0},t.shapeText=function(t,e,n,r,i,o,a,s,u,l,c){var h=Cu.fromFeature(t,n);c===xu.vertical&&h.verticalizePunctuation();var p,f=[],d={positionedGlyphs:f,text:h,top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:c},m=xr.processBidirectionalText,g=xr.processStyledBidirectionalText;if(m&&1===h.sections.length){p=[];for(var y=0,v=m(h.toString(),Iu(h,s,r,e));y<v.length;y+=1){var b=v[y],_=new Cu;_.text=b,_.sections=h.sections;for(var w=0;w<b.length;w++)_.sectionIndex.push(0);p.push(_)}}else if(g){p=[];for(var x=0,C=g(h.text,h.sectionIndex,Iu(h,s,r,e));x<C.length;x+=1){var E=C[x],S=new Cu;S.text=E[0],S.sectionIndex=E[1],S.sections=h.sections,p.push(S)}}else p=function(t,e){for(var n=[],r=t.text,i=0,o=0,a=e;o<a.length;o+=1){var s=a[o];n.push(t.substring(i,s)),i=s}return i<r.length&&n.push(t.substring(i,r.length)),n}(h,Iu(h,s,r,e));return function(t,e,n,r,i,o,a,s,u){for(var l=0,c=-17,h=0,p=t.positionedGlyphs,f="right"===o?1:"left"===o?0:.5,d=0,m=n;d<m.length;d+=1){var g=m[d];g.trim();var y=g.getMaxScale();if(g.length()){for(var v=p.length,b=0;b<g.length();b++){var _=g.getSection(b),w=g.getCharCode(b),x=24*(y-_.scale),C=e[_.fontStack],E=C&&C[w];E&&(dr(w)&&a!==xu.horizontal?(p.push({glyph:w,x:l,y:x,vertical:!0,scale:_.scale,fontStack:_.fontStack}),l+=u*_.scale+s):(p.push({glyph:w,x:l,y:c+x,vertical:!1,scale:_.scale,fontStack:_.fontStack}),l+=E.metrics.advance*_.scale+s))}p.length!==v&&(h=Math.max(l-s,h),Du(p,e,v,p.length-1,f)),l=0,c+=r*y}else c+=r}var S=Ou(i),T=S.horizontalAlign,A=S.verticalAlign;!function(t,e,n,r,i,o,a){for(var s=(f-T)*h,u=(-A*a+.5)*o,l=0;l<t.length;l++)t[l].x+=s,t[l].y+=u}(p,0,0,0,0,r,n.length);var P=c- -17;t.top+=-A*P,t.bottom=t.top+P,t.left+=-T*h,t.right=t.left+h}(d,e,p,i,o,a,c,s,l),!!f.length&&(d.text=d.text.toString(),d)},t.allowsVerticalWritingMode=pr,t.shapeIcon=function(t,e,n){var r=Ou(n),i=e[0]-t.displaySize[0]*r.horizontalAlign,o=e[1]-t.displaySize[1]*r.verticalAlign;return{image:t,top:o,bottom:o+t.displaySize[1],left:i,right:i+t.displaySize[0]}},t.classifyRings=ua,t.SIZE_PACK_FACTOR=256,t.SymbolBucket=ls,t.register=ar,t.CollisionBoxArray=pi,t.DictionaryCoder=du,t.FeatureIndex=vu,t.ImageAtlas=xs,t.LineBucket=Va,t.FillBucket=pa,t.FillExtrusionBucket=va,t.mvt=Ra,t.Protobuf=Os,t.DEMData=pu,t.vectorTile=Ra,t.Point$1=i,t.pbf=Os,t.createExpression=mn,t.plugin=xr}),r(0,function(t){function e(t){var n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var r="[",i=0,o=t;i<o.length;i+=1)r+=e(o[i])+",";return r+"]"}for(var a=Object.keys(t).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+e(t[a[u]])+",";return s+"}"}function n(n){for(var r="",i=0,o=t.refProperties;i<o.length;i+=1)r+="/"+e(n[o[i]]);return r}var r=function(t){t&&this.replace(t)};function i(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=t[a-1],h=t[a],p=t[a+1];if(!p)return!1;var f=c.angleTo(h)-h.angleTo(p);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:f}),l+=f;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>i)return!1;a++,s+=h.dist(p)}return!0}function o(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function a(t,e,n){return t?.6*e*n:0}function s(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function u(e,n,r,u,l,c){for(var h=a(r,l,c),p=s(r,u)*c,f=0,d=o(e)/2,m=0;m<e.length-1;m++){var g=e[m],y=e[m+1],v=g.dist(y);if(f+v>d){var b=(d-f)/v,_=t.number(g.x,y.x,b),w=t.number(g.y,y.y,b),x=new t.Anchor(_,w,y.angleTo(g),m);return x._round(),!h||i(e,x,p,h,n)?x:void 0}f+=v}}function l(e,n,r,u,l,c,h,p,f){var d=a(u,c,h),m=s(u,l),g=m*h,y=0===e[0].x||e[0].x===f||0===e[0].y||e[0].y===f;return n-g<n/4&&(n=g+n/4),function e(n,r,a,s,u,l,c,h,p){for(var f=l/2,d=o(n),m=0,g=r-a,y=[],v=0;v<n.length-1;v++){for(var b=n[v],_=n[v+1],w=b.dist(_),x=_.angleTo(b);g+a<m+w;){var C=((g+=a)-m)/w,E=t.number(b.x,_.x,C),S=t.number(b.y,_.y,C);if(E>=0&&E<p&&S>=0&&S<p&&g-f>=0&&g+f<=d){var T=new t.Anchor(E,S,x,v);T._round(),s&&!i(n,T,l,s,u)||y.push(T)}}m+=w}return h||y.length||c||(y=e(n,m/2,a,s,u,l,c,!0,p)),y}(e,y?n/2*p%n:(m/2+2*c)*h*p%n,n,d,r,g,y,!1,f)}r.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},r.prototype.update=function(e,r){for(var i=this,o=0,a=e;o<a.length;o+=1){var s=a[o];this._layerConfigs[s.id]=s;var u=this._layers[s.id]=t.createStyleLayer(s);u._featureFilter=t.featureFilter(u.filter)}for(var l=0,c=r;l<c.length;l+=1){var h=c[l];delete this._layerConfigs[h],delete this._layers[h]}this.familiesBySource={};for(var p=0,f=function(t){for(var e={},r=0;r<t.length;r++){var i=n(t[r]),o=e[i];o||(o=e[i]=[]),o.push(t[r])}var a=[];for(var s in e)a.push(e[s]);return a}(t.values(this._layerConfigs));p<f.length;p+=1){var d=f[p].map(function(t){return i._layers[t.id]}),m=d[0];if("none"!==m.visibility){var g=m.source||"",y=this.familiesBySource[g];y||(y=this.familiesBySource[g]={});var v=m.sourceLayer||"_geojsonTileLayer",b=y[v];b||(b=y[v]=[]),b.push(d)}}};var c=function(e,n,r,i,o,a,s,u,l,c,h,p){var f=s.top*u-l,d=s.bottom*u+l,m=s.left*u-l,g=s.right*u+l;if(this.boxStartIndex=e.length,c){var y=d-f,v=g-m;y>0&&(y=Math.max(10*u,y),this._addLineCollisionCircles(e,n,r,r.segment,v,y,i,o,a,h))}else{if(p){var b=new t.Point(m,f),_=new t.Point(g,f),w=new t.Point(m,d),x=new t.Point(g,d),C=p*Math.PI/180;b._rotate(C),_._rotate(C),w._rotate(C),x._rotate(C),m=Math.min(b.x,_.x,w.x,x.x),g=Math.max(b.x,_.x,w.x,x.x),f=Math.min(b.y,_.y,w.y,x.y),d=Math.max(b.y,_.y,w.y,x.y)}e.emplaceBack(r.x,r.y,m,f,g,d,i,o,a,0,0)}this.boxEndIndex=e.length};c.prototype._addLineCollisionCircles=function(t,e,n,r,i,o,a,s,u,l){var c=o/2,h=Math.floor(i/c)||1,p=1+.4*Math.log(l)/Math.LN2,f=Math.floor(h*p/2),d=-o/2,m=n,g=r+1,y=d,v=-i/2,b=v-i/4;do{if(--g<0){if(y>v)return;g=0;break}y-=e[g].dist(m),m=e[g]}while(y>b);for(var _=e[g].dist(e[g+1]),w=-f;w<h+f;w++){var x=w*c,C=v+x;if(x<0&&(C+=x),x>i&&(C+=x-i),!(C<y)){for(;y+_<C;){if(y+=_,++g+1>=e.length)return;_=e[g].dist(e[g+1])}var E=C-y,S=e[g],T=e[g+1].sub(S)._unit()._mult(E)._add(S)._round(),A=Math.abs(C-d)<c?0:.8*(C-d);t.emplaceBack(T.x,T.y,-o/2,-o/2,o/2,o/2,a,s,u,o/2,A)}}};var h=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=p),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function p(t,e){return t<e?-1:t>e?1:0}function f(e,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);for(var i=1/0,o=1/0,a=-1/0,s=-1/0,u=e[0],l=0;l<u.length;l++){var c=u[l];(!l||c.x<i)&&(i=c.x),(!l||c.y<o)&&(o=c.y),(!l||c.x>a)&&(a=c.x),(!l||c.y>s)&&(s=c.y)}var p=Math.min(a-i,s-o),f=p/2,g=new h([],d);if(0===p)return new t.Point(i,o);for(var y=i;y<a;y+=p)for(var v=o;v<s;v+=p)g.push(new m(y+f,v+f,f,e));for(var b=function(t){for(var e=0,n=0,r=0,i=t[0],o=0,a=i.length,s=a-1;o<a;s=o++){var u=i[o],l=i[s],c=u.x*l.y-l.x*u.y;n+=(u.x+l.x)*c,r+=(u.y+l.y)*c,e+=3*c}return new m(n/e,r/e,0,t)}(e),_=g.length;g.length;){var w=g.pop();(w.d>b.d||!b.d)&&(b=w,r&&console.log("found best %d after %d probes",Math.round(1e4*w.d)/1e4,_)),w.max-b.d<=n||(g.push(new m(w.p.x-(f=w.h/2),w.p.y-f,f,e)),g.push(new m(w.p.x+f,w.p.y-f,f,e)),g.push(new m(w.p.x-f,w.p.y+f,f,e)),g.push(new m(w.p.x+f,w.p.y+f,f,e)),_+=4)}return r&&(console.log("num probes: "+_),console.log("best distance: "+b.d)),b.p}function d(t,e){return e.max-t.max}function m(e,n,r,i){this.p=new t.Point(e,n),this.h=r,this.d=function(e,n){for(var r=!1,i=1/0,o=0;o<n.length;o++)for(var a=n[o],s=0,u=a.length,l=u-1;s<u;l=s++){var c=a[s],h=a[l];c.y>e.y!=h.y>e.y&&e.x<(h.x-c.x)*(e.y-c.y)/(h.y-c.y)+c.x&&(r=!r),i=Math.min(i,t.distToSegmentSquared(e,c,h))}return(r?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}h.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},h.prototype.pop=function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},h.prototype.peek=function(){return this.data[0]},h.prototype._up=function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},h.prototype._down=function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i};var g=t.createCommonjsModule(function(t){t.exports=function(t,e){var n,r,i,o,a,s,u,l;for(r=t.length-(n=3&t.length),i=e,a=3432918353,s=461845907,l=0;l<r;)u=255&t.charCodeAt(l)|(255&t.charCodeAt(++l))<<8|(255&t.charCodeAt(++l))<<16|(255&t.charCodeAt(++l))<<24,++l,i=27492+(65535&(o=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&t.charCodeAt(l+2))<<16;case 2:u^=(255&t.charCodeAt(l+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&t.charCodeAt(l)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}}),y=g,v=t.createCommonjsModule(function(t){t.exports=function(t,e){for(var n,r=t.length,i=e^r,o=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}});function b(e,n,r,i,o,a){e.createArrays(),e.tilePixelRatio=t.EXTENT/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var s=e.layers[0].layout,u=e.layers[0]._unevaluatedLayout._values,l={};if("composite"===e.textSizeData.functionType){var c=e.textSizeData.zoomRange,h=c.max;l.compositeTextSizes=[u["text-size"].possiblyEvaluate(new t.EvaluationParameters(c.min)),u["text-size"].possiblyEvaluate(new t.EvaluationParameters(h))]}if("composite"===e.iconSizeData.functionType){var p=e.iconSizeData.zoomRange,f=p.max;l.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new t.EvaluationParameters(p.min)),u["icon-size"].possiblyEvaluate(new t.EvaluationParameters(f))]}l.layoutTextSize=u["text-size"].possiblyEvaluate(new t.EvaluationParameters(e.zoom+1)),l.layoutIconSize=u["icon-size"].possiblyEvaluate(new t.EvaluationParameters(e.zoom+1)),l.textMaxSize=u["text-size"].possiblyEvaluate(new t.EvaluationParameters(18));for(var d=24*s.get("text-line-height"),m="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),g=s.get("text-keep-upright"),y=0,v=e.features;y<v.length;y+=1){var b=v[y],w=s.get("text-font").evaluate(b,{}).join(","),x=r,C={},E=b.text;if(E){var S=E.toString(),T=s.get("text-offset").evaluate(b,{}).map(function(t){return 24*t}),A=24*s.get("text-letter-spacing").evaluate(b,{}),P=t.allowsLetterSpacing(S)?A:0,I=s.get("text-anchor").evaluate(b,{}),O=s.get("text-justify").evaluate(b,{}),D="point"===s.get("symbol-placement")?24*s.get("text-max-width").evaluate(b,{}):0;C.horizontal=t.shapeText(E,n,w,D,d,I,O,P,T,24,t.WritingMode.horizontal),t.allowsVerticalWritingMode(S)&&m&&g&&(C.vertical=t.shapeText(E,n,w,D,d,I,O,P,T,24,t.WritingMode.vertical))}var k=void 0;if(b.icon){var M=i[b.icon];M&&(k=t.shapeIcon(o[b.icon],s.get("icon-offset").evaluate(b,{}),s.get("icon-anchor").evaluate(b,{})),void 0===e.sdfIcons?e.sdfIcons=M.sdf:e.sdfIcons!==M.sdf&&t.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),M.pixelRatio!==e.pixelRatio?e.iconsNeedLinear=!0:0!==s.get("icon-rotate").constantOr(1)&&(e.iconsNeedLinear=!0))}(C.horizontal||k)&&_(e,b,C,k,x,l)}a&&e.generateCollisionDebugBuffers()}function _(e,n,r,i,o,a){var s=a.layoutTextSize.evaluate(n,{}),h=a.layoutIconSize.evaluate(n,{}),p=a.textMaxSize.evaluate(n,{});void 0===p&&(p=s);var d=e.layers[0].layout,m=d.get("text-offset").evaluate(n,{}),g=d.get("icon-offset").evaluate(n,{}),v=e.tilePixelRatio*(s/24),b=e.tilePixelRatio*p/24,_=e.tilePixelRatio*h,E=e.tilePixelRatio*d.get("symbol-spacing"),S=d.get("text-padding")*e.tilePixelRatio,T=d.get("icon-padding")*e.tilePixelRatio,A=d.get("text-max-angle")/180*Math.PI,P="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),I="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),O=d.get("symbol-placement"),D=E/2,k=function(s,u){u.x<0||u.x>=t.EXTENT||u.y<0||u.y>=t.EXTENT||function(e,n,r,i,o,a,s,u,l,h,p,f,d,m,g,v,b,_,C,E,S){var T,A,P=e.addToLineVertexArray(n,r),I=0,O=0,D=0,k=y(i.horizontal?i.horizontal.text:""),M=[];if(i.horizontal){var R=a.layout.get("text-rotate").evaluate(C,{});T=new c(s,r,n,u,l,h,i.horizontal,p,f,d,e.overscaling,R),O+=x(e,n,i.horizontal,a,d,C,m,P,i.vertical?t.WritingMode.horizontal:t.WritingMode.horizontalOnly,M,E,S),i.vertical&&(D+=x(e,n,i.vertical,a,d,C,m,P,t.WritingMode.vertical,M,E,S))}var N=T?T.boxStartIndex:e.collisionBoxArray.length,L=T?T.boxEndIndex:e.collisionBoxArray.length;if(o){var F=function(e,n,r,i,o,a){var s,u,l,c,h=n.image,p=r.layout,f=n.top-1/h.pixelRatio,d=n.left-1/h.pixelRatio,m=n.bottom+1/h.pixelRatio,g=n.right+1/h.pixelRatio;if("none"!==p.get("icon-text-fit")&&o){var y=g-d,v=m-f,b=p.get("text-size").evaluate(a,{})/24,_=o.left*b,w=o.top*b,x=o.right*b-_,C=o.bottom*b-w,E=p.get("icon-text-fit-padding")[0],S=p.get("icon-text-fit-padding")[1],T=p.get("icon-text-fit-padding")[2],A=p.get("icon-text-fit-padding")[3],P="width"===p.get("icon-text-fit")?.5*(C-v):0,I="height"===p.get("icon-text-fit")?.5*(x-y):0,O="width"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?x:y,D="height"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?C:v;s=new t.Point(_+I-A,w+P-E),u=new t.Point(_+I+S+O,w+P-E),l=new t.Point(_+I+S+O,w+P+T+D),c=new t.Point(_+I-A,w+P+T+D)}else s=new t.Point(d,f),u=new t.Point(g,f),l=new t.Point(g,m),c=new t.Point(d,m);var k=r.layout.get("icon-rotate").evaluate(a,{})*Math.PI/180;if(k){var M=Math.sin(k),R=Math.cos(k),N=[R,-M,M,R];s._matMult(N),u._matMult(N),c._matMult(N),l._matMult(N)}return[{tl:s,tr:u,bl:c,br:l,tex:h.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,o,a,0,i.horizontal,C),B=a.layout.get("icon-rotate").evaluate(C,{});A=new c(s,r,n,u,l,h,o,g,v,!1,e.overscaling,B),I=4*F.length;var j=e.iconSizeData,z=null;"source"===j.functionType?(z=[t.SIZE_PACK_FACTOR*a.layout.get("icon-size").evaluate(C,{})])[0]>w&&t.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'):"composite"===j.functionType&&((z=[t.SIZE_PACK_FACTOR*S.compositeIconSizes[0].evaluate(C,{}),t.SIZE_PACK_FACTOR*S.compositeIconSizes[1].evaluate(C,{})])[0]>w||z[1]>w)&&t.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'),e.addSymbols(e.icon,F,z,_,b,C,!1,n,P.lineStartIndex,P.lineLength)}var V=A?A.boxStartIndex:e.collisionBoxArray.length,U=A?A.boxEndIndex:e.collisionBoxArray.length;e.glyphOffsetArray.length>=t.SymbolBucket.MAX_GLYPHS&&t.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),e.symbolInstances.emplaceBack(n.x,n.y,M.length>0?M[0]:-1,M.length>1?M[1]:-1,k,N,L,V,U,u,O,D,I,0)}(e,u,s,r,i,e.layers[0],e.collisionBoxArray,n.index,n.sourceLayerIndex,e.index,v,S,P,m,_,T,I,g,n,o,a)};if("line"===O)for(var M=0,R=function(e,n,r,i,o){for(var a=[],s=0;s<e.length;s++)for(var u=e[s],l=void 0,c=0;c<u.length-1;c++){var h=u[c],p=u[c+1];h.x<0&&p.x<0||(h.x<0?h=new t.Point(0,h.y+(0-h.x)/(p.x-h.x)*(p.y-h.y))._round():p.x<0&&(p=new t.Point(0,h.y+(0-h.x)/(p.x-h.x)*(p.y-h.y))._round()),h.y<0&&p.y<0||(h.y<0?h=new t.Point(h.x+(0-h.y)/(p.y-h.y)*(p.x-h.x),0)._round():p.y<0&&(p=new t.Point(h.x+(0-h.y)/(p.y-h.y)*(p.x-h.x),0)._round()),h.x>=i&&p.x>=i||(h.x>=i?h=new t.Point(i,h.y+(i-h.x)/(p.x-h.x)*(p.y-h.y))._round():p.x>=i&&(p=new t.Point(i,h.y+(i-h.x)/(p.x-h.x)*(p.y-h.y))._round()),h.y>=o&&p.y>=o||(h.y>=o?h=new t.Point(h.x+(o-h.y)/(p.y-h.y)*(p.x-h.x),o)._round():p.y>=o&&(p=new t.Point(h.x+(o-h.y)/(p.y-h.y)*(p.x-h.x),o)._round()),l&&h.equals(l[l.length-1])||a.push(l=[h]),l.push(p)))))}return a}(n.geometry,0,0,t.EXTENT,t.EXTENT);M<R.length;M+=1)for(var N=R[M],L=0,F=l(N,E,A,r.vertical||r.horizontal,i,24,b,e.overscaling,t.EXTENT);L<F.length;L+=1){var B=F[L],j=r.horizontal;j&&C(e,j.text,D,B)||k(N,B)}else if("line-center"===O)for(var z=0,V=n.geometry;z<V.length;z+=1){var U=V[z];if(U.length>1){var q=u(U,A,r.vertical||r.horizontal,i,24,b);q&&k(U,q)}}else if("Polygon"===n.type)for(var G=0,H=t.classifyRings(n.geometry,0);G<H.length;G+=1){var W=H[G],K=f(W,16);k(W[0],new t.Anchor(K.x,K.y,0))}else if("LineString"===n.type)for(var X=0,Q=n.geometry;X<Q.length;X+=1){var Z=Q[X];k(Z,new t.Anchor(Z[0].x,Z[0].y,0))}else if("Point"===n.type)for(var Y=0,J=n.geometry;Y<J.length;Y+=1)for(var $=0,tt=J[Y];$<tt.length;$+=1){var et=tt[$];k([et],new t.Anchor(et.x,et.y,0))}}y.murmur3=g,y.murmur2=v;var w=65535;function x(e,n,r,i,o,a,s,u,l,c,h,p){var f=function(e,n,r,i,o,a){for(var s=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=r.layout.get("text-offset").evaluate(o,{}).map(function(t){return 24*t}),l=n.positionedGlyphs,c=[],h=0;h<l.length;h++){var p=l[h],f=a[p.fontStack],d=f&&f[p.glyph];if(d){var m=d.rect;if(m){var g=t.GLYPH_PBF_BORDER+1,y=d.metrics.advance*p.scale/2,v=i?[p.x+y,p.y]:[0,0],b=i?[0,0]:[p.x+y+u[0],p.y+u[1]],_=(d.metrics.left-g)*p.scale-y+b[0],w=(-d.metrics.top-g)*p.scale+b[1],x=_+m.w*p.scale,C=w+m.h*p.scale,E=new t.Point(_,w),S=new t.Point(x,w),T=new t.Point(_,C),A=new t.Point(x,C);if(i&&p.vertical){var P=new t.Point(-y,y),I=-Math.PI/2,O=new t.Point(5,0);E._rotateAround(I,P)._add(O),S._rotateAround(I,P)._add(O),T._rotateAround(I,P)._add(O),A._rotateAround(I,P)._add(O)}if(s){var D=Math.sin(s),k=Math.cos(s),M=[k,-D,D,k];E._matMult(M),S._matMult(M),T._matMult(M),A._matMult(M)}c.push({tl:E,tr:S,bl:T,br:A,tex:m,writingMode:n.writingMode,glyphOffset:v})}}}return c}(0,r,i,o,a,h),d=e.textSizeData,m=null;return"source"===d.functionType?(m=[t.SIZE_PACK_FACTOR*i.layout.get("text-size").evaluate(a,{})])[0]>w&&t.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'):"composite"===d.functionType&&((m=[t.SIZE_PACK_FACTOR*p.compositeTextSizes[0].evaluate(a,{}),t.SIZE_PACK_FACTOR*p.compositeTextSizes[1].evaluate(a,{})])[0]>w||m[1]>w)&&t.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'),e.addSymbols(e.text,f,m,s,o,a,l,n,u.lineStartIndex,u.lineLength),c.push(e.text.placedSymbolArray.length-1),4*f.length}function C(t,e,n,r){var i=t.compareText;if(e in i){for(var o=i[e],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[e]=[];return i[e].push(r),!1}var E=function(e){var n={},r=[];for(var i in e){var o=e[i],a=n[i]={};for(var s in o){var u=o[+s];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var l={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};r.push(l),a[s]={rect:l,metrics:u.metrics}}}}var c=t.potpack(r),h=new t.AlphaImage({width:c.w||1,height:c.h||1});for(var p in e){var f=e[p];for(var d in f){var m=f[+d];if(m&&0!==m.bitmap.width&&0!==m.bitmap.height){var g=n[p][d].rect;t.AlphaImage.copy(m.bitmap,h,{x:0,y:0},{x:g.x+1,y:g.y+1},m.bitmap)}}}this.image=h,this.positions=n};t.register("GlyphAtlas",E);var S=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies};function T(e,n){for(var r=new t.EvaluationParameters(n),i=0,o=e;i<o.length;i+=1)o[i].recalculate(r)}S.prototype.parse=function(e,n,r,i){var o=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var a=new t.DictionaryCoder(Object.keys(e.layers).sort()),s=new t.FeatureIndex(this.tileID);s.bucketLayerIDs=[];var u,l,c,h,p={},f={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{}},d=n.familiesBySource[this.source];for(var m in d){var g=e.layers[m];if(g){1===g.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+m+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var y=a.encode(m),v=[],_=0;_<g.length;_++){var w=g.feature(_);v.push({feature:w,index:_,sourceLayerIndex:y})}for(var x=0,C=d[m];x<C.length;x+=1){var S=C[x],A=S[0];A.minzoom&&this.zoom<Math.floor(A.minzoom)||A.maxzoom&&this.zoom>=A.maxzoom||"none"!==A.visibility&&(T(S,this.zoom),(p[A.id]=A.createBucket({index:s.bucketLayerIDs.length,layers:S,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:y,sourceID:this.source})).populate(v,f),s.bucketLayerIDs.push(S.map(function(t){return t.id})))}}}var P=t.mapObject(f.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(P).length?r.send("getGlyphs",{uid:this.uid,stacks:P},function(t,e){u||(u=t,l=e,D.call(o))}):l={};var I=Object.keys(f.iconDependencies);I.length?r.send("getImages",{icons:I},function(t,e){u||(u=t,c=e,D.call(o))}):c={};var O=Object.keys(f.patternDependencies);function D(){if(u)return i(u);if(l&&c&&h){var e=new E(l),n=new t.ImageAtlas(c,h);for(var r in p){var o=p[r];o instanceof t.SymbolBucket?(T(o.layers,this.zoom),b(o,l,e.positions,c,n.iconPositions,this.showCollisionBoxes)):o.hasPattern&&(o instanceof t.LineBucket||o instanceof t.FillBucket||o instanceof t.FillExtrusionBucket)&&(T(o.layers,this.zoom),o.addFeatures(f,n.patternPositions))}this.status="done",i(null,{buckets:t.values(p).filter(function(t){return!t.isEmpty()}),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:n,glyphMap:this.returnDependencies?l:null,iconMap:this.returnDependencies?c:null,glyphPositions:this.returnDependencies?e.positions:null})}}O.length?r.send("getImages",{icons:O},function(t,e){u||(u=t,h=e,D.call(o))}):h={},D.call(this)};var A="undefined"!=typeof performance,P={getEntriesByName:function(t){return!!(A&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(t)},mark:function(t){return!!(A&&performance&&performance.mark)&&performance.mark(t)},measure:function(t,e,n){return!!(A&&performance&&performance.measure)&&performance.measure(t,e,n)},clearMarks:function(t){return!!(A&&performance&&performance.clearMarks)&&performance.clearMarks(t)},clearMeasures:function(t){return!!(A&&performance&&performance.clearMeasures)&&performance.clearMeasures(t)}},I=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},P.mark(this._marks.start)};function O(e,n){var r=t.getArrayBuffer(e.request,function(e,r,i,o){e?n(e):r&&n(null,{vectorTile:new t.mvt.VectorTile(new t.Protobuf(r)),rawData:r,cacheControl:i,expires:o})});return function(){r.cancel(),n()}}I.prototype.finish=function(){P.mark(this._marks.end);var t=P.getEntriesByName(this._marks.measure);return 0===t.length&&(P.measure(this._marks.measure,this._marks.start,this._marks.end),t=P.getEntriesByName(this._marks.measure),P.clearMarks(this._marks.start),P.clearMarks(this._marks.end),P.clearMeasures(this._marks.measure)),t},P.Performance=I;var D=function(t,e,n){this.actor=t,this.layerIndex=e,this.loadVectorData=n||O,this.loading={},this.loaded={}};D.prototype.loadTile=function(e,n){var r=this,i=e.uid;this.loading||(this.loading={});var o=!!(e&&e.request&&e.request.collectResourceTiming)&&new P.Performance(e.request),a=this.loading[i]=new S(e);a.abort=this.loadVectorData(e,function(e,s){if(delete r.loading[i],e||!s)return a.status="done",r.loaded[i]=a,n(e);var u=s.rawData,l={};s.expires&&(l.expires=s.expires),s.cacheControl&&(l.cacheControl=s.cacheControl);var c={};if(o){var h=o.finish();h&&(c.resourceTiming=JSON.parse(JSON.stringify(h)))}a.vectorTile=s.vectorTile,a.parse(s.vectorTile,r.layerIndex,r.actor,function(e,r){if(e||!r)return n(e);n(null,t.extend({rawTileData:u.slice(0)},r,l,c))}),r.loaded=r.loaded||{},r.loaded[i]=a})},D.prototype.reloadTile=function(t,e){var n=this.loaded,r=t.uid,i=this;if(n&&n[r]){var o=n[r];o.showCollisionBoxes=t.showCollisionBoxes;var a=function(t,n){var r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,i.actor,r)),e(t,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.actor,a):a())}},D.prototype.abortTile=function(t,e){var n=this.loading,r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()},D.prototype.removeTile=function(t,e){var n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()};var k=function(){this.loaded={}};k.prototype.loadTile=function(e,n){var r=e.uid,i=new t.DEMData(r,e.rawImageData,e.encoding);this.loaded=this.loaded||{},this.loaded[r]=i,n(null,i)},k.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var M={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function R(t){var e=0;if(t&&t.length>0){e+=Math.abs(N(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(N(t[n]))}return e}function N(t){var e,n,r,i,o,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,i=u-1,o=0):a===u-1?(r=u-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],s+=(L(t[o][0])-L(e[0]))*Math.sin(L(n[1]));s=s*M.RADIUS*M.RADIUS/2}return s}function L(t){return t*Math.PI/180}var F={geometry:function t(e){var n,r=0;switch(e.type){case"Polygon":return R(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=R(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}},ring:N};function B(t,e){return function(n){return t(n,e)}}function j(t,e){t[0]=z(t[0],e=!!e);for(var n=1;n<t.length;n++)t[n]=z(t[n],!e);return t}function z(t,e){return function(t){return F.ring(t)>=0}(t)===e?t:t.reverse()}var V=t.mvt.VectorTileFeature.prototype.toGeoJSON,U=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};U.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],n=0,r=this._feature.geometry;n<r.length;n+=1){var i=r[n];e.push([new t.Point(i[0],i[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var u=[],l=0,c=s[a];l<c.length;l+=1){var h=c[l];u.push(new t.Point(h[0],h[1]))}o.push(u)}return o},U.prototype.toGeoJSON=function(t,e,n){return V.call(this,t,e,n)};var q=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};q.prototype.feature=function(t){return new U(this._features[t])};var G=t.vectorTile.VectorTileFeature,H=W;function W(t,e){this.options=e||{},this.features=t,this.length=t.length}function K(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}W.prototype.feature=function(t){return new K(this.features[t],this.options.extent)},K.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var r=e[n],i=[],o=0;o<r.length;o++)i.push(new t.Point$1(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},K.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[e,r,n,i]},K.prototype.toGeoJSON=G.prototype.toGeoJSON;var X=Z,Q=H;function Z(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,Y,t.layers[n])}(e,n),n.finish()}function Y(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,J,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,rt,o[n])}function J(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,$,t),e.writeVarintField(3,n.type),e.writeMessage(4,nt,n)}function $(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(r.push(s),o[s]=u=r.length-1),e.writeVarint(u);var l=n.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var h=c+":"+l,p=a[h];void 0===p&&(i.push(l),a[h]=p=i.length-1),e.writeVarint(p)}}function tt(t,e){return(e<<3)+(7&t)}function et(t){return t<<1^t>>31}function nt(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],l=1;1===r&&(l=u.length),e.writeVarint(tt(1,l));for(var c=3===r?u.length-1:u.length,h=0;h<c;h++){1===h&&1!==r&&e.writeVarint(tt(2,c-1));var p=u[h].x-i,f=u[h].y-o;e.writeVarint(et(p)),e.writeVarint(et(f)),i+=p,o+=f}3===r&&e.writeVarint(tt(7,1))}}function rt(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function it(t,e,n,r){ot(t,n,r),ot(e,2*n,2*r),ot(e,2*n+1,2*r+1)}function ot(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function at(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}X.fromVectorTileJs=Z,X.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new H(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return Z({layers:n})},X.GeoJSONWrapper=Q;var st=function(t){return t[0]},ut=function(t){return t[1]},lt=function(t,e,n,r,i){void 0===e&&(e=st),void 0===n&&(n=ut),void 0===r&&(r=64),void 0===i&&(i=Float64Array),this.nodeSize=r,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new i(2*t.length),u=0;u<t.length;u++)a[u]=u,s[2*u]=e(t[u]),s[2*u+1]=n(t[u]);!function t(e,n,r,i,o,a){if(!(o-i<=r)){var s=i+o>>1;!function t(e,n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);t(e,n,r,Math.max(i,Math.floor(r-u*c/s+h)),Math.min(o,Math.floor(r+(s-u)*c/s+h)),a)}var p=n[2*r+a],f=i,d=o;for(it(e,n,i,r),n[2*o+a]>p&&it(e,n,i,o);f<d;){for(it(e,n,f,d),f++,d--;n[2*f+a]<p;)f++;for(;n[2*d+a]>p;)d--}n[2*i+a]===p?it(e,n,i,d):it(e,n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(e,n,s,i,o,a%2),t(e,n,r,i,s-1,a+1),t(e,n,r,s+1,o,a+1)}}(a,s,r,0,a.length-1,0)};lt.prototype.range=function(t,e,n,r){return function(t,e,n,r,i,o,a){for(var s,u,l=[0,t.length-1,0],c=[];l.length;){var h=l.pop(),p=l.pop(),f=l.pop();if(p-f<=a)for(var d=f;d<=p;d++)u=e[2*d+1],(s=e[2*d])>=n&&s<=i&&u>=r&&u<=o&&c.push(t[d]);else{var m=Math.floor((f+p)/2);u=e[2*m+1],(s=e[2*m])>=n&&s<=i&&u>=r&&u<=o&&c.push(t[m]);var g=(h+1)%2;(0===h?n<=s:r<=u)&&(l.push(f),l.push(m-1),l.push(g)),(0===h?i>=s:o>=u)&&(l.push(m+1),l.push(p),l.push(g))}}return c}(this.ids,this.coords,t,e,n,r,this.nodeSize)},lt.prototype.within=function(t,e,n){return function(t,e,n,r,i,o){for(var a=[0,t.length-1,0],s=[],u=i*i;a.length;){var l=a.pop(),c=a.pop(),h=a.pop();if(c-h<=o)for(var p=h;p<=c;p++)at(e[2*p],e[2*p+1],n,r)<=u&&s.push(t[p]);else{var f=Math.floor((h+c)/2),d=e[2*f],m=e[2*f+1];at(d,m,n,r)<=u&&s.push(t[f]);var g=(l+1)%2;(0===l?n-i<=d:r-i<=m)&&(a.push(h),a.push(f-1),a.push(g)),(0===l?n+i>=d:r+i>=m)&&(a.push(f+1),a.push(c),a.push(g))}}return s}(this.ids,this.coords,t,e,n,this.nodeSize)};var ct={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,map:function(t){return t}},ht=function(t){this.options=vt(Object.create(ct),t),this.trees=new Array(this.options.maxZoom+1)};function pt(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function ft(t,e){var n=t.geometry.coordinates,r=n[1];return{x:gt(n[0]),y:yt(r),zoom:1/0,index:e,parentId:-1}}function dt(t){return{type:"Feature",id:t.id,properties:mt(t),geometry:{type:"Point",coordinates:[(r=t.x,360*(r-.5)),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n,r}function mt(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return vt(vt({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function gt(t){return t/360+.5}function yt(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function vt(t,e){for(var n in e)t[n]=e[n];return t}function bt(t){return t.x}function _t(t){return t.y}function wt(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((t-n)*a+(e-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return(a=t-n)*a+(s=e-r)*s}function xt(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)Ct(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)Ct(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)Ct(t,e[r][i])}(i),i}function Ct(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function Et(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=e.id;if(n.promoteId?u=e.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===o)St(i,s);else if("MultiPoint"===o)for(var l=0;l<i.length;l++)St(i[l],s);else if("LineString"===o)Tt(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(l=0;l<i.length;l++)Tt(i[l],s=[],a,!1),t.push(xt(u,"LineString",s,e.properties));return}At(i,s,a,!1)}else if("Polygon"===o)At(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(l=0;l<e.geometry.geometries.length;l++)Et(t,{id:u,geometry:e.geometry.geometries[l],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<i.length;l++){var c=[];At(i[l],c,a,!0),s.push(c)}}t.push(xt(u,o,s,e.properties))}}function St(t,e){e.push(Pt(t[0])),e.push(It(t[1])),e.push(0)}function Tt(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var u=Pt(t[s][0]),l=It(t[s][1]);e.push(u),e.push(l),e.push(0),s>0&&(a+=r?(i*l-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(l-o,2))),i=u,o=l}var c=e.length-3;e[2]=1,function t(e,n,r,i){for(var o,a=i,s=r-n>>1,u=r-n,l=e[n],c=e[n+1],h=e[r],p=e[r+1],f=n+3;f<r;f+=3){var d=wt(e[f],e[f+1],l,c,h,p);if(d>a)o=f,a=d;else if(d===a){var m=Math.abs(f-s);m<u&&(o=f,u=m)}}a>i&&(o-n>3&&t(e,n,o,i),e[o+2]=a,r-o>3&&t(e,o,r,i))}(e,0,c,n),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function At(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];Tt(t[i],o,n,r),e.push(o)}}function Pt(t){return t/360+.5}function It(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function Ot(t,e,n,r,i,o,a,s){if(r/=e,o>=(n/=e)&&a<r)return t;if(a<n||o>=r)return null;for(var u=[],l=0;l<t.length;l++){var c=t[l],h=c.geometry,p=c.type,f=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(f>=n&&d<r)u.push(c);else if(!(d<n||f>=r)){var m=[];if("Point"===p||"MultiPoint"===p)Dt(h,m,n,r,i);else if("LineString"===p)kt(h,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===p)Rt(h,m,n,r,i,!1);else if("Polygon"===p)Rt(h,m,n,r,i,!0);else if("MultiPolygon"===p)for(var g=0;g<h.length;g++){var y=[];Rt(h[g],y,n,r,i,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===p){for(g=0;g<m.length;g++)u.push(xt(c.id,p,m[g],c.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===m.length?(p="LineString",m=m[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===m.length?"Point":"MultiPoint"),u.push(xt(c.id,p,m,c.tags))}}}return u.length?u:null}function Dt(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function kt(t,e,n,r,i,o,a){for(var s,u,l=Mt(t),c=0===i?Lt:Ft,h=t.start,p=0;p<t.length-3;p+=3){var f=t[p],d=t[p+1],m=t[p+2],g=t[p+3],y=t[p+4],v=0===i?f:d,b=0===i?g:y,_=!1;a&&(s=Math.sqrt(Math.pow(f-g,2)+Math.pow(d-y,2))),v<n?b>n&&(u=c(l,f,d,g,y,n),a&&(l.start=h+s*u)):v>r?b<r&&(u=c(l,f,d,g,y,r),a&&(l.start=h+s*u)):Nt(l,f,d,m),b<n&&v>=n&&(u=c(l,f,d,g,y,n),_=!0),b>r&&v<=r&&(u=c(l,f,d,g,y,r),_=!0),!o&&_&&(a&&(l.end=h+s*u),e.push(l),l=Mt(t)),a&&(h+=s)}var w=t.length-3;f=t[w],d=t[w+1],m=t[w+2],(v=0===i?f:d)>=n&&v<=r&&Nt(l,f,d,m),w=l.length-3,o&&w>=3&&(l[w]!==l[0]||l[w+1]!==l[1])&&Nt(l,l[0],l[1],l[2]),l.length&&e.push(l)}function Mt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function Rt(t,e,n,r,i,o){for(var a=0;a<t.length;a++)kt(t[a],e,n,r,i,o,!1)}function Nt(t,e,n,r){t.push(e),t.push(n),t.push(r)}function Lt(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function Ft(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function Bt(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=jt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(jt(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var u=[],l=0;l<o.geometry[s].length;l++)u.push(jt(o.geometry[s][l],e));i.push(u)}n.push(xt(o.id,a,i,o.tags))}return n}function jt(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function zt(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var u=t.features[n],l=u.geometry,c=u.type;if(u.geometry=[],1===c)for(r=0;r<l.length;r+=2)u.geometry.push(Vt(l[r],l[r+1],e,o,a,s));else for(r=0;r<l.length;r++){var h=[];for(i=0;i<l[r].length;i+=2)h.push(Vt(l[r][i],l[r][i+1],e,o,a,s));u.geometry.push(h)}}return t.transformed=!0,t}function Vt(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function Ut(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,qt(a,t[s],o,i);var u=t[s].minX,l=t[s].minY,c=t[s].maxX,h=t[s].maxY;u<a.minX&&(a.minX=u),l<a.minY&&(a.minY=l),c>a.maxX&&(a.maxX=c),h>a.maxY&&(a.maxY=h)}return a}function qt(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)Gt(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)Gt(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var l=i[u];for(s=0;s<l.length;s++)Gt(a,l[s],t,n,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var p={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(p.id=e.id),t.features.push(p)}}function Gt(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],u=0;u<e.length;u+=3)(0===r||e[u+2]>a)&&(n.numSimplified++,s.push(e[u]),s.push(e[u+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(s,o),t.push(s)}}function Ht(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)Et(n,t.features[r],e,r);else Et(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(t,e){var n=e.buffer/e.extent,r=t,i=Ot(t,1,-1-n,n,0,-1,2,e),o=Ot(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=Ot(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=Bt(i,1).concat(r)),o&&(r=r.concat(Bt(o,-1)))),r}(r,e)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Wt(t,e,n){return 32*((1<<t)*n+e)+t}function Kt(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);var i=new q(r.features),o=X(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}ht.prototype.load=function(t){var e=this.options,n=e.log,r=e.minZoom,i=e.maxZoom,o=e.nodeSize;n&&console.time("total time");var a="prepare "+t.length+" points";n&&console.time(a),this.points=t;for(var s=[],u=0;u<t.length;u++)t[u].geometry&&s.push(ft(t[u],u));this.trees[i+1]=new lt(s,bt,_t,o,Float32Array),n&&console.timeEnd(a);for(var l=i;l>=r;l--){var c=+Date.now();s=this._cluster(s,l),this.trees[l]=new lt(s,bt,_t,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,s.length,+Date.now()-c)}return n&&console.timeEnd("total time"),this},ht.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],l=[],c=0,h=u.range(gt(n),yt(o),gt(i),yt(r));c<h.length;c+=1){var p=u.points[h[c]];l.push(p.numPoints?dt(p):this.points[p.index])}return l},ht.prototype.getChildren=function(t){var e=t>>5,n=t%32,r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=[],u=0,l=i.within(o.x,o.y,a);u<l.length;u+=1){var c=i.points[l[u]];c.parentId===t&&s.push(c.numPoints?dt(c):this.points[c.index])}if(0===s.length)throw new Error(r);return s},ht.prototype.getLeaves=function(t,e,n){var r=[];return this._appendLeaves(r,t,e=e||10,n=n||0,0),r},ht.prototype.getTile=function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.radius/o.extent,s=(n-a)/i,u=(n+1+a)/i,l={features:[]};return this._addTileFeatures(r.range((e-a)/i,s,(e+1+a)/i,u),r.points,e,n,i,l),0===e&&this._addTileFeatures(r.range(1-a/i,s,1,u),r.points,i,n,i,l),e===i-1&&this._addTileFeatures(r.range(0,s,a/i,u),r.points,-1,n,i,l),l.features.length?l:null},ht.prototype.getClusterExpansionZoom=function(t){for(var e=t%32-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},ht.prototype._appendLeaves=function(t,e,n,r,i){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var s=a[o],u=s.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(t,u.cluster_id,n,r,i):i<r?i++:t.push(s),t.length===n)break}return i},ht.prototype._addTileFeatures=function(t,e,n,r,i,o){for(var a=0,s=t;a<s.length;a+=1){var u=e[s[a]],l={type:1,geometry:[[Math.round(this.options.extent*(u.x*i-n)),Math.round(this.options.extent*(u.y*i-r))]],tags:u.numPoints?mt(u):this.points[u.index].properties},c=u.numPoints?u.id:this.points[u.index].id;void 0!==c&&(l.id=c),o.features.push(l)}},ht.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},ht.prototype._cluster=function(t,e){for(var n=[],r=this.options,i=r.reduce,o=r.radius/(r.extent*Math.pow(2,e)),a=0;a<t.length;a++){var s=t[a];if(!(s.zoom<=e)){s.zoom=e;for(var u=this.trees[e+1],l=u.within(s.x,s.y,o),c=s.numPoints||1,h=s.x*c,p=s.y*c,f=i?this._map(s,!0):null,d=(a<<5)+(e+1),m=0,g=l;m<g.length;m+=1){var y=u.points[g[m]];if(!(y.zoom<=e)){y.zoom=e;var v=y.numPoints||1;h+=y.x*v,p+=y.y*v,c+=v,y.parentId=d,i&&i(f,this._map(y))}}1===c?n.push(s):(s.parentId=d,n.push(pt(h/c,p/c,d,c,f)))}}return n},ht.prototype._map=function(t,e){if(t.numPoints)return e?vt({},t.properties):t.properties;var n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?vt({},r):r},Ht.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ht.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],u=this.options,l=u.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,h=Wt(e,n,r),p=this.tiles[h];if(!p&&(l>1&&console.time("creation"),p=this.tiles[h]=Ut(t,e,n,r,u),this.tileCoords.push({z:e,x:n,y:r}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var f="z"+e;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(p.source=t,i){if(e===u.maxZoom||e===i)continue;var d=1<<i-e;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(e===u.indexMaxZoom||p.numPoints<=u.indexMaxPoints)continue;if(p.source=null,0!==t.length){l>1&&console.time("clipping");var m,g,y,v,b,_,w=.5*u.buffer/u.extent,x=.5-w,C=.5+w,E=1+w;m=g=y=v=null,b=Ot(t,c,n-w,n+C,0,p.minX,p.maxX,u),_=Ot(t,c,n+x,n+E,0,p.minX,p.maxX,u),t=null,b&&(m=Ot(b,c,r-w,r+C,1,p.minY,p.maxY,u),g=Ot(b,c,r+x,r+E,1,p.minY,p.maxY,u),b=null),_&&(y=Ot(_,c,r-w,r+C,1,p.minY,p.maxY,u),v=Ot(_,c,r+x,r+E,1,p.minY,p.maxY,u),_=null),l>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*n,2*r),s.push(g||[],e+1,2*n,2*r+1),s.push(y||[],e+1,2*n+1,2*r),s.push(v||[],e+1,2*n+1,2*r+1)}}},Ht.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=Wt(t,e=(e%a+a)%a,n);if(this.tiles[s])return zt(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var u,l=t,c=e,h=n;!u&&l>0;)l--,c=Math.floor(c/2),h=Math.floor(h/2),u=this.tiles[Wt(l,c,h)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",l,c,h),o>1&&console.time("drilling down"),this.splitTile(u.source,l,c,h,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?zt(this.tiles[s],i):null):null};var Xt=function(e){function n(t,n,r){e.call(this,t,n,Kt),r&&(this.loadGeoJSON=r)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var n=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var i=!!(r&&r.request&&r.request.collectResourceTiming)&&new P.Performance(r.request);this.loadGeoJSON(r,function(o,a){if(o||!a)return n(o);if("object"!=typeof a)return n(new Error("Input data is not a valid GeoJSON object."));!function t(e,n){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(B(t,n)),e;case"GeometryCollection":return e.geometries=e.geometries.map(B(t,n)),e;case"Feature":return e.geometry=t(e.geometry,n),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=j(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(B(j,e))),t}(e,n);default:return e}}(a,!0);try{e._geoJSONIndex=r.cluster?new ht(function(e){var n=e.superclusterOptions,r=e.clusterProperties;if(!r||!n)return n;for(var i={},o={},a={accumulated:null,zoom:0},s={properties:null},u=Object.keys(r),l=0,c=u;l<c.length;l+=1){var h=c[l],p=r[h],f=p[0],d=t.createExpression(p[1]),m=t.createExpression("string"==typeof f?[f,["accumulated"],["get",h]]:f);i[h]=d.value,o[h]=m.value}return n.map=function(t){s.properties=t;for(var e={},n=0,r=u;n<r.length;n+=1){var o=r[n];e[o]=i[o].evaluate(a,s)}return e},n.reduce=function(t,e){s.properties=e;for(var n=0,r=u;n<r.length;n+=1){var i=r[n];a.accumulated=t[i],t[i]=o[i].evaluate(a,s)}},n}(r)).load(a.features):new Ht(a,r.geojsonVtOptions)}catch(o){return n(o)}e.loaded={};var s={};if(i){var u=i.finish();u&&(s.resourceTiming={},s.resourceTiming[r.source]=JSON.parse(JSON.stringify(u)))}n(null,s)})}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(t,n){var r=this.loaded;return r&&r[t.uid]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},n.prototype.loadGeoJSON=function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data is not a valid GeoJSON object."));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},n.prototype.getClusterExpansionZoom=function(t,e){e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))},n.prototype.getClusterChildren=function(t,e){e(null,this._geoJSONIndex.getChildren(t.clusterId))},n.prototype.getClusterLeaves=function(t,e){e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))},n}(D),Qt=function(e){var n=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.workerSourceTypes={vector:D,geojson:Xt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isLoaded())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return Qt.prototype.setReferrer=function(t,e){this.referrer=e},Qt.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},Qt.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},Qt.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},Qt.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},Qt.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},Qt.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},Qt.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},Qt.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},Qt.prototype.removeSource=function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}},Qt.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},Qt.prototype.loadRTLTextPlugin=function(e,n,r){try{t.plugin.isLoaded()||(this.self.importScripts(n),r(t.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+n)))}catch(t){r(t.toString())}},Qt.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e},Qt.prototype.getWorkerSource=function(t,e,n){var r=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][n]||(this.workerSources[t][e][n]=new this.workerSourceTypes[e]({send:function(e,n,i){r.actor.send(e,n,i,t)}},this.getLayerIndex(t))),this.workerSources[t][e][n]},Qt.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new k),this.demWorkerSources[t][e]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Qt(self)),Qt}),r(0,function(t){var e=t.createCommonjsModule(function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(t){return void 0===n[t]&&(n[t]=function(t){var n=document.createElement("canvas"),r=Object.create(e.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(t)),n[t]}(t&&t.failIfMajorPerformanceCaveat))}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var n={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),n={create:function(e,n,r){var i=t.window.document.createElement(e);return n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},r=t.window.document?t.window.document.documentElement.style:null;function i(t){if(!r)return null;for(var e=0;e<t.length;e++)if(t[e]in r)return t[e];return t[0]}var o,a=i(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){r&&a&&(o=r[a],r[a]="none")},n.enableDrag=function(){r&&a&&(r[a]=o)};var s=i(["transform","WebkitTransform"]);n.setTransform=function(t,e){t.style[s]=e};var u=!1;try{var l=Object.defineProperty({},"passive",{get:function(){u=!0}});t.window.addEventListener("test",l,l),t.window.removeEventListener("test",l,l)}catch(t){u=!1}n.addEventListener=function(t,e,n,r){void 0===r&&(r={}),t.addEventListener(e,n,"passive"in r&&u?r:r.capture)},n.removeEventListener=function(t,e,n,r){void 0===r&&(r={}),t.removeEventListener(e,n,"passive"in r&&u?r:r.capture)};var c=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",c,!0)};n.suppressClick=function(){t.window.addEventListener("click",c,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",c,!0)},0)},n.mousePos=function(e,n){var r=e.getBoundingClientRect();return new t.Point((n=n.touches?n.touches[0]:n).clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop)},n.touchPos=function(e,n){for(var r=e.getBoundingClientRect(),i=[],o="touchend"===n.type?n.changedTouches:n.touches,a=0;a<o.length;a++)i.push(new t.Point(o[a].clientX-r.left-e.clientLeft,o[a].clientY-r.top-e.clientTop));return i},n.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},n.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var h=function(){this.images={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0};h.prototype.isLoaded=function(){return this.loaded},h.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var r=n[e];this._notify(r.ids,r.callback)}this.requestors=[]}},h.prototype.getImage=function(t){return this.images[t]},h.prototype.addImage=function(t,e){this.images[t]=e},h.prototype.removeImage=function(t){delete this.images[t],delete this.patterns[t]},h.prototype.listImages=function(){return Object.keys(this.images)},h.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var r=0,i=t;r<i.length;r+=1)this.images[i[r]]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},h.prototype._notify=function(t,e){for(var n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=this.images[o];a&&(n[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf})}e(null,n)},h.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},h.prototype.getPattern=function(e){var n=this.patterns[e];if(n)return n.position;var r=this.getImage(e);if(!r)return null;var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},o=new t.ImagePosition(i,r);return this.patterns[e]={bin:i,position:o},this._updatePatternAtlas(),o},h.prototype.bind=function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},h.prototype._updatePatternAtlas=function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var r=t.potpack(e),i=r.w,o=r.h,a=this.atlasImage;for(var s in a.resize({width:i||1,height:o||1}),this.patterns){var u=this.patterns[s].bin,l=u.x+1,c=u.y+1,h=this.images[s].data,p=h.width,f=h.height;t.RGBAImage.copy(h,a,{x:0,y:0},{x:l,y:c},{width:p,height:f}),t.RGBAImage.copy(h,a,{x:0,y:f-1},{x:l,y:c-1},{width:p,height:1}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:l,y:c+f},{width:p,height:1}),t.RGBAImage.copy(h,a,{x:p-1,y:0},{x:l-1,y:c},{width:1,height:f}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:l+p,y:c},{width:1,height:f})}this.dirty=!0};var p=d,f=1e20;function d(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function m(t,e,n,r,i,o,a){for(var s=0;s<e;s++){for(var u=0;u<n;u++)r[u]=t[u*e+s];for(g(r,i,o,a,n),u=0;u<n;u++)t[u*e+s]=i[u]}for(u=0;u<n;u++){for(s=0;s<e;s++)r[s]=t[u*e+s];for(g(r,i,o,a,e),s=0;s<e;s++)t[u*e+s]=Math.sqrt(i[s])}}function g(t,e,n,r,i){n[0]=0,r[0]=-f,r[1]=+f;for(var o=1,a=0;o<i;o++){for(var s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)s=(t[o]+o*o-(t[n[--a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=+f}for(o=0,a=0;o<i;o++){for(;r[a+1]<o;)a++;e[o]=(o-n[a])*(o-n[a])+t[n[a]]}}d.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var i=e.data[4*r+3]/255;this.gridOuter[r]=1===i?0:0===i?f:Math.pow(Math.max(0,.5-i),2),this.gridInner[r]=1===i?f:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(m(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),m(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)n[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return n};var y=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}};y.prototype.setURL=function(t){this.url=t},y.prototype.getGlyphs=function(e,n){var r=this,i=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1)i.push({stack:o,id:s[a]});t.asyncAll(i,function(t,e){var n=t.stack,i=t.id,o=r.entries[n];o||(o=r.entries[n]={glyphs:{},requests:{}});var a=o.glyphs[i];if(void 0===a)if(a=r._tinySDF(o,n,i))e(null,{stack:n,id:i,glyph:a});else{var s=Math.floor(i/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else{var u=o.requests[s];u||(u=o.requests[s]=[],y.loadGlyphRange(n,s,r.url,r.requestTransform,function(t,e){if(e)for(var n in e)o.glyphs[+n]=e[+n];for(var r=0,i=u;r<i.length;r+=1)(0,i[r])(t,e);delete o.requests[s]})),u.push(function(t,r){t?e(t):r&&e(null,{stack:n,id:i,glyph:r[i]||null})})}}else e(null,{stack:n,id:i,glyph:a})},function(t,e){if(t)n(t);else if(e){for(var r={},i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.stack,u=a.id,l=a.glyph;(r[s]||(r[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}n(null,r)}})},y.prototype._tinySDF=function(e,n,r){var i=this.localIdeographFontFamily;if(i&&(t.isChar["CJK Unified Ideographs"](r)||t.isChar["Hangul Syllables"](r))){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),o=e.tinySDF=new y.TinySDF(24,3,8,.25,i,a)}return{id:r,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},y.loadGlyphRange=function(e,n,r,i,o){var a=256*n,s=a+255,u=i(t.normalizeGlyphsURL(r).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(u,function(e,n){if(e)o(e);else if(n){for(var r={},i=0,a=t.parseGlyphPBF(n);i<a.length;i+=1){var s=a[i];r[s.id]=s}o(null,r)}})},y.TinySDF=p;var v=function(){this.specification=t.styleSpec.light.position};v.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},v.prototype.interpolate=function(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r)}};var b=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new v,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),_=function(e){function n(n){e.call(this),this._transitionable=new t.Transitionable(b),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(e,n){if(void 0===n&&(n={}),!this._validate(t.validateLight,e,n))for(var r in e){var i=e[r];t.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),i):this._transitionable.setValue(r,i)}},n.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},n.prototype._validate=function(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},n}(t.Evented),w=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};w.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.positions[n]||(this.positions[n]=this.addDash(t,e)),this.positions[n]},w.prototype.addDash=function(e,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];for(var s=this.width/o,u=s/2,l=e.length%2==1,c=-r;c<=r;c++)for(var h=this.width*(this.nextRow+r+c),p=l?-e[e.length-1]:0,f=e[0],d=1,m=0;m<this.width;m++){for(;f<m/s;)p=f,f+=e[d],l&&d===e.length-1&&(f+=e[0]),d++;var g=Math.abs(m-p*s),y=Math.abs(m-f*s),v=Math.min(g,y),b=d%2==1,_=void 0;if(n){var w=r?c/r*(u+1):0;if(b){var x=u-Math.abs(w);_=Math.sqrt(v*v+x*x)}else _=u-Math.sqrt(v*v+w*w)}else _=(b?1:-1)*v;this.data[3+4*(h+m)]=Math.max(0,Math.min(255,_+128))}var C={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,C},w.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))};var x=function e(n,r){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var a=new e.Actor(i[o],r,this.id);a.name="Worker "+o,this.actors.push(a)}};function C(e,n,r){var i=function(n,i){if(n)return r(n);if(i){var o=t.pick(i,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);i.vector_layers&&(o.vectorLayers=i.vector_layers,o.vectorLayerIds=o.vectorLayers.map(function(t){return t.id})),e.url&&(o.tiles=t.canonicalizeTileset(o,e.url)),r(null,o)}};return e.url?t.getJSON(n(t.normalizeSourceURL(e.url),t.ResourceType.Source),i):t.browser.frame(function(){return i(null,e)})}x.prototype.broadcast=function(e,n,r){t.asyncAll(this.actors,function(t,r){t.send(e,n,r)},r=r||function(){})},x.prototype.send=function(t,e,n,r){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(t,e,n),r},x.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},x.Actor=t.Actor;var E=function(e,n,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=r||24};E.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},E.prototype.contains=function(e){var n=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=r&&e.x<o&&e.y>=i&&e.y<a};var S=function(e){function n(n,r,i,o){if(e.call(this),this.id=n,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,t.extend(this,t.pick(r,["url","scheme","tileSize"])),this._options=t.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._transformRequest,function(n,r){e._tileJSONRequest=null,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new E(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles),t.postMapLoadEvent(r.tiles,e.map._getMapId()),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.loadTile=function(e,n){var r=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url),i={request:this.map._transformRequest(r,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function o(t,r){return e.aborted?n(null):t&&404!==t.status?n(t):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}i.request.collectResourceTiming=this._collectResourceTiming,void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",i,o.bind(this)):"loading"===e.state?e.reloadCallback=n:this.dispatcher.send("reloadTile",i,o.bind(this),e.workerID)},n.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},n.prototype.hasTransition=function(){return!1},n}(t.Evented),T=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({},r),t.extend(this,t.pick(r,["url","scheme","tileSize"]))}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._transformRequest,function(n,r){e._tileJSONRequest=null,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new E(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles),t.postMapLoadEvent(r.tiles,e.map._getMapId()),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.loadTile=function(e,n){var r=this,i=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(i,t.ResourceType.Tile),function(i,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){r.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=r.map.painter.context,s=a.gl;e.texture=r.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",n(null)}})},n.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},n.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},n.prototype.hasTransition=function(){return!1},n}(t.Evented),A=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({},r),this.encoding=r.encoding||"mapbox"}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(e,n){var r=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(r,t.ResourceType.Tile),(function(r,i){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(i){this.map._refreshExpiredTiles&&e.setExpiryData(i),delete i.cacheControl,delete i.expires;var o=t.browser.getImageData(i);e.workerID&&"expired"!==e.state||(e.workerID=this.dispatcher.send("loadDEMTile",{uid:e.uid,coord:e.tileID,source:this.id,rawImageData:o,encoding:this.encoding},(function(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}).bind(this)))}}).bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},n.prototype._getNeighboringTiles=function(e){var n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,u={};return u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),u},n.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},void 0,t.workerID)},n}(T),P=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=i,this.setEventedParent(o),this._data=r.data,this._options=t.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution);var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*a,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(r.clusterRadius||50)*a,log:!1},clusterProperties:r.clusterProperties},r.workerOptions)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(n){if(n)e.fire(new t.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(r.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",r))}})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)n.fire(new t.ErrorEvent(e));else{var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",r))}}),this},n.prototype.getClusterExpansionZoom=function(t,e){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e,this.workerID),this},n.prototype.getClusterChildren=function(t,e){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e,this.workerID),this},n.prototype.getClusterLeaves=function(t,e,n,r){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r,this.workerID),this},n.prototype._updateWorkerData=function(e){var n=this,r=t.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._transformRequest(t.browser.resolveURL(i),t.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this.workerID=this.dispatcher.send(this.type+".loadData",r,function(t,i){n._removed||i&&i.abandoned||(n._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[n.id]&&(n._resourceTiming=i.resourceTiming[n.id].slice(0)),n.dispatcher.send(n.type+".coalesce",{source:r.source},null,n.workerID),e(t))},this.workerID)},n.prototype.loadTile=function(e,n){var r=this,i=void 0===e.workerID?"loadTile":"reloadTile";e.workerID=this.dispatcher.send(i,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes},function(t,o){return e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(o,r.map.painter,"reloadTile"===i),n(null))},this.workerID)},n.prototype.abortTile=function(t){t.aborted=!0},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},n.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},n.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(t.Evented),I=function(e){function n(t,n,r,i){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(i),this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(e,n){var r=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._transformRequest(this.url,t.ResourceType.Image),function(i,o){i?r.fire(new t.ErrorEvent(i)):o&&(r.image=o,e&&(r.coordinates=e),n&&n(),r._finishLoading())})},n.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,function(){e.texture=null}),this):this},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setCoordinates=function(e){var n=this;this.coordinates=e;var r=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var n=1/0,r=1/0,i=-1/0,o=-1/0,a=0,s=e;a<s.length;a+=1){var u=s[a];n=Math.min(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.x),o=Math.max(o,u.y)}var l=Math.max(i-n,o-r),c=Math.max(0,Math.floor(-Math.log(l)/Math.LN2)),h=Math.pow(2,c);return new t.CanonicalTileID(c,Math.floor((n+i)/2*h),Math.floor((r+o)/2*h))}(r),this.minzoom=this.maxzoom=this.tileID.z;var i=r.map(function(t){return n.tileID.getTilePoint(t)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(t.Evented),O={vector:S,raster:T,"raster-dem":A,geojson:P,video:function(e){function n(t,n,r,i){e.call(this,t,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this,n=this.options;this.urls=[];for(var r=0,i=n.urls;r<i.length;r+=1)this.urls.push(this.map._transformRequest(i[r],t.ResourceType.Source).url);t.getVideo(this.urls,function(n,r){n?e.fire(new t.ErrorEvent(n)):r&&(e.video=r,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map.triggerRepaint()}),e.map&&e.video.play(),e._finishLoading())})},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(I),image:I,canvas:function(e){function n(n,r,i,o){e.call(this,n,r,i,o),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing=!1},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},n}(I)},D=function(e,n,r,i){var o=new O[n.type](e,n,r,i);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o};function k(e,n){var r=t.identity([]);return t.translate(r,r,[1,1,0]),t.scale(r,r,[.5*e.width,.5*e.height,1]),t.multiply(r,r,e.calculatePosMatrix(n.toUnwrapped()))}function M(t,e,n,r,i){var o=function(t,e,n){if(t)for(var r=0,i=t;r<i.length;r+=1){var o=e[i[r]];if(o&&o.source===n&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===n&&"fill-extrusion"===s.type)return!0}return!1}(r&&r.layers,e,t.id),a=i.maxPitchScaleFactor(),s=t.tilesIn(n,a,o);s.sort(R);for(var u=[],l=0,c=s;l<c.length;l+=1){var h=c[l];u.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,t._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,r,i,a,k(t.transform,h.tileID))})}var p=function(t){for(var e={},n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var l in a)for(var c=a[l],h=u[l]=u[l]||{},p=e[l]=e[l]||[],f=0,d=c;f<d.length;f+=1){var m=d[f];h[m.featureIndex]||(h[m.featureIndex]=!0,p.push(m))}}return e}(u);for(var f in p)p[f].forEach(function(e){var n=e.feature,r=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r});return p}function R(t,e){var n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}var N=function(t,e){this.max=t,this.onRemove=e,this.reset()};N.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var r=n[e];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},N.prototype.add=function(t,e,n){var r=this,i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:e,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout(function(){r.remove(t,o)},n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},N.prototype.has=function(t){return t.wrapped().key in this.data},N.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},N.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},N.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},N.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this},N.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this};var L=function(t,e,n){this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};L.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},L.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},L.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var F={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},B=function(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;var i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};B.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},B.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},B.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}},B.prototype.setVertexAttribPointers=function(t,e,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[F[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}},B.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var j=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};j.prototype.get=function(){return this.current},j.prototype.set=function(t){},j.prototype.getDefault=function(){return this.default},j.prototype.setDefault=function(){this.set(this.default)};var z=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(j),V=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(j),U=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(j),q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(j),G=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(j),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(j),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(j),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(j),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(j),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(j),Z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(j),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(j),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(j),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(j),tt=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(j),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(j),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(j),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(j),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(j),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(j),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(j),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(j),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(j),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(j),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(j),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(j),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(j),ft=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(j),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(j),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(j),gt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(j),yt=function(t){function e(e,n){t.call(this,e),this.context=e,this.parent=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(j),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(yt),bt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(yt),_t=function(t,e,n){this.context=t,this.width=e,this.height=n;var r=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new vt(t,r),this.depthAttachment=new bt(t,r)};_t.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n),t.deleteFramebuffer(this.framebuffer)};var wt=function(t,e,n){this.func=t,this.mask=e,this.range=n};wt.ReadOnly=!1,wt.ReadWrite=!0,wt.disabled=new wt(519,wt.ReadOnly,[0,1]);var xt=function(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};xt.disabled=new xt({func:519,mask:0},0,0,7680,7680,7680);var Ct=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};Ct.disabled=new Ct(Ct.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),Ct.unblended=new Ct(Ct.Replace,t.Color.transparent,[!0,!0,!0,!0]),Ct.alphaBlended=new Ct([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Et=function(t,e,n){this.enable=t,this.mode=e,this.frontFace=n};Et.disabled=new Et(!1,1029,2305),Et.backCCW=new Et(!0,1029,2305);var St=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new z(this),this.clearDepth=new V(this),this.clearStencil=new U(this),this.colorMask=new q(this),this.depthMask=new G(this),this.stencilMask=new H(this),this.stencilFunc=new W(this),this.stencilOp=new K(this),this.stencilTest=new X(this),this.depthRange=new Q(this),this.depthTest=new Z(this),this.depthFunc=new Y(this),this.blend=new J(this),this.blendFunc=new $(this),this.blendColor=new tt(this),this.blendEquation=new et(this),this.cullFace=new nt(this),this.cullFaceSide=new rt(this),this.frontFace=new it(this),this.program=new ot(this),this.activeTexture=new at(this),this.viewport=new st(this),this.bindFramebuffer=new ut(this),this.bindRenderbuffer=new lt(this),this.bindTexture=new ct(this),this.bindVertexBuffer=new ht(this),this.bindElementBuffer=new pt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ft(this),this.pixelStoreUnpack=new dt(this),this.pixelStoreUnpackPremultiplyAlpha=new mt(this),this.pixelStoreUnpackFlipY=new gt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")};St.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},St.prototype.createIndexBuffer=function(t,e){return new L(this,t,e)},St.prototype.createVertexBuffer=function(t,e,n){return new B(this,t,e,n)},St.prototype.createRenderbuffer=function(t,e,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i},St.prototype.createFramebuffer=function(t,e){return new _t(this,t,e)},St.prototype.clear=function(t){var e=t.color,n=t.depth,r=this.gl,i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},St.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},St.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},St.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},St.prototype.setColorMode=function(e){t.isEqual(e.blendFunction,Ct.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},St.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Tt=function(e){function n(n,r,i){var o=this;e.call(this),this.id=n,this.dispatcher=i,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))}),this.on("error",function(){o._sourceErrored=!0}),this._source=D(n,r,i,this),this._tiles={},this._cache=new N(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},n.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},n.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},n.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)this._tiles[e].upload(t)},n.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(At)},n.prototype.getRenderableIds=function(e){var n=this,r=[];for(var i in this._tiles)this._isIdRenderable(+i,e)&&r.push(+i);return r.sort(e?function(e,r){var i=n._tiles[e].tileID,o=n._tiles[r].tileID,a=new t.Point(i.canonical.x,i.canonical.y)._rotate(n.transform.angle),s=new t.Point(o.canonical.x,o.canonical.y)._rotate(n.transform.angle);return i.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x}:At)},n.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},n.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},n.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},n.prototype._tileLoaded=function(e,n,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},n.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),n=0;n<e.length;n++){var r=e[n];if(t.neighboringTiles&&t.neighboringTiles[r]){var i=this.getTileByID(r);o(t,i),o(i,t)}}function o(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},n.prototype.getTile=function(t){return this.getTileByID(t.key)},n.prototype.getTileByID=function(t){return this._tiles[t]},n.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},n.prototype._retainLoadedChildren=function(t,e,n,r){for(var i in this._tiles){var o=this._tiles[i];if(!(r[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var u=a;u.overscaledZ>e;)if(t[(u=u.scaledTo(u.overscaledZ-1)).key]){r[a.key]=a;break}}}},n.prototype.findLoadedParent=function(t,e){for(var n=t.overscaledZ-1;n>=e;n--){var r=t.scaledTo(n);if(!r)return;var i=String(r.key),o=this._tiles[i];if(o&&o.hasData())return o;if(this._cache.has(r))return this._cache.get(r)}},n.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),n=Math.floor(5*e),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(r)},n.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var n={};for(var r in this._tiles){var i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),n[i.tileID.key]=i}for(var o in this._tiles=n,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},n.prototype.update=function(e){var r=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter(function(t){return r._source.hasTile(t)}))):i=[];var o=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),a=Math.max(o-n.maxOverzooming,this._source.minzoom),s=Math.max(o+n.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(i,o);if(Pt(this._source.type)){for(var l={},c={},h=0,p=Object.keys(u);h<p.length;h+=1){var f=p[h],d=u[f],m=this._tiles[f];if(m&&!(m.fadeEndTime&&m.fadeEndTime<=t.browser.now())){var g=this.findLoadedParent(d,a);g&&(this._addTile(g.tileID),l[g.tileID.key]=g.tileID),c[f]=d}}for(var y in this._retainLoadedChildren(c,o,s,u),l)u[y]||(this._coveredTiles[y]=!0,u[y]=l[y])}for(var v in u)this._tiles[v].clearFadeHold();for(var b=0,_=t.keysDifference(this._tiles,u);b<_.length;b+=1){var w=_[b],x=this._tiles[w];x.hasSymbolBuckets&&!x.holdingForFade()?x.setHoldDuration(this.map._fadeDuration):x.hasSymbolBuckets&&!x.symbolFadeFinished()||this._removeTile(w)}}},n.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},n.prototype._updateRetainedTiles=function(t,e){for(var r={},i={},o=Math.max(e-n.maxOverzooming,this._source.minzoom),a=Math.max(e+n.maxUnderzooming,this._source.minzoom),s={},u=0,l=t;u<l.length;u+=1){var c=l[u],h=this._addTile(c);r[c.key]=c,h.hasData()||e<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,e,a,r);for(var p=0,f=t;p<f.length;p+=1){var d=f[p],m=this._tiles[d.key];if(!m.hasData()){if(e+1>this._source.maxzoom){var g=d.children(this._source.maxzoom)[0],y=this.getTile(g);if(y&&y.hasData()){r[g.key]=g;continue}}else{var v=d.children(this._source.maxzoom);if(r[v[0].key]&&r[v[1].key]&&r[v[2].key]&&r[v[3].key])continue}for(var b=m.wasRequested(),_=d.overscaledZ-1;_>=o;--_){var w=d.scaledTo(_);if(i[w.key])break;if(i[w.key]=!0,!(m=this.getTile(w))&&b&&(m=this._addTile(w)),m&&(r[w.key]=w,b=m.wasRequested(),m.hasData()))break}}}return r},n.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var r=Boolean(n);return r||(n=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout(function(){n._reloadTile(t,"expired"),delete n._timers[t]},r))},n.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},n.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},n.prototype.tilesIn=function(e,n,r){var i=this,o=[],a=this.transform;if(!a)return o;for(var s=r?a.getCameraQueryGeometry(e):e,u=e.map(function(t){return a.pointCoordinate(t)}),l=s.map(function(t){return a.pointCoordinate(t)}),c=this.getIds(),h=1/0,p=1/0,f=-1/0,d=-1/0,m=0,g=l;m<g.length;m+=1){var y=g[m];h=Math.min(h,y.x),p=Math.min(p,y.y),f=Math.max(f,y.x),d=Math.max(d,y.y)}for(var v=function(e){var r=i._tiles[c[e]];if(!r.holdingForFade()){var s=r.tileID,m=Math.pow(2,a.zoom-r.tileID.overscaledZ),g=n*r.queryPadding*t.EXTENT/r.tileSize/m,y=[s.getTilePoint(new t.MercatorCoordinate(h,p)),s.getTilePoint(new t.MercatorCoordinate(f,d))];if(y[0].x-g<t.EXTENT&&y[0].y-g<t.EXTENT&&y[1].x+g>=0&&y[1].y+g>=0){var v=u.map(function(t){return s.getTilePoint(t)}),b=l.map(function(t){return s.getTilePoint(t)});o.push({tile:r,tileID:s,queryGeometry:v,cameraQueryGeometry:b,scale:m})}}},b=0;b<c.length;b++)v(b);return o},n.prototype.getVisibleCoordinates=function(t){for(var e=this,n=this.getRenderableIds(t).map(function(t){return e._tiles[t].tileID}),r=0,i=n;r<i.length;r+=1){var o=i[r];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return n},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Pt(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.browser.now())return!0}return!1},n.prototype.setFeatureState=function(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)},n.prototype.removeFeatureState=function(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)},n.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},n}(t.Evented);function At(t,e){return t%32-e%32||e-t}function Pt(t){return"raster"===t||"image"===t||"video"===t}function It(){return new t.window.Worker(Xr.workerUrl)}Tt.maxOverzooming=10,Tt.maxUnderzooming=3;var Ot=function(){this.active={}};Ot.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Ot.workerCount;)this.workers.push(new It);return this.active[t]=!0,this.workers.slice()},Ot.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)};var Dt,kt=Math.floor(t.browser.hardwareConcurrency/2);function Mt(e,n){var r={};for(var i in e)"ref"!==i&&(r[i]=e[i]);return t.refProperties.forEach(function(t){t in n&&(r[t]=n[t])}),r}function Rt(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=Mt(t[r],e[t[r].ref]));return t}Ot.workerCount=Math.max(Math.min(kt,6),1);var Nt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Lt(t,e,n){n.push({command:Nt.addSource,args:[t,e[t]]})}function Ft(t,e,n){e.push({command:Nt.removeSource,args:[t]}),n[t]=!0}function Bt(t,e,n,r){Ft(t,n,r),Lt(t,e,n)}function jt(e,n,r){var i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t.isEqual(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t.isEqual(e[r][i],n[r][i]))return!1;return!0}function zt(e,n,r,i,o,a){var s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t.isEqual(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.isEqual(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function Vt(t){return t.id}function Ut(t,e){return t[e.id]=e,t}var qt=function(t,e,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};qt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},qt.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},qt.prototype.insertCircle=function(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)},qt.prototype._insertBoxCell=function(t,e,n,r,i,o){this.boxCells[i].push(o)},qt.prototype._insertCircleCell=function(t,e,n,r,i,o){this.circleCells[i].push(o)},qt.prototype._query=function(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],h=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:l-h,y1:c-h,x2:l+h,y2:c+h})}return o?a.filter(o):a}return this._forEachCell(t,e,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a},qt.prototype._queryCircle=function(t,e,n,r,i){var o=t-n,a=t+n,s=e-n,u=e+n;if(a<0||o>this.width||u<0||s>this.height)return!r&&[];var l=[];return this._forEachCell(o,s,a,u,this._queryCellCircle,l,{hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},i),r?l.length>0:l},qt.prototype.query=function(t,e,n,r,i){return this._query(t,e,n,r,!1,i)},qt.prototype.hitTest=function(t,e,n,r,i){return this._query(t,e,n,r,!0,i)},qt.prototype.hitTestCircle=function(t,e,n,r){return this._queryCircle(t,e,n,!0,r)},qt.prototype._queryCell=function(t,e,n,r,i,o,a,s){var u=a.seenUids,l=this.boxCells[i];if(null!==l)for(var c=this.bboxes,h=0,p=l;h<p.length;h+=1){var f=p[h];if(!u.box[f]){u.box[f]=!0;var d=4*f;if(t<=c[d+2]&&e<=c[d+3]&&n>=c[d+0]&&r>=c[d+1]&&(!s||s(this.boxKeys[f]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[f],x1:c[d],y1:c[d+1],x2:c[d+2],y2:c[d+3]})}}}var m=this.circleCells[i];if(null!==m)for(var g=this.circles,y=0,v=m;y<v.length;y+=1){var b=v[y];if(!u.circle[b]){u.circle[b]=!0;var _=3*b;if(this._circleAndRectCollide(g[_],g[_+1],g[_+2],t,e,n,r)&&(!s||s(this.circleKeys[b]))){if(a.hitTest)return o.push(!0),!0;var w=g[_],x=g[_+1],C=g[_+2];o.push({key:this.circleKeys[b],x1:w-C,y1:x-C,x2:w+C,y2:x+C})}}}},qt.prototype._queryCellCircle=function(t,e,n,r,i,o,a,s){var u=a.circle,l=a.seenUids,c=this.boxCells[i];if(null!==c)for(var h=this.bboxes,p=0,f=c;p<f.length;p+=1){var d=f[p];if(!l.box[d]){l.box[d]=!0;var m=4*d;if(this._circleAndRectCollide(u.x,u.y,u.radius,h[m+0],h[m+1],h[m+2],h[m+3])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var g=this.circleCells[i];if(null!==g)for(var y=this.circles,v=0,b=g;v<b.length;v+=1){var _=b[v];if(!l.circle[_]){l.circle[_]=!0;var w=3*_;if(this._circlesCollide(y[w],y[w+1],y[w+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[_])))return o.push(!0),!0}}},qt.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var u=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r),p=u;p<=c;p++)for(var f=l;f<=h;f++)if(i.call(this,t,e,n,r,this.xCellCount*f+p,o,a,s))return},qt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},qt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},qt.prototype._circlesCollide=function(t,e,n,r,i,o){var a=r-t,s=i-e,u=n+o;return u*u>a*a+s*s},qt.prototype._circleAndRectCollide=function(t,e,n,r,i,o,a){var s=(o-r)/2,u=Math.abs(t-(r+s));if(u>s+n)return!1;var l=(a-i)/2,c=Math.abs(e-(i+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var h=u-s,p=c-l;return h*h+p*p<=n*n};var Gt=t.properties.layout;function Ht(e,n,r,i,o){var a=t.identity(new Float32Array(16));return n?(t.identity(a),t.scale(a,a,[1/o,1/o,1]),r||t.rotateZ(a,a,i.angle)):(t.scale(a,a,[i.width/2,-i.height/2,1]),t.translate(a,a,[1,-1,0]),t.multiply(a,a,e)),a}function Wt(e,n,r,i,o){var a=t.identity(new Float32Array(16));return n?(t.multiply(a,a,e),t.scale(a,a,[o,o,1]),r||t.rotateZ(a,a,-i.angle)):(t.scale(a,a,[1,-1,1]),t.translate(a,a,[-1,-1,0]),t.scale(a,a,[2/i.width,2/i.height,1])),a}function Kt(e,n){var r=[e.x,e.y,0,1];re(r,r,n);var i=r[3];return{point:new t.Point(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function Xt(t,e){var n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function Qt(e,n,r,i,o,a,s,u){var l=i?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(l,r.transform.zoom,Gt.properties[i?"text-size":"icon-size"]),h=[256/r.width*2+1,256/r.height*2+1],p=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();for(var f=e.lineVertexArray,d=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,m=r.transform.width/r.transform.height,g=!1,y=0;y<d.length;y++){var v=d.get(y);if(v.hidden||v.writingMode===t.WritingMode.vertical&&!g)ne(v.numGlyphs,p);else{g=!1;var b=[v.anchorX,v.anchorY,0,1];if(t.transformMat4(b,b,n),Xt(b,h)){var _=.5+b[3]/r.transform.cameraToCenterDistance*.5,w=t.evaluateSizeForFeature(l,c,v),x=s?w*_:w/_,C=new t.Point(v.anchorX,v.anchorY),E=Kt(C,o).point,S={},T=Jt(v,x,!1,u,n,o,a,e.glyphOffsetArray,f,p,E,C,S,m);g=T.useVertical,(T.notEnoughRoom||g||T.needsFlipping&&Jt(v,x,!0,u,n,o,a,e.glyphOffsetArray,f,p,E,C,S,m).notEnoughRoom)&&ne(v.numGlyphs,p)}else ne(v.numGlyphs,p)}}i?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function Zt(t,e,n,r,i,o,a,s,u,l,c,h){var p=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,m=e.getoffsetX(s.glyphStartIndex),g=e.getoffsetX(p-1),y=te(t*m,n,r,i,o,a,s.segment,f,d,u,l,c,h);if(!y)return null;var v=te(t*g,n,r,i,o,a,s.segment,f,d,u,l,c,h);return v?{first:y,last:v}:null}function Yt(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function Jt(e,n,r,i,o,a,s,u,l,c,h,p,f,d){var m,g=n/24,y=e.lineOffsetX*n,v=e.lineOffsetY*n;if(e.numGlyphs>1){var b=e.glyphStartIndex+e.numGlyphs,_=e.lineStartIndex,w=e.lineStartIndex+e.lineLength,x=Zt(g,u,y,v,r,h,p,e,l,a,f,!1);if(!x)return{notEnoughRoom:!0};var C=Kt(x.first.point,s).point,E=Kt(x.last.point,s).point;if(i&&!r){var S=Yt(e.writingMode,C,E,d);if(S)return S}m=[x.first];for(var T=e.glyphStartIndex+1;T<b-1;T++)m.push(te(g*u.getoffsetX(T),y,v,r,h,p,e.segment,_,w,l,a,f,!1));m.push(x.last)}else{if(i&&!r){var A=Kt(p,o).point,P=e.lineStartIndex+e.segment+1,I=new t.Point(l.getx(P),l.gety(P)),O=Kt(I,o),D=O.signedDistanceFromCamera>0?O.point:$t(p,I,A,1,o),k=Yt(e.writingMode,A,D,d);if(k)return k}var M=te(g*u.getoffsetX(e.glyphStartIndex),y,v,r,h,p,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,l,a,f,!1);if(!M)return{notEnoughRoom:!0};m=[M]}for(var R=0,N=m;R<N.length;R+=1){var L=N[R];t.addDynamicAttributes(c,L.point,L.angle)}return{}}function $t(t,e,n,r,i){var o=Kt(t.add(t.sub(e)._unit()),i).point,a=n.sub(o);return n.add(a._mult(r/a.mag()))}function te(e,n,r,i,o,a,s,u,l,c,h,p,f){var d=i?e-n:e+n,m=d>0?1:-1,g=0;i&&(m*=-1,g=Math.PI),m<0&&(g+=Math.PI);for(var y=m>0?u+s:u+s+1,v=y,b=o,_=o,w=0,x=0,C=Math.abs(d);w+x<=C;){if((y+=m)<u||y>=l)return null;if(_=b,void 0===(b=p[y])){var E=new t.Point(c.getx(y),c.gety(y)),S=Kt(E,h);if(S.signedDistanceFromCamera>0)b=p[y]=S.point;else{var T=y-m;b=$t(0===w?a:new t.Point(c.getx(T),c.gety(T)),E,_,C-w+1,h)}}w+=x,x=_.dist(b)}var A=(C-w)/x,P=b.sub(_),I=P.mult(A)._add(_);return I._add(P._unit()._perp()._mult(r*m)),{point:I,angle:g+Math.atan2(b.y-_.y,b.x-_.x),tileDistance:f?{prevTileDistance:y-m===v?0:c.gettileUnitDistanceFromAnchor(y-m),lastSegmentViewportDistance:C-w}:null}}var ee=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ne(t,e){for(var n=0;n<t;n++){var r=e.length;e.resize(r+4),e.float32.set(ee,3*r)}}function re(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}var ie=function(t,e,n){void 0===e&&(e=new qt(t.width+200,t.height+200,25)),void 0===n&&(n=new qt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function oe(t,e,n){t[e+4]=n?1:0}function ae(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}ie.prototype.placeCollisionBox=function(t,e,n,r,i){var o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),a=n*o.perspectiveRatio,s=t.x1*a+o.point.x,u=t.y1*a+o.point.y,l=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,u,l,c)||!e&&this.grid.hitTest(s,u,l,c,i)?{box:[],offscreen:!1}:{box:[s,u,l,c],offscreen:this.isOffscreen(s,u,l,c)}},ie.prototype.approximateTileDistance=function(t,e,n,r,i){var o=t.lastSegmentViewportDistance*n;return t.prevTileDistance+o+((i?1:r/this.pitchfactor)-1)*o*Math.abs(Math.sin(e))},ie.prototype.placeCollisionCircles=function(e,n,r,i,o,a,s,u,l,c,h,p,f){var d=[],m=this.projectAnchor(l,o.anchorX,o.anchorY),g=u/24,y=o.lineOffsetX*u,v=o.lineOffsetY*u,b=new t.Point(o.anchorX,o.anchorY),_=Zt(g,s,y,v,!1,Kt(b,c).point,b,o,a,c,{},!0),w=!1,x=!1,C=!0,E=m.perspectiveRatio*i,S=1/(i*r),T=0,A=0;_&&(T=this.approximateTileDistance(_.first.tileDistance,_.first.angle,S,m.cameraDistance,p),A=this.approximateTileDistance(_.last.tileDistance,_.last.angle,S,m.cameraDistance,p));for(var P=0;P<e.length;P+=5){var I=e[P],O=e[P+1],D=e[P+2],k=e[P+3];if(!_||k<-T||k>A)oe(e,P,!1);else{var M=this.projectPoint(l,I,O),R=D*E;if(d.length>0){var N=M.x-d[d.length-4],L=M.y-d[d.length-3];if(R*R*2>N*N+L*L&&P+8<e.length){var F=e[P+8];if(F>-T&&F<A){oe(e,P,!1);continue}}}d.push(M.x,M.y,R,P/5),oe(e,P,!0);var B=M.x-R,j=M.y-R,z=M.x+R,V=M.y+R;if(C=C&&this.isOffscreen(B,j,z,V),x=x||this.isInsideGrid(B,j,z,V),!n&&this.grid.hitTestCircle(M.x,M.y,R,f)){if(!h)return{circles:[],offscreen:!1};w=!0}}}return{circles:w||!x?[]:d,offscreen:C}},ie.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,i=1/0,o=-1/0,a=-1/0,s=0,u=e;s<u.length;s+=1){var l=u[s],c=new t.Point(l.x+100,l.y+100);r=Math.min(r,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),n.push(c)}for(var h={},p={},f=0,d=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a));f<d.length;f+=1){var m=d[f],g=m.key;if(void 0===h[g.bucketInstanceId]&&(h[g.bucketInstanceId]={}),!h[g.bucketInstanceId][g.featureIndex]){var y=[new t.Point(m.x1,m.y1),new t.Point(m.x2,m.y1),new t.Point(m.x2,m.y2),new t.Point(m.x1,m.y2)];t.polygonIntersectsPolygon(n,y)&&(h[g.bucketInstanceId][g.featureIndex]=!0,void 0===p[g.bucketInstanceId]&&(p[g.bucketInstanceId]=[]),p[g.bucketInstanceId].push(g.featureIndex))}}return p},ie.prototype.insertCollisionBox=function(t,e,n,r,i){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},t[0],t[1],t[2],t[3])},ie.prototype.insertCollisionCircles=function(t,e,n,r,i){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},ie.prototype.projectAnchor=function(t,e,n){var r=[e,n,0,1];return re(r,r,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},ie.prototype.projectPoint=function(e,n,r){var i=[n,r,0,1];return re(i,i,e),new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100)},ie.prototype.projectAndGetPerspectiveRatio=function(e,n,r){var i=[n,r,0,1];return re(i,i,e),{point:new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},ie.prototype.isOffscreen=function(t,e,n,r){return n<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary},ie.prototype.isInsideGrid=function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary};var se=function(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n};se.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var ue=function(t,e,n,r,i){this.text=new se(t?t.text:null,e,n,i),this.icon=new se(t?t.icon:null,e,r,i)};ue.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var le=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},ce=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};ce.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var he=function(t,e,n){this.transform=t.clone(),this.collisionIndex=new ie(this.transform),this.placements={},this.opacities={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new ce(n)};function pe(t,e,n){t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0)}he.prototype.placeLayerTile=function(e,n,r,i){var o=n.getBucket(e),a=n.latestFeatureIndex;if(o&&a&&e.id===o.layerIds[0]){var s=n.collisionBoxArray,u=o.layers[0].layout,l=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),c=n.tileSize/t.EXTENT,h=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),p=Ht(h,"map"===u.get("text-pitch-alignment"),"map"===u.get("text-rotation-alignment"),this.transform,ae(n,1,this.transform.zoom)),f=Ht(h,"map"===u.get("icon-pitch-alignment"),"map"===u.get("icon-rotation-alignment"),this.transform,ae(n,1,this.transform.zoom));this.retainedQueryData[o.bucketInstanceId]=new function(t,e,n,r,i){this.bucketInstanceId=o.bucketInstanceId,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}(0,a,o.sourceLayerIndex,o.index,n.tileID),this.placeLayerBucket(o,h,p,f,l,c,r,n.holdingForFade(),i,s)}},he.prototype.placeLayerBucket=function(e,n,r,i,o,a,s,u,l,c){var h=e.layers[0].layout,p=t.evaluateSizeForZoom(e.textSizeData,this.transform.zoom,t.properties.layout.properties["text-size"]),f=h.get("text-optional"),d=h.get("icon-optional"),m=h.get("text-allow-overlap"),g=h.get("icon-allow-overlap"),y=m&&(g||!e.hasIconData()||d),v=g&&(m||!e.hasTextData()||f),b=this.collisionGroups.get(e.sourceID);!e.collisionArrays&&c&&e.deserializeCollisionBoxes(c);for(var _=0;_<e.symbolInstances.length;_++){var w=e.symbolInstances.get(_);if(!l[w.crossTileID]){if(u){this.placements[w.crossTileID]=new le(!1,!1,!1);continue}var x=!1,C=!1,E=!0,S=null,T=null,A=null,P=0,I=0,O=e.collisionArrays[_];O.textFeatureIndex&&(P=O.textFeatureIndex),O.textBox&&(x=(S=this.collisionIndex.placeCollisionBox(O.textBox,h.get("text-allow-overlap"),a,n,b.predicate)).box.length>0,E=E&&S.offscreen);var D=O.textCircles;if(D){var k=e.text.placedSymbolArray.get(w.horizontalPlacedTextSymbolIndex),M=t.evaluateSizeForFeature(e.textSizeData,p,k);T=this.collisionIndex.placeCollisionCircles(D,h.get("text-allow-overlap"),o,a,k,e.lineVertexArray,e.glyphOffsetArray,M,n,r,s,"map"===h.get("text-pitch-alignment"),b.predicate),x=h.get("text-allow-overlap")||T.circles.length>0,E=E&&T.offscreen}O.iconFeatureIndex&&(I=O.iconFeatureIndex),O.iconBox&&(C=(A=this.collisionIndex.placeCollisionBox(O.iconBox,h.get("icon-allow-overlap"),a,n,b.predicate)).box.length>0,E=E&&A.offscreen);var R=f||0===w.numGlyphVertices&&0===w.numVerticalGlyphVertices,N=d||0===w.numIconVertices;R||N?N?R||(C=C&&x):x=C&&x:C=x=C&&x,x&&S&&this.collisionIndex.insertCollisionBox(S.box,h.get("text-ignore-placement"),e.bucketInstanceId,P,b.ID),C&&A&&this.collisionIndex.insertCollisionBox(A.box,h.get("icon-ignore-placement"),e.bucketInstanceId,I,b.ID),x&&T&&this.collisionIndex.insertCollisionCircles(T.circles,h.get("text-ignore-placement"),e.bucketInstanceId,P,b.ID),this.placements[w.crossTileID]=new le(x||y,C||v,E||e.justReloaded),l[w.crossTileID]=!0}}e.justReloaded=!1},he.prototype.commit=function(t,e){this.commitTime=e;var n=!1,r=t&&0!==this.fadeDuration?(this.commitTime-t.commitTime)/this.fadeDuration:1,i=t?t.opacities:{};for(var o in this.placements){var a=this.placements[o],s=i[o];s?(this.opacities[o]=new ue(s,r,a.text,a.icon),n=n||a.text!==s.text.placed||a.icon!==s.icon.placed):(this.opacities[o]=new ue(null,r,a.text,a.icon,a.skipFade),n=n||a.text||a.icon)}for(var u in i){var l=i[u];if(!this.opacities[u]){var c=new ue(l,r,!1,!1);c.isHidden()||(this.opacities[u]=c,n=n||l.text.placed||l.icon.placed)}}n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},he.prototype.updateLayerOpacities=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},he.prototype.updateBucketOpacities=function(t,e,n){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexArray.clear(),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexArray.clear();var r=t.layers[0].layout,i=new ue(null,0,!1,!1,!0),o=r.get("text-allow-overlap"),a=r.get("icon-allow-overlap"),s=new ue(null,0,o&&(a||!t.hasIconData()||r.get("icon-optional")),a&&(o||!t.hasTextData()||r.get("text-optional")),!0);!t.collisionArrays&&n&&(t.hasCollisionBoxData()||t.hasCollisionCircleData())&&t.deserializeCollisionBoxes(n);for(var u=0;u<t.symbolInstances.length;u++){var l=t.symbolInstances.get(u),c=e[l.crossTileID],h=this.opacities[l.crossTileID];c?h=i:h||(this.opacities[l.crossTileID]=h=s),e[l.crossTileID]=!0;var p=l.numIconVertices>0;if(l.numGlyphVertices>0||l.numVerticalGlyphVertices>0){for(var f=_e(h.text),d=(l.numGlyphVertices+l.numVerticalGlyphVertices)/4,m=0;m<d;m++)t.text.opacityVertexArray.emplaceBack(f);t.text.placedSymbolArray.get(l.horizontalPlacedTextSymbolIndex).hidden=h.text.isHidden(),l.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(l.verticalPlacedTextSymbolIndex).hidden=h.text.isHidden())}if(p){for(var g=_e(h.icon),y=0;y<l.numIconVertices/4;y++)t.icon.opacityVertexArray.emplaceBack(g);t.icon.placedSymbolArray.get(u).hidden=h.icon.isHidden()}if(t.hasCollisionBoxData()||t.hasCollisionCircleData()){var v=t.collisionArrays[u];if(v){v.textBox&&pe(t.collisionBox.collisionVertexArray,h.text.placed,!1),v.iconBox&&pe(t.collisionBox.collisionVertexArray,h.icon.placed,!1);var b=v.textCircles;if(b&&t.hasCollisionCircleData())for(var _=0;_<b.length;_+=5)pe(t.collisionCircle.collisionVertexArray,h.text.placed,c||0===b[_+4])}}}t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexBuffer&&t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexBuffer&&t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray)},he.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},he.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},he.prototype.stillRecent=function(t){return this.commitTime+this.fadeDuration>t},he.prototype.setStale=function(){this.stale=!0};var fe=Math.pow(2,25),de=Math.pow(2,24),me=Math.pow(2,17),ge=Math.pow(2,16),ye=Math.pow(2,9),ve=Math.pow(2,8),be=Math.pow(2,1);function _e(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*fe+e*de+n*me+e*ge+n*ye+e*ve+n*be+e}var we=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};we.prototype.continuePlacement=function(t,e,n,r,i){for(;this._currentTileIndex<t.length;)if(e.placeLayerTile(r,t[this._currentTileIndex],n,this._seenCrossTileIDs),this._currentTileIndex++,i())return!0};var xe=function(t,e,n,r,i,o){this.placement=new he(t,i,o),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};xe.prototype.isDone=function(){return this._done},xe.prototype.continuePlacement=function(e,n,r){for(var i=this,o=t.browser.now(),a=function(){var e=t.browser.now()-o;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=n[e[this._currentPlacementIndex]],u=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=u)&&(!s.maxzoom||s.maxzoom>u)){if(this._inProgressLayer||(this._inProgressLayer=new we),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},xe.prototype.commit=function(t,e){return this.placement.commit(t,e),this.placement};var Ce=512/t.EXTENT/2,Ee=function(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0;r<e.length;r++){var i=e.get(r),o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,t)})}};Ee.prototype.getScaledCoordinates=function(e,n){var r=Ce/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*r)}},Ee.prototype.findMatches=function(t,e,n){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),i=0;i<t.length;i++){var o=t.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),u=0,l=a;u<l.length;u+=1){var c=l[u];if(Math.abs(c.coord.x-s.x)<=r&&Math.abs(c.coord.y-s.y)<=r&&!n[c.crossTileID]){n[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var Se=function(){this.maxCrossTileID=0};Se.prototype.generate=function(){return++this.maxCrossTileID};var Te=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Te.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),i[a.tileID.key]=a}this.indexes[n]=i}this.lng=t},Te.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var i=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var u=a[s];u.tileID.isChildOf(t)&&u.findMatches(e.symbolInstances,t,i)}else{var l=a[t.scaledTo(Number(o)).key];l&&l.findMatches(e.symbolInstances,t,i)}}for(var c=0;c<e.symbolInstances.length;c++){var h=e.symbolInstances.get(c);h.crossTileID||(h.crossTileID=n.generate(),i[h.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ee(t,e.symbolInstances,e.bucketInstanceId),!0},Te.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var r=0,i=e.indexedSymbolInstances[n];r<i.length;r+=1)delete this.usedCrossTileIDs[t][i[r].crossTileID]},Te.prototype.removeStaleBuckets=function(t){var e=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e};var Ae=function(){this.layerIndexes={},this.crossTileIDs=new Se,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ae.prototype.addLayer=function(t,e,n){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new Te);var i=!1,o={};r.handleWrapJump(n);for(var a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.getBucket(t);l&&t.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,l,this.crossTileIDs)&&(i=!0),o[l.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i},Ae.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[n]||delete this.layerIndexes[n]};var Pe=function(e,n){return t.emitValidationErrors(e,n&&n.filter(function(t){return"source.canvas"!==t.identifier}))},Ie=t.pick(Nt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Oe=t.pick(Nt,["setCenter","setZoom","setBearing","setPitch"]),De=function(e){function n(r,i){var o=this;void 0===i&&(i={}),e.call(this),this.map=r,this.dispatcher=new x((Dt||(Dt=new Ot),Dt),this),this.imageManager=new h,this.glyphManager=new y(r._transformRequest,i.localIdeographFontFamily),this.lineAtlas=new w(256,512),this.crossTileSymbolIndex=new Ae,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=n.registerForPluginAvailability(function(t){for(var e in a.dispatcher.broadcast("loadRTLTextPlugin",t.pluginURL,t.completionCallback),a.sourceCaches)a.sourceCaches[e].reload()}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var r in o._layers){var i=o._layers[r];i.source===n.id&&o._validateLayer(i)}}}})}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadURL=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=t.normalizeStyleURL(e,n.accessToken);var o=this.map._transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,function(e,n){r._request=null,e?r.fire(new t.ErrorEvent(e)):n&&r._load(n,i)})},n.prototype.loadJSON=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){r._request=null,r._load(e,!1!==n.validate)})},n.prototype._load=function(e,n){var r=this;if(!n||!Pe(this,t.validateStyle(e))){for(var i in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(i,e.sources[i],{validate:!1});e.sprite?this._spriteRequest=function(e,n,r){var i,o,a,s=t.browser.devicePixelRatio>1?"@2x":"",u=t.getJSON(n(t.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),function(t,e){u=null,a||(a=t,i=e,c())}),l=t.getImage(n(t.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),function(t,e){l=null,a||(a=t,o=e,c())});function c(){if(a)r(a);else if(i&&o){var e=t.browser.getImageData(o),n={};for(var s in i){var u=i[s],l=u.width,c=u.height,h=u.x,p=u.y,f=u.sdf,d=u.pixelRatio,m=new t.RGBAImage({width:l,height:c});t.RGBAImage.copy(e,m,{x:h,y:p},{x:0,y:0},{width:l,height:c}),n[s]={data:m,pixelRatio:d,sdf:f}}r(null,n)}}return{cancel:function(){u&&(u.cancel(),u=null),l&&(l.cancel(),l=null)}}}(e.sprite,this.map._transformRequest,function(e,n){if(r._spriteRequest=null,e)r.fire(new t.ErrorEvent(e));else if(n)for(var i in n)r.imageManager.addImage(i,n[i]);r.imageManager.setLoaded(!0),r.fire(new t.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var o=Rt(this.stylesheet.layers);this._order=o.map(function(t){return t.id}),this._layers={};for(var a=0,s=o;a<s.length;a+=1){var u=s[a];(u=t.createStyleLayer(u)).setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=u}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new _(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},n.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var r=e.sourceLayer;if(r){var i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+i.id+'" as specified by style layer "'+e.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(t){for(var e=[],n=0,r=t;n<r.length;n+=1){var i=this._layers[r[n]];"custom"!==i.type&&e.push(i.serialize())}return e},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(e){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var o in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var u in this.sourceCaches)this.sourceCaches[u].used=!1;for(var l=0,c=this._order;l<c.length;l+=1){var h=this._layers[c[l]];h.recalculate(e),!h.isHidden(e.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.Event("data",{dataType:"style"}))}},n.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},n.prototype.setState=function(e){var n=this;if(this._checkLoaded(),Pe(this,t.validateStyle(e)))return!1;(e=t.clone(e)).layers=Rt(e.layers);var r=function(e,n){if(!e)return[{command:Nt.setStyle,args:[n]}];var r=[];try{if(!t.isEqual(e.version,n.version))return[{command:Nt.setStyle,args:[n]}];t.isEqual(e.center,n.center)||r.push({command:Nt.setCenter,args:[n.center]}),t.isEqual(e.zoom,n.zoom)||r.push({command:Nt.setZoom,args:[n.zoom]}),t.isEqual(e.bearing,n.bearing)||r.push({command:Nt.setBearing,args:[n.bearing]}),t.isEqual(e.pitch,n.pitch)||r.push({command:Nt.setPitch,args:[n.pitch]}),t.isEqual(e.sprite,n.sprite)||r.push({command:Nt.setSprite,args:[n.sprite]}),t.isEqual(e.glyphs,n.glyphs)||r.push({command:Nt.setGlyphs,args:[n.glyphs]}),t.isEqual(e.transition,n.transition)||r.push({command:Nt.setTransition,args:[n.transition]}),t.isEqual(e.light,n.light)||r.push({command:Nt.setLight,args:[n.light]});var i={},o=[];!function(e,n,r,i){var o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||Ft(o,r,i));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.isEqual(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&jt(e,n,o)?r.push({command:Nt.setGeoJSONSourceData,args:[o,n[o].data]}):Bt(o,n,r,i)):Lt(o,n,r))}(e.sources,n.sources,o,i);var a=[];e.layers&&e.layers.forEach(function(t){i[t.source]?r.push({command:Nt.removeLayer,args:[t.id]}):a.push(t)}),r=r.concat(o),function(e,n,r){n=n||[];var i,o,a,s,u,l,c,h=(e=e||[]).map(Vt),p=n.map(Vt),f=e.reduce(Ut,{}),d=n.reduce(Ut,{}),m=h.slice(),g=Object.create(null);for(i=0,o=0;i<h.length;i++)d.hasOwnProperty(a=h[i])?o++:(r.push({command:Nt.removeLayer,args:[a]}),m.splice(m.indexOf(a,o),1));for(i=0,o=0;i<p.length;i++)m[m.length-1-i]!==(a=p[p.length-1-i])&&(f.hasOwnProperty(a)?(r.push({command:Nt.removeLayer,args:[a]}),m.splice(m.lastIndexOf(a,m.length-o),1)):o++,r.push({command:Nt.addLayer,args:[d[a],l=m[m.length-i]]}),m.splice(m.length-i,0,a),g[a]=!0);for(i=0;i<p.length;i++)if(s=f[a=p[i]],u=d[a],!g[a]&&!t.isEqual(s,u))if(t.isEqual(s.source,u.source)&&t.isEqual(s["source-layer"],u["source-layer"])&&t.isEqual(s.type,u.type)){for(c in zt(s.layout,u.layout,r,a,null,Nt.setLayoutProperty),zt(s.paint,u.paint,r,a,null,Nt.setPaintProperty),t.isEqual(s.filter,u.filter)||r.push({command:Nt.setFilter,args:[a,u.filter]}),t.isEqual(s.minzoom,u.minzoom)&&t.isEqual(s.maxzoom,u.maxzoom)||r.push({command:Nt.setLayerZoomRange,args:[a,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?zt(s[c],u[c],r,a,c.slice(6),Nt.setPaintProperty):t.isEqual(s[c],u[c])||r.push({command:Nt.setLayerProperty,args:[a,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?zt(s[c],u[c],r,a,c.slice(6),Nt.setPaintProperty):t.isEqual(s[c],u[c])||r.push({command:Nt.setLayerProperty,args:[a,c,u[c]]}))}else r.push({command:Nt.removeLayer,args:[a]}),l=m[m.lastIndexOf(a)+1],r.push({command:Nt.addLayer,args:[u,l]})}(a,n.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:Nt.setStyle,args:[n]}]}return r}(this.serialize(),e).filter(function(t){return!(t.command in Oe)});if(0===r.length)return!1;var i=r.filter(function(t){return!(t.command in Ie)});if(i.length>0)throw new Error("Unimplemented: "+i.map(function(t){return t.command}).join(", ")+".");return r.forEach(function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)}),this.stylesheet=e,!0},n.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.getImage=function(t){return this.imageManager.getImage(t)},n.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(e,n,r){var i=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,n,null,r))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[e]=new Tt(e,n,this.dispatcher);o.style=this,o.setEventedParent(this,function(){return{isSourceLoaded:i.loaded(),source:o.serialize(),sourceId:e}}),o.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},n.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},n.prototype.addLayer=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else{var o;if("custom"===e.type){if(Pe(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone(e),e=t.extend(e,{source:i})),this._validate(t.validateStyle.layer,"layers."+i,e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}})}var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},n.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var r=this._order.indexOf(e);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(t){return this._layers[t]},n.prototype.setLayerZoomRange=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=this.getLayer(e);if(i){if(!t.isEqual(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(t.validateStyle.filter,"layers."+i.id+".filter",n,null,r)||(i.filter=t.clone(n),this._updateLayer(i)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(e){return t.clone(this.getLayer(e).filter)},n.prototype.setLayoutProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.isEqual(o.getLayoutProperty(n),r)||(o.setLayoutProperty(n,r,i),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(e,n){var r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},n.prototype.setPaintProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.isEqual(o.getPaintProperty(n),r)||(o.setPaintProperty(n,r,i)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},n.prototype.setFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=e.sourceLayer,o=this.sourceCaches[r],a=parseInt(e.id,10);if(void 0!==o){var s=o.getSource().type;"geojson"===s&&i?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||i?isNaN(a)||a<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):o.setFeatureState(i,a,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.removeFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=this.sourceCaches[r];if(void 0!==i){var o=i.getSource().type,a="vector"===o?e.sourceLayer:void 0,s=parseInt(e.id,10);"vector"!==o||a?e.id&&isNaN(s)||s<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be non-negative."))):!n||e.id?i.removeFeatureState(a,s,n):this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(e){this._checkLoaded();var n=e.source,r=e.sourceLayer,i=this.sourceCaches[n],o=parseInt(e.id,10);if(void 0!==i)if("vector"!==i.getSource().type||r){if(!(isNaN(o)||o<0))return i.getFeatureState(r,o);this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._serializeLayers(this._order)},function(t){return void 0!==t})},n.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},n.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=[],n=[],r=this._order.length-1;r>=0;r--)for(var i=this._order[r],o=0,a=t;o<a.length;o+=1){var s=a[o][i];if(s)if("fill-extrusion"===this._layers[i].type)for(var u=0,l=s;u<l.length;u+=1)n.push(l[u]);else for(var c=0,h=s;c<h.length;c+=1)e.push(h[c].feature)}n.sort(function(t,e){return t.intersectionZ-e.intersectionZ});for(var p=0,f=n;p<f.length;p+=1)e.push(f[p].feature);return e},n.prototype.queryRenderedFeatures=function(e,n,r){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=n.layers;o<a.length;o+=1){var s=a[o],u=this._layers[s];if(!u)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];i[u.source]=!0}}var l=[];for(var c in this.sourceCaches)n.layers&&!i[c]||l.push(M(this.sourceCaches[c],this._layers,e,n,r));return this.placement&&l.push(function(t,e,n,r,i,o){for(var a={},s=i.queryRenderedSymbols(n),u=[],l=0,c=Object.keys(s).map(Number);l<c.length;l+=1)u.push(o[c[l]]);u.sort(R);for(var h=function(){var e=f[p],n=e.featureIndex.lookupSymbolFeatures(s[e.bucketInstanceId],e.bucketIndex,e.sourceLayerIndex,r.filter,r.layers,t);for(var i in n){var o=a[i]=a[i]||[],u=n[i];u.sort(function(t,n){var r=e.featureSortOrder;if(r){var i=r.indexOf(t.featureIndex);return r.indexOf(n.featureIndex)-i}return n.featureIndex-t.featureIndex});for(var l=0,c=u;l<c.length;l+=1)o.push(c[l])}},p=0,f=u;p<f.length;p+=1)h();var d=function(n){a[n].forEach(function(r){var i=r.feature,o=e[t[n].source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o})};for(var m in a)d(m);return a}(this._layers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(l)},n.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter);var r=this.sourceCaches[e];return r?function(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,e))}return r}(r,n):[]},n.prototype.addSourceType=function(t,e,r){return n.getSourceType(t)?r(new Error('A source type called "'+t+'" already exists.')):(n.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},r):r(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(e,n){void 0===n&&(n={}),this._checkLoaded();var r=this.light.getLight(),i=!1;for(var o in e)if(!t.isEqual(e[o],r[o])){i=!0;break}if(i){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(a)}},n.prototype._validate=function(e,n,r,i,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&Pe(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.styleSpec},i)))},n.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[e].clearTiles();this.dispatcher.remove()},n.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},n.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},n.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},n.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},n.prototype._updatePlacement=function(e,n,r,i){for(var o=!1,a=!1,s={},u=0,l=this._order;u<l.length;u+=1){var c=this._layers[l[u]];if("symbol"===c.type){if(!s[c.source]){var h=this.sourceCaches[c.source];s[c.source]=h.getRenderableIds(!0).map(function(t){return h.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var p=this.crossTileSymbolIndex.addLayer(c,s[c.source],e.center.lng);o=o||p}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var f=this._layerOrderChanged||0===r;if((f||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now()))&&(this.pauseablePlacement=new xe(e,this._order,f,n,r,i),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,t.browser.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(var d=0,m=this._order;d<m.length;d+=1){var g=this._layers[m[d]];"symbol"===g.type&&this.placement.updateLayerOpacities(g,s[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},n.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n)},n.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},n.prototype.getResource=function(e,n,r){return t.makeRequest(n,r)},n}(t.Evented);De.getSourceType=function(t){return O[t]},De.setSourceType=function(t,e){O[t]=e},De.registerForPluginAvailability=t.registerForPluginAvailability;var ke=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Me=an("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Re=an("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ne=an("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Le=an("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/DEVICE_PIXEL_RATIO/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Fe=an("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Be=an("#pragma mapbox: define highp float weight\nuniform highp float u_intensity;varying vec2 v_extrude;\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nuniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;const highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),je=an("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ze=an("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=a_extrude*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ve=an("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),Ue=an("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),qe=an("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Ge=an("#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_pos;void main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),He=an("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),We=an("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Ke=an("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);}"),Xe=an("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));}"),Qe=an("uniform sampler2D u_image;uniform float u_opacity;varying vec2 v_pos;void main() {gl_FragColor=texture2D(u_image,v_pos)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ze=an("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;return (data.r+data.g*256.0+data.b*256.0*256.0)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Ye=an("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Je=an("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),$e=an("#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nuniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;void main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),tn=an("uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_gl_units_to_pixels;uniform mediump float u_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}"),en=an("uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),nn=an("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),rn=an("uniform sampler2D u_texture;\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;\n#pragma mapbox: define lowp float opacity\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),on=an("#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=vec2(tex.x,tex.y);v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}");function an(t,e){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r={};return{fragmentSource:t=t.replace(n,function(t,e,n,i,o){return r[o]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+n+" "+i+" "+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n"}),vertexSource:e=e.replace(n,function(t,e,n,i,o){var a="float"===i?"vec2":"vec4",s=o.match(/color/)?"color":a;return r[o]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+n+" "+a+" a_"+o+";\nvarying "+n+" "+i+" "+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = a_"+o+";\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+s+"(a_"+o+", a_"+o+"_t);\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+n+" "+a+" a_"+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = a_"+o+";\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = unpack_mix_"+s+"(a_"+o+", a_"+o+"_t);\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n"})}}var sn=Object.freeze({prelude:Me,background:Re,backgroundPattern:Ne,circle:Le,clippingMask:Fe,heatmap:Be,heatmapTexture:je,collisionBox:ze,collisionCircle:Ve,debug:Ue,fill:qe,fillOutline:Ge,fillOutlinePattern:He,fillPattern:We,fillExtrusion:Ke,fillExtrusionPattern:Xe,extrusionTexture:Qe,hillshadePrepare:Ze,hillshade:Ye,line:Je,lineGradient:$e,linePattern:tn,lineSDF:en,raster:nn,symbolIcon:rn,symbolSDF:on}),un=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};un.prototype.bind=function(t,e,n,r,i,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==r.length,l=0;!u&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(u=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!u&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind()):this.freshBind(e,n,r,i,o,a,s)},un.prototype.freshBind=function(t,e,n,r,i,o,a){var s,u=t.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var h=u;h<s;h++)c.disableVertexAttribArray(h)}e.enableAttributes(c,t);for(var p=0,f=n;p<f.length;p+=1)f[p].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,i);for(var d=0,m=n;d<m.length;d+=1){var g=m[d];g.bind(),g.setVertexAttribPointers(c,t,i)}o&&(o.bind(),o.setVertexAttribPointers(c,t,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,i)),l.currentNumAttributes=u},un.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ln=function(e,n,r,i,o){var a=e.gl;this.program=a.createProgram();var s=r.defines().concat("#define DEVICE_PIXEL_RATIO "+t.browser.devicePixelRatio.toFixed(1));o&&s.push("#define OVERDRAW_INSPECTOR;");var u=s.concat(Me.fragmentSource,n.fragmentSource).join("\n"),l=s.concat(Me.vertexSource,n.vertexSource).join("\n"),c=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(c,u),a.compileShader(c),a.attachShader(this.program,c);var h=a.createShader(a.VERTEX_SHADER);a.shaderSource(h,l),a.compileShader(h),a.attachShader(this.program,h);for(var p=r.layoutAttributes||[],f=0;f<p.length;f++)a.bindAttribLocation(this.program,f,p[f].name);a.linkProgram(this.program),this.numAttributes=a.getProgramParameter(this.program,a.ACTIVE_ATTRIBUTES),this.attributes={};for(var d={},m=0;m<this.numAttributes;m++){var g=a.getActiveAttrib(this.program,m);g&&(this.attributes[g.name]=a.getAttribLocation(this.program,g.name))}for(var y=a.getProgramParameter(this.program,a.ACTIVE_UNIFORMS),v=0;v<y;v++){var b=a.getActiveUniform(this.program,v);b&&(d[b.name]=a.getUniformLocation(this.program,b.name))}this.fixedUniforms=i(e,d),this.binderUniforms=r.getUniforms(e,d)};function cn(e,n,r){var i=1/ae(r,1,n.transform.tileZoom),o=Math.pow(2,r.tileID.overscaledZ),a=r.tileSize*Math.pow(2,n.transform.tileZoom)/o,s=a*(r.tileID.canonical.x+r.tileID.wrap*o),u=a*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[t.browser.devicePixelRatio,i,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[s>>16,u>>16],u_pixel_coord_lower:[65535&s,65535&u]}}ln.prototype.draw=function(t,e,n,r,i,o,a,s,u,l,c,h,p,f,d,m){var g,y=t.gl;for(var v in t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(r),t.setColorMode(i),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[v].set(a[v]);f&&f.setUniforms(t,this.binderUniforms,h,{zoom:p});for(var b=(g={},g[y.LINES]=2,g[y.TRIANGLES]=3,g[y.LINE_STRIP]=1,g)[e],_=0,w=c.get();_<w.length;_+=1){var x=w[_],C=x.vaos||(x.vaos={});(C[s]||(C[s]=new un)).bind(t,this,u,f?f.getPaintVertexBuffers():[],l,x.vertexOffset,d,m),y.drawElements(e,x.primitiveLength*b,y.UNSIGNED_SHORT,x.primitiveOffset*b*2)}};var hn=function(e,n,r){var i=n.style.light,o=i.properties.get("position"),a=[o.x,o.y,o.z],s=t.create();"viewport"===i.properties.get("anchor")&&t.fromRotation(s,-n.transform.angle),t.transformMat3(a,a,s);var u=i.properties.get("color");return{u_matrix:e,u_lightpos:a,u_lightintensity:i.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+r}},pn=function(e,n,r,i,o,a){return t.extend(hn(e,n,r),cn(o,n,a),{u_height_factor:-Math.pow(2,i.overscaledZ)/a.tileSize/8})},fn=function(e,n,r){var i=t.create$1();t.ortho(i,0,e.width,e.height,0,0,1);var o=e.context.gl;return{u_matrix:i,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:r,u_opacity:n}},dn=function(t){return{u_matrix:t}},mn=function(e,n,r,i){return t.extend(dn(e),cn(r,n,i))},gn=function(t,e){return{u_matrix:t,u_world:e}},yn=function(e,n,r,i,o){return t.extend(mn(e,n,r,i),{u_world:o})},vn=function(t,e,n,r){var i,o,a=t.transform;if("map"===r.paint.get("circle-pitch-alignment")){var s=ae(n,1,a.zoom);i=!0,o=[s,s]}else i=!1,o=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+i,u_extrude_scale:o}},bn=function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}},_n=function(t,e,n){var r=ae(n,1,e.zoom),i=Math.pow(2,e.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*i),e.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:o}},wn=function(t,e){return{u_matrix:t,u_color:e}},xn=function(t){return{u_matrix:t}},Cn=function(t,e,n,r){return{u_matrix:t,u_extrude_scale:ae(e,1,n),u_intensity:r}},En=function(t,e,n){var r=n.paint.get("hillshade-shadow-color"),i=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color"),a=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);var s=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),s),u_image:0,u_latrange:Tn(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),a],u_shadow:r,u_highlight:i,u_accent:o}},Sn=function(e,n){var r=e.dem.stride,i=t.create$1();return t.ortho(i,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(i,i,[0,-t.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.tileID.overscaledZ,u_maxzoom:n}};function Tn(e,n){var r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new t.MercatorCoordinate(0,i/r).toLngLat().lat,new t.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}var An=function(t,e,n){var r=t.transform;return{u_matrix:kn(t,e,n),u_ratio:1/ae(e,1,r.zoom),u_gl_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},Pn=function(e,n,r){return t.extend(An(e,n,r),{u_image:0})},In=function(e,n,r,i){var o=e.transform,a=Dn(n,o);return{u_matrix:kn(e,n,r),u_texsize:n.imageAtlasTexture.size,u_ratio:1/ae(n,1,o.zoom),u_image:0,u_scale:[t.browser.devicePixelRatio,a,i.fromScale,i.toScale],u_fade:i.t,u_gl_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},On=function(e,n,r,i,o){var a=e.lineAtlas,s=Dn(n,e.transform),u="round"===r.layout.get("line-cap"),l=a.getDash(i.from,u),c=a.getDash(i.to,u),h=l.width*o.fromScale,p=c.width*o.toScale;return t.extend(An(e,n,r),{u_patternscale_a:[s/h,-l.height/2],u_patternscale_b:[s/p,-c.height/2],u_sdfgamma:a.width/(256*Math.min(h,p)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:l.y,u_tex_y_b:c.y,u_mix:o.t})};function Dn(t,e){return 1/ae(t,1,e.tileZoom)}function kn(t,e,n){return t.translatePosMatrix(e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var Mn=function(t,e,n,r,i){return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:function(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}(i.paint.get("raster-hue-rotate"))};var o,a},Rn=function(t,e,n,r,i,o,a,s,u,l){var c=i.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_gl_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+r,u_texsize:l,u_texture:0}},Nn=function(e,n,r,i,o,a,s,u,l,c,h){var p=o.transform;return t.extend(Rn(e,n,r,i,o,a,s,u,l,c),{u_gamma_scale:i?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_is_halo:+h})},Ln=function(t,e,n){return{u_matrix:t,u_opacity:e,u_color:n}},Fn=function(e,n,r,i,o,a){return t.extend(function(t,e,n,r){var i=n.imageManager.getPattern(t.from),o=n.imageManager.getPattern(t.to),a=n.imageManager.getPixelSize(),s=a.width,u=a.height,l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,h=c*(r.tileID.canonical.x+r.tileID.wrap*l),p=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,u],u_mix:e.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/ae(r,1,n.transform.tileZoom),u_pixel_coord_upper:[h>>16,p>>16],u_pixel_coord_lower:[65535&h,65535&p]}}(i,a,r,o),{u_matrix:e,u_opacity:n})},Bn={fillExtrusion:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient)}},fillExtrusionPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},extrusionTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fill:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},fillPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},fillOutline:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}},fillOutlinePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},circle:function(e,n){return{u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},collisionBox:bn,collisionCircle:bn,debug:function(e,n){return{u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},clippingMask:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmap:function(e,n){return{u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmapTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}},hillshade:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}},hillshadePrepare:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_maxzoom:new t.Uniform1f(e,n.u_maxzoom)}},line:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels)}},lineGradient:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image)}},linePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_image:new t.Uniform1i(e,n.u_image),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},lineSDF:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}},raster:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}},symbolIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,n.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}},symbolSDF:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,n.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_is_halo:new t.Uniform1f(e,n.u_is_halo)}},background:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}},backgroundPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}}};function jn(e,n){for(var r=e.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),i=0;i<r.length;i++){var o={},a=r[i],s=r.slice(i+1);zn(a.tileID.wrapped(),a.tileID,s,new t.OverscaledTileID(0,a.tileID.wrap+1,0,0,0),o),a.setMask(o,n)}}function zn(e,n,r,i,o){for(var a=0;a<r.length;a++){var s=r[a];if(i.isLessThan(s.tileID))break;if(n.key===s.tileID.key)return;if(s.tileID.isChildOf(n)){for(var u=n.children(1/0),l=0;l<u.length;l++)zn(e,u[l],r.slice(a),i,o);return}}var c=n.overscaledZ-e.overscaledZ,h=new t.CanonicalTileID(c,n.canonical.x-(e.canonical.x<<c),n.canonical.y-(e.canonical.y<<c));o[h.key]=o[h.key]||h}function Vn(t,e,n,r,i){for(var o=t.context,a=o.gl,s=t.useProgram(i?"collisionCircle":"collisionBox"),u=0;u<r.length;u++){var l=r[u],c=e.getTile(l),h=c.getBucket(n);if(h){var p=i?h.collisionCircle:h.collisionBox;p&&s.draw(o,i?a.TRIANGLES:a.LINES,wt.disabled,xt.disabled,t.colorModeForRenderPass(),Et.disabled,_n(l.posMatrix,t.transform,c),n.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,null,t.transform.zoom,null,null,p.collisionVertexBuffer)}}}var Un=t.identity(new Float32Array(16)),qn=t.properties.layout;function Gn(e,n,r,i,o,a,s,u,l,c,h,p){for(var f,d,m=e.context,g=m.gl,y=e.transform,v="map"===u,b="map"===l,_=v&&"point"!==r.layout.get("symbol-placement"),w=v&&!b&&!_,x=void 0!==r.layout.get("symbol-sort-key").constantOr(1),C=e.depthModeForSublayer(0,wt.ReadOnly),E=[],S=0,T=i;S<T.length;S+=1){var A=T[S],P=n.getTile(A),I=P.getBucket(r);if(I){var O=o?I.text:I.icon;if(O&&O.segments.get().length){var D=O.programConfigurations.get(r.id),k=o||I.sdfIcons,M=o?I.textSizeData:I.iconSizeData;f||(f=e.useProgram(k?"symbolSDF":"symbolIcon",D),d=t.evaluateSizeForZoom(M,y.zoom,qn.properties[o?"text-size":"icon-size"])),m.activeTexture.set(g.TEXTURE0);var R=void 0,N=void 0,L=void 0;if(o)N=P.glyphAtlasTexture,L=g.LINEAR,R=P.glyphAtlasTexture.size;else{var F=1!==r.layout.get("icon-size").constantOr(0)||I.iconsNeedLinear;N=P.imageAtlasTexture,L=k||e.options.rotating||e.options.zooming||F||b||0!==y.pitch?g.LINEAR:g.NEAREST,R=P.imageAtlasTexture.size}var B=ae(P,1,e.transform.zoom),j=Ht(A.posMatrix,b,v,e.transform,B),z=Wt(A.posMatrix,b,v,e.transform,B);_&&Qt(I,A.posMatrix,e,o,j,z,b,c);var V=e.translatePosMatrix(A.posMatrix,P,a,s),U=_?Un:j,q=e.translatePosMatrix(z,P,a,s,!0),G=k&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),H={program:f,buffers:O,uniformValues:k?Nn(M.functionType,d,w,b,e,V,U,q,o,R,!0):Rn(M.functionType,d,w,b,e,V,U,q,o,R),atlasTexture:N,atlasInterpolation:L,isSDF:k,hasHalo:G};if(x)for(var W=0,K=O.segments.get();W<K.length;W+=1){var X=K[W];E.push({segments:new t.SegmentVector([X]),sortKey:X.sortKey,state:H})}else E.push({segments:O.segments,sortKey:0,state:H})}}}x&&E.sort(function(t,e){return t.sortKey-e.sortKey});for(var Q=0,Z=E;Q<Z.length;Q+=1){var Y=Z[Q],J=Y.state;if(J.atlasTexture.bind(J.atlasInterpolation,g.CLAMP_TO_EDGE),J.isSDF){var $=J.uniformValues;J.hasHalo&&($.u_is_halo=1,Hn(J.buffers,Y.segments,r,e,J.program,C,h,p,$)),$.u_is_halo=0}Hn(J.buffers,Y.segments,r,e,J.program,C,h,p,J.uniformValues)}}function Hn(t,e,n,r,i,o,a,s,u){var l=r.context;i.draw(l,l.gl.TRIANGLES,o,a,s,Et.disabled,u,n.id,t.layoutVertexBuffer,t.indexBuffer,e,n.paint,r.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Wn(t,e,n,r,i,o,a){var s,u,l,c,h,p=t.context.gl,f=n.paint.get("fill-pattern"),d=f&&f.constantOr(1),m=n.getCrossfadeParameters();a?(u=d&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=p.LINES):(u=d?"fillPattern":"fill",s=p.TRIANGLES);for(var g=0,y=r;g<y.length;g+=1){var v=y[g],b=e.getTile(v);if(!d||b.patternsLoaded()){var _=b.getBucket(n);if(_){var w=_.programConfigurations.get(n.id),x=t.useProgram(u,w);d&&(t.context.activeTexture.set(p.TEXTURE0),b.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),w.updatePatternPaintBuffers(m));var C=f.constantOr(null);if(C&&b.imageAtlas){var E=b.imageAtlas.patternPositions[C.to],S=b.imageAtlas.patternPositions[C.from];E&&S&&w.setConstantPatternPositions(E,S)}var T=t.translatePosMatrix(v.posMatrix,b,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){c=_.indexBuffer2,h=_.segments2;var A=[p.drawingBufferWidth,p.drawingBufferHeight];l="fillOutlinePattern"===u&&d?yn(T,t,m,b,A):gn(T,A)}else c=_.indexBuffer,h=_.segments,l=d?mn(T,t,m,b):dn(T);x.draw(t.context,s,i,t.stencilModeForClipping(v),o,Et.disabled,l,n.id,_.layoutVertexBuffer,c,h,n.paint,t.transform.zoom,w)}}}}function Kn(e,n){var r=e.context,i=r.gl,o=n.viewportFrame;if(e.depthRboNeedsClear&&e.setupOffscreenDepthRenderbuffer(),!o){var a=new t.Texture(r,{width:e.width,height:e.height,data:null},i.RGBA);a.bind(i.LINEAR,i.CLAMP_TO_EDGE),(o=n.viewportFrame=r.createFramebuffer(e.width,e.height)).colorAttachment.set(a.texture)}r.bindFramebuffer.set(o.framebuffer),o.depthAttachment.set(e.depthRbo),e.depthRboNeedsClear&&(r.clear({depth:1}),e.depthRboNeedsClear=!1),r.clear({color:t.Color.transparent}),r.setStencilMode(xt.disabled),r.setDepthMode(new wt(i.LEQUAL,wt.ReadWrite,[0,1])),r.setColorMode(e.colorModeForRenderPass())}function Xn(t,e,n){var r=e.viewportFrame;if(r){var i=t.context,o=i.gl;i.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,r.colorAttachment.get()),t.useProgram("extrusionTexture").draw(i,o.TRIANGLES,wt.disabled,xt.disabled,t.colorModeForRenderPass(),Et.disabled,fn(t,n,0),e.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,e.paint,t.transform.zoom)}}function Qn(t,e,n,r,i,o){var a=t.context,s=a.gl,u=e.fbo;if(u){var l=t.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,u.colorAttachment.get());var c=En(t,e,n);e.maskedBoundsBuffer&&e.maskedIndexBuffer&&e.segments?l.draw(a,s.TRIANGLES,r,i,o,Et.disabled,c,n.id,e.maskedBoundsBuffer,e.maskedIndexBuffer,e.segments):l.draw(a,s.TRIANGLES,r,i,o,Et.disabled,c,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function Zn(e,n,r,i,o,a,s){var u=e.context,l=u.gl;if(n.dem&&n.dem.data){var c=n.dem.dim,h=n.dem.stride,p=n.dem.getPixels();if(u.activeTexture.set(l.TEXTURE1),u.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(h),n.demTexture){var f=n.demTexture;f.update(p,{premultiply:!1}),f.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else n.demTexture=new t.Texture(u,p,l.RGBA,{premultiply:!1}),n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);u.activeTexture.set(l.TEXTURE0);var d=n.fbo;if(!d){var m=new t.Texture(u,{width:c,height:c,data:null},l.RGBA);m.bind(l.LINEAR,l.CLAMP_TO_EDGE),(d=n.fbo=u.createFramebuffer(c,c)).colorAttachment.set(m.texture)}u.bindFramebuffer.set(d.framebuffer),u.viewport.set([0,0,c,c]),e.useProgram("hillshadePrepare").draw(u,l.TRIANGLES,o,a,s,Et.disabled,Sn(n,i),r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Yn(e,n,r,i,o){var a=i.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),u=(s-e.timeAdded)/a,l=n?(s-n.timeAdded)/a:-1,c=r.getSource(),h=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),p=!n||Math.abs(n.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),f=p&&e.refreshedUponExpiration?1:t.clamp(p?u:1-l,0,1);return e.refreshedUponExpiration&&u>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}function Jn(e,n,r){var i=e.context,o=i.gl,a=r.posMatrix,s=e.useProgram("debug"),u=wt.disabled,l=xt.disabled,c=e.colorModeForRenderPass(),h="$debug";s.draw(i,o.LINE_STRIP,u,l,c,Et.disabled,wn(a,t.Color.red),h,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);for(var p=function(t,e,n,r){r=r||1;var i,o,a,s,u,l,c,h,p=[];for(i=0,o=t.length;i<o;i++)if(u=$n[t[i]]){for(h=null,a=0,s=u[1].length;a<s;a+=2)-1===u[1][a]&&-1===u[1][a+1]?h=null:(l=e+u[1][a]*r,c=200-u[1][a+1]*r,h&&p.push(h.x,h.y,l,c),h={x:l,y:c});e+=u[0]*r}return p}(r.toString(),50,0,5),f=new t.StructArrayLayout2i4,d=new t.StructArrayLayout2ui4,m=0;m<p.length;m+=2)f.emplaceBack(p[m],p[m+1]),d.emplaceBack(m,m+1);for(var g=i.createVertexBuffer(f,ke.members),y=i.createIndexBuffer(d),v=t.SegmentVector.simpleSegment(0,0,f.length/2,f.length/2),b=n.getTile(r).tileSize,_=t.EXTENT/(Math.pow(2,e.transform.zoom-r.overscaledZ)*b),w=[[-1,-1],[-1,1],[1,-1],[1,1]],x=0;x<w.length;x++){var C=w[x];s.draw(i,o.LINES,u,l,c,Et.disabled,wn(t.translate([],a,[_*C[0],_*C[1],0]),t.Color.white),h,g,y,v)}s.draw(i,o.LINES,u,l,c,Et.disabled,wn(a,t.Color.black),h,g,y,v)}var $n={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},tr={symbol:function(t,e,n,r){if("translucent"===t.renderPass){var i=xt.disabled,o=t.colorModeForRenderPass();0!==n.paint.get("icon-opacity").constantOr(1)&&Gn(t,e,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),i,o),0!==n.paint.get("text-opacity").constantOr(1)&&Gn(t,e,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),i,o),e.map.showCollisionBoxes&&function(t,e,n,r){Vn(t,e,n,r,!1),Vn(t,e,n,r,!0)}(t,e,n,r)}},circle:function(t,e,n,r){if("translucent"===t.renderPass){var i=n.paint.get("circle-opacity"),o=n.paint.get("circle-stroke-width"),a=n.paint.get("circle-stroke-opacity");if(0!==i.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1))for(var s=t.context,u=s.gl,l=t.depthModeForSublayer(0,wt.ReadOnly),c=xt.disabled,h=t.colorModeForRenderPass(),p=0;p<r.length;p++){var f=r[p],d=e.getTile(f),m=d.getBucket(n);if(m){var g=m.programConfigurations.get(n.id);t.useProgram("circle",g).draw(s,u.TRIANGLES,l,c,h,Et.disabled,vn(t,f,d,n),n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,n.paint,t.transform.zoom,g)}}}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=e.depthModeForSublayer(0,wt.ReadOnly),u=xt.disabled,l=new Ct([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),function t(e,n,r,i){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.width/4,n.height/4,0,o.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),i.colorAttachment.set(r),e.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,i.colorAttachment.setDirty(),t(e,n,r,i))}(t,e,o,i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4))}}(o,e,r),o.clear({color:t.Color.transparent});for(var c=0;c<i.length;c++){var h=i[c];if(!n.hasRenderableParent(h)){var p=n.getTile(h),f=p.getBucket(r);if(f){var d=f.programConfigurations.get(r.id);e.useProgram("heatmap",d).draw(o,a.TRIANGLES,s,u,l,Et.disabled,Cn(h.posMatrix,p,e.transform.zoom,r.paint.get("heatmap-intensity")),r.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,r.paint,e.transform.zoom,d)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var r=e.context,i=r.gl,o=n.heatmapFbo;if(o){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,wt.disabled,xt.disabled,e.colorModeForRenderPass(),Et.disabled,function(e,n,r,i){var o=t.create$1();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}}(e,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,r))},line:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1)){var s=e.depthModeForSublayer(0,wt.ReadOnly),u=e.colorModeForRenderPass(),l=r.paint.get("line-dasharray"),c=r.paint.get("line-pattern"),h=c.constantOr(1),p=r.paint.get("line-gradient"),f=r.getCrossfadeParameters(),d=l?"lineSDF":h?"linePattern":p?"lineGradient":"line",m=e.context,g=m.gl,y=!0;if(p){m.activeTexture.set(g.TEXTURE0);var v=r.gradientTexture;if(!r.gradient)return;v||(v=r.gradientTexture=new t.Texture(m,r.gradient,g.RGBA)),v.bind(g.LINEAR,g.CLAMP_TO_EDGE)}for(var b=0,_=i;b<_.length;b+=1){var w=_[b],x=n.getTile(w);if(!h||x.patternsLoaded()){var C=x.getBucket(r);if(C){var E=C.programConfigurations.get(r.id),S=e.context.program.get(),T=e.useProgram(d,E),A=y||T.program!==S,P=c.constantOr(null);if(P&&x.imageAtlas){var I=x.imageAtlas.patternPositions[P.to],O=x.imageAtlas.patternPositions[P.from];I&&O&&E.setConstantPatternPositions(I,O)}var D=l?On(e,x,r,l,f):h?In(e,x,r,f):p?Pn(e,x,r):An(e,x,r);l&&(A||e.lineAtlas.dirty)?(m.activeTexture.set(g.TEXTURE0),e.lineAtlas.bind(m)):h&&(m.activeTexture.set(g.TEXTURE0),x.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),E.updatePatternPaintBuffers(f)),T.draw(m,g.TRIANGLES,s,e.stencilModeForClipping(w),u,Et.disabled,D,r.id,C.layoutVertexBuffer,C.indexBuffer,C.segments,r.paint,e.transform.zoom,E),y=!1}}}}}},fill:function(e,n,r,i){var o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),u=r.paint.get("fill-pattern").constantOr(1)||1!==o.constantOr(t.Color.transparent).a||1!==a.constantOr(0)?"translucent":"opaque";e.renderPass===u&&Wn(e,n,r,i,e.depthModeForSublayer(1,"opaque"===e.renderPass?wt.ReadWrite:wt.ReadOnly),s,!1),"translucent"===e.renderPass&&r.paint.get("fill-antialias")&&Wn(e,n,r,i,e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,wt.ReadOnly),s,!0)}},"fill-extrusion":function(t,e,n,r){0!==n.paint.get("fill-extrusion-opacity")&&("offscreen"===t.renderPass?(Kn(t,n),function(t,e,n,r,i,o,a){for(var s=t.context,u=s.gl,l=n.paint.get("fill-extrusion-pattern"),c=l.constantOr(1),h=n.getCrossfadeParameters(),p=0,f=r;p<f.length;p+=1){var d=f[p],m=e.getTile(d),g=m.getBucket(n);if(g){var y=g.programConfigurations.get(n.id),v=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",y);c&&(t.context.activeTexture.set(u.TEXTURE0),m.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),y.updatePatternPaintBuffers(h));var b=l.constantOr(null);if(b&&m.imageAtlas){var _=m.imageAtlas.patternPositions[b.to],w=m.imageAtlas.patternPositions[b.from];_&&w&&y.setConstantPatternPositions(_,w)}var x=t.translatePosMatrix(d.posMatrix,m,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),C=n.paint.get("fill-extrusion-vertical-gradient"),E=c?pn(x,t,C,d,h,m):hn(x,t,C);v.draw(s,s.gl.TRIANGLES,i,o,a,Et.backCCW,E,n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,n.paint,t.transform.zoom,y)}}}(t,e,n,r,new wt(t.context.gl.LEQUAL,wt.ReadWrite,[0,1]),xt.disabled,t.colorModeForRenderPass())):"translucent"===t.renderPass&&Xn(t,n,n.paint.get("fill-extrusion-opacity")))},hillshade:function(t,e,n,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var i=t.context,o=e.getSource().maxzoom,a=t.depthModeForSublayer(0,wt.ReadOnly),s=xt.disabled,u=t.colorModeForRenderPass(),l=0,c=r;l<c.length;l+=1){var h=e.getTile(c[l]);h.needsHillshadePrepare&&"offscreen"===t.renderPass?Zn(t,h,n,o,a,s,u):"translucent"===t.renderPass&&Qn(t,h,n,a,s,u)}i.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,r){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity"))for(var i=t.context,o=i.gl,a=e.getSource(),s=t.useProgram("raster"),u=xt.disabled,l=t.colorModeForRenderPass(),c=r.length&&r[0].overscaledZ,h=!t.options.moving,p=0,f=r;p<f.length;p+=1){var d=f[p],m=t.depthModeForSublayer(d.overscaledZ-c,1===n.paint.get("raster-opacity")?wt.ReadWrite:wt.ReadOnly,o.LESS),g=e.getTile(d),y=t.transform.calculatePosMatrix(d.toUnwrapped(),h);g.registerFadeDuration(n.paint.get("raster-fade-duration"));var v=e.findLoadedParent(d,0),b=Yn(g,v,e,n,t.transform),_=void 0,w=void 0,x="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),g.texture.bind(x,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),v?(v.texture.bind(x,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),_=Math.pow(2,v.tileID.overscaledZ-g.tileID.overscaledZ),w=[g.tileID.canonical.x*_%1,g.tileID.canonical.y*_%1]):g.texture.bind(x,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var C=Mn(y,w||[0,0],_||1,b,n);a instanceof I?s.draw(i,o.TRIANGLES,m,u,l,Et.disabled,C,n.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):g.maskedBoundsBuffer&&g.maskedIndexBuffer&&g.segments?s.draw(i,o.TRIANGLES,m,u,l,Et.disabled,C,n.id,g.maskedBoundsBuffer,g.maskedIndexBuffer,g.segments,n.paint,t.transform.zoom):s.draw(i,o.TRIANGLES,m,u,l,Et.disabled,C,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=t.context,a=o.gl,s=t.transform,u=s.tileSize,l=n.paint.get("background-pattern");if(!t.isPatternMissing(l)){var c=l||1!==r.a||1!==i?"translucent":"opaque";if(t.renderPass===c){var h=xt.disabled,p=t.depthModeForSublayer(0,"opaque"===c?wt.ReadWrite:wt.ReadOnly),f=t.colorModeForRenderPass(),d=t.useProgram(l?"backgroundPattern":"background"),m=s.coveringTiles({tileSize:u});l&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var g=n.getCrossfadeParameters(),y=0,v=m;y<v.length;y+=1){var b=v[y],_=t.transform.calculatePosMatrix(b.toUnwrapped()),w=l?Fn(_,i,t,l,{tileID:b,tileSize:u},g):Ln(_,i,r);d.draw(o,a.TRIANGLES,p,h,f,Et.disabled,w,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,n){for(var r=0;r<n.length;r++)Jn(t,e,n[r])},custom:function(t,e,n){var r=t.context,i=n.implementation;if("offscreen"===t.renderPass){var o=i.prerender;o&&(t.setCustomLayerDefaults(),o.call(i,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState()),"3d"===i.renderingMode&&(t.setCustomLayerDefaults(),Kn(t,n),i.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass)if("3d"===i.renderingMode)Xn(t,n,1);else{t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(xt.disabled);var a=t.depthModeForSublayer(0,wt.ReadOnly);r.setDepthMode(a),i.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}},er=function(e,n){this.context=new St(e),this.transform=n,this._tileTextures={},this.setup(),this.numSublayers=Tt.maxUnderzooming+Tt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new t.ProgramConfiguration,this.crossTileSymbolIndex=new Ae};function nr(t,e){if(t.y>e.y){var n=t;t=e,e=n}return{x0:t.x,y0:t.y,x1:e.x,y1:e.y,dx:e.x-t.x,dy:e.y-t.y}}function rr(t,e,n,r,i){var o=Math.max(n,Math.floor(e.y0)),a=Math.min(r,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var u=t.dx/t.dy,l=e.dx/e.dy,c=t.dx>0,h=e.dx<0,p=o;p<a;p++){var f=u*Math.max(0,Math.min(t.dy,p+c-t.y0))+t.x0,d=l*Math.max(0,Math.min(e.dy,p+h-e.y0))+e.x0;i(Math.floor(d),Math.ceil(f),p)}}function ir(t,e,n,r,i,o){var a,s=nr(t,e),u=nr(e,n),l=nr(n,t);s.dy>u.dy&&(a=s,s=u,u=a),s.dy>l.dy&&(a=s,s=l,l=a),u.dy>l.dy&&(a=u,u=l,l=a),s.dy&&rr(l,s,r,i,o),u.dy&&rr(l,u,r,i,o)}er.prototype.resize=function(e,n){var r=this.context.gl;if(this.width=e*t.browser.devicePixelRatio,this.height=n*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,o=this.style._order;i<o.length;i+=1)this.style._layers[o[i]].resize();this.depthRbo&&(r.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},er.prototype.setup=function(){var e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,ke.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,ke.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var i=new t.StructArrayLayout4i8;i.emplaceBack(0,0,0,0),i.emplaceBack(t.EXTENT,0,t.EXTENT,0),i.emplaceBack(0,t.EXTENT,0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(i,t.rasterBoundsAttributes.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,ke.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);var u=this.context.gl;this.stencilClearMode=new xt({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO)},er.prototype.clearStencil=function(){var e=this.context,n=e.gl,r=t.create$1();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,wt.disabled,this.stencilClearMode,Ct.disabled,Et.disabled,xn(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},er.prototype._renderTileClippingMasks=function(t){var e=this.context,n=e.gl;e.setColorMode(Ct.disabled),e.setDepthMode(wt.disabled);var r=this.useProgram("clippingMask"),i=1;this._tileClippingMaskIDs={};for(var o=0,a=t;o<a.length;o+=1){var s=a[o],u=this._tileClippingMaskIDs[s.key]=i++;r.draw(e,n.TRIANGLES,wt.disabled,new xt({func:n.ALWAYS,mask:0},u,255,n.KEEP,n.KEEP,n.REPLACE),Ct.disabled,Et.disabled,xn(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}},er.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new xt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},er.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new Ct([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Ct.unblended:Ct.alphaBlended},er.prototype.depthModeForSublayer=function(t,e,n){var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new wt(n||this.context.gl.LEQUAL,e,[r,r])},er.prototype.render=function(e,n){this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now());var r=this.style._order,i=this.style.sourceCaches;for(var o in i){var a=i[o];a.used&&a.prepare(this.context)}var s,u={},l={},c={};for(var h in i){var p=i[h];u[h]=p.getVisibleCoordinates(),l[h]=u[h].slice().reverse(),c[h]=p.getVisibleCoordinates(!0).reverse()}for(var f in i){var d=i[f],m=d.getSource();if("raster"===m.type||"raster-dem"===m.type){for(var g=[],y=0,v=u[f];y<v.length;y+=1)g.push(d.getTile(v[y]));jn(g,this.context)}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var b=0,_=r;b<_.length;b+=1){var w=this.style._layers[_[b]];if(w.hasOffscreenPass()&&!w.isHidden(this.transform.zoom)){var x=l[w.source];("custom"===w.type||x.length)&&this.renderLayer(this,i[w.source],w,x)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){var C=this.style._layers[r[this.currentLayer]],E=i[C.source],S=u[C.source];C.source!==s&&E&&(this.clearStencil(),E.getSource().isTileClipped&&this._renderTileClippingMasks(S)),this.renderLayer(this,E,C,S),s=C.source}for(this.renderPass="translucent",this.currentLayer=0,s=null;this.currentLayer<r.length;this.currentLayer++){var T=this.style._layers[r[this.currentLayer]],A=i[T.source],P=("symbol"===T.type?c:l)[T.source];T.source!==s&&A&&(this.clearStencil(),A.getSource().isTileClipped&&this._renderTileClippingMasks(u[T.source])),this.renderLayer(this,A,T,P),s=T.source}if(this.options.showTileBoundaries)for(var I in i){tr.debug(this,i[I],u[I]);break}this.setCustomLayerDefaults()},er.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},er.prototype.renderLayer=function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||r.length)&&(this.id=n.id,tr[n.type](t,e,n,r))},er.prototype.translatePosMatrix=function(e,n,r,i,o){if(!r[0]&&!r[1])return e;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var s=Math.sin(a),u=Math.cos(a);r=[r[0]*u-r[1]*s,r[0]*s+r[1]*u]}var l=[o?r[0]:ae(n,r[0],this.transform.zoom),o?r[1]:ae(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,l),c},er.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},er.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},er.prototype.isPatternMissing=function(t){if(!t)return!1;var e=this.imageManager.getPattern(t.from),n=this.imageManager.getPattern(t.to);return!e||!n},er.prototype.useProgram=function(t,e){void 0===e&&(e=this.emptyProgramConfiguration),this.cache=this.cache||{};var n=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new ln(this.context,sn[t],e,Bn[t],this._showOverdrawInspector)),this.cache[n]},er.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},er.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)};var or=function(e,n,r){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===r||r,this._minZoom=e||0,this._maxZoom=n||22,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},ar={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};or.prototype.clone=function(){var t=new or(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},ar.minZoom.get=function(){return this._minZoom},ar.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},ar.maxZoom.get=function(){return this._maxZoom},ar.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},ar.renderWorldCopies.get=function(){return this._renderWorldCopies},ar.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},ar.worldSize.get=function(){return this.tileSize*this.scale},ar.centerPoint.get=function(){return this.size._div(2)},ar.size.get=function(){return new t.Point(this.width,this.height)},ar.bearing.get=function(){return-this.angle/Math.PI*180},ar.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ar.pitch.get=function(){return this._pitch/Math.PI*180},ar.pitch.set=function(e){var n=t.clamp(e,0,60)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},ar.fov.get=function(){return this._fov/Math.PI*180},ar.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},ar.zoom.get=function(){return this._zoom},ar.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},ar.center.get=function(){return this._center},ar.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},or.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},or.prototype.getVisibleUnwrappedCoordinates=function(e){var n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new t.Point(0,0)),i=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),u=Math.floor(Math.max(r.x,i.x,o.x,a.x)),l=s-1;l<=u+1;l++)0!==l&&n.push(new t.UnwrappedTileID(l,e));return n},or.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),r=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var i=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,n),a=new t.Point(o*i.x-.5,o*i.y-.5);return function(e,n,r,i){void 0===i&&(i=!0);var o=1<<e,a={};function s(n,s,u){var l,c,h;if(u>=0&&u<=o)for(l=n;l<s;l++)0!==(c=Math.floor(l/o))&&!0!==i||(h=new t.OverscaledTileID(r,c,e,(l%o+o)%o,u),a[h.key]=h)}var u=n.map(function(e){return new t.Point(e.x,e.y)._mult(o)});return ir(u[0],u[1],u[2],0,o,s),ir(u[2],u[3],u[0],0,o,s),Object.keys(a).map(function(t){return a[t]})}(n,[this.pointCoordinate(new t.Point(0,0)),this.pointCoordinate(new t.Point(this.width,0)),this.pointCoordinate(new t.Point(this.width,this.height)),this.pointCoordinate(new t.Point(0,this.height))],e.reparseOverscaled?r:n,this._renderWorldCopies).sort(function(t,e){return a.dist(t.canonical)-a.dist(e.canonical)})},or.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},ar.unmodified.get=function(){return this._unmodified},or.prototype.zoomScale=function(t){return Math.pow(2,t)},or.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},or.prototype.project=function(e){var n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)},or.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},ar.point.get=function(){return this.project(this.center)},or.prototype.setLocationAtPoint=function(e,n){var r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},or.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},or.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},or.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},or.prototype.coordinateLocation=function(t){return t.toLngLat()},or.prototype.pointCoordinate=function(e){var n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],o=r[3],a=n[1]/i,s=r[1]/o,u=n[2]/i,l=r[2]/o,c=u===l?0:(0-u)/(l-u);return new t.MercatorCoordinate(t.number(n[0]/i,r[0]/o,c)/this.worldSize,t.number(a,s,c)/this.worldSize)},or.prototype.coordinatePoint=function(e){var n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix),new t.Point(n[0]/n[3],n[1]/n[3])},or.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},or.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},or.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},or.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,u=t.identity(new Float64Array(16));return t.translate(u,u,[s*a,o.y*a,0]),t.scale(u,u,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(u,n?this.alignedProjMatrix:this.projMatrix,u),i[r]=new Float32Array(u),i[r]},or.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},or.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,r,i,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var h=this.latRange;o=t.mercatorYfromLat(h[1])*this.worldSize,e=(a=t.mercatorYfromLat(h[0])*this.worldSize)-o<l.y?l.y/(a-o):0}if(this.lngRange){var p=this.lngRange;s=t.mercatorXfromLng(p[0])*this.worldSize,n=(u=t.mercatorXfromLng(p[1])*this.worldSize)-s<l.x?l.x/(u-s):0}var f=this.point,d=Math.max(n||0,e||0);if(d)return this.center=this.unproject(new t.Point(n?(u+s)/2:f.x,e?(a+o)/2:f.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var m=f.y,g=l.y/2;m-g<o&&(i=o+g),m+g>a&&(i=a-g)}if(this.lngRange){var y=f.x,v=l.x/2;y-v<s&&(r=s+v),y+v>u&&(r=u-v)}void 0===r&&void 0===i||(this.center=this.unproject(new t.Point(void 0!==r?r:f.x,void 0!==i?i:f.y))),this._unmodified=c,this._constraining=!1}},or.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,n=Math.PI/2+this._pitch,r=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-n-e),i=this.point,o=i.x,a=i.y,s=1.01*(Math.cos(Math.PI/2-this._pitch)*r+this.cameraToCenterDistance),u=new Float64Array(16);t.perspective(u,this._fov,this.width/this.height,1,s),t.scale(u,u,[1,-1,1]),t.translate(u,u,[0,0,-this.cameraToCenterDistance]),t.rotateX(u,u,this._pitch),t.rotateZ(u,u,this.angle),t.translate(u,u,[-o,-a,0]),this.mercatorMatrix=t.scale([],u,[this.worldSize,this.worldSize,this.worldSize]),t.scale(u,u,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=u;var l=this.width%2/2,c=this.height%2/2,h=Math.cos(this.angle),p=Math.sin(this.angle),f=o-Math.round(o)+h*l+p*c,d=a-Math.round(a)+h*c+p*l,m=new Float64Array(u);if(t.translate(m,m,[f>.5?f-1:f,d>.5?d-1:d,0]),this.alignedProjMatrix=m,u=t.create$1(),t.scale(u,u,[this.width/2,-this.height/2,1]),t.translate(u,u,[1,-1,0]),this.pixelMatrix=t.multiply(new Float64Array(16),u,this.projMatrix),!(u=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=u,this._posMatrixCache={},this._alignedPosMatrixCache={}}},or.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},or.prototype.getCameraPoint=function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))},or.prototype.getCameraQueryGeometry=function(e){var n=this.getCameraPoint();if(1===e.length)return[e[0],n];for(var r=n.x,i=n.y,o=n.x,a=n.y,s=0,u=e;s<u.length;s+=1){var l=u[s];r=Math.min(r,l.x),i=Math.min(i,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y)}return[new t.Point(r,i),new t.Point(o,i),new t.Point(o,a),new t.Point(r,a),new t.Point(r,i)]},Object.defineProperties(or.prototype,ar);var sr=function(){var e,n,r,i;t.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),n=!1,r=0,i=function(){r=0,n&&(e(),r=setTimeout(i,300),n=!1)},function(){return n=!0,r||i(),r})};sr.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},sr.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},sr.prototype.getHashString=function(t){var e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(e.lng*i)/i,a=Math.round(e.lat*i)/i,s=this._map.getBearing(),u=this._map.getPitch(),l="";return l+=t?"#/"+o+"/"+a+"/"+n:"#"+n+"/"+a+"/"+o,(s||u)&&(l+="/"+Math.round(10*s)/10),u&&(l+="/"+Math.round(u)),l},sr.prototype._onHashChange=function(){var e=t.window.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},sr.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(t){}};var ur=function(e){function r(r,i,o,a){void 0===a&&(a={});var s=n.mousePos(i.getCanvasContainer(),o),u=i.unproject(s);e.call(this,r,t.extend({point:s,lngLat:u,originalEvent:o},a)),this._defaultPrevented=!1,this.target=i}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(t.Event),lr=function(e){function r(r,i,o){var a=n.touchPos(i.getCanvasContainer(),o),s=a.map(function(t){return i.unproject(t)}),u=a.reduce(function(t,e,n,r){return t.add(e.div(r.length))},new t.Point(0,0)),l=i.unproject(u);e.call(this,r,{points:a,point:u,lngLats:s,lngLat:l,originalEvent:o}),this._defaultPrevented=!1}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(t.Event),cr=function(t){function e(e,n,r){t.call(this,e,{originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),hr=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};hr.prototype.isEnabled=function(){return!!this._enabled},hr.prototype.isActive=function(){return!!this._active},hr.prototype.isZooming=function(){return!!this._zooming},hr.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},hr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},hr.prototype.onWheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=t.browser.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this.isActive()||this._start(e)),e.preventDefault()}},hr.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},hr.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._zooming=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e})),this._finishTimeout&&clearTimeout(this._finishTimeout);var r=n.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(r)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},hr.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a="number"==typeof this._targetZoom?this._targetZoom:n.zoom,s=this._startZoom,u=this._easing,l=!1;if("wheel"===this._type&&s&&u){var c=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),h=u(c);n.zoom=t.number(s,a,h),c<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):l=!0}else n.zoom=a,l=!0;n.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),l&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._zooming=!1,e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom},200))}},hr.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var r=this._prevEase,i=(t.browser.now()-r.start)/r.duration,o=r.easing(i+.01)-r.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:n},n};var pr=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};pr.prototype.isEnabled=function(){return!!this._enabled},pr.prototype.isActive=function(){return!!this._active},pr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},pr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},pr.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.window.document.addEventListener("mousemove",this._onMouseMove,!1),t.window.document.addEventListener("keydown",this._onKeyDown,!1),t.window.document.addEventListener("mouseup",this._onMouseUp,!1),n.disableDrag(),this._startPos=this._lastPos=n.mousePos(this._el,e),this._active=!0)},pr.prototype._onMouseMove=function(t){var e=n.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=e,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var i=Math.min(r.x,e.x),o=Math.max(r.x,e.x),a=Math.min(r.y,e.y),s=Math.max(r.y,e.y);n.setTransform(this._box,"translate("+i+"px,"+a+"px)"),this._box.style.width=o-i+"px",this._box.style.height=s-a+"px"}},pr.prototype._onMouseUp=function(e){if(0===e.button){var r=this._startPos,i=n.mousePos(this._el,e);this._finish(),n.suppressClick(),r.x===i.x&&r.y===i.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e}))}},pr.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},pr.prototype._finish=function(){this._active=!1,t.window.document.removeEventListener("mousemove",this._onMouseMove,!1),t.window.document.removeEventListener("keydown",this._onKeyDown,!1),t.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},pr.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var fr=t.bezier(0,0,.25,1),dr=function(e,n){this._map=e,this._el=n.element||e.getCanvasContainer(),this._state="disabled",this._button=n.button||"right",this._bearingSnap=n.bearingSnap||0,this._pitchWithRotate=!1!==n.pitchWithRotate,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};dr.prototype.isEnabled=function(){return"disabled"!==this._state},dr.prototype.isActive=function(){return"active"===this._state},dr.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},dr.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},dr.prototype.onMouseDown=function(e){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=n.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==n.mouseButton(e))return;this._eventButton=0}n.disableDrag(),t.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("mouseup",this._onMouseUp),t.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.browser.now(),this._map.getBearing()]],this._startPos=this._lastPos=n.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},dr.prototype._onMouseMove=function(t){var e=n.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},dr.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var n=this._map.transform,r=this._startPos,i=this._lastPos,o=n.bearing-.8*(r.x-i.x),a=n.pitch- -.5*(r.y-i.y),s=this._inertia,u=s[s.length-1];this._drainInertiaBuffer(),s.push([t.browser.now(),this._map._normalizeBearing(o,u[1])]),n.bearing=o,this._pitchWithRotate&&(this._fireEvent("pitch",e),n.pitch=a),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._startPos=this._lastPos}},dr.prototype._onMouseUp=function(t){if(n.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",n.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},dr.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},dr.prototype._unbind=function(){t.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("mouseup",this._onMouseUp),t.window.removeEventListener("blur",this._onBlur),n.enableDrag()},dr.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},dr.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,o=function(){Math.abs(r)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(i.length<2)o();else{var a=i[0],s=i[i.length-1],u=n._normalizeBearing(r,i[i.length-2][1]),l=s[1]-a[1],c=l<0?-1:1,h=(s[0]-a[0])/1e3;if(0!==l&&0!==h){var p=Math.abs(l*(.25/h));p>180&&(p=180);var f=p/180;u+=c*p*(f/2),Math.abs(n._normalizeBearing(u,0))<this._bearingSnap&&(u=n._normalizeBearing(0,u)),n.rotateTo(u,{duration:1e3*f,easing:fr,noMoveStart:!0},{originalEvent:t})}else o()}},dr.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},dr.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var mr=t.bezier(0,0,.3,1),gr=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};gr.prototype.isEnabled=function(){return"disabled"!==this._state},gr.prototype.isActive=function(){return"active"===this._state},gr.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},gr.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},gr.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==n.mouseButton(e)||(n.addEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),n.addEventListener(t.window.document,"mouseup",this._onMouseUp),this._start(e)))},gr.prototype.onTouchStart=function(e){"enabled"===this._state&&(e.touches.length>1||(n.addEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),n.addEventListener(t.window.document,"touchend",this._onTouchEnd),this._start(e)))},gr.prototype._start=function(e){t.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=n.mousePos(this._el,e),this._inertia=[[t.browser.now(),this._startPos]]},gr.prototype._onMove=function(e){e.preventDefault();var r=n.mousePos(this._el,e);this._lastPos.equals(r)||"pending"===this._state&&r.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=r,this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",e),this._fireEvent("movestart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},gr.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._startPos=this._lastPos,delete this._lastMoveEvent}},gr.prototype._onMouseUp=function(t){if(0===n.mouseButton(t))switch(this._state){case"active":this._state="enabled",n.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},gr.prototype._onTouchEnd=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},gr.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},gr.prototype._unbind=function(){n.removeEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),n.removeEventListener(t.window.document,"touchend",this._onTouchEnd),n.removeEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),n.removeEventListener(t.window.document,"mouseup",this._onMouseUp),n.removeEventListener(t.window,"blur",this._onBlur)},gr.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},gr.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var n=e[e.length-1],r=e[0],i=n[1].sub(r[1]),o=(n[0]-r[0])/1e3;if(0===o||n[1].equals(r[1]))this._fireEvent("moveend",t);else{var a=i.mult(.3/o),s=a.mag();s>1400&&(s=1400,a._unit()._mult(s));var u=s/750,l=a.mult(-u/2);this._map.panBy(l,{duration:1e3*u,easing:mr,noMoveStart:!0},{originalEvent:t})}}},gr.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},gr.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var yr=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};function vr(t){return t*(2-t)}yr.prototype.isEnabled=function(){return!!this._enabled},yr.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},yr.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},yr.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,r=0,i=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(o=1,t.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),u={duration:300,delayEndEvents:500,easing:vr,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+15*n,pitch:a.getPitch()+10*r,offset:[100*-i,100*-o],center:a.getCenter()};a.easeTo(u,{originalEvent:t})}};var br=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};br.prototype.isEnabled=function(){return!!this._enabled},br.prototype.isActive=function(){return!!this._active},br.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},br.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},br.prototype.onTouchStart=function(t){var e=this;this.isEnabled()&&(t.points.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(t)):this._tapped=setTimeout(function(){e._tapped=null},300)))},br.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},br.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},br.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var _r=t.bezier(0,0,.15,1),wr=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};wr.prototype.isEnabled=function(){return!!this._enabled},wr.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},wr.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},wr.prototype.disableRotation=function(){this._rotationDisabled=!0},wr.prototype.enableRotation=function(){this._rotationDisabled=!1},wr.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var r=n.mousePos(this._el,e.touches[0]),i=n.mousePos(this._el,e.touches[1]),o=r.add(i).div(2);this._startVec=r.sub(i),this._startAround=this._map.transform.pointLocation(o),this._gestureIntent=void 0,this._inertia=[],n.addEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),n.addEventListener(t.window.document,"touchend",this._onEnd)}},wr.prototype._getTouchEventData=function(t){var e=n.mousePos(this._el,t.touches[0]),r=n.mousePos(this._el,t.touches[1]),i=e.sub(r);return{vec:i,center:e.add(r).div(2),scale:i.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*i.angleWith(this._startVec)/Math.PI}},wr.prototype._onMove=function(e){if(2===e.touches.length){var n=this._getTouchEventData(e),r=n.vec,i=n.scale,o=n.bearing;if(!this._gestureIntent){var a=this._rotationDisabled&&1!==i||Math.abs(1-i)>.15;Math.abs(o)>10?this._gestureIntent="rotate":a&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=r)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},wr.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var n=this._map.transform;this._startScale||(this._startScale=n.scale,this._startBearing=n.bearing);var r=this._getTouchEventData(this._lastTouchEvent),i=r.center,o=r.bearing,a=r.scale,s=n.pointLocation(i),u=n.locationPoint(s);"rotate"===e&&(n.bearing=this._startBearing+o),n.zoom=n.scaleZoom(this._startScale*a),n.setLocationAtPoint(this._startAround,u),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),a,i])}},wr.prototype._onEnd=function(e){n.removeEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),n.removeEventListener(t.window.document,"touchend",this._onEnd);var r=this._gestureIntent,i=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,r){this._map.fire(new t.Event(r+"end",{originalEvent:e})),this._drainInertiaBuffer();var o=this._inertia,a=this._map;if(o.length<2)a.snapToNorth({},{originalEvent:e});else{var s=o[o.length-1],u=o[0],l=a.transform.scaleZoom(i*s[1]),c=a.transform.scaleZoom(i*u[1]),h=(s[0]-u[0])/1e3,p=s[2];if(0!==h&&l!==c){var f=.15*(l-c)/h;Math.abs(f)>2.5&&(f=f>0?2.5:-2.5);var d=1e3*Math.abs(f/(12*.15)),m=l+f*d/2e3;m<0&&(m=0),a.easeTo({zoom:m,duration:d,easing:_r,around:this._aroundCenter?a.getCenter():a.unproject(p),noMoveStart:!0},{originalEvent:e})}else a.snapToNorth({},{originalEvent:e})}}},wr.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>2&&n-e[0][0]>160;)e.shift()};var xr={scrollZoom:hr,boxZoom:pr,dragRotate:dr,dragPan:gr,keyboard:yr,doubleClickZoom:br,touchZoomRotate:wr},Cr=function(e){function n(n,r){e.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=r.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getCenter=function(){return this.transform.center},n.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},n.prototype.panBy=function(e,n,r){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)},n.prototype.panTo=function(e,n,r){return this.easeTo(t.extend({center:e},n),r)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},n.prototype.zoomTo=function(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)},n.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},n.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},n.prototype.rotateTo=function(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)},n.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},n.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},n.prototype.cameraForBounds=function(e,n){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,n)},n.prototype._cameraForBoxAndBearing=function(e,n,r,i){if("number"==typeof(i=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){var o=i.padding;i.padding={top:o,bottom:o,right:o,left:o}}if(t.isEqual(Object.keys(i.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"])){var a=this.transform,s=a.project(t.LngLat.convert(e)),u=a.project(t.LngLat.convert(n)),l=s.rotate(-r*Math.PI/180),c=u.rotate(-r*Math.PI/180),h=new t.Point(Math.max(l.x,c.x),Math.max(l.y,c.y)),p=new t.Point(Math.min(l.x,c.x),Math.min(l.y,c.y)),f=h.sub(p),d=(a.width-i.padding.left-i.padding.right)/f.x,m=(a.height-i.padding.top-i.padding.bottom)/f.y;if(!(m<0||d<0)){var g=Math.min(a.scaleZoom(a.scale*Math.min(d,m)),i.maxZoom),y=t.Point.convert(i.offset),v=new t.Point(y.x+(i.padding.left-i.padding.right)/2,y.y+(i.padding.top-i.padding.bottom)/2).mult(a.scale/a.zoomScale(g));return{center:a.unproject(s.add(u).div(2).sub(v)),zoom:g,bearing:r}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},n.prototype.fitBounds=function(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)},n.prototype.fitScreenCoordinates=function(e,n,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(n)),r,i),i,o)},n.prototype._fitInternal=function(e,n,r){return e?(n=t.extend(e,n)).linear?this.easeTo(n,r):this.flyTo(n,r):this},n.prototype.jumpTo=function(e,n){this.stop();var r=this.transform,i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},n.prototype.easeTo=function(e,n){var r=this;this.stop(),!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate&&(e.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u="zoom"in e?+e.zoom:o,l="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:s,h=i.centerPoint.add(t.Point.convert(e.offset)),p=i.pointLocation(h),f=t.LngLat.convert(e.center||p);this._normalizeCenter(f);var d,m,g=i.project(p),y=i.project(f).sub(g),v=i.zoomScale(u-o);return e.around&&(d=t.LngLat.convert(e.around),m=i.locationPoint(d)),this._zooming=u!==o,this._rotating=a!==l,this._pitching=c!==s,this._prepareEase(n,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(r._zooming&&(i.zoom=t.number(o,u,e)),r._rotating&&(i.bearing=t.number(a,l,e)),r._pitching&&(i.pitch=t.number(s,c,e)),d)i.setLocationAtPoint(d,m);else{var p=i.zoomScale(i.zoom-o),f=u>o?Math.min(2,v):Math.max(.5,v),b=Math.pow(f,1-e),_=i.unproject(g.add(y.mult(e*b)).mult(p));i.setLocationAtPoint(i.renderWorldCopies?_.wrap():_,h)}r._fireMoveEvents(n)},function(){e.delayEndEvents?r._easeEndTimeoutID=setTimeout(function(){return r._afterEase(n)},e.delayEndEvents):r._afterEase(n)},e),this},n.prototype._prepareEase=function(e,n){this._moving=!0,n||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},n.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},n.prototype._afterEase=function(e){var n=this._zooming,r=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,n&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),i&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},n.prototype.flyTo=function(e,n){var r=this;this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u="zoom"in e?t.clamp(+e.zoom,i.minZoom,i.maxZoom):o,l="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:s,h=i.zoomScale(u-o),p=i.centerPoint.add(t.Point.convert(e.offset)),f=i.pointLocation(p),d=t.LngLat.convert(e.center||f);this._normalizeCenter(d);var m=i.project(f),g=i.project(d).sub(m),y=e.curve,v=Math.max(i.width,i.height),b=v/h,_=g.mag();if("minZoom"in e){var w=t.clamp(Math.min(e.minZoom,o,u),i.minZoom,i.maxZoom),x=v/i.zoomScale(w-o);y=Math.sqrt(x/_*2)}var C=y*y;function E(t){var e=(b*b-v*v+(t?-1:1)*C*C*_*_)/(2*(t?b:v)*C*_);return Math.log(Math.sqrt(e*e+1)-e)}function S(t){return(Math.exp(t)-Math.exp(-t))/2}function T(t){return(Math.exp(t)+Math.exp(-t))/2}var A=E(0),P=function(t){return T(A)/T(A+y*t)},I=function(t){return v*((T(A)*(S(e=A+y*t)/T(e))-S(A))/C)/_;var e},O=(E(1)-A)/y;if(Math.abs(_)<1e-6||!isFinite(O)){if(Math.abs(v-b)<1e-6)return this.easeTo(e,n);var D=b<v?-1:1;O=Math.abs(Math.log(b/v))/y,I=function(){return 0},P=function(t){return Math.exp(D*y*t)}}return e.duration="duration"in e?+e.duration:1e3*O/("screenSpeed"in e?+e.screenSpeed/y:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=a!==l,this._pitching=c!==s,this._prepareEase(n,!1),this._ease(function(e){var h=e*O,f=1/P(h);i.zoom=1===e?u:o+i.scaleZoom(f),r._rotating&&(i.bearing=t.number(a,l,e)),r._pitching&&(i.pitch=t.number(s,c,e));var y=1===e?d:i.unproject(m.add(g.mult(I(h))).mult(f));i.setLocationAtPoint(i.renderWorldCopies?y.wrap():y,p),r._fireMoveEvents(n)},function(){return r._afterEase(n)},e),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},n.prototype._ease=function(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.browser.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e},n.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},n}(t.Evented),Er=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Er.prototype.getDefaultPosition=function(){return"bottom-right"},Er.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Er.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},Er.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:t.config.ACCESS_TOKEN}];if(e){var r=n.reduce(function(t,e,r){return e.value&&(t+=e.key+"="+e.value+(r<n.length-1?"&":"")),t},"?");e.href=t.config.FEEDBACK_URL+"/"+r+(this._map._hash?this._map._hash.getHashString(!0):"")}},Er.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},Er.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(function(t){return"string"!=typeof t?"":t})):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r];if(i.used){var o=i.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort(function(t,e){return t.length-e.length}),(t=t.filter(function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0})).length?(this._innerContainer.innerHTML=t.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},Er.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Sr=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Sr.prototype.onAdd=function(t){this._map=t,this._container=n.create("div","mapboxgl-ctrl");var e=n.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),e.setAttribute("rel","noopener"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Sr.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Sr.prototype.getDefaultPosition=function(){return"bottom-left"},Sr.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Sr.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Sr.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var Tr=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Tr.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Tr.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,r=e?this._queue.concat(e):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===t)return void(i.cancelled=!0)}},Tr.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(!r.cancelled&&(r.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Tr.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ar=t.window.HTMLImageElement,Pr=t.window.HTMLElement,Ir={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Or=function(r){function i(e){var i=this;if(null!=(e=t.extend({},Ir,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than minZoom");var o=new or(e.minZoom,e.maxZoom,e.renderWorldCopies);r.call(this,o,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new Tr,this._controls=[],this._mapId=t.uniqueId();var a=e.transformRequest;if(this._transformRequest=a?function(t,e){return a(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Pr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return i._update(!1)}),this.on("moveend",function(){return i._update(!1)}),this.on("zoom",function(){return i._update(!0)}),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),function(t,e){var r=t.getCanvasContainer(),i=null,o=!1,a=null;for(var s in xr)t[s]=new xr[s](t,e),e.interactive&&e[s]&&t[s].enable(e[s]);n.addEventListener(r,"mouseout",function(e){t.fire(new ur("mouseout",t,e))}),n.addEventListener(r,"mousedown",function(i){o=!0,a=n.mousePos(r,i);var s=new ur("mousedown",t,i);t.fire(s),s.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(i),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(i),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(i))}),n.addEventListener(r,"mouseup",function(e){var n=t.dragRotate.isActive();i&&!n&&t.fire(new ur("contextmenu",t,i)),i=null,o=!1,t.fire(new ur("mouseup",t,e))}),n.addEventListener(r,"mousemove",function(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){for(var n=e.target;n&&n!==r;)n=n.parentNode;n===r&&t.fire(new ur("mousemove",t,e))}}),n.addEventListener(r,"mouseover",function(e){for(var n=e.target;n&&n!==r;)n=n.parentNode;n===r&&t.fire(new ur("mouseover",t,e))}),n.addEventListener(r,"touchstart",function(n){var r=new lr("touchstart",t,n);t.fire(r),r.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(n),t.touchZoomRotate.onStart(n),t.doubleClickZoom.onTouchStart(r))},{passive:!1}),n.addEventListener(r,"touchmove",function(e){t.fire(new lr("touchmove",t,e))},{passive:!1}),n.addEventListener(r,"touchend",function(e){t.fire(new lr("touchend",t,e))}),n.addEventListener(r,"touchcancel",function(e){t.fire(new lr("touchcancel",t,e))}),n.addEventListener(r,"click",function(i){var o=n.mousePos(r,i);(o.equals(a)||o.dist(a)<e.clickTolerance)&&t.fire(new ur("click",t,i))}),n.addEventListener(r,"dblclick",function(e){var n=new ur("dblclick",t,e);t.fire(n),n.defaultPrevented||t.doubleClickZoom.onDblClick(n)}),n.addEventListener(r,"contextmenu",function(e){var n=t.dragRotate.isActive();o||n?o&&(i=e):t.fire(new ur("contextmenu",t,e)),(t.dragRotate.isEnabled()||t.listens("contextmenu"))&&e.preventDefault()}),n.addEventListener(r,"wheel",function(n){e.interactive&&t.stop();var r=new cr("wheel",t,n);t.fire(r),r.defaultPrevented||t.scrollZoom.onWheel(n)},{passive:!1})}(this,e),this._hash=e.hash&&(new sr).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Er({customAttribution:e.customAttribution})),this.addControl(new Sr,e.logoPosition),this.on("style.load",function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)}),this.on("data",function(e){i._update("style"===e.dataType),i.fire(new t.Event(e.dataType+"data",e))}),this.on("dataloading",function(e){i.fire(new t.Event(e.dataType+"dataloading",e))})}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var o={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return i.prototype._getMapId=function(){return this._mapId},i.prototype.addControl=function(e,n){if(void 0===n&&e.getDefaultPosition&&(n=e.getDefaultPosition()),void 0===n&&(n="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=e.onAdd(this);this._controls.push(e);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this},i.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this},i.prototype.resize=function(e){var n=this._containerDimensions(),r=n[0],i=n[1];return this._resizeCanvas(r,i),this.transform.resize(r,i),this.painter.resize(r,i),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},i.prototype.getBounds=function(){return this.transform.getBounds()},i.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},i.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},i.prototype.setMinZoom=function(t){if((t=null==t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},i.prototype.getMinZoom=function(){return this.transform.minZoom},i.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},i.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},i.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},i.prototype.getMaxZoom=function(){return this.transform.maxZoom},i.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},i.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},i.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},i.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},i.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},i.prototype.on=function(t,e,n){var i=this;if(void 0===n)return r.prototype.on.call(this,t,e);var o=function(){var r;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:n,delegates:{mousemove:function(r){var a=i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[];a.length?o||(o=!0,n.call(i,new ur(t,i,r.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:n,delegates:{mousemove:function(r){(i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,n.call(i,new ur(t,i,r.originalEvent)))},mouseout:function(e){a&&(a=!1,n.call(i,new ur(t,i,e.originalEvent)))}}}}return{layer:e,listener:n,delegates:(r={},r[t]=function(t){var r=i.getLayer(e)?i.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,n.call(i,t),delete t.features)},r)}}();for(var a in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(o),o.delegates)this.on(a,o.delegates[a]);return this},i.prototype.off=function(t,e,n){if(void 0===n)return r.prototype.off.call(this,t,e);if(this._delegatedListeners&&this._delegatedListeners[t])for(var i=this._delegatedListeners[t],o=0;o<i.length;o++){var a=i[o];if(a.layer===e&&a.listener===n){for(var s in a.delegates)this.off(s,a.delegates[s]);return i.splice(o,1),this}}return this},i.prototype.queryRenderedFeatures=function(e,n){if(!this.style)return[];var r;if(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])r=[t.Point.convert(e)];else{var i=t.Point.convert(e[0]),o=t.Point.convert(e[1]);r=[i,new t.Point(o.x,i.y),o,new t.Point(i.x,o.y),i]}return this.style.queryRenderedFeatures(r,n,this.transform)},i.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},i.prototype.setStyle=function(t,e){return(!e||!1!==e.diff&&!e.localIdeographFontFamily)&&this.style&&t?(this._diffStyle(t,e),this):this._updateStyle(t,e)},i.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new De(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},i.prototype._diffStyle=function(e,n){var r=this;if("string"==typeof e){var i=t.normalizeStyleURL(e),o=this._transformRequest(i,t.ResourceType.Style);t.getJSON(o,function(e,i){e?r.fire(new t.ErrorEvent(e)):i&&r._updateDiff(i,n)})}else"object"==typeof e&&this._updateDiff(e,n)},i.prototype._updateDiff=function(e,n){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce("Unable to perform style diff: "+(r.message||r.error||r)+".  Rebuilding the style from scratch."),this._updateStyle(e,n)}},i.prototype.getStyle=function(){if(this.style)return this.style.serialize()},i.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},i.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0)},i.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},i.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},i.prototype.addSourceType=function(t,e,n){return this.style.addSourceType(t,e,n)},i.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},i.prototype.getSource=function(t){return this.style.getSource(t)},i.prototype.addImage=function(e,n,r){void 0===r&&(r={});var i=r.pixelRatio;void 0===i&&(i=1);var o=r.sdf;if(void 0===o&&(o=!1),n instanceof Ar){var a=t.browser.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:a.width,height:a.height},a.data),pixelRatio:i,sdf:o})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));this.style.addImage(e,{data:new t.RGBAImage({width:n.width,height:n.height},new Uint8Array(n.data)),pixelRatio:i,sdf:o})}},i.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},i.prototype.removeImage=function(t){this.style.removeImage(t)},i.prototype.loadImage=function(e,n){t.getImage(this._transformRequest(e,t.ResourceType.Image),n)},i.prototype.listImages=function(){return this.style.listImages()},i.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0)},i.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},i.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},i.prototype.getLayer=function(t){return this.style.getLayer(t)},i.prototype.setFilter=function(t,e,n){return void 0===n&&(n={}),this.style.setFilter(t,e,n),this._update(!0)},i.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)},i.prototype.getFilter=function(t){return this.style.getFilter(t)},i.prototype.setPaintProperty=function(t,e,n,r){return void 0===r&&(r={}),this.style.setPaintProperty(t,e,n,r),this._update(!0)},i.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},i.prototype.setLayoutProperty=function(t,e,n,r){return void 0===r&&(r={}),this.style.setLayoutProperty(t,e,n,r),this._update(!0)},i.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},i.prototype.setLight=function(t,e){return void 0===e&&(e={}),this.style.setLight(t,e),this._update(!0)},i.prototype.getLight=function(){return this.style.getLight()},i.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},i.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},i.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},i.prototype.getContainer=function(){return this._container},i.prototype.getCanvasContainer=function(){return this._canvasContainer},i.prototype.getCanvas=function(){return this._canvas},i.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},i.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},i.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=n.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var i=this._controlContainer=n.create("div","mapboxgl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){o[t]=n.create("div","mapboxgl-ctrl-"+t,i)})},i.prototype._resizeCanvas=function(e,n){var r=t.window.devicePixelRatio||1;this._canvas.width=r*e,this._canvas.height=r*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},i.prototype._setupPainter=function(){var n=t.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},e.webGLContextAttributes),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(this.painter=new er(r,this.transform),t.webpSupported.testSupport(r)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},i.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},i.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},i.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},i.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},i.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},i.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},i.prototype._render=function(){this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var n=this.transform.zoom,r=t.browser.now();this.style.zoomHistory.update(n,r);var i=new t.EvaluationParameters(n,{now:r,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),o=i.crossFadingFactor();1===o&&o===this._crossFadingFactor||(e=!0,this._crossFadingFactor=o),this.style.update(i)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),this},i.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,n=this._controls;e<n.length;e+=1)n[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),Dr(this._canvasContainer),Dr(this._controlContainer),Dr(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},i.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(){e._frame=null,e._render()}))},i.prototype._onWindowOnline=function(){this._update()},i.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(t){this._vertices=t,this._update()},Object.defineProperties(i.prototype,o),i}(Cr);function Dr(t){t.parentNode&&t.parentNode.removeChild(t)}var kr={showCompass:!0,showZoom:!0},Mr=function(e){var r=this;this.options=t.extend({},kr,e),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom in",function(){return r._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom out",function(){return r._map.zoomOut()})),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset bearing to north",function(){return r._map.resetNorth()}),this._compassArrow=n.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};function Rr(e,n,r){if(e=new t.LngLat(e.lng,e.lat),n){var i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=r.locationPoint(e).distSqr(n);r.locationPoint(i).distSqr(n)<a?e=i:r.locationPoint(o).distSqr(n)<a&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){var s=r.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=r.width&&s.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}Mr.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},Mr.prototype.onAdd=function(t){return this._map=t,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new dr(t,{button:"left",element:this._compass}),n.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},Mr.prototype.onRemove=function(){n.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),n.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},Mr.prototype._createButton=function(t,e,r){var i=n.create("button",t,this._container);return i.type="button",i.title=e,i.setAttribute("aria-label",e),i.addEventListener("click",r),i};var Nr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Lr(t,e,n){var r=t.classList;for(var i in Nr)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+e)}var Fr,Br=function(e){function r(r,i){if(e.call(this),(r instanceof t.window.HTMLElement||i)&&(r=t.extend({element:r},i)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._draggable=r&&r.draggable||!1,this._state="inactive",r&&r.element)this._element=r.element,this._offset=t.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div");var o=n.createNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"height","41px"),o.setAttributeNS(null,"width","27px"),o.setAttributeNS(null,"viewBox","0 0 27 41");var a=n.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");var s=n.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");var u=n.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"transform","translate(3.0, 29.0)"),u.setAttributeNS(null,"fill","#000000");for(var l=0,c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];l<c.length;l+=1){var h=c[l],p=n.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04"),p.setAttributeNS(null,"cx","10.5"),p.setAttributeNS(null,"cy","5.80029008"),p.setAttributeNS(null,"rx",h.rx),p.setAttributeNS(null,"ry",h.ry),u.appendChild(p)}var f=n.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill",this._color);var d=n.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),f.appendChild(d);var m=n.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"fill","#000000");var g=n.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),m.appendChild(g);var y=n.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),y.setAttributeNS(null,"fill","#FFFFFF");var v=n.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(8.0, 8.0)");var b=n.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#000000"),b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962");var _=n.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#FFFFFF"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962"),v.appendChild(b),v.appendChild(_),s.appendChild(u),s.appendChild(f),s.appendChild(m),s.appendChild(y),s.appendChild(v),o.appendChild(s),this._element.appendChild(o),this._offset=t.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},r.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},r.prototype.getElement=function(){return this._element},r.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},r.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},r.prototype.getPopup=function(){return this._popup},r.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},r.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=Rr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),n.setTransform(this._element,Nr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),Lr(this._element,this._anchor,"marker"))},r.prototype.getOffset=function(){return this._offset},r.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},r.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},r.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},r.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},r.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},r.prototype.isDraggable=function(){return this._draggable},r}(t.Evented),jr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},zr=function(e){function r(n){e.call(this),this.options=t.extend({},jr,n),t.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.onAdd=function(e){var r;return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==Fr?r(Fr):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(function(t){r(Fr="denied"!==t.state)}):r(Fr=!!t.window.navigator.geolocation),this._container},r.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),n.remove(this._container),this._map=void 0},r.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()},r.prototype._updateCamera=function(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._map.fitBounds(n.toBounds(e.coords.accuracy),this.options.fitBoundsOptions,{geolocateSource:!0})},r.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},r.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()},r.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},r.prototype._setupUI=function(e){var r=this;!1!==e?(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=n.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Br(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==r._watchState||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new t.Event("trackuserlocationend")))})):t.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},r.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},r.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},r}(t.Evented),Vr={maxWidth:100,unit:"metric"},Ur=function(e){this.options=t.extend({},Vr,e),t.bindAll(["_onMove","setUnit"],this)};function qr(t,e,n){var r,i,o,a,s,u,l=n&&n.maxWidth||100,c=t._container.clientHeight/2,h=(r=t.unproject([0,c]),i=t.unproject([l,c]),o=Math.PI/180,a=r.lat*o,s=i.lat*o,u=Math.sin(a)*Math.sin(s)+Math.cos(a)*Math.cos(s)*Math.cos((i.lng-r.lng)*o),6371e3*Math.acos(Math.min(u,1)));if(n&&"imperial"===n.unit){var p=3.2808*h;p>5280?Gr(e,l,p/5280,"mi"):Gr(e,l,p,"ft")}else n&&"nautical"===n.unit?Gr(e,l,h/1852,"nm"):Gr(e,l,h,"m")}function Gr(t,e,n,r){var i,o,a,s=(i=n,(o=Math.pow(10,(""+Math.floor(i)).length-1))*(a=(a=i/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(a))),u=s/n;"m"===r&&s>=1e3&&(s/=1e3,r="km"),t.style.width=e*u+"px",t.innerHTML=s+r}Ur.prototype.getDefaultPosition=function(){return"bottom-left"},Ur.prototype._onMove=function(){qr(this._map,this._container,this.options)},Ur.prototype.onAdd=function(t){return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ur.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ur.prototype.setUnit=function(t){this.options.unit=t,qr(this._map,this._container,this.options)};var Hr=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};Hr.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Hr.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Hr.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Hr.prototype._setupUI=function(){var e=this._fullscreenButton=n.create("button",this._className+"-icon "+this._className+"-fullscreen",this._controlContainer);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Hr.prototype._isFullscreen=function(){return this._fullscreen},Hr.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},Hr.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Wr={closeButton:!0,closeOnClick:!0,className:""},Kr=function(e){function r(n){e.call(this),this.options=t.extend(Object.create(Wr),n),t.bindAll(["_update","_onClickClose","remove"],this)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._map.on("remove",this.remove),this._update(),this.fire(new t.Event("open")),this},r.prototype.isOpen=function(){return!!this._map},r.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),this._map.off("remove",this.remove),delete this._map),this.fire(new t.Event("close")),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._update(),this},r.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},r.prototype.setHTML=function(e){var n,r=t.window.document.createDocumentFragment(),i=t.window.document.createElement("body");for(i.innerHTML=e;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)},r.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},r.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},r.prototype._update=function(){var e=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return e._container.classList.add(t)})),this._map.transform.renderWorldCopies&&(this._lngLat=Rr(this._lngLat,this._pos,this._map.transform));var r=this._pos=this._map.project(this._lngLat),i=this.options.anchor,o=function e(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.Point(0,0),top:new t.Point(0,n),"top-left":new t.Point(r,r),"top-right":new t.Point(-r,r),bottom:new t.Point(0,-n),"bottom-left":new t.Point(r,-r),"bottom-right":new t.Point(-r,-r),left:new t.Point(n,0),right:new t.Point(-n,0)}}if(n instanceof t.Point||Array.isArray(n)){var i=t.Point.convert(n);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:t.Point.convert(n.center||[0,0]),top:t.Point.convert(n.top||[0,0]),"top-left":t.Point.convert(n["top-left"]||[0,0]),"top-right":t.Point.convert(n["top-right"]||[0,0]),bottom:t.Point.convert(n.bottom||[0,0]),"bottom-left":t.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(n["bottom-right"]||[0,0]),left:t.Point.convert(n.left||[0,0]),right:t.Point.convert(n.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!i){var a,s=this._container.offsetWidth,u=this._container.offsetHeight;a=r.y+o.bottom.y<u?["top"]:r.y>this._map.transform.height-u?["bottom"]:[],r.x<s/2?a.push("left"):r.x>this._map.transform.width-s/2&&a.push("right"),i=0===a.length?"bottom":a.join("-")}var l=r.add(o[i]).round();n.setTransform(this._container,Nr[i]+" translate("+l.x+"px,"+l.y+"px)"),Lr(this._container,i,"popup")}},r.prototype._onClickClose=function(){this.remove()},r}(t.Evented),Xr={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,Map:Or,NavigationControl:Mr,GeolocateControl:zr,AttributionControl:Er,ScaleControl:Ur,FullscreenControl:Hr,Popup:Kr,Marker:Br,Style:De,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Ot.workerCount},set workerCount(t){Ot.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},workerUrl:""};return Xr}),n}()},"60iU":function(t,e,n){"use strict";n.r(e),n.d(e,"Notification",function(){return a});var r=n(null),i=n(null),o=n("XlPw"),a=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(o.throwError)(this.error);case"C":return Object(r.a)()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},"67Y/":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("mrSG"),i=n("FFOo");function o(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new a(t,e))}}var a=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r.c(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(i.a)},"6Joi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("q/0M"),a=n("os0x"),s=n("x7I3"),u=i.SDK_VERSION,l=new o.Logger("@firebase/firestore"),c=function(t){return t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT",t}({});function h(){return l.logLevel===o.LogLevel.DEBUG?c.DEBUG:l.logLevel===o.LogLevel.SILENT?c.SILENT:c.ERROR}function p(t){switch(t){case c.DEBUG:l.logLevel=o.LogLevel.DEBUG;break;case c.ERROR:l.logLevel=o.LogLevel.ERROR;break;case c.SILENT:l.logLevel=o.LogLevel.SILENT;break;default:l.error("Firestore ("+u+"): Invalid value passed to `setLogLevel`")}}function f(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(l.logLevel<=o.LogLevel.DEBUG){var i=n.map(m);l.debug.apply(l,["Firestore ("+u+") ["+t+"]: "+e].concat(i))}}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=o.LogLevel.ERROR){var r=e.map(m);l.error.apply(l,["Firestore ("+u+"): "+t].concat(r))}}function m(t){if("string"==typeof t)return t;var e=v.getPlatform();try{return e.formatJSON(t)}catch(e){return t}}function g(t){var e="FIRESTORE ("+u+") INTERNAL ASSERTION FAILED: "+t;throw d(e),new Error(e)}function y(t,e){t||g(e)}var v=function(){function t(){}return t.setPlatform=function(e){t.platform&&g("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||g("Platform not set"),t.platform},t}();function b(){return v.getPlatform().emptyByteString}var _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},w=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return a.__extends(e,t),e}(Error);function x(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new w(_.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function E(t,e){return void 0!==t?t:e}function S(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function T(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function A(t){for(var e in y(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function P(t,e,n){if(e.length!==n)throw new w(_.INVALID_ARGUMENT,"Function "+t+"() requires "+q(n,"argument")+", but was called with "+q(e.length,"argument")+".")}function I(t,e,n){if(e.length<n)throw new w(_.INVALID_ARGUMENT,"Function "+t+"() requires at least "+q(n,"argument")+", but was called with "+q(e.length,"argument")+".")}function O(t,e,n,r){if(e.length<n||e.length>r)throw new w(_.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+q(e.length,"argument")+".")}function D(t,e,n,r){L(t,e,U(n)+" argument",r)}function k(t,e,n,r){void 0!==r&&D(t,e,n,r)}function M(t,e,n,r){L(t,e,n+" option",r)}function R(t,e,n,r){void 0!==r&&M(t,e,n,r)}function N(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(B(u))}var l=B(r);throw new w(_.INVALID_ARGUMENT,"Invalid value "+l+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function L(t,e,n,r){if(!("object"===e?F(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=B(r);throw new w(_.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function F(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function B(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":g("Unknown wrong type: "+typeof t)}function j(t,e,n){if(void 0===n)throw new w(_.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+U(e)+" argument, but it was undefined.")}function z(t,e,n){T(e,function(e,r){if(n.indexOf(e)<0)throw new w(_.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function V(t,e,n,r){var i=B(r);return new w(_.INVALID_ARGUMENT,"Function "+t+"() requires its "+U(n)+" argument to be a "+e+", but it was: "+i)}function U(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function q(t,e){return t+" "+e+(1===t?"":"s")}var G=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return y(20===e.length,"Invalid auto ID: "+e),e},t}();function H(t,e){return t<e?-1:t>e?1:0}function W(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function K(){if("undefined"==typeof Uint8Array)throw new w(_.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function X(){if(!v.getPlatform().base64Available)throw new w(_.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Q=function(){function t(t){X(),this._binaryString=t}return t.fromBase64String=function(e){P("Blob.fromBase64String",arguments,1),D("Blob.fromBase64String","string",1,e),X();try{return new t(v.getPlatform().atob(e))}catch(t){throw new w(_.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(P("Blob.fromUint8Array",arguments,1),K(),!(e instanceof Uint8Array))throw V("Blob.fromUint8Array","Uint8Array",1,e);return new t(Array.prototype.map.call(e,function(t){return String.fromCharCode(t)}).join(""))},t.prototype.toBase64=function(){return P("Blob.toBase64",arguments,0),X(),v.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){P("Blob.toUint8Array",arguments,0),K();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return H(this._binaryString,t._binaryString)},t}(),Z=x(Q,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Y=function(){function t(t,e){if(P("GeoPoint",arguments,2),D("GeoPoint","number",1,t),D("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new w(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new w(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return H(this._lat,t._lat)||H(this._long,t._long)},t}(),J=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new w(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new w(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new w(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new w(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?H(this.nanoseconds,t.nanoseconds):H(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),$="(default)",tt=function(){function t(t,e){this.projectId=t,this.database=e||$}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database===$},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return H(this.projectId,t.projectId)||H(this.database,t.database)},t}(),et=function(){function t(t,e,n){this.init(t,e,n)}return t.prototype.init=function(t,e,n){void 0===e?e=0:e>t.length&&g("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&g("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n},t.prototype.construct=function(t,e,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(t,e,n),r},Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):"string"==typeof e?n.push(e):g("Unknown parameter type for Path.child(): "+e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return y(this.length>=(t=void 0===t?1:t),"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return y(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return y(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return y(!this.isEmpty(),"Can't call lastSegment() on empty path"),this.segments[this.limit()-1]},t.prototype.get=function(t){return y(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new w(_.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter(function(t){return t.length>0}))},e.EMPTY_PATH=new e([]),e}(et),rt=/^[_a-zA-Z][_a-zA-Z0-9]*$/,it=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.isValidIdentifier=function(t){return rt.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new w(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new w(_.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new w(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new w(_.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(et),ot=function(){function t(e){this.path=e,y(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.isEqual=function(t){return null!==t&&0===nt.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return nt.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new nt(e.slice()))},t.fromPathString=function(e){return new t(nt.fromString(e))},t.EMPTY=new t(new nt([])),t}(),at=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return ot.comparator(t.key,e.key)},t}(),st=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.data=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return a.__extends(e,t),e.prototype.field=function(t){return this.data.field(t)},e.prototype.fieldValue=function(t){var e=this.field(t);return e?e.value():void 0},e.prototype.value=function(){return this.data.value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.data.isEqual(t.data)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return void 0!==r&&void 0!==i?r.compareTo(i):g("Trying to compare documents on fields that don't exist")},e}(at),ut=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return a.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(at),lt=function(t){function e(e,n){return t.call(this,e,n)||this}return a.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(at),ct=function(){function t(t,e){this.comparator=t,this.root=e||pt.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new ht(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new ht(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new ht(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new ht(this.root,t,this.comparator,!0)},t}(),ht=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){y(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),pt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw g("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw g("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw g("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}();pt.EMPTY=new(function(){function t(){this.size=0}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new pt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var ft=function(t){return t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue",t}({}),dt=function(t){return t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous",t}({}),mt=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(dt.Estimate,n);case"previous":return new t(dt.Previous,n);case"none":case void 0:return new t(dt.Default,n);default:return g("fromSnapshotOptions() called with invalid options.")}},t}(),gt=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return y(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),H(this.typeOrder,t.typeOrder)},t}(),yt=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=ft.NullValue,e.internalValue=null,e}return a.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(gt),vt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ft.BooleanValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?H(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(gt),bt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ft.NumberValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?(n=this.internalValue)<(r=t.internalValue)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.defaultCompareTo(t);var n,r},e}(gt);function _t(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var wt=function(t){function e(e){return t.call(this,e)||this}return a.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&_t(this.internalValue,t.internalValue)},e}(bt),xt=function(t){function e(e){var n=t.call(this,e)||this;return n.internalValue=e,n}return a.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&_t(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(bt),Ct=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ft.StringValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?H(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(gt),Et=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ft.TimestampValue,n}return a.__extends(e,t),e.prototype.value=function(t){return t&&t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof St?-1:this.defaultCompareTo(t)},e}(gt),St=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=ft.TimestampValue,r}return a.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===dt.Estimate?new Et(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===dt.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof Et?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(gt),Tt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ft.BlobValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(gt),At=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=ft.RefValue,r}return a.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId)},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:ot.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(gt),Pt=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ft.GeoPointValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(gt),It=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ft.ObjectValue,n}return a.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal(function(n,r){e[n]=r.value(t)}),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=H(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return H(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(y(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var r=this.child(t.firstSegment());r instanceof e||(r=e.EMPTY);var i=r.set(t.popFirst(),n);return this.setChild(t.firstSegment(),i)},e.prototype.delete=function(t){if(y(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var r=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),r))}return this},e.prototype.contains=function(t){return void 0!==this.field(t)},e.prototype.field=function(t){y(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach(function(t){n=n instanceof e&&n.internalValue.get(t)||void 0}),n},e.prototype.toString=function(){return JSON.stringify(this.value())},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new ct(H)),e}(gt),Ot=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ft.ArrayValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(t.internalValue[r]);if(i)return i}return H(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return JSON.stringify(this.value())},e}(gt),Dt=Number,kt=Dt.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Mt=Dt.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Rt=Dt.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function Nt(t){return null===t||void 0===t}function Lt(t){return Rt(t)&&t<=Mt&&t>=kt}var Ft=function(){function t(t,e,n,r,i,o){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null),this.path=t,this.explicitOrderBy=e,this.filters=n,this.limit=r,this.startAt=i,this.endAt=o,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)this.memoizedOrderBy=t.isKeyField()?[Wt]:[new Ht(t),Wt];else{y(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}n||this.memoizedOrderBy.push((this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:qt.ASCENDING)===qt.ASCENDING?Wt:Kt)}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){y(null==this.getInequalityFilterField()||!(e instanceof zt)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),y(!ot.isDocumentKey(this.path),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){y(!ot.isDocumentKey(this.path),"No ordering allowed for document query"),y(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";Nt(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),Nt(this.limit)||(t+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.isKeyField()}return y(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesAncestor(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!Nt(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof zt&&n.isInequality())return n.field}return null},t.prototype.hasArrayContainsFilter=function(){return void 0!==this.filters.find(function(t){return t instanceof zt&&t.op===jt.ARRAY_CONTAINS})},t.prototype.isDocumentQuery=function(){return ot.isDocumentKey(this.path)&&0===this.filters.length},t.prototype.matchesAncestor=function(t){var e=t.key.path;return ot.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isPrefixOf(e)&&this.path.length===e.length-1},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&void 0===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){y(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),Bt=function(){function t(){}return t.create=function(t,e,n){if(n.isEqual(yt.INSTANCE)){if(e!==jt.EQUAL)throw new w(_.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new Vt(t)}if(n.isEqual(xt.NAN)){if(e!==jt.EQUAL)throw new w(_.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new Ut(t)}return new zt(t,e,n)},t}(),jt=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;default:return g("Unknown relation: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t}(),zt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.field=e,i.op=n,i.value=r,i}return a.__extends(e,t),e.prototype.matches=function(t){if(this.field.isKeyField()){y(this.value instanceof At,"Comparing on key, but filter value not a RefValue"),y(this.op!==jt.ARRAY_CONTAINS,"array-contains queries don't make sense on document keys.");var e=ot.comparator(t.key,this.value.key);return this.matchesComparison(e)}var n=t.field(this.field);return void 0!==n&&this.matchesValue(n)},e.prototype.matchesValue=function(t){var e=this;return this.op===jt.ARRAY_CONTAINS?t instanceof Ot&&void 0!==t.internalValue.find(function(t){return t.isEqual(e.value)}):this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case jt.LESS_THAN:return t<0;case jt.LESS_THAN_OR_EQUAL:return t<=0;case jt.EQUAL:return 0===t;case jt.GREATER_THAN:return t>0;case jt.GREATER_THAN_OR_EQUAL:return t>=0;default:return g("Unknown relation op"+this.op)}},e.prototype.isInequality=function(){return this.op!==jt.EQUAL&&this.op!==jt.ARRAY_CONTAINS},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(Bt),Vt=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return a.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return void 0!==e&&null===e.value()},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},e.prototype.toString=function(){return this.field.canonicalString()+" IS null"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(Bt),Ut=function(t){function e(e){var n=t.call(this)||this;return n.field=e,n}return a.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field),n=e&&e.value();return"number"==typeof n&&isNaN(n)},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(Bt),qt=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),Gt=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},t.prototype.sortsBeforeDocument=function(t,e){y(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())y(o instanceof At,"Bound has a non-key value where the key path is being used."),n=ot.comparator(o.key,e.key);else{var a=e.field(i.field);y(void 0!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===qt.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)return this.position[e].isEqual(t.position[e]);return!0},t}(),Ht=function(){function t(t,e){this.field=t,void 0===e&&(e=qt.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?st.compareByKey(t,e):st.compareByField(this.field,t,e);switch(this.dir){case qt.ASCENDING:return n;case qt.DESCENDING:return-1*n;default:return g("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),Wt=new Ht(it.keyField(),qt.ASCENDING),Kt=new Ht(it.keyField(),qt.DESCENDING),Xt=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new J(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new J(0,0)),t}(),Qt=function(t){return t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution",t}({}),Zt=function(){function t(t,e,n,r,i,o){void 0===i&&(i=Xt.MIN),void 0===o&&(o=b()),this.query=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return t.prototype.copy=function(e){return new t(this.query,this.targetId,this.purpose,void 0===e.sequenceNumber?this.sequenceNumber:e.sequenceNumber,void 0===e.snapshotVersion?this.snapshotVersion:e.snapshotVersion,void 0===e.resumeToken?this.resumeToken:e.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},t}(),Yt=function(){function t(t){this.comparator=t,this.data=new ct(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach(function(t){n=n.add(t)}),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Jt=function(){function t(t){this.fields=t}return t.fromArray=function(e){var n=new Yt(it.comparator);return e.forEach(function(t){return n=n.add(t)}),new t(n)},t.prototype.covers=function(t){var e=!1;return this.fields.forEach(function(n){n.isPrefixOf(t)&&(e=!0)}),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),$t=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),te=function(t){return t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete",t}({}),ee=function(){function t(t,e){this.updateTime=t,this.exists=e,y(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof st&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof st:(y(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return n=t.updateTime,(null!==(e=this.updateTime)&&void 0!==e?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),ne=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&y(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof st?t.version:Xt.MIN},t}(),re=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.precondition=r,i.type=te.Set,i}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),y(null==e.transformResults,"Transform results received by SetMutation."),new st(this.key,e.version,this.value,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=ne.getPostMutationVersion(t);return new st(this.key,r,this.value,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(ne),ie=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.type=te.Patch,o}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),y(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new lt(this.key,e.version);var n=this.patchDocument(t);return new st(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=ne.getPostMutationVersion(t),i=this.patchDocument(t);return new st(this.key,r,i,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){return this.patchObject(t instanceof st?t.data:It.EMPTY)},e.prototype.patchObject=function(t){var e=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t=void 0!==r?t.set(n,r):t.delete(n)}}),t},e}(ne),oe=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=te.Transform,r.precondition=ee.exists(!0),r}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),y(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new lt(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data,r);return new st(this.key,i,o,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,e),o=this.transformObject(r.data,i);return new st(this.key,r.version,o,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&W(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){y(t instanceof st,"Unknown MaybeDocument type "+t);var e=t;return y(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.serverTransformResults=function(t,e){var n=[];y(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;t instanceof st&&(a=t.field(i.field)||null),n.push(o.applyToRemoteDocument(a,e[r]))}return n},e.prototype.localTransformResults=function(t,e){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var o=i[r],a=o.transform,s=null;e instanceof st&&(s=e.field(o.field)||null),n.push(a.applyToLocalView(s,t))}return n},e.prototype.transformObject=function(t,e){y(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++)t=t.set(this.fieldTransforms[n].field,e[n]);return t},e}(ne),ae=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=te.Delete,r}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),y(null==e.transformResults,"Transform results received by DeleteMutation."),new ut(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&y(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new ut(this.key,Xt.forDeletedDoc())):t},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(ne),se=function(){function t(){}return t.prototype.applyToLocalView=function(t,e){return new St(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),ue=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ce(t),n=function(t){e.find(function(e){return e.isEqual(t)})||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Ot(e)},t.prototype.isEqual=function(e){return e instanceof t&&W(e.elements,this.elements)},t}(),le=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ce(t),n=function(t){e=e.filter(function(e){return!e.isEqual(t)})},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Ot(e)},t.prototype.isEqual=function(e){return e instanceof t&&W(e.elements,this.elements)},t}();function ce(t){return t instanceof Ot?t.internalValue.slice():[]}var he=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}(),pe=function(t){return t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS",t}({});function fe(t){switch(t){case _.OK:return g("Treated status OK as error");case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0;default:return g("Unknown status code: "+t)}}function de(t){if(void 0===t)return d("GRPC error has no .code"),_.UNKNOWN;switch(t){case pe.OK:return _.OK;case pe.CANCELLED:return _.CANCELLED;case pe.UNKNOWN:return _.UNKNOWN;case pe.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case pe.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case pe.INTERNAL:return _.INTERNAL;case pe.UNAVAILABLE:return _.UNAVAILABLE;case pe.UNAUTHENTICATED:return _.UNAUTHENTICATED;case pe.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case pe.NOT_FOUND:return _.NOT_FOUND;case pe.ALREADY_EXISTS:return _.ALREADY_EXISTS;case pe.PERMISSION_DENIED:return _.PERMISSION_DENIED;case pe.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case pe.ABORTED:return _.ABORTED;case pe.OUT_OF_RANGE:return _.OUT_OF_RANGE;case pe.UNIMPLEMENTED:return _.UNIMPLEMENTED;case pe.DATA_LOSS:return _.DATA_LOSS;default:return g("Unknown status code: "+t)}}var me=new ct(ot.comparator);function ge(){return me}var ye=new ct(ot.comparator);function ve(){return ye}var be=new ct(ot.comparator);function _e(){return be}var we=new Yt(ot.comparator);function xe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=we,r=0,i=t;r<i.length;r++)n=n.add(i[r]);return n}var Ce=new Yt(H);function Ee(){return Ce}var Se=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ot.comparator(e.key,n.key)}:function(t,e){return ot.comparator(t.key,e.key)},this.keyedMap=ve(),this.sortedSet=new ct(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Te=function(t){return t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata",t}({}),Ae=function(t){return t[t.Local=0]="Local",t[t.Synced=1]="Synced",t}({}),Pe=function(){function t(){this.changeMap=new ct(ot.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==Te.Added&&n.type===Te.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Te.Metadata&&n.type!==Te.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Te.Modified&&n.type===Te.Modified?this.changeMap=this.changeMap.insert(e,{type:Te.Modified,doc:t.doc}):t.type===Te.Modified&&n.type===Te.Added?this.changeMap=this.changeMap.insert(e,{type:Te.Added,doc:t.doc}):t.type===Te.Removed&&n.type===Te.Added?this.changeMap=this.changeMap.remove(e):t.type===Te.Removed&&n.type===Te.Modified?this.changeMap=this.changeMap.insert(e,{type:Te.Removed,doc:n.doc}):t.type===Te.Added&&n.type===Te.Removed?this.changeMap=this.changeMap.insert(e,{type:Te.Modified,doc:t.doc}):g("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Ie=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:Te.Added,doc:t})}),new t(e,n,Se.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Oe=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r,i=((r={})[e]=De.createSynthesizedTargetChangeForCurrentChange(e,n),r);return new t(Xt.MIN,i,Ee(),ge(),xe())},t}(),De=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(b(),n,xe(),xe(),xe())},t}(),ke=function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r},Me=function(t,e){this.targetId=t,this.existenceFilter=e},Re=function(t){return t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset",t}({}),Ne=function(){return function(t,e,n,r){void 0===n&&(n=b()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}(),Le=function(){function t(){this.pendingResponses=0,this.documentChanges=je(),this._resumeToken=b(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=xe(),e=xe(),n=xe();return this.documentChanges.forEach(function(r,i){switch(i){case Te.Added:t=t.add(r);break;case Te.Modified:e=e.add(r);break;case Te.Removed:n=n.add(r);break;default:g("Encountered invalid change type: "+i)}}),new De(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=je()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),Fe=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=ge(),this.pendingDocumentTargetMapping=Be(),this.pendingTargetResets=new Yt(H)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof st?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof ut&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.removeDocumentFromTarget(r=o[i],t.key,t.newDoc)},t.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ensureTargetState(n);switch(t.state){case Re.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case Re.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case Re.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),y(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case Re.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case Re.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:g("Unknown target watch change state: "+t.state)}})},t.prototype.forEachTarget=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):S(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.queryDataForActiveTarget(e);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new ot(i.path);this.removeDocumentFromTarget(e,o,new ut(o,Xt.forDeletedDoc()))}else y(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},t.prototype.createRemoteEvent=function(t){var e=this,n={};S(this.targetStates,function(r,i){var o=e.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var a=new ot(o.query.path);null!==e.pendingDocumentUpdates.get(a)||e.targetContainsDocument(r,a)||e.removeDocumentFromTarget(r,a,new ut(a,t))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=xe();this.pendingDocumentTargetMapping.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.queryDataForActiveTarget(t);return!n||n.purpose===Qt.LimboResolution||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Oe(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=ge(),this.pendingDocumentTargetMapping=Be(),this.pendingTargetResets=new Yt(H),i},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?Te.Modified:Te.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,Te.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new Le),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new Yt(H),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){return null!==this.queryDataForActiveTarget(t)},t.prototype.queryDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getQueryDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;y(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new Le,this.metadataProvider.getRemoteKeysForTarget(t).forEach(function(n){e.removeDocumentFromTarget(t,n,null)})},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}();function Be(){return new ct(ot.comparator)}function je(){return new ct(ot.comparator)}var ze,Ve,Ue=((ze={})[qt.ASCENDING.name]="ASCENDING",ze[qt.DESCENDING.name]="DESCENDING",ze),qe=((Ve={})[jt.LESS_THAN.name]="LESS_THAN",Ve[jt.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Ve[jt.GREATER_THAN.name]="GREATER_THAN",Ve[jt.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Ve[jt.EQUAL.name]="EQUAL",Ve[jt.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",Ve),Ge=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function He(t,e){y(!Nt(t),e+" is missing")}function We(t){return"number"==typeof t?t:"string"==typeof t?Number(t):g("can't parse "+t)}var Ke=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?_.UNKNOWN:de(t.code);return new w(e,t.message||"")},t.prototype.toInt32Value=function(t){return Nt(t)?void 0:{value:t}},t.prototype.fromInt32Value=function(t){var e;return Nt(e="object"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return{seconds:t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);y(!!t,"Cannot deserialize null or undefined timestamp.");var e=We(t.seconds||"0");return new J(e,t.nanos||0)},t.prototype.fromIso8601String=function(t){var e=0,n=Ge.exec(t);if(y(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new J(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(y(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Q.fromBase64String(t)):(y(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),Q.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return y(!!t,"Trying to deserialize version that isn't set"),Xt.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=nt.fromString(t);return y(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return y(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),y(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new ot(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return 0===t.length?this.encodedDatabaseId:this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?nt.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new nt(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new nt(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return y(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof yt)return{nullValue:"NULL_VALUE"};if(t instanceof vt)return{booleanValue:t.value()};if(t instanceof wt)return{integerValue:""+t.value()};if(t instanceof xt){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof Ct?{stringValue:t.value()}:t instanceof It?{mapValue:this.toMapValue(t)}:t instanceof Ot?{arrayValue:this.toArrayValue(t)}:t instanceof Et?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof Pt?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof Tt?{bytesValue:this.toBytes(t.value())}:t instanceof At?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:g("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this,n=t.value_type;if(Xe(t,n,"nullValue"))return yt.INSTANCE;if(Xe(t,n,"booleanValue"))return vt.of(t.booleanValue);if(Xe(t,n,"integerValue"))return new wt(We(t.integerValue));if(Xe(t,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return xt.NAN;if("Infinity"===t.doubleValue)return xt.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return xt.NEGATIVE_INFINITY}return new xt(t.doubleValue)}if(Xe(t,n,"stringValue"))return new Ct(t.stringValue);if(Xe(t,n,"mapValue"))return this.fromFields(t.mapValue.fields||{});if(Xe(t,n,"arrayValue"))return He(t.arrayValue,"arrayValue"),new Ot((t.arrayValue.values||[]).map(function(t){return e.fromValue(t)}));if(Xe(t,n,"timestampValue"))return He(t.timestampValue,"timestampValue"),new Et(this.fromTimestamp(t.timestampValue));if(Xe(t,n,"geoPointValue"))return He(t.geoPointValue,"geoPointValue"),new Pt(new Y(t.geoPointValue.latitude||0,t.geoPointValue.longitude||0));if(Xe(t,n,"bytesValue")){He(t.bytesValue,"bytesValue");var r=this.fromBlob(t.bytesValue);return new Tt(r)}if(Xe(t,n,"referenceValue")){He(t.referenceValue,"referenceValue");var i=this.fromResourceName(t.referenceValue),o=new tt(i.get(1),i.get(3)),a=new ot(this.extractLocalPathFromResourceName(i));return new At(o,a)}return g("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return y(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){return new st(this.fromName(t.name),this.fromVersion(t.updateTime),this.fromFields(t.fields||{}),{hasCommittedMutations:!!e})},t.prototype.toFields=function(t){var e=this,n={};return t.forEach(function(t,r){n[t]=e.toValue(r)}),n},t.prototype.fromFields=function(t){var e=this,n=It.EMPTY;return T(t,function(t,r){n=n.set(new it([t]),e.fromValue(r))}),n},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},t.prototype.fromFound=function(t){y(!!t.found,"Tried to deserialize a found document from a missing document."),He(t.found.name,"doc.found.name"),He(t.found.updateTime,"doc.found.updateTime");var e=this.fromName(t.found.name),n=this.fromVersion(t.found.updateTime),r=this.fromFields(t.found.fields||{});return new st(e,n,r,{})},t.prototype.fromMissing=function(t){y(!!t.missing,"Tried to deserialize a missing document from a found document."),y(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new ut(e,n)},t.prototype.fromMaybeDocument=function(t){var e=t.result;return Xe(t,e,"found")?this.fromFound(t):Xe(t,e,"missing")?this.fromMissing(t):g("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case Re.Added:return"ADD";case Re.Current:return"CURRENT";case Re.NoChange:return"NO_CHANGE";case Re.Removed:return"REMOVE";case Re.Reset:return"RESET";default:return g("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof Me)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof ke){var e;if(t.newDoc instanceof st)return{documentChange:{document:{name:this.toName((e=t.newDoc).key),fields:this.toFields(e.data),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}};if(t.newDoc instanceof ut)return{documentDelete:{document:this.toName((e=t.newDoc).key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Ne){var n=void 0;return t.cause&&(n={code:function(t){if(void 0===t)return pe.OK;switch(t){case _.OK:return pe.OK;case _.CANCELLED:return pe.CANCELLED;case _.UNKNOWN:return pe.UNKNOWN;case _.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case _.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case _.INTERNAL:return pe.INTERNAL;case _.UNAVAILABLE:return pe.UNAVAILABLE;case _.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case _.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case _.NOT_FOUND:return pe.NOT_FOUND;case _.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case _.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case _.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case _.ABORTED:return pe.ABORTED;case _.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case _.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case _.DATA_LOSS:return pe.DATA_LOSS;default:return g("Unknown status code: "+t)}}(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return g("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=t.response_type;if(Xe(t,n,"targetChange")){He(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),a=t.targetChange.cause,s=a&&this.fromRpcStatus(a);e=new Ne(r,i,o,s||null)}else if(Xe(t,n,"documentChange")){He(t.documentChange,"documentChange"),He(t.documentChange.document,"documentChange.name"),He(t.documentChange.document.name,"documentChange.document.name"),He(t.documentChange.document.updateTime,"documentChange.document.updateTime");var u=t.documentChange,l=this.fromName(u.document.name),c=this.fromVersion(u.document.updateTime),h=this.fromFields(u.document.fields||{}),p=new st(l,c,h,{});e=new ke(u.targetIds||[],u.removedTargetIds||[],p.key,p)}else if(Xe(t,n,"documentDelete")){He(t.documentDelete,"documentDelete"),He(t.documentDelete.document,"documentDelete.document");var f=t.documentDelete;l=this.fromName(f.document),c=f.readTime?this.fromVersion(f.readTime):Xt.forDeletedDoc(),p=new ut(l,c),e=new ke([],f.removedTargetIds||[],p.key,p)}else if(Xe(t,n,"documentRemove")){He(t.documentRemove,"documentRemove"),He(t.documentRemove.document,"documentRemove");var d=t.documentRemove;l=this.fromName(d.document),e=new ke([],d.removedTargetIds||[],l,null)}else{if(!Xe(t,n,"filter"))return g("Unknown change type "+JSON.stringify(t));He(t.filter,"filter"),He(t.filter.targetId,"filter.targetId");var m=t.filter,y=new he(m.count||0);e=new Me(m.targetId,y)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?Re.NoChange:"ADD"===t?Re.Added:"REMOVE"===t?Re.Removed:"CURRENT"===t?Re.Current:"RESET"===t?Re.Reset:g("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!Xe(t,t.response_type,"targetChange"))return Xt.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?Xt.MIN:e.readTime?this.fromVersion(e.readTime):Xt.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof re)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof ae)e={delete:this.toName(t.key)};else if(t instanceof ie)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof oe))return g("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):ee.NONE;if(t.update){He(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new ie(r,i,o,n)}return new re(r,i,n)}if(t.delete)return r=this.fromName(t.delete),new ae(r,n);if(t.transform){r=this.fromName(t.transform.document);var a=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return y(!0===n.exists,'Transforms only support precondition "exists == true"'),new oe(r,a)}return g("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return y(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:g("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?ee.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?ee.exists(t.exists):ee.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,r=this.fromVersion(t.updateTime?t.updateTime:e),i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults.map(function(t){return n.fromValue(t)})),new function(t,e){this.version=t,this.transformResults=e}(r,i)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&t.length>0?(y(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.fromWriteResult(t,e)})):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof se)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ue)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof le)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(t){return e.toValue(t)})}};throw g("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=t.transform_type,r=null;Xe(t,n,"setToServerValue")?(y("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),r=se.instance):Xe(t,n,"appendMissingElements")?r=new ue((t.appendMissingElements.values||[]).map(function(t){return e.fromValue(t)})):Xe(t,n,"removeAllFromArray")?r=new le((t.removeAllFromArray.values||[]).map(function(t){return e.fromValue(t)})):g("Unknown transform proto: "+JSON.stringify(t));var i=it.fromServerFormat(t.fieldPath);return new $t(i,r)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;return y(1===e,"DocumentsTarget contained other than 1 document: "+e),Ft.atPath(this.fromQueryPath(t.documents[0]))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}};if(t.path.isEmpty())e.parent=this.toQueryPath(nt.EMPTY_PATH);else{var n=t.path;y(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]}var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0;r>0&&(y(1===r,"StructuredQuery.from with more than one collection is not supported."),e=e.child(n.from[0].collectionId));var i=[];n.where&&(i=this.fromFilter(n.where));var o=[];n.orderBy&&(o=this.fromOrder(n.orderBy));var a=null;n.limit&&(a=this.fromInt32Value(n.limit));var s=null;n.startAt&&(s=this.fromCursor(n.startAt));var u=null;return n.endAt&&(u=this.fromCursor(n.endAt)),new Ft(e,o,i,a,s,u)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case Qt.Listen:return null;case Qt.ExistenceFilterMismatch:return"existence-filter-mismatch";case Qt.LimboResolution:return"limbo-document";default:return g("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof zt?e.toRelationFilter(t):e.toUnaryFilter(t)});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromRelationFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):g("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},t.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new Gt(r,n)},t.prototype.toDirection=function(t){return Ue[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return qt.ASCENDING;case"DESCENDING":return qt.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return qe[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return jt.EQUAL;case"GREATER_THAN":return jt.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return jt.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return jt.LESS_THAN;case"LESS_THAN_OR_EQUAL":return jt.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return jt.ARRAY_CONTAINS;case"OPERATOR_UNSPECIFIED":return g("Unspecified relation");default:return g("Unknown relation")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return it.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new Ht(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.toRelationFilter=function(t){return t instanceof zt?{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}:g("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromRelationFilter=function(t){return new zt(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryFilter=function(t){return t instanceof Ut?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}}:t instanceof Vt?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}:g("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return new Ut(e);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return new Vt(n);case"OPERATOR_UNSPECIFIED":return g("Unspecified filter");default:return g("Unknown filter")}},t.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map(function(t){return it.fromServerFormat(t)});return Jt.fromArray(e)},t}();function Xe(t,e,n){return e===n||!e&&n in t}var Qe=Error.captureStackTrace,Ze=function(){return function(t,e){if(this.code=t,this.message=e,Qe)Qe(this,Ye.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name="FirebaseError",Object.defineProperty(this,"stack",{get:function(){return t.stack}})}}}();Ze.prototype=Object.create(Error.prototype),Ze.prototype.constructor=Ze,Ze.prototype.name="FirebaseError";var Ye=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],i=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"});var o=new Ze(i,n=this.serviceName+": "+n+" ("+i+").");for(var a in e)e.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=e[a]);return o},t}(),Je=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){y(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){y(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){y(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){y(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){y(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){y(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),$e="Connection",tn={BatchGetDocuments:"batchGet",Commit:"commit"},en="gl-js/ fire/"+u,nn=function(){function t(t){this.databaseId=t.databaseId,this.pool=new s.XhrIoPool,this.baseUrl=(t.ssl?"https":"http")+"://"+t.host}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=en},t.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise(function(o,a){r.pool.getObject(function(u){u.listenOnce(s.EventType.COMPLETE,function(){try{switch(u.getLastErrorCode()){case s.ErrorCode.NO_ERROR:var e=u.getResponseJson();f($e,"XHR received:",JSON.stringify(e)),o(e);break;case s.ErrorCode.TIMEOUT:f($e,'RPC "'+t+'" timed out'),a(new w(_.DEADLINE_EXCEEDED,"Request time out"));break;case s.ErrorCode.HTTP_ERROR:var n=u.getStatus();f($e,'RPC "'+t+'" failed with status:',n,"response text:",u.getResponseText()),n>0?a(new w(function(t){switch(t){case 200:return _.OK;case 400:return _.INVALID_ARGUMENT;case 401:return _.UNAUTHENTICATED;case 403:return _.PERMISSION_DENIED;case 404:return _.NOT_FOUND;case 409:return _.ABORTED;case 416:return _.OUT_OF_RANGE;case 429:return _.RESOURCE_EXHAUSTED;case 499:return _.CANCELLED;case 500:return _.UNKNOWN;case 501:return _.UNIMPLEMENTED;case 503:return _.UNAVAILABLE;case 504:return _.DEADLINE_EXCEEDED;default:return t>=200&&t<300?_.OK:t>=400&&t<500?_.FAILED_PRECONDITION:t>=500&&t<600?_.INTERNAL:_.UNKNOWN}}(n),"Server responded with status "+u.getStatusText())):(f($e,'RPC "'+t+'" failed'),a(new w(_.UNAVAILABLE,"Connection failed.")));break;default:g('RPC "'+t+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{f($e,'RPC "'+t+'" completed.'),r.pool.releaseObject(u)}});var l=JSON.stringify(e);f($e,"XHR sending: ",i+" "+l);var c={"Content-Type":"text/plain"};r.modifyHeadersForRequest(c,n),u.send(i,"POST",l,c,15)})})},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1beta1.Firestore","/",t,"/channel"],r=s.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0};this.modifyHeadersForRequest(i.initMessageHeaders,e),"object"==typeof navigator&&"ReactNative"===navigator.product||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");f($e,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),u=!1,l=!1,c=new Je({sendFn:function(t){l?f($e,"Not sending because WebChannel is closed:",t):(u||(f($e,"Opening WebChannel transport."),a.open(),u=!0),f($e,"WebChannel sending:",t),a.send(t))},closeFn:function(){return a.close()}}),h=function(t,e){a.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(s.WebChannel.EventType.OPEN,function(){l||f($e,"WebChannel transport opened.")}),h(s.WebChannel.EventType.CLOSE,function(){l||(l=!0,f($e,"WebChannel transport closed"),c.callOnClose())}),h(s.WebChannel.EventType.ERROR,function(t){l||(l=!0,f($e,"WebChannel transport errored:",t),c.callOnClose(new w(_.UNAVAILABLE,"The operation could not be completed")))}),h(s.WebChannel.EventType.MESSAGE,function(t){if(!l){var e=t.data[0];y(!!e,"Got a webchannel message without data.");var n=e.error||e[0]&&e[0].error;if(n){f($e,"WebChannel received error:",n);var r=n.status,i=function(t){var e=pe[r];if(void 0!==e)return de(e)}(),o=n.message;void 0===i&&(i=_.INTERNAL,o="Unknown error status: "+r+" with message "+n.message),l=!0,c.callOnClose(new w(i,o)),a.close()}else f($e,"WebChannel received:",e),c.callOnMessage(e)}}),setTimeout(function(){c.callOnOpen()},0),c},t.prototype.makeUrl=function(t){var e=tn[t];y(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/","v1beta1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}();v.setPlatform(new(function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new nn(t))},t.prototype.newSerializer=function(t){return new Ke(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}()));var rn,on=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),an=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})};!function(t){t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout",t.ClientMetadataRefresh="client_metadata_refresh",t.LruGarbageCollection="lru_garbage_collection"}(rn||(rn={}));var sn=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new an,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new w(_.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),un=function(){function t(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueue=function(t){var e=this;this.verifyNotFailed();var n=this.tail.then(function(){return e.operationInProgress=!0,t().catch(function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw d("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return e.operationInProgress=!1,t})});return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),y(e>=0,"Attempted to schedule an operation with a negative delay of "+e),y(!this.containsDelayedOperation(t),"Attempted to schedule multiple operations with timer id "+t+".");var i=sn.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)});return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&g("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){y(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then(function(){y(t===rn.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==rn.All&&i.timerId===t)break}return e.drain()})},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);y(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),ln="\x01",cn="\x01",hn="\x10",pn="\x11";function fn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=mn(e)),e=dn(t.get(n),e);return mn(e)}function dn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=ln+hn;break;case ln:n+=ln+pn;break;default:n+=o}}return n}function mn(t){return t+ln+cn}function gn(t){var e=t.length;if(y(e>=2,"Invalid path "+t),2===e)return y(t.charAt(0)===ln&&t.charAt(1)===cn,"Non-empty path "+t+" had length 2"),nt.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf(ln,o);switch((a<0||a>n)&&g('Invalid encoded resource path: "'+t+'"'),t.charAt(a+1)){case cn:var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case hn:i+=t.substring(o,a),i+="\0";break;case pn:i+=t.substring(o,a+1);break;default:g('Invalid encoded resource path: "'+t+'"')}o=a+2}return new nt(r)}var yn=-1,vn=function(){function t(t,e,n){this.batchId=t,this.localWriteTime=e,this.mutations=n,y(n.length>0,"Cannot create an empty mutation batch")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&y(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;y(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=o.applyToRemoteDocument(e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){e&&y(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=e,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t)&&(e=i.applyToLocalView(e,n,this.localWriteTime))}return e},t.prototype.keys=function(){for(var t=xe(),e=0,n=this.mutations;e<n.length;e++)t=t.add(n[e].key);return t},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&W(this.mutations,t.mutations)},t}(),bn=function(){function t(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return t.from=function(e,n,r,i){y(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=_e(),a=e.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new t(e,n,r,i,o)},t}(),_n=1,wn=function(t){return t[t.QueryCache=0]="QueryCache",t[t.SyncEngine=1]="SyncEngine",t}({}),xn=function(){function t(t,e){this.generatorId=t,y((t&_n)===t,"Generator ID "+t+" contains more than "+_n+" reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=1<<_n,t},t.prototype.after=function(t){return this.seek(t+(1<<_n)),this.next()},t.prototype.seek=function(t){y((t&_n)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forQueryCache=function(){return new t(wn.QueryCache,2)},t.forSyncEngine=function(){return new t(wn.SyncEngine)},t}(),Cn=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&g("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),En=function(){function t(t){this.db=t}return t.openOrCreate=function(e,n,r){return y(t.isAvailable(),"IndexedDB not supported in current environment."),f("SimpleDb","Opening database:",e),new Cn(function(i,o){var a=window.indexedDB.open(e,n);a.onsuccess=function(e){i(new t(e.target.result))},a.onblocked=function(){o(new w(_.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(t){var e=t.target.error;o("VersionError"===e.name?new w(_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):e)},a.onupgradeneeded=function(t){f("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result,i=new Tn(a.transaction);r.createOrUpgrade(n,i,t.oldVersion,Gn).next(function(){f("SimpleDb","Database upgrade to version "+Gn+" complete")})}}).toPromise()},t.delete=function(t){return f("SimpleDb","Removing database:",t),Pn(window.indexedDB.deleteDatabase(t)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===process.env.USE_MOCK_PERSISTENCE;var t=window.navigator.userAgent;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0)},t.getStore=function(t,e){return t.store(e)},t.prototype.runTransaction=function(t,e,n){var r=Tn.open(this.db,t,e),i=n(r).catch(function(t){return r.abort(t),Cn.reject(t)}).toPromise();return r.completionPromise.then(function(){return i})},t.prototype.close=function(){this.db.close()},t}(),Sn=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return Pn(this.dbCursor.delete())},t}(),Tn=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new an,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){e.completionDeferred.reject(t.target.error)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(f("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return y(!!e,"Object store not part of transaction: "+t),new An(e)},t}(),An=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(f("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(f("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Pn(n)},t.prototype.add=function(t){return f("SimpleDb","ADD",this.store.name,t,t),Pn(this.store.add(t))},t.prototype.get=function(t){var e=this;return Pn(this.store.get(t)).next(function(n){return void 0===n&&(n=null),f("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return f("SimpleDb","DELETE",this.store.name,t),Pn(this.store.delete(t))},t.prototype.count=function(){return f("SimpleDb","COUNT",this.store.name),Pn(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.deleteAll=function(t,e){f("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateSerial=function(t){var e=this.cursor({});return new Cn(function(n,r){e.onerror=function(t){r(t.target.error)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.iterateCursor=function(t,e){var n=[];return new Cn(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Sn(i),a=e(i.primaryKey,i.value,o);if(a instanceof Cn){var s=a.catch(function(t){return o.done(),Cn.reject(t)});n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return Cn.waitFor(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(y(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Pn(t){return new Cn(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){n(t.target.error)}})}var In=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=xn.forQueryCache()}return t.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next(function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next(function(t){return Xt.fromTimestamp(new J(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return kn(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.retrieveMetadata(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.saveMetadata(t,i)})},t.prototype.addQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next(function(){return n.retrieveMetadata(t).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(e,r),n.saveMetadata(t,r)})})},t.prototype.updateQueryData=function(t,e){return this.saveQueryData(t,e)},t.prototype.removeQueryData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return On(t).delete(e.targetId)}).next(function(){return n.retrieveMetadata(t)}).next(function(e){return y(e.targetCount>0,"Removing from an empty query cache"),e.targetCount-=1,n.saveMetadata(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return On(t).iterate(function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=e&&void 0===n[u.targetId]&&(i++,o.push(r.removeQueryData(t,u)))}).next(function(){return Cn.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){var n=this;return On(t).iterate(function(t,r){var i=n.serializer.fromDbTarget(r);e(i)})},t.prototype.retrieveMetadata=function(t){return Dn(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return(n=t,Er.getStore(n,tr.store)).put(tr.key,e);var n},t.prototype.saveQueryData=function(t,e){return On(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getQueryCount=function(t){return this.retrieveMetadata(t).next(function(t){return t.targetCount})},t.prototype.getQueryData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return On(t).iterate({range:i,index:Jn.queryTargetsIndexName},function(t,r,i){var a=n.serializer.fromDbTarget(r);e.isEqual(a.query)&&(o=a,i.done())}).next(function(){return o})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Mn(t);return e.forEach(function(e){var a=fn(e.path);i.push(o.put(new $n(n,a))),i.push(r.referenceDelegate.addReference(t,e))}),Cn.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Mn(t);return Cn.forEach(e,function(e){var o=fn(e.path);return Cn.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Mn(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Mn(t),i=xe();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=gn(t[1]),o=new ot(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n,r=fn(e.path),i=IDBKeyRange.bound([r],[(n=r,n+"\0")],!1,!0),o=0;return Mn(t).iterate({index:$n.documentTargetsIndex,keysOnly:!0,range:i},function(t,e,n){0!==t[0]&&(o++,n.done())}).next(function(){return o>0})},t.prototype.getQueryDataForTarget=function(t,e){var n=this;return On(t).get(e).next(function(t){return t?n.serializer.fromDbTarget(t):null})},t}();function On(t){return Er.getStore(t,Jn.store)}function Dn(t){return En.getStore(t,tr.store).get(tr.key).next(function(t){return y(null!==t,"Missing metadata row."),t})}function kn(t){return Dn(t).next(function(t){return t.highestListenSequenceNumber})}function Mn(t){return Er.getStore(t,$n.store)}var Rn=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[1];if(o[0].isEqual(t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){T(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return A(this.inner)},t}(),Nn=function(){function t(){this.changes=ge(),this.documentSizes=new Rn(function(t){return t.toString()})}return t.prototype.addEntry=function(t){var e=this.assertChanges();this.changes=e.insert(t.key,t)},t.prototype.getEntry=function(t,e){var n=this,r=this.assertChanges().get(e);return r?Cn.resolve(r):this.getFromCache(t,e).next(function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)})},t.prototype.apply=function(t){var e=this.applyChanges(t);return this.changes=null,e},t.prototype.assertChanges=function(){return y(null!==this.changes,"Changes have already been applied."),this.changes},t}(),Ln="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",Fn=function(){function t(t,e){this.serializer=t,this.keepDocumentChangeLog=e,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(t.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),t.prototype.start=function(t){var e=En.getStore(t,nr.store);return this.synchronizeLastDocumentChangeId(e)},t.prototype.addEntries=function(t,e,n){var r=[];if(e.length>0){for(var i=zn(t),o=xe(),a=0,s=e;a<s.length;a++){var u=s[a],l=u.key,c=u.doc;r.push(i.put(Un(l),c)),o=o.add(l)}this.keepDocumentChangeLog&&r.push(Vn(t).put({changes:this.serializer.toDbResourcePaths(o)})),r.push(this.updateSize(t,n))}return Cn.waitFor(r)},t.prototype.removeEntry=function(t,e){var n=zn(t),r=Un(e);return n.get(r).next(function(t){return t?n.delete(r).next(function(){return qn(t)}):Cn.resolve(0)})},t.prototype.getEntry=function(t,e){var n=this;return zn(t).get(Un(e)).next(function(t){return t?n.serializer.fromDbRemoteDocument(t):null})},t.prototype.getSizedEntry=function(t,e){var n=this;return zn(t).get(Un(e)).next(function(t){return t?{maybeDocument:n.serializer.fromDbRemoteDocument(t),size:qn(t)}:null})},t.prototype.getDocumentsMatchingQuery=function(t,e){var n=this,r=ve(),i=e.path.toArray(),o=IDBKeyRange.lowerBound(i);return zn(t).iterate({range:o},function(t,i,o){var a=n.serializer.fromDbRemoteDocument(i);e.path.isPrefixOf(a.key.path)?a instanceof st&&e.matches(a)&&(r=r.insert(a.key,a)):o.done()}).next(function(){return r})},t.prototype.getNewDocumentChanges=function(t){var e=this;y(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=xe(),r=ge(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,a=Vn(t);return a.iterate({range:i},function(t,r){if(o&&(o=!1,e._lastProcessedDocumentChangeId+1!==r.id))return e.synchronizeLastDocumentChangeId(a).next(function(){return Cn.reject(new w(_.DATA_LOSS,Ln))});n=n.unionWith(e.serializer.fromDbResourcePaths(r.changes)),e._lastProcessedDocumentChangeId=r.id}).next(function(){var i=[];return n.forEach(function(n){i.push(e.getEntry(t,n).next(function(t){var e=t||new ut(n,Xt.forDeletedDoc());r=r.insert(n,e)}))}),Cn.waitFor(i)}).next(function(){return r})},t.prototype.removeDocumentChangesThroughChangeId=function(t,e){var n=IDBKeyRange.upperBound(e);return Vn(t).delete(n)},t.prototype.synchronizeLastDocumentChangeId=function(t){var e=this;return this._lastProcessedDocumentChangeId=0,t.iterate({keysOnly:!0,reverse:!0},function(t,n,r){e._lastProcessedDocumentChangeId=t,r.done()})},t.prototype.newChangeBuffer=function(){return new jn(this)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Bn(t).get(Yn.key).next(function(t){return y(!!t,"Missing document cache metadata"),t})},t.prototype.setMetadata=function(t,e){return Bn(t).put(Yn.key,e)},t.prototype.updateSize=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.setMetadata(t,r)})},t}();function Bn(t){return Er.getStore(t,Yn.store)}var jn=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n}return a.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=0,r=[];return this.assertChanges().forEach(function(t,i){var o=e.documentCache.serializer.toDbRemoteDocument(i),a=e.documentSizes.get(t);y(void 0!==a,"Attempting to change document "+t.toString()+" without having read it first");var s=qn(o);n+=s-a,r.push({key:t,doc:o})}),this.documentCache.addEntries(t,r,n)},e.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},e}(Nn);function zn(t){return Er.getStore(t,Zn.store)}function Vn(t){return Er.getStore(t,nr.store)}function Un(t){return t.path.toArray()}function qn(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw g("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var Gn=7,Hn=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;y(n<r&&n>=0&&r<=Gn,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&r>=1&&(function(t){t.createObjectStore(Wn.store)}(t),function(t){t.createObjectStore(Kn.store,{keyPath:Kn.keyPath}),t.createObjectStore(Xn.store,{keyPath:Xn.keyPath,autoIncrement:!0}).createIndex(Xn.userMutationsIndex,Xn.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Qn.store)}(t),er(t),function(t){t.createObjectStore(Zn.store)}(t));var o=Cn.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore($n.store),t.deleteObjectStore(Jn.store),t.deleteObjectStore(tr.store)}(t),er(t)),o=o.next(function(){return function(t){var e=t.store(tr.store),n=new tr(0,0,Xt.MIN.toTimestamp(),0);return e.put(tr.key,n)}(e)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(t,e){return e.store(Xn.store).loadAll().next(function(n){t.deleteObjectStore(Xn.store),t.createObjectStore(Xn.store,{keyPath:Xn.keyPath,autoIncrement:!0}).createIndex(Xn.userMutationsIndex,Xn.userMutationsKeyPath,{unique:!0});var r=e.store(Xn.store),i=n.map(function(t){return r.put(t)});return Cn.waitFor(i)})}(t,e)})),o=o.next(function(){!function(t){t.createObjectStore(rr.store,{keyPath:rr.keyPath})}(t),function(t){t.createObjectStore(nr.store,{keyPath:"id",autoIncrement:!0})}(t)})),n<5&&r>=5&&(o=o.next(function(){return i.removeAcknowledgedMutations(e)})),n<6&&r>=6&&(o=o.next(function(){return function(t){t.createObjectStore(Yn.store)}(t),i.addDocumentGlobal(e)})),n<7&&r>=7&&(o=o.next(function(){return i.ensureSequenceNumbers(e)})),o},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Zn.store).iterate(function(t,n){e+=qn(n)}).next(function(){var n=new Yn(e);return t.store(Yn.store).put(Yn.key,n)})},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Kn.store),r=t.store(Xn.store);return n.loadAll().next(function(n){return Cn.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,yn],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(Xn.userMutationsIndex,i).next(function(r){return Cn.forEach(r,function(r){y(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.fromDbMutationBatch(r);return sr(t,n.userId,i).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var e=t.store($n.store),n=t.store(Zn.store);return kn(t).next(function(t){var r=[];return n.iterate(function(n,i){var o=new nt(n),a=function(t){return[0,fn(t)]}(o);r.push(e.get(a).next(function(n){return n?Cn.resolve():function(n){return e.put(new $n(0,fn(n),t))}(o)}))}).next(function(){return Cn.waitFor(r)})})},t}(),Wn=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}(),Kn=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),Xn=function(){function t(t,e,n,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.mutations=r}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}(),Qn=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,fn(e)]},t.key=function(t,e,n){return[t,fn(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),Zn=function(){function t(t,e,n,r){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r}return t.store="remoteDocuments",t}(),Yn=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}(),Jn=function(){function t(t,e,n,r,i,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),$n=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,y(0===t==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),tr=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}();function er(t){t.createObjectStore($n.store,{keyPath:$n.keyPath}).createIndex($n.documentTargetsIndex,$n.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Jn.store,{keyPath:Jn.keyPath}).createIndex(Jn.queryTargetsIndexName,Jn.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(tr.store)}var nr=function(){function t(t){this.changes=t}return t.store="remoteDocumentChanges",t.keyPath="id",t}(),rr=function(){function t(t,e,n,r,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return t.store="clientMetadata",t.keyPath="clientId",t}(),ir=[Kn.store,Xn.store,Qn.store,Zn.store,Jn.store,Wn.store,tr.store,$n.store].concat([rr.store,nr.store]).concat([Yn.store]),or=function(){function t(t,e,n){this.userId=t,this.serializer=e,this.referenceDelegate=n,this.documentKeysByBatchId={}}return t.forUser=function(e,n,r){return y(""!==e.uid,"UserID must not be an empty string."),new t(e.isAuthenticated()?e.uid:"",n,r)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lr(t).iterate({index:Xn.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next(function(r){var i=e.batchId;return y(i>r.lastAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order"),r.lastAcknowledgedBatchId=i,r.lastStreamToken=ur(n),hr(t).put(r)})},t.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next(function(t){return t.lastStreamToken})},t.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next(function(n){return n.lastStreamToken=ur(e),hr(t).put(n)})},t.prototype.addMutationBatch=function(t,e,n){var r=this,i=cr(t),o=lr(t);return o.add({}).next(function(t){y("number"==typeof t,"Auto-generated key is not a number");var a=new vn(t,e,n),s=r.serializer.toDbMutationBatch(r.userId,a);r.documentKeysByBatchId[t]=a.keys();for(var u=[],l=0,c=n;l<c.length;l++){var h=Qn.key(r.userId,c[l].key.path,t);u.push(o.put(s)),u.push(i.put(h,Qn.PLACEHOLDER))}return Cn.waitFor(u).next(function(){return a})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return lr(t).get(e).next(function(t){return t?(y(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null})},t.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?Cn.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.documentKeysByBatchId[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this;return this.getMutationQueueMetadata(t).next(function(r){var i=Math.max(e,r.lastAcknowledgedBatchId)+1,o=IDBKeyRange.lowerBound([n.userId,i]),a=null;return lr(t).iterate({index:Xn.userMutationsIndex,range:o},function(t,e,r){e.userId===n.userId&&(y(e.batchId>=i,"Should have found mutation after "+i),a=n.serializer.fromDbMutationBatch(e)),r.done()}).next(function(){return a})})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,yn],[this.userId,Number.POSITIVE_INFINITY]);return lr(t).loadAll(Xn.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Qn.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return cr(t).iterate({range:i},function(r,i,a){var s=r[0],u=r[2],l=gn(r[1]);if(s===n.userId&&e.path.isEqual(l))return lr(t).get(u).next(function(t){if(!t)throw g("Dangling document-mutation reference found: "+r+" which points to "+u);y(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+u),o.push(n.serializer.fromDbMutationBatch(t))});a.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Yt(H),i=[];return e.forEach(function(e){var o=Qn.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=cr(t).iterate({range:a},function(t,i,o){var a=t[0],s=t[2],u=gn(t[1]);a===n.userId&&e.path.isEqual(u)?r=r.add(s):o.done()});i.push(s)}),Cn.waitFor(i).next(function(){return n.lookupMutationBatches(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;y(!e.isDocumentQuery(),"Document queries shouldn't go down this path");var r=e.path,i=r.length+1,o=Qn.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Yt(H);return cr(t).iterate({range:a},function(t,e,o){var a=t[0],u=t[2],l=gn(t[1]);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(u)):o.done()}).next(function(){return n.lookupMutationBatches(t,s)})},t.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(lr(t).get(e).next(function(t){if(null===t)throw g("Dangling document-mutation reference found, which points to "+e);y(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))}))}),Cn.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return sr(t.simpleDbTransaction,this.userId,e).next(function(r){return n.removeCachedMutationKeys(e.batchId),Cn.forEach(r,function(e){return n.referenceDelegate.removeMutationReference(t,e)})})},t.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Cn.resolve();var r=IDBKeyRange.lowerBound(Qn.prefixForUser(e.userId)),i=[];return cr(t).iterate({range:r},function(t,n,r){if(t[0]===e.userId){var o=gn(t[1]);i.push(o)}else r.done()}).next(function(){y(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.canonicalString()}))})})},t.prototype.containsKey=function(t,e){return ar(t,this.userId,e)},t.prototype.getMutationQueueMetadata=function(t){var e=this;return hr(t).get(this.userId).next(function(t){return t||new Kn(e.userId,yn,"")})},t}();function ar(t,e,n){var r=Qn.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return cr(t).iterate({range:o,keysOnly:!0},function(t,n,r){t[0]===e&&t[1]===i&&(a=!0),r.done()}).next(function(){return a})}function sr(t,e,n){var r=t.store(Xn.store),i=t.store(Qn.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(t,e,n){return s++,n.delete()});o.push(u.next(function(){y(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var l=[],c=0,h=n.mutations;c<h.length;c++){var p=h[c],f=Qn.key(e,p.key.path,n.batchId);o.push(i.delete(f)),l.push(p.key)}return Cn.waitFor(o).next(function(){return l})}function ur(t){return t instanceof Uint8Array?(y("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function lr(t){return Er.getStore(t,Xn.store)}function cr(t){return Er.getStore(t,Qn.store)}function hr(t){return Er.getStore(t,Kn.store)}var pr=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=ot.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new ut(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=ot.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version),new lt(e,n)):g("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t){if(t instanceof st){var e=this.remoteSerializer.toDocument(t);return new Zn(null,null,e,i=t.hasCommittedMutations)}if(t instanceof ut){var n=t.key.path.toArray(),r=this.toDbTimestamp(t.version),i=t.hasCommittedMutations;return new Zn(null,new function(t,e){this.path=t,this.readTime=e}(n,r),null,i)}return t instanceof lt?(n=t.key.path.toArray(),r=this.toDbTimestamp(t.version),new Zn(new function(t,e){this.path=t,this.version=e}(n,r),null,null,!0)):g("Unexpected MaybeDocumment")},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new function(t,e){this.seconds=t,this.nanoseconds=e}(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new J(t.seconds,t.nanoseconds);return Xt.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new Xn(t,e.batchId,e.localWriteTime.toMillis(),r)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),r=J.fromMillis(t.localWriteTimeMs);return new vn(t.batchId,r,n)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach(function(t){e.push(fn(t.path))}),e},t.prototype.fromDbResourcePaths=function(t){for(var e=xe(),n=0,r=t;n<r.length;n++)e=e.add(new ot(gn(r[n])));return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime);return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new Zt(e,t.targetId,Qt.Listen,t.lastListenSequenceNumber,n,t.resumeToken)},t.prototype.toDbTarget=function(t){y(Qt.Listen===t.purpose,"Only queries with purpose "+Qt.Listen+" may be stored, got "+t.purpose);var e,n,r=this.toDbTimestamp(t.snapshotVersion);return e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query),t.resumeToken instanceof Uint8Array?(y("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),n=t.resumeToken.toString()):n=t.resumeToken,new Jn(t.targetId,t.query.canonicalId(),r,n,t.sequenceNumber,e)},t}();function fr(t,e){var n=t[1],r=e[1],i=H(t[0],e[0]);return 0===i?H(n,r):i}var dr=function(){function t(t){this.maxElements=t,this.buffer=new Yt(fr),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();fr(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),mr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gr=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t.COLLECTION_DISABLED=-1,t.MINIMUM_CACHE_SIZE_BYTES=1048576,t.DEFAULT=new t(t.DEFAULT_CACHE_SIZE_BYTES=41943040,t.DEFAULT_COLLECTION_PERCENTILE=10,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),t.DISABLED=new t(t.COLLECTION_DISABLED,0,0),t}(),yr=function(){function t(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.gcTask=null}return t.prototype.start=function(){y(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==eo&&this.scheduleGC()},t.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},t.prototype.scheduleGC=function(){var t=this;y(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;f("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(rn.LruGarbageCollection,e,function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then(function(){return t.scheduleGC()})})},t}(),vr=function(){function t(t,e){this.delegate=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Cn.resolve(on.INVALID);var r=new dr(e);return this.delegate.forEachTarget(t,function(t){return r.addElement(t.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,function(t){return r.addElement(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return this.params.cacheSizeCollectionThreshold===gr.COLLECTION_DISABLED?(f("LruGarbageCollector","Garbage collection skipped; disabled"),Cn.resolve(mr)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),mr):n.runGarbageCollection(t,e)})},t.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},t.prototype.runGarbageCollection=function(t,e){var n,r,i,o,a,s,u,l,p=this;return o=Date.now(),this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>p.params.maximumSequenceNumbersToCollect?(f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+p.params.maximumSequenceNumbersToCollect+" from "+e),r=p.params.maximumSequenceNumbersToCollect):r=e,a=Date.now(),p.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),p.removeTargets(t,n,e)}).next(function(e){return i=e,u=Date.now(),p.removeOrphanedDocuments(t,n)}).next(function(t){return l=Date.now(),h()<=c.DEBUG&&f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-o)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(l-u)+"ms\nTotal Duration: "+(l-o)+"ms"),Cn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),br="IndexedDbPersistence",_r="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",wr="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `experimentalTabSynchronization:true` in all tabs.",xr="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",Cr=function(t){function e(e,n){var r=t.call(this)||this;return r.simpleDbTransaction=e,r.currentSequenceNumber=n,r}return a.__extends(e,t),e}(function(){}),Er=function(){function t(e,n,r,i,o,a,s){if(this.persistenceKey=e,this.clientId=n,this.queue=i,this.multiClientParams=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},!t.isAvailable())throw new w(_.UNIMPLEMENTED,xr);if(this.referenceDelegate=new Pr(this,a),this.dbName=e+t.MAIN_DATABASE,this.serializer=new pr(o),this.document=r.document,this.allowTabSynchronization=void 0!==s,this.queryCache=new In(this.referenceDelegate,this.serializer),this.remoteDocumentCache=new Fn(this.serializer,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new w(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}return t.getStore=function(t,e){if(t instanceof Cr)return En.getStore(t.simpleDbTransaction,e);throw g("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.createIndexedDbPersistence=function(e,n,r,i,o,s){return a.__awaiter(this,void 0,void 0,function(){var u;return a.__generator(this,function(a){switch(a.label){case 0:return[4,(u=new t(e,n,r,i,o,s)).start()];case 1:return a.sent(),[2,u]}})})},t.createMultiClientIndexedDbPersistence=function(e,n,r,i,o,s,u){return a.__awaiter(this,void 0,void 0,function(){var l;return a.__generator(this,function(a){switch(a.label){case 0:return[4,(l=new t(e,n,r,i,o,s,u)).start()];case 1:return a.sent(),[2,l]}})})},t.prototype.start=function(){var t=this;return y(!this.started,"IndexedDbPersistence double-started!"),y(null!==this.window,"Expected 'window' to be defined"),En.openOrCreate(this.dbName,Gn,new Hn(this.serializer)).then(function(e){t.simpleDb=e}).then(function(){return t.startRemoteDocumentCache()}).then(function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})}).then(function(){return t.simpleDb.runTransaction("readonly",[tr.store],function(e){return kn(e).next(function(e){t.listenSequence=new on(e,t.multiClientParams?t.multiClientParams.sequenceNumberSyncer:void 0)})})}).then(function(){t._started=!0}).catch(function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)})},t.prototype.startRemoteDocumentCache=function(){var t=this;return this.simpleDb.runTransaction("readonly",ir,function(e){return t.remoteDocumentCache.start(e)})},t.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite",ir,function(e){return Ar(e).put(new rr(t.clientId,Date.now(),t.networkEnabled,t.inForeground,t.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next(function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget(function(){return t.primaryStateListener(!1)}))})}).next(function(){return t.canActAsPrimary(e)}).next(function(n){var r=t.isPrimary;return t.isPrimary=n,r!==t.isPrimary&&t.queue.enqueueAndForget(function(){return t.primaryStateListener(t.isPrimary)}),r&&!t.isPrimary?t.releasePrimaryLeaseIfHeld(e):t.isPrimary?t.acquireOrExtendPrimaryLease(e):void 0})})},t.prototype.verifyPrimaryLease=function(t){var e=this;return Tr(t).get(Wn.key).next(function(t){return Cn.resolve(e.isLocalClient(t))})},t.prototype.removeClientMetadata=function(t){return Ar(t).delete(this.clientId)},t.prototype.maybeGarbageCollectMultiClientState=function(){return a.__awaiter(this,void 0,void 0,function(){var e,n,r=this;return a.__generator(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(i){var o=t.getStore(i,rr.store);return o.loadAll().next(function(t){e=r.filterActiveClients(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)})}).next(function(){return Cn.forEach(n,function(t){return o.delete(t.clientId)})}).next(function(){if((e=e.filter(function(t){return t.clientId!==r.clientId})).length>0){var t=e.map(function(t){return t.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,t);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(i,n)}})})]);case 1:i.sent(),n.forEach(function(t){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(t.clientId))}),i.label=2;case 2:return[2]}})})},t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(rn.ClientMetadataRefresh,4e3,function(){return t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.maybeGarbageCollectMultiClientState()}).then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},t.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.canActAsPrimary=function(t){var e=this;return Tr(t).get(Wn.key).next(function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,5e3)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new w(_.FAILED_PRECONDITION,wr);return!1}}return!(!e.networkEnabled||!e.inForeground)||Ar(t).loadAll().next(function(t){return void 0===e.filterActiveClients(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&f(br,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(t){return a.__awaiter(this,void 0,void 0,function(){var e=this;return a.__generator(this,function(n){switch(n.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[Wn.store,rr.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return n.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),t?[4,En.delete(this.dbName)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.filterActiveClients=function(t,e){var n=this;return t.filter(function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)})},t.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly",[rr.store],function(e){return Ar(e).loadAll().next(function(e){return t.filterActiveClients(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getMutationQueue=function(t){return y(this.started,"Cannot initialize MutationQueue before persistence is started."),or.forUser(t,this.serializer,this.referenceDelegate)},t.prototype.getQueryCache=function(){return y(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},t.prototype.getRemoteDocumentCache=function(){return y(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;return f(br,"Starting transaction:",t),this.simpleDb.runTransaction("readonly"===e?"readonly":"readwrite",ir,function(i){return"readwrite-primary"===e?r.verifyPrimaryLease(i).next(function(e){if(!e)throw d("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new w(_.FAILED_PRECONDITION,_r);return n(new Cr(i,r.listenSequence.next()))}).next(function(t){return r.acquireOrExtendPrimaryLease(i).next(function(){return t})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new Cr(i,r.listenSequence.next()))})})},t.prototype.verifyAllowTabSynchronization=function(t){var e=this;return Tr(t).get(Wn.key).next(function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new w(_.FAILED_PRECONDITION,wr)})},t.prototype.acquireOrExtendPrimaryLease=function(t){var e=new Wn(this.clientId,this.allowTabSynchronization,Date.now());return Tr(t).put(Wn.key,e)},t.isAvailable=function(){return En.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=Tr(t);return n.get(Wn.key).next(function(t){return e.isLocalClient(t)?(f(br,"Releasing primary lease."),n.delete(Wn.key)):Cn.resolve()})},t.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(d("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},t.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(y(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(y("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return f(br,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return d(br,"Failed to get zombied client id.",t),!1}},t.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){d("Failed to set zombie client id.",t)}},t.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},t.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.MAIN_DATABASE="main",t}();function Sr(t){return t.code===_.FAILED_PRECONDITION&&t.message===_r}function Tr(t){return t.store(Wn.store)}function Ar(t){return t.store(rr.store)}var Pr=function(){function t(t,e){this.db=t,this.garbageCollector=new vr(this,e)}return t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocmentCount(t);return this.db.getQueryCache().getQueryCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getQueryCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,function(t,n){return e(n)})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return Ir(t,e)},t.prototype.removeReference=function(t,e){return Ir(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getQueryCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return Ir(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?Cn.resolve(!0):function(t,e){var n=!1;return hr(t).iterateSerial(function(r){return ar(t,r,e).next(function(t){return t&&(n=!0),Cn.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=0,o=[];return this.forEachOrphanedDocument(t,function(a,s){if(s<=e){var u=n.isPinned(t,a).next(function(e){if(!e)return r++,n.removeOrphanedDocument(t,a).next(function(t){i+=t})});o.push(u)}}).next(function(){return Cn.waitFor(o)}).next(function(){return n.db.getRemoteDocumentCache().updateSize(t,-i)}).next(function(){return r})},t.prototype.removeOrphanedDocument=function(t,e){var n,r=0,i=this.db.getRemoteDocumentCache();return Cn.waitFor([Mn(t).delete((n=e,[0,fn(n.path)])),i.removeEntry(t,e).next(function(t){r+=t})]).next(function(){return r})},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Ir(t,e)},t.prototype.forEachOrphanedDocument=function(t,e){var n,r=Mn(t),i=on.INVALID;return r.iterate({index:$n.documentTargetsIndex},function(t,r){var o=r.path,a=r.sequenceNumber;0===t[0]?(i!==on.INVALID&&e(new ot(gn(n)),i),i=a,n=o):i=on.INVALID}).next(function(){i!==on.INVALID&&e(new ot(gn(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Ir(t,e){return Mn(t).put(function(t,e){return new $n(0,fn(t.path),e)}(e,t.currentSequenceNumber))}var Or=function(){function t(t,e){this.remoteDocumentCache=t,this.mutationQueue=e}return t.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.getDocumentInternal(t,e,r)})},t.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.getDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=[],o=ge();return e.forEach(function(e){i.push(n.getDocumentInternal(t,e,r).next(function(t){t||(t=new ut(e,Xt.forDeletedDoc())),o=o.insert(e,t)}))}),Cn.waitFor(i).next(function(){return o})})},t.prototype.getDocumentsMatchingQuery=function(t,e){return ot.isDocumentKey(e.path)?this.getDocumentsMatchingDocumentQuery(t,e.path):this.getDocumentsMatchingCollectionQuery(t,e)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new ot(e)).next(function(t){var e=ve();return t instanceof st&&(e=e.insert(t.key,t)),e})},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e){var n,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e).next(function(i){return n=i,r.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)}).next(function(t){for(var r=0,i=t;r<i.length;r++)for(var o=i[r],a=0,s=o.mutations;a<s.length;a++){var u=s[a],l=u.key;if(e.path.isImmediateParentOf(l.path)){var c=n.get(l),h=u.applyToLocalView(c,c,o.localWriteTime);n=h instanceof st?n.insert(l,h):n.remove(l)}}}).next(function(){return n.forEach(function(t,r){e.matches(r)||(n=n.remove(t))}),n})},t}(),Dr=function(){function t(){this.refsByKey=new Yt(kr.compareByKey),this.refsByTarget=new Yt(kr.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new kr(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.removeRef(new kr(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.removeReferencesForId=function(t){var e=this,n=ot.EMPTY,r=new kr(n,t),i=new kr(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t),o.push(t.key)}),o},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=ot.EMPTY,n=new kr(e,t),r=new kr(e,t+1),i=xe();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new kr(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),kr=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return ot.comparator(t.key,e.key)||H(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return H(t.targetOrBatchId,e.targetOrBatchId)||ot.comparator(t.key,e.key)},t}(),Mr=function(){function t(t,e){this.persistence=t,this.localViewReferences=new Dr,this.queryDataByTarget={},y(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new Or(this.remoteDocuments,this.mutationQueue)}return t.prototype.handleUserChange=function(t){var e=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return e.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,e.mutationQueue=e.persistence.getMutationQueue(t),e.localDocuments=new Or(e.remoteDocuments,e.mutationQueue),e.mutationQueue.getAllMutationBatches(n)}).next(function(t){for(var i=[],o=[],a=xe(),s=0,u=r;s<u.length;s++){i.push((f=u[s]).batchId);for(var l=0,c=f.mutations;l<c.length;l++)a=a.add(c[l].key)}for(var h=0,p=t;h<p.length;h++){var f;o.push((f=p[h]).batchId);for(var d=0,m=f.mutations;d<m.length;d++)a=a.add(m[d].key)}return e.localDocuments.getDocuments(n,a).next(function(t){return{affectedDocuments:t,removedBatchIds:i,addedBatchIds:o}})})})},t.prototype.localWrite=function(t){var e=this;return this.persistence.runTransaction("Locally write mutations","readwrite",function(n){var r,i=J.now();return e.mutationQueue.addMutationBatch(n,i,t).next(function(t){var i=(r=t).keys();return e.localDocuments.getDocuments(n,i)}).next(function(t){return{batchId:r.batchId,changes:t}})})},t.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return e.mutationQueue.lookupMutationKeys(n,t).next(function(t){return t?e.localDocuments.getDocuments(n,t):Cn.resolve(null)})})},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=t.batch.keys(),i=e.remoteDocuments.newChangeBuffer();return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next(function(){return e.applyWriteToRemoteDocuments(n,t,i)}).next(function(){return i.apply(n)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return e.mutationQueue.lookupMutationBatch(n,t).next(function(t){return y(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.mutationQueue.removeMutationBatch(n,t)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly",function(e){return t.mutationQueue.getLastStreamToken(e)})},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return e.mutationQueue.setLastStreamToken(n,t)})},t.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.queryCache.getLastRemoteSnapshotVersion(e)})},t.prototype.applyRemoteEvent=function(e){var n=this,r=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(i){var o=[],a=xe();S(e.targetChanges,function(r,s){var u=n.queryDataByTarget[r];if(u){s.addedDocuments.forEach(function(t){a=a.add(t)}),s.modifiedDocuments.forEach(function(t){a=a.add(t)}),o.push(n.queryCache.removeMatchingKeys(i,s.removedDocuments,r).next(function(){return n.queryCache.addMatchingKeys(i,s.addedDocuments,r)}));var l=s.resumeToken;if(l.length>0){var c=u;u=u.copy({resumeToken:l,snapshotVersion:e.snapshotVersion}),n.queryDataByTarget[r]=u,t.shouldPersistQueryData(c,u,s)&&o.push(n.queryCache.updateQueryData(i,u))}}});var s=xe();e.documentUpdates.forEach(function(t,u){s=s.add(t),o.push(r.getEntry(i,t).next(function(e){null==e||u.version.isEqual(Xt.MIN)||a.has(u.key)&&!e.hasPendingWrites||u.version.compareTo(e.version)>=0?r.addEntry(u):f("LocalStore","Ignoring outdated watch update for ",t,". Current version:",e.version," Watch version:",u.version)})),e.resolvedLimboDocuments.has(t)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,t))});var u=e.snapshotVersion;if(!u.isEqual(Xt.MIN)){var l=n.queryCache.getLastRemoteSnapshotVersion(i).next(function(t){return y(u.compareTo(t)>=0,"Watch stream reverted to previous snapshot?? "+u+" < "+t),n.queryCache.setTargetsMetadata(i,i.currentSequenceNumber,u)});o.push(l)}return Cn.waitFor(o).next(function(){return r.apply(i)}).next(function(){return n.localDocuments.getDocuments(i,s)})})},t.shouldPersistQueryData=function(t,e,n){return 0!==e.resumeToken.length&&(0===t.resumeToken.length||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)},t.prototype.notifyLocalViewChanges=function(t){var e=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return Cn.forEach(t,function(t){return e.localViewReferences.addReferences(t.addedKeys,t.targetId),e.localViewReferences.removeReferences(t.removedKeys,t.targetId),Cn.forEach(t.removedKeys,function(t){return e.persistence.referenceDelegate.removeReference(n,t)})})})},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===t&&(t=yn),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)})},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",function(n){return e.localDocuments.getDocument(n,t)})},t.prototype.allocateQuery=function(t){var e=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return e.queryCache.getQueryData(n,t).next(function(i){return i?(r=i,Cn.resolve()):e.queryCache.allocateTargetId(n).next(function(i){return r=new Zt(t,i,Qt.Listen,n.currentSequenceNumber),e.queryCache.addQueryData(n,r)})}).next(function(){return y(!e.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+t),e.queryDataByTarget[r.targetId]=r,r})})},t.prototype.releaseQuery=function(t,e){var n=this;return this.persistence.runTransaction("Release query",e?"readwrite":"readwrite-primary",function(r){return n.queryCache.getQueryData(r,t).next(function(i){y(null!=i,"Tried to release nonexistent query: "+t);var o=i.targetId,a=n.queryDataByTarget[o],s=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],e?Cn.resolve():Cn.forEach(s,function(t){return n.persistence.referenceDelegate.removeReference(r,t)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,a)})})})},t.prototype.executeQuery=function(t){var e=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return e.localDocuments.getDocumentsMatchingQuery(n,t)})},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return e.queryCache.getMatchingKeysForTargetId(n,t)})},t.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},t.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},t.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=this,i=e.batch,o=i.keys(),a=Cn.resolve();return o.forEach(function(r){a=a.next(function(){return n.getEntry(t,r)}).next(function(t){var o=t,a=e.docVersions.get(r);y(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,e))?n.addEntry(o):y(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))})}),a.next(function(){return r.mutationQueue.removeMutationBatch(t,i)})},t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.queryDataByTarget)})},t.prototype.getQueryForTarget=function(t){var e=this;return this.queryDataByTarget[t]?Promise.resolve(this.queryDataByTarget[t].query):this.persistence.runTransaction("Get query data","readonly",function(n){return e.queryCache.getQueryDataForTarget(n,t).next(function(t){return t?t.query:null})})},t.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",function(e){return t.remoteDocuments.getNewDocumentChanges(e)})},t.RESUME_TOKEN_MAX_AGE_MICROS=3e8,t}(),Rr=function(){function t(t){this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.highestAcknowledgedBatchId=yn,this.lastStreamToken=b(),this.batchesByDocumentKey=new Yt(kr.compareByKey)}return t.prototype.checkEmpty=function(t){return Cn.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId;y(r>this.highestAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order");var i=this.indexOfExistingBatchId(r,"acknowledged");y(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return y(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.highestAcknowledgedBatchId=r,this.lastStreamToken=n,Cn.resolve()},t.prototype.getLastStreamToken=function(t){return Cn.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,Cn.resolve()},t.prototype.addMutationBatch=function(t,e,n){y(0!==n.length,"Mutation batches should not be empty");var r=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&y(this.mutationQueue[this.mutationQueue.length-1].batchId<r,"Mutation batchIDs must be monotonically increasing order");var i=new vn(r,e,n);this.mutationQueue.push(i);for(var o=0,a=n;o<a.length;o++)this.batchesByDocumentKey=this.batchesByDocumentKey.add(new kr(a[o].key,r));return Cn.resolve(i)},t.prototype.lookupMutationBatch=function(t,e){return Cn.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return y(null!=n,"Failed to find local mutation batch."),Cn.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=Math.max(e,this.highestAcknowledgedBatchId)+1,r=this.indexOfBatchId(n),i=r<0?0:r;return Cn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},t.prototype.getAllMutationBatches=function(t){return Cn.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new kr(e,0),i=new kr(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(t){y(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);y(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),Cn.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Yt(H);return e.forEach(function(t){var e=new kr(t,0),i=new kr(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,i],function(e){y(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.targetOrBatchId)})}),Cn.resolve(this.findMutationBatches(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ot.isDocumentKey(i)||(i=i.child(""));var o=new kr(new ot(i),0),a=new Yt(H);return this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.targetOrBatchId)),!0)},o),Cn.resolve(this.findMutationBatches(a))},t.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.findMutationBatch(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;y(0===this.indexOfExistingBatchId(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Cn.forEach(e.mutations,function(i){var o=new kr(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(t,i.key)}).next(function(){n.batchesByDocumentKey=r})},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new kr(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Cn.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&y(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Cn.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return y(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return y(n.batchId===t,"If found batch must match"),n},t}(),Nr=function(){function t(t){this.persistence=t,this.queries=new Rn(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=Xt.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Dr,this.targetCount=0,this.targetIdGenerator=xn.forQueryCache()}return t.prototype.getTargetCount=function(t){return Cn.resolve(this.targetCount)},t.prototype.forEachTarget=function(t,e){return this.queries.forEach(function(t,n){return e(n)}),Cn.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Cn.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Cn.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,Cn.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),Cn.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addQueryData=function(t,e){return y(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,Cn.resolve()},t.prototype.updateQueryData=function(t,e){return y(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),Cn.resolve()},t.prototype.removeQueryData=function(t,e){return y(this.targetCount>0,"Removing a target from an empty cache"),y(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,Cn.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.queries.forEach(function(a,s){s.sequenceNumber<=e&&!n[s.targetId]&&(r.queries.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)}),Cn.waitFor(o).next(function(){return i})},t.prototype.getQueryCount=function(t){return Cn.resolve(this.targetCount)},t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return Cn.resolve(n)},t.prototype.getQueryDataForTarget=function(t,e){return g("Not yet implemented.")},t.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.addReference(t,e))}),Cn.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.removeReference(t,e))}),Cn.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),Cn.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return Cn.resolve(n)},t.prototype.containsKey=function(t,e){return Cn.resolve(this.references.containsKey(e))},t}(),Lr=function(){function t(t){this.sizer=t,this.docs=new ct(ot.comparator),this.newDocumentChanges=xe(),this.size=0}return t.prototype.addEntries=function(t,e,n){for(var r=0,i=e;r<i.length;r++){var o=i[r],a=o.maybeDocument.key;this.docs=this.docs.insert(a,o),this.newDocumentChanges=this.newDocumentChanges.add(a)}return this.size+=n,Cn.resolve()},t.prototype.removeEntry=function(t,e){var n=this.docs.get(e);return n?(this.docs=this.docs.remove(e),this.size-=n.size,Cn.resolve(n.size)):Cn.resolve(0)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Cn.resolve(n?n.maybeDocument:null)},t.prototype.getSizedEntry=function(t,e){return Cn.resolve(this.docs.get(e))},t.prototype.getDocumentsMatchingQuery=function(t,e){for(var n=ve(),r=new ot(e.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.value.maybeDocument;if(!e.path.isPrefixOf(o.key.path))break;a instanceof st&&e.matches(a)&&(n=n.insert(a.key,a))}return Cn.resolve(n)},t.prototype.forEachDocumentKey=function(t,e){return Cn.forEach(this.docs,function(t){return e(t)})},t.prototype.getNewDocumentChanges=function(t){var e=this,n=ge();return this.newDocumentChanges.forEach(function(t){var r=e.docs.get(t),i=r?r.maybeDocument:new ut(t,Xt.forDeletedDoc());n=n.insert(t,i)}),this.newDocumentChanges=xe(),Cn.resolve(n)},t.prototype.newChangeBuffer=function(){return new Fr(this.sizer,this)},t.prototype.getSize=function(t){return Cn.resolve(this.size)},t}(),Fr=function(t){function e(e,n){var r=t.call(this)||this;return r.sizer=e,r.documentCache=n,r}return a.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=0,r=[];return this.assertChanges().forEach(function(t,i){var o=e.documentSizes.get(t);y(void 0!==o,"Attempting to change document "+t.toString()+" without having read it first");var a=e.sizer(i);n+=a-o,r.push({maybeDocument:i,size:a})}),this.documentCache.addEntries(t,r,n)},e.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},e}(Nn),Br=function(){function t(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new on(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.queryCache=new Nr(this),this.remoteDocumentCache=new Lr(function(t){return n.referenceDelegate.documentSize(t)})}return t.createLruPersistence=function(e,n,r){return new t(e,function(t){return new Vr(t,new pr(n),r)})},t.createEagerPersistence=function(e){return new t(e,function(t){return new zr(t)})},t.prototype.shutdown=function(t){return this._started=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getActiveClients=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return[2,[this.clientId]]})})},t.prototype.setPrimaryStateListener=function(t){return t(!0)},t.prototype.setNetworkEnabled=function(t){},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new Rr(this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},t.prototype.getQueryCache=function(){return this.queryCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;f("MemoryPersistence","Starting transaction:",t);var i=new jr(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(t){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return t})}).toPromise()},t.prototype.mutationQueuesContainKey=function(t,e){return Cn.or((n=this.mutationQueues,r=[],T(n,function(t,e){return r.push(e)}),r).map(function(n){return function(){return n.containsKey(t,e)}}));var n,r},t}(),jr=function(t){this.currentSequenceNumber=t},zr=function(){function t(t){this.persistence=t}return t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),Cn.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),Cn.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),Cn.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.orphanedDocuments.add(t)})}).next(function(){return r.removeQueryData(t,e)})},t.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache();return Cn.forEach(this.orphanedDocuments,function(r){return e.isReferenced(t,r).next(function(e){return e?Cn.resolve():n.removeEntry(t,r).next(function(){})})})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next(function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)})},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return Cn.or([function(){return n.persistence.getQueryCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return Cn.resolve(n.inMemoryPins.containsKey(e))}])},t}(),Vr=function(){function t(t,e,n){this.persistence=t,this.serializer=e,this.orphanedSequenceNumbers=new Rn(function(t){return fn(t.path)}),this.garbageCollector=new vr(this,n)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return Cn.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getQueryCache().forEachTarget(t,e)},t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocumentCount(t);return this.persistence.getQueryCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return Cn.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(t,r,i).next(function(t){return t?Cn.resolve():e(i)})})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getQueryCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=this.persistence.getRemoteDocumentCache();return i.forEachDocumentKey(t,function(o){return n.isPinned(t,o,e).next(function(e){return e?Cn.resolve():(r++,i.removeEntry(t,o).next())})}).next(function(){return r})},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Cn.resolve()},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Cn.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Cn.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Cn.resolve()},t.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw g("Unknown remote document type");e=n.noDocument}return JSON.stringify(e).length},t.prototype.isPinned=function(t,e,n){var r=this;return Cn.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return Cn.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getQueryCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return Cn.resolve(void 0!==t&&t>n)}])},t.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},t}(),Ur=function(){function t(t,e,n,r,i){this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&f("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return e.lastAttemptTime=Date.now(),t()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}(),qr=function(t){return t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff",t}({}),Gr=1e3,Hr=6e4,Wr=1.5,Kr=function(){function t(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=qr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new Ur(t,e,Gr,Wr,Hr)}return t.prototype.isStarted=function(){return this.state===qr.Starting||this.state===qr.Open||this.state===qr.Backoff},t.prototype.isOpen=function(){return this.state===qr.Open},t.prototype.start=function(){this.state!==qr.Error?(y(this.state===qr.Initial,"Already started"),this.auth()):this.performBackoff()},t.prototype.stop=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(qr.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.inhibitBackoff=function(){y(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=qr.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return t.handleIdleCloseTimer()}))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return this.isOpen()?[2,this.close(qr.Initial)]:[2]})})},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(t,e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(n){switch(n.label){case 0:return y(this.isStarted(),"Only started streams should be closed."),y(t===qr.Error||Nt(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==qr.Error?this.backoff.reset():e&&e.code===_.RESOURCE_EXHAUSTED?(d(e.toString()),d("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===_.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}})})},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;y(this.state===qr.Initial,"Must be in initial state to auth"),this.state=qr.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(e){t.closeCount===n&&t.startStream(e)},function(n){e(function(){var e=new w(_.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)})})},t.prototype.startStream=function(t){var e=this;y(this.state===qr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen(function(){n(function(){return y(e.state===qr.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=qr.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.performBackoff=function(){var t=this;y(this.state===qr.Error,"Should only perform backoff when in Error state"),this.state=qr.Backoff,this.backoff.backoffAndRun(function(){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(t){return y(this.state===qr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=qr.Initial,this.start(),y(this.isStarted(),"PersistentStream should have started"),[2]})})})},t.prototype.handleStreamClose=function(t){return y(this.isStarted(),"Can't handle server close on non-started stream"),f("PersistentStream","close with error: "+t),this.stream=null,this.close(qr.Error,t)},t.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget(function(){return e.closeCount===t?n():(f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Xr=function(t){function e(e,n,r,i,o){var a=t.call(this,e,rn.ListenStreamConnectionBackoff,rn.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return a.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(Kr),Qr=function(t){function e(e,n,r,i,o){var a=t.call(this,e,rn.WriteStreamConnectionBackoff,rn.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a}return a.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,t.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(y(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return y(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){y(this.isOpen(),"Writing handshake requires an opened stream"),y(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;y(this.isOpen(),"Writing mutations requires an opened stream"),y(this.handshakeComplete_,"Handshake must be complete before writing mutations"),y(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},e}(Kr),Zr=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(t){return new Qr(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new Xr(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)})},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map(function(t){return e.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=ge();n.forEach(function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)});var i=[];return t.forEach(function(t){var e=r.get(t);y(!!e,"Missing entity in write response for "+t),i.push(e)}),i})},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(t,e,r)}).catch(function(t){throw t.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(t,e,r)}).catch(function(t){throw t.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t}(),Yr=function(){function t(t){this.datastore=t,this.readVersions=_e(),this.mutations=[],this.committed=!1}return t.prototype.recordVersion=function(t){var e;if(t instanceof st)e=t.version;else{if(!(t instanceof ut))throw g("Document in a transaction was a "+t.constructor.name);e=Xt.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new w(_.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.lookup=function(t){var e=this;return this.committed?Promise.reject("Transaction has already completed."):this.mutations.length>0?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(t).then(function(t){return t.forEach(function(t){t instanceof ut||t instanceof st?e.recordVersion(t):g("Document in a transaction was a "+t.constructor.name)}),t})},t.prototype.write=function(t){if(this.committed)throw new w(_.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(t)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return e?ee.updateTime(e):ee.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(e&&e.isEqual(Xt.forDeletedDoc()))throw new w(_.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return e?ee.updateTime(e):ee.exists(!0)},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t)))},t.prototype.update=function(t,e){this.write(e.toMutations(t,this.preconditionForUpdate(t)))},t.prototype.delete=function(t){this.write([new ae(t,this.precondition(t))]),this.readVersions=this.readVersions.insert(t,Xt.forDeletedDoc())},t.prototype.commit=function(){var t=this,e=this.readVersions;return this.mutations.forEach(function(t){e=e.remove(t.key)}),e.isEmpty()?this.datastore.commit(this.mutations).then(function(){t.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},t}(),Jr=function(t){return t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline",t}({}),$r=function(t){return t[t.RemoteStore=0]="RemoteStore",t[t.SharedClientState=1]="SharedClientState",t}({}),ti=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=Jr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Jr.Unknown),y(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(rn.OnlineStateTimeout,1e4,function(){return t.onlineStateTimer=null,y(t.state===Jr.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(Jr.Offline),Promise.resolve()}))},t.prototype.handleWatchStreamFailure=function(t){this.state===Jr.Online?(this.setAndBroadcast(Jr.Unknown),y(0===this.watchStreamFailures,"watchStreamFailures must be 0"),y(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(Jr.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===Jr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(d(e),this.shouldWarnClientIsOffline=!1):f("OnlineStateTracker",e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}(),ei=function(){function t(t,e,n,r){this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.onlineStateTracker=new ti(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){var t;return a.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Jr.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.disableNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(Jr.Offline),[2]}})})},t.prototype.disableNetworkInternal=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),this.writePipeline.length>0&&(f("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},t.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return f("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(Jr.Unknown),[2]}})})},t.prototype.listen=function(t){y(!C(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){y(C(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),A(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Jr.Unknown))},t.prototype.getQueryDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){y(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Fe(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!A(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return a.__awaiter(this,void 0,void 0,function(){var t=this;return a.__generator(this,function(e){return S(this.listenTargets,function(e,n){t.sendWatchRequest(n)}),[2]})})},t.prototype.onWatchStreamClose=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return void 0===t&&y(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(Jr.Unknown),[2]})})},t.prototype.onWatchStreamChange=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n;return a.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(Jr.Online),t instanceof Ne&&t.state===Re.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof ke?this.watchChangeAggregator.handleDocumentChange(t):t instanceof Me?this.watchChangeAggregator.handleExistenceFilter(t):(y(t instanceof Ne,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(Xt.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),e.compareTo(n)>=0?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.raiseWatchSnapshot=function(t){var e=this;y(!t.isEqual(Xt.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return S(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=e.listenTargets[n];i&&(e.listenTargets[n]=i.copy({resumeToken:r.resumeToken,snapshotVersion:t}))}}),n.targetMismatches.forEach(function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.copy({resumeToken:b()}),e.sendUnwatchRequest(t);var r=new Zt(n.query,t,Qt.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;y(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach(function(t){r=r.then(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){return C(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]})})})}),r},t.prototype.fillWritePipeline=function(){return a.__awaiter(this,void 0,void 0,function(){var t;return a.__generator(this,function(e){switch(e.label){case 0:return this.canAddToWritePipeline()?[4,this.localStore.nextMutationBatch(this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:yn)]:[3,4];case 1:return null!==(t=e.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:e.sent(),e.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){y(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},t.prototype.startWriteStream=function(){y(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return this.writeStream.writeHandshake(),[2]})})},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,n=t.writePipeline;e<n.length;e++)t.writeStream.writeMutations(n[e].mutations)}).catch(function(e){return t.ignoreIfPrimaryLeaseLoss(e)})},t.prototype.ignoreIfPrimaryLeaseLoss=function(t){if(!Sr(t))throw t;f("RemoteStore","Unexpectedly lost primary lease")},t.prototype.onMutationResult=function(t,e){var n=this;y(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=bn.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},t.prototype.onWriteStreamClose=function(t){return a.__awaiter(this,void 0,void 0,function(){var e=this;return a.__generator(this,function(n){return void 0===t&&y(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&this.writePipeline.length>0?[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then(function(){e.shouldStartWriteStream()&&e.startWriteStream()})]:[2]})})},t.prototype.handleHandshakeError=function(t){return a.__awaiter(this,void 0,void 0,function(){var e=this;return a.__generator(this,function(n){return fe(t.code)||t.code===_.ABORTED?(f("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=b(),[2,this.localStore.setLastStreamToken(b()).catch(function(t){return e.ignoreIfPrimaryLeaseLoss(t)})]):[2]})})},t.prototype.handleWriteError=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n=this;return a.__generator(this,function(r){return fe(t.code)?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then(function(){return n.fillWritePipeline()})]):[2]})})},t.prototype.createTransaction=function(){return new Yr(this.datastore)},t.prototype.handleCredentialChange=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(f("RemoteStore","RemoteStore restarting streams for new credential"),this.networkEnabled=!1,[4,this.disableNetworkInternal()]):[3,3];case 1:return t.sent(),this.onlineStateTracker.set(Jr.Unknown),[4,this.enableNetwork()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.applyPrimaryState=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(Jr.Unknown),e.label=4;case 4:return[2]}})})},t}(),ni=function(){function t(t){this.syncEngine=t,this.queries=new Rn(function(t){return t.canonicalId()}),this.onlineState=Jr.Unknown,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new function(){this.listeners=[]},this.queries.set(e,r)),r.listeners.push(t),t.applyOnlineStateChange(this.onlineState),r.viewSnap&&t.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t,t}):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return a.__generator(this,function(o){return n=!1,(r=this.queries.get(e=t.query))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},t.prototype.onWatchChange=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=this.queries.get(r.query);if(i){for(var o=0,a=i.listeners;o<a.length;o++)a[o].onViewSnapshot(r);i.viewSnap=r}}},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.queries.delete(t)},t.prototype.onOnlineStateChange=function(t){this.onlineState=t,this.queries.forEach(function(e,n){for(var r=0,i=n.listeners;r<i.length;r++)i[r].applyOnlineStateChange(t)})},t}(),ri=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.onlineState=Jr.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(y(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==Te.Metadata&&e.push(i)}t=new Ie(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(t)&&this.queryObserver.next(t):this.shouldRaiseInitialEvent(t,this.onlineState)&&this.raiseInitialEvent(t),this.snap=t},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&this.raiseInitialEvent(this.snap)},t.prototype.shouldRaiseInitialEvent=function(t,e){return y(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache||(this.options.waitForSyncWhenOnline&&e!==Jr.Offline?(y(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===Jr.Offline)},t.prototype.shouldRaiseEvent=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){y(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=Ie.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),ii=function(){function t(t,e,n){this.targetId=t,this.addedKeys=e,this.removedKeys=n}return t.fromSnapshot=function(e,n){for(var r=xe(),i=xe(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case Te.Added:r=r.add(s.doc.key);break;case Te.Removed:i=i.add(s.doc.key)}}return new t(e,r,i)},t}(),oi=function(t){this.key=t},ai=function(t){this.key=t},si=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=xe(),this.mutatedKeys=xe(),this.documentSet=new Se(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new Pe,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),c=e instanceof st?e:null;c&&(y(t.isEqual(c.key),"Mismatching keys found in document changes: "+t+" != "+c.key),c=n.query.matches(c)?c:null);var h=!!l&&n.mutatedKeys.has(l.key),p=!!c&&(c.hasLocalMutations||n.mutatedKeys.has(c.key)&&c.hasCommittedMutations),f=!1;l&&c?l.data.isEqual(c.data)?h!==p&&(r.track({type:Te.Metadata,doc:c}),f=!0):n.shouldWaitForSyncedDocument(l,c)||(r.track({type:Te.Modified,doc:c}),f=!0,u&&n.query.docComparator(c,u)>0&&(s=!0)):!l&&c?(r.track({type:Te.Added,doc:c}),f=!0):l&&!c&&(r.track({type:Te.Removed,doc:l}),f=!0,u&&(s=!0)),f&&(c?(a=a.add(c),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))}),this.query.hasLimit())for(;a.size>this.query.limit;){var l=a.last();a=a.delete(l.key),o=o.delete(l.key),r.track({type:Te.Removed,doc:l})}return y(!s||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this;y(!t.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case Te.Added:return 1;case Te.Modified:case Te.Metadata:return 2;case Te.Removed:return 0;default:return g("Unknown ChangeType: "+t)}};return n(t)-n(e)}(t.type,e.type)||r.query.docComparator(t.doc,e.doc)}),this.applyTargetChange(n);var a=e?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Ae.Synced:Ae.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new Ie(this.query,t.documentSet,i,o,t.mutatedKeys,s===Ae.Local,u,!1),limboChanges:a}:{limboChanges:a}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===Jr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Pe,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.add(t)}),t.modifiedDocuments.forEach(function(t){return y(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")}),t.removedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)}),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=xe(),this.documentSet.forEach(function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))});var n=[];return e.forEach(function(e){t.limboDocuments.has(e)||n.push(new ai(e))}),this.limboDocuments.forEach(function(t){e.has(t)||n.push(new oi(t))}),n},t.prototype.synchronizeWithPersistedState=function(t,e){this._syncedDocuments=e,this.limboDocuments=xe();var n=this.computeDocChanges(t);return this.applyChanges(n,!0)},t.prototype.computeInitialSnapshot=function(){return Ie.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Ae.Local)},t}(),ui=function(){function t(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Rn(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new ct(ot.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Dr,this.mutationUserCallbacks={},this.limboTargetIdGenerator=xn.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Jr.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){y(null!==t,"SyncEngine listener cannot be null"),y(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o;return a.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(t))?(this.sharedClientState.addLocalQueryTarget(e=r.targetId),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(t)];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),e=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}})})},t.prototype.initializeViewAndComputeSnapshot=function(t,e){var n=this,r=t.query;return this.localStore.executeQuery(r).then(function(i){return n.localStore.remoteDocumentKeys(t.targetId).then(function(o){var a=new si(r,o),s=a.computeDocChanges(i),u=De.createSynthesizedTargetChangeForCurrentChange(t.targetId,e&&n.onlineState!==Jr.Offline),l=a.applyChanges(s,!0===n.isPrimary,u);y(0===l.limboChanges.length,"View returned limbo docs before target ack from the server."),y(!!l.snapshot,"applyChanges for new view should always return a snapshot");var c=new function(t,e,n){this.query=t,this.targetId=e,this.view=n}(r,t.targetId,a);return n.queryViewsByQuery.set(r,c),n.queryViewsByTarget[t.targetId]=c,l.snapshot})})},t.prototype.synchronizeViewAndComputeSnapshot=function(t){var e=this;return this.localStore.executeQuery(t.query).then(function(n){return e.localStore.remoteDocumentKeys(t.targetId).then(function(r){return a.__awaiter(e,void 0,void 0,function(){var e;return a.__generator(this,function(i){return e=t.view.synchronizeWithPersistedState(n,r),this.isPrimary&&this.updateTrackedLimbos(t.targetId,e.limboChanges),[2,e]})})})})},t.prototype.unlisten=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n=this;return a.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),y(!!(e=this.queryViewsByQuery.get(t)),"Trying to unlisten on query not found:"+t),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseQuery(t,!1).then(function(){n.sharedClientState.clearQueryState(e.targetId),n.remoteStore.unlisten(e.targetId),n.removeAndCleanupQuery(e)}).catch(function(t){return n.ignoreIfPrimaryLeaseLoss(t)})]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(e),[4,this.localStore.releaseQuery(t,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},t.prototype.write=function(t,e){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(t).then(function(t){return n.sharedClientState.addPendingMutation(t.batchId),n.addMutationCallback(t.batchId,e),n.emitNewSnapsAndNotifyLocalStore(t.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},t.prototype.wrapUpdateFunctionError=function(t){return t},t.prototype.runTransaction=function(t,e){var n=this;void 0===e&&(e=5),y(e>=0,"Got negative number of retries for transaction.");var r=this.remoteStore.createTransaction();return function(){try{var e=t(r);return!Nt(e)&&e.catch&&e.then?e.catch(function(t){return Promise.reject(n.wrapUpdateFunctionError(t))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(t){return Promise.reject(n.wrapUpdateFunctionError(t))}}().then(function(i){return r.commit().then(function(){return i}).catch(function(r){return 0===e?Promise.reject(r):n.runTransaction(t,e-1)})})},t.prototype.applyRemoteEvent=function(t){var e=this;return this.assertSubscribed("applyRemoteEvent()"),this.localStore.applyRemoteEvent(t).then(function(n){return T(t.targetChanges,function(t,n){var r=e.limboResolutionsByTarget[t];r&&(y(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),n.addedDocuments.size>0?r.receivedDocument=!0:n.modifiedDocuments.size>0?y(r.receivedDocument,"Received change for limbo target document without add."):n.removedDocuments.size>0&&(y(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),e.emitNewSnapsAndNotifyLocalStore(n,t)}).catch(function(t){return e.ignoreIfPrimaryLeaseLoss(t)})},t.prototype.applyOnlineStateChange=function(t,e){if(this.isPrimary&&e===$r.RemoteStore||!this.isPrimary&&e===$r.SharedClientState){var n=[];this.queryViewsByQuery.forEach(function(e,r){var i=r.view.applyOnlineStateChange(t);y(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(n),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},t.prototype.rejectListen=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,u,l=this;return a.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(t,"rejected",e),(r=(n=this.limboResolutionsByTarget[t])&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[t],i=(i=new ct(ot.comparator)).insert(r,new ut(r,Xt.forDeletedDoc())),o=xe().add(r),s=new Oe(Xt.MIN,{},new Yt(H),i,o),[2,this.applyRemoteEvent(s)]):[3,1];case 1:return y(!!(u=this.queryViewsByTarget[t]),"Unknown targetId: "+t),[4,this.localStore.releaseQuery(u.query,!1).then(function(){return l.removeAndCleanupQuery(u)}).catch(function(t){return l.ignoreIfPrimaryLeaseLoss(t)})];case 2:a.sent(),this.syncEngineListener.onWatchError(u.query,e),a.label=3;case 3:return[2]}})})},t.prototype.applyBatchState=function(t,e,n){return a.__awaiter(this,void 0,void 0,function(){var r;return a.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return null===(r=i.sent())?(f("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):g("Unknown batchState: "+e),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},t.prototype.applySuccessfulWrite=function(t){var e=this;this.assertSubscribed("applySuccessfulWrite()");var n=t.batch.batchId;return this.processUserCallback(n,null),this.localStore.acknowledgeBatch(t).then(function(t){return e.sharedClientState.updateMutationState(n,"acknowledged"),e.emitNewSnapsAndNotifyLocalStore(t)}).catch(function(t){return e.ignoreIfPrimaryLeaseLoss(t)})},t.prototype.rejectFailedWrite=function(t,e){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.localStore.rejectBatch(t).then(function(r){return n.sharedClientState.updateMutationState(t,"rejected",e),n.emitNewSnapsAndNotifyLocalStore(r)}).catch(function(t){return n.ignoreIfPrimaryLeaseLoss(t)})},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new ct(H)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(y(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){var e=this;if(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(t.targetId);this.limboDocumentRefs.removeReferencesForId(t.targetId),n.forEach(function(t){e.limboDocumentRefs.containsKey(t)||e.removeLimboTarget(t)})}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof oi?(this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i)):i instanceof ai?(f("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):g("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){f("SyncEngine","New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=Ft.atPath(e.path);this.limboResolutionsByTarget[n]=new function(t){this.key=t}(e),this.remoteStore.listen(new Zt(r,n,Qt.LimboResolution,on.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n,r,i,o=this;return a.__generator(this,function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(a,s){i.push(Promise.resolve().then(function(){var e=s.view.computeDocChanges(t);return e.needsRefill?o.localStore.executeQuery(s.query).then(function(t){return s.view.computeDocChanges(t,e)}):e}).then(function(t){var i=s.view.applyChanges(t,!0===o.isPrimary,e&&e.targetChanges[s.targetId]);if(o.updateTrackedLimbos(s.targetId,i.limboChanges),i.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,i.snapshot.fromCache?"not-current":"current"),n.push(i.snapshot);var a=ii.fromSnapshot(s.targetId,i.snapshot);r.push(a)}}))}),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}})})},t.prototype.ignoreIfPrimaryLeaseLoss=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){if(!Sr(t))throw t;return f("SyncEngine","Unexpectedly lost primary lease"),[2]})})},t.prototype.assertSubscribed=function(t){y(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n;return a.__generator(this,function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?[4,this.localStore.handleUserChange(t)]:[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},t.prototype.applyPrimaryState=function(t){return a.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s,u=this;return a.__generator(this,function(a){switch(a.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return a.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=a.sent(),r=0,i=n;r<i.length;r++)this.remoteStore.listen(i[r]);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,o=[],s=Promise.resolve(),S(this.queryViewsByTarget,function(t,e){u.sharedClientState.isLocalQueryTarget(t)?o.push(t):s=s.then(function(){return u.unlisten(e.query)}),u.remoteStore.unlisten(e.targetId)}),[4,s]);case 4:return a.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(o)];case 5:return a.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}})})},t.prototype.resetLimboDocuments=function(){var t=this;S(this.limboResolutionsByTarget,function(e){t.remoteStore.unlisten(e)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new ct(ot.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){for(var e=this,n=Promise.resolve(),r=[],i=[],o=function(t){n=n.then(function(){return a.__awaiter(e,void 0,void 0,function(){var e,n,o,s;return a.__generator(this,function(a){switch(a.label){case 0:return(n=this.queryViewsByTarget[t])?[4,this.localStore.releaseQuery(n.query,!0)]:[3,4];case 1:return a.sent(),[4,this.localStore.allocateQuery(n.query)];case 2:return e=a.sent(),[4,this.synchronizeViewAndComputeSnapshot(n)];case 3:return(o=a.sent()).snapshot&&i.push(o.snapshot),[3,8];case 4:return y(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(t)];case 5:return y(!!(s=a.sent()),"Query data for target "+t+" not found"),[4,this.localStore.allocateQuery(s)];case 6:return e=a.sent(),[4,this.initializeViewAndComputeSnapshot(e,!1)];case 7:a.sent(),a.label=8;case 8:return r.push(e),[2]}})})})},s=0,u=t;s<u.length;s++)o(u[s]);return n.then(function(){return e.syncEngineListener.onWatchChange(i),r})},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(t,e,n){return a.__awaiter(this,void 0,void 0,function(){var r,i=this;return a.__generator(this,function(o){switch(o.label){case 0:if(this.isPrimary)return f("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[t])return[3,5];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,2]}return[3,4];case 1:return[2,this.localStore.getNewDocumentChanges().then(function(n){return a.__awaiter(i,void 0,void 0,function(){var r;return a.__generator(this,function(i){switch(i.label){case 0:return r=Oe.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(n,r)];case 1:return i.sent(),[2]}})})},function(t){return a.__awaiter(i,void 0,void 0,function(){var e;return a.__generator(this,function(n){switch(n.label){case 0:return function(t){return t.code===_.DATA_LOSS&&t.message===Ln}(t)?(e=[],S(this.queryViewsByTarget,function(t){return e.push(t)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e)]):[3,2];case 1:return n.sent(),[3,3];case 2:throw t;case 3:return[2]}})})})];case 2:return this.removeAndCleanupQuery(r=this.queryViewsByTarget[t]),[4,this.localStore.releaseQuery(r.query,!0)];case 3:return o.sent(),this.syncEngineListener.onWatchError(r.query,n),[3,5];case 4:g("Unexpected target state: "+e),o.label=5;case 5:return[2]}})})},t.prototype.applyActiveTargetsChange=function(t,e){return a.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,u,l,c,h,p=this;return a.__generator(this,function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,f.label=1;case 1:return n<r.length?(y(!this.queryViewsByTarget[h=r[n]],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(h)]):[3,6];case 2:return y(!!(i=f.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateQuery(i)];case 3:return o=f.sent(),[4,this.initializeViewAndComputeSnapshot(o,!1)];case 4:f.sent(),this.remoteStore.listen(o),f.label=5;case 5:return n++,[3,1];case 6:s=function(t){var e;return a.__generator(this,function(n){switch(n.label){case 0:return(e=u.queryViewsByTarget[t])?[4,u.localStore.releaseQuery(e.query,!1).then(function(){p.remoteStore.unlisten(t),p.removeAndCleanupQuery(e)}).catch(function(t){return p.ignoreIfPrimaryLeaseLoss(t)})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},u=this,l=0,c=e,f.label=7;case 7:return l<c.length?[5,s(h=c[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];return e&&e.receivedDocument?xe().add(e.key):this.queryViewsByTarget[t]?this.queryViewsByTarget[t].view.syncedDocuments:xe()},t}(),li=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),ci="SharedClientState",hi="firestore_clients",pi="firestore_mutations",fi="firestore_targets",di="firestore_online_state",mi="firestore_sequence_number",gi=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,y(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new w(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(d(ci,"Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),yi=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,y(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new w(r.error.code,r.error.message)),i?new t(e,r.state,o):(d(ci,"Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),vi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.fromWebStorageEntry=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ee(),a=0;i&&a<r.activeTargetIds.length;++a)i=Lt(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(d(ci,"Failed to parse client data for instance '"+e+"': "+n),null)},t}(),bi=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.fromWebStorageEntry=function(e){var n=JSON.parse(e);return"object"==typeof n&&void 0!==Jr[n.onlineState]&&"string"==typeof n.clientId?new t(n.clientId,Jr[n.onlineState]):(d(ci,"Failed to parse online state: "+e),null)},t}(),_i=function(){function t(){this.activeTargetIds=Ee()}return t.prototype.addQueryTarget=function(t){y(!this.activeTargetIds.has(t),"Target with ID '"+t+"' already active."),this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),wi=function(){function t(e,n,r,i,o){if(this.queue=e,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!t.isAvailable(this.platform))throw new w(_.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=mi+"_"+r,this.activeClients[this.localClientId]=new _i,this.clientStateKeyRe=new RegExp("^"+hi+"_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+pi+"_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+fi+"_"+a+"_(\\d+)$"),this.onlineStateKey=di+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return t.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return a.__awaiter(this,void 0,void 0,function(){var t,e,n,r,i,o,s,u,l,c,h=this;return a.__generator(this,function(a){switch(a.label){case 0:return y(!this.started,"WebStorageSharedClientState already started"),y(null!==this.syncEngine,"syncEngine property must be set before calling start()"),y(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=a.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=vi.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(s=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(s))&&this.handleOnlineStateEvent(u),l=0,c=this.earlyEvents;l<c.length;l++)this.handleWebStorageEvent(c[l]);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return h.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){var t=Ee();return T(this.activeClients,function(e,n){t=t.unionWith(n.activeTargetIds)}),t},t.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},t.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));if(n){var r=yi.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},t.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},t.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(this.toWebStorageQueryTargetMetadataKey(t))},t.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.removeMutationState(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.persistOnlineState(t)},t.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return f(ci,"READ",t,e),e},t.prototype.setItem=function(t,e){f(ci,"SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){f(ci,"REMOVE",t),this.storage.removeItem(t)},t.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(f(ci,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void d("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return a.__awaiter(e,void 0,void 0,function(){var e,n,r,i,o,s;return a.__generator(this,function(a){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(i=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(o=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(o)]}else t.key===this.sequenceNumberKey&&(y(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(s=function(t){var e=on.INVALID;if(null!=t)try{var n=JSON.parse(t);y("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){d(ci,"Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==on.INVALID&&this.sequenceNumberHandler(s));return[2]})})})}},Object.defineProperty(t.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),t.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},t.prototype.persistMutationState=function(t,e,n){var r=new gi(this.currentUser,t,e,n),i=this.toWebStorageMutationBatchKey(t);this.setItem(i,r.toWebStorageJSON())},t.prototype.removeMutationState=function(t){var e=this.toWebStorageMutationBatchKey(t);this.removeItem(e)},t.prototype.persistOnlineState=function(t){this.storage.setItem(this.onlineStateKey,JSON.stringify({clientId:this.localClientId,onlineState:Jr[t]}))},t.prototype.persistQueryTargetState=function(t,e,n){var r=this.toWebStorageQueryTargetMetadataKey(t),i=new yi(t,e,n);this.setItem(r,i.toWebStorageJSON())},t.prototype.toWebStorageClientStateKey=function(t){return y(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),hi+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageQueryTargetMetadataKey=function(t){return fi+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageMutationBatchKey=function(t){var e=pi+"_"+this.persistenceKey+"_"+t;return this.currentUser.isAuthenticated()&&(e+="_"+this.currentUser.uid),e},t.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},t.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return y(null!==n,"Cannot parse client state key '"+t+"'"),vi.fromWebStorageEntry(n,e)},t.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);y(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]);return gi.fromWebStorageEntry(new li(void 0!==n[2]?n[2]:null),r,e)},t.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);y(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return yi.fromWebStorageEntry(r,e)},t.prototype.fromWebStorageOnlineState=function(t){return bi.fromWebStorageEntry(t)},t.prototype.handleMutationBatchEvent=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return t.user.uid!==this.currentUser.uid?(f(ci,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]})})},t.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},t.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),o=[],s=[];return i.forEach(function(t){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(e){return r.has(t)||o.push(t),[2]})})}),r.forEach(function(t){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(e){return i.has(t)||s.push(t),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,s)},t.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},t}(),xi=function(){function t(){this.localState=new _i,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new _i,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),Ci=function(){function t(t,e){this.cacheSizeBytes=t,this.experimentalTabSynchronization=e}return t.prototype.lruParams=function(){return gr.withCacheSize(this.cacheSizeBytes)},t}(),Ei=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=G.newId()}return t.prototype.start=function(t){var e=this,n=new an,r=new an,i=!1;return this.credentials.setChangeListener(function(o){i?e.asyncQueue.enqueueAndForget(function(){return e.handleCredentialChange(o)}):(i=!0,e.initializePersistence(t,r,o).then(function(t){return e.initializeRest(o,t)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.syncEngine.enableNetwork()})},t.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof Ci?this.startIndexedDbPersistence(n,t).then(function(t){return e.resolve(),t}).catch(function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn("Error enabling offline storage. Falling back to storage disabled: "+t),r.startMemoryPersistence()}):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof w?t.code===_.FAILED_PRECONDITION||t.code===_.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code},t.prototype.startIndexedDbPersistence=function(t,e){var n=this,r=Er.buildStoragePrefix(this.databaseInfo),i=new Ke(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return a.__awaiter(n,void 0,void 0,function(){var n,o;return a.__generator(this,function(a){switch(a.label){case 0:if(e.experimentalTabSynchronization&&!wi.isAvailable(this.platform))throw new w(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return o=e.lruParams(),e.experimentalTabSynchronization?(this.sharedClientState=new wi(this.asyncQueue,this.platform,r,this.clientId,t),[4,Er.createMultiClientIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n=a.sent(),[3,4];case 2:return this.sharedClientState=new xi,[4,Er.createIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o)];case 3:n=a.sent(),a.label=4;case 4:return this.persistence=n,[2,n.referenceDelegate.garbageCollector]}})})})},t.prototype.startMemoryPersistence=function(){return this.persistence=Br.createEagerPersistence(this.clientId),this.sharedClientState=new xi,Promise.resolve(null)},t.prototype.initializeRest=function(t,e){var n=this;return f("FirestoreClient","Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return a.__awaiter(n,void 0,void 0,function(){var n,i,o,s=this;return a.__generator(this,function(a){switch(a.label){case 0:return this.localStore=new Mr(this.persistence,t),e&&(this.lruScheduler=new yr(e,this.asyncQueue,this.localStore),this.lruScheduler.start()),n=this.platform.newSerializer(this.databaseInfo.databaseId),i=new Zr(this.asyncQueue,r,this.credentials,n),o=function(t){return s.syncEngine.applyOnlineStateChange(t,$r.SharedClientState)},this.remoteStore=new ei(this.localStore,i,this.asyncQueue,function(t){return s.syncEngine.applyOnlineStateChange(t,$r.RemoteStore)}),this.syncEngine=new ui(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=o,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new ni(this.syncEngine),[4,this.sharedClientState.start()];case 1:return a.sent(),[4,this.remoteStore.start()];case 2:return a.sent(),[4,this.persistence.setPrimaryStateListener(function(t){return s.syncEngine.applyPrimaryState(t)})];case 3:return a.sent(),[2]}})})})},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),f("FirestoreClient","Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.syncEngine.disableNetwork()})},t.prototype.shutdown=function(t){var e=this;return this.asyncQueue.enqueue(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown(t&&t.purgePersistenceWithDataLoss)];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}})})})},t.prototype.listen=function(t,e,n){var r=this,i=new ri(t,e,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},t.prototype.unlisten=function(t){var e=this;this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.unlisten(t)})},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.asyncQueue.enqueue(function(){return e.localStore.readDocument(t)}).then(function(t){if(t instanceof st)return t;if(t instanceof ut)return null;throw new w(_.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.asyncQueue.enqueue(function(){return e.localStore.executeQuery(t)}).then(function(e){var n=xe(),r=new si(t,n),i=r.computeDocChanges(e);return r.applyChanges(i,!1).snapshot})},t.prototype.write=function(t){var e=this,n=new an;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.write(t,n)}),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.transaction=function(t){var e=this;return this.asyncQueue.enqueue(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(t){return[2]})})}).then(function(){return e.syncEngine.runTransaction(t)})},t}(),Si=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Ti=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(e,n,r,i){if(!(t instanceof Array)||t.length<1)throw new w(_.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+q(1,"element")+".")}();for(var n=0;n<t.length;++n)if(D("FieldPath","string",n,t[n]),0===t[n].length)throw new w(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw V("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(it.keyField().canonicalString()),t}(),Ai=new RegExp("[~\\*/\\[\\]]"),Pi=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){y(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(li.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){y(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),Ii=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(){var t=this;y(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(t.tokenCounter!==e)throw new w(_.ABORTED,"getToken aborted due to token change.");return n?(y("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new function(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}}(n.accessToken,t.currentUser)):null})},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){y(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.currentUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){y(null!=this.tokenListener,"removeChangeListener() called twice"),y(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.app.INTERNAL.getUid();return y(null===t||"string"==typeof t,"Received invalid UID: "+t),new li(t)},t}(),Oi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=li.FIRST_PARTY,y(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){return{Authorization:this.gapi.auth.getAuthHeaderValueForFirstParty([]),"X-Goog-AuthUser":this.sessionIndex}},enumerable:!0,configurable:!0}),t}(),Di=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,y(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return t.prototype.getToken=function(){return Promise.resolve(new Oi(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(li.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function ki(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Mi=function(){function t(t){this._methodName=t}return t.delete=function(){return Ri.instance},t.serverTimestamp=function(){return Ni.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return I("FieldValue.arrayUnion",arguments,1),new Li(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return I("FieldValue.arrayRemove",arguments,1),new Fi(t)},t.prototype.isEqual=function(t){return this===t},t}(),Ri=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return a.__extends(e,t),e.instance=new e,e}(Mi),Ni=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return a.__extends(e,t),e.instance=new e,e}(Mi),Li=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n._elements=e,n}return a.__extends(e,t),e}(Mi),Fi=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n._elements=e,n}return a.__extends(e,t),e}(Mi),Bi=x(Mi,"Use FieldValue.<field>() instead."),ji=/^__.*__$/,zi=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return n.push(null!==this.fieldMask?new ie(t,this.data,this.fieldMask,e):new re(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new oe(t,this.fieldTransforms)),n},t}(),Vi=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new ie(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new oe(t,this.fieldTransforms)),n},t}(),Ui=function(t){return t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.Argument=3]="Argument",t}({});function qi(t){switch(t){case Ui.Set:case Ui.MergeSet:case Ui.Update:return!0;case Ui.Argument:return!1;default:throw g("Unexpected case for UserDataSource: "+t)}}var Gi=function(){function t(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new w(_.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(qi(this.dataSource)&&ji.test(t))throw this.createError("Document fields cannot begin and end with __")},t}(),Hi=function(t,e){this.databaseId=t,this.key=e},Wi=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new Gi(Ui.Set,t,it.EMPTY_PATH);Xi("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new zi(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var r=new Gi(Ui.MergeSet,t,it.EMPTY_PATH);Xi("Data must be an object, but it was:",r,e);var i,o,a=this.parseData(e,r);if(n){for(var s=[],u=0,l=n;u<l.length;u++){var c=l[u],h=void 0;if(c instanceof Ti)h=c._internalPath;else{if("string"!=typeof c)throw g("Expected stringOrFieldPath to be a string or a FieldPath");h=Zi(t,c)}if(!r.contains(h))throw new w(_.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s.push(h)}i=Jt.fromArray(s),o=r.fieldTransforms.filter(function(t){return i.covers(t.field)})}else i=Jt.fromArray(r.fieldMask),o=r.fieldTransforms;return new zi(a,i,o)},t.prototype.parseUpdateData=function(t,e){var n=this,r=new Gi(Ui.Update,t,it.EMPTY_PATH);Xi("Data must be an object, but it was:",r,e);var i=[],o=It.EMPTY;T(e,function(e,a){var s=Zi(t,e),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof Ri)i.push(s);else{var l=n.parseData(a,u);null!=l&&(i.push(s),o=o.set(s,l))}});var a=Jt.fromArray(i);return new Vi(o,a,r.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new Gi(Ui.Update,t,it.EMPTY_PATH),o=[Qi(t,e)],a=[n];if(r.length%2!=0)throw new w(_.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(Qi(t,r[s])),a.push(r[s+1]);var u=[],l=It.EMPTY;for(s=0;s<o.length;++s){var c=o[s],h=i.childContextForFieldPath(c),p=this.runPreConverter(a[s],h);if(p instanceof Ri)u.push(c);else{var f=this.parseData(p,h);null!=f&&(u.push(c),l=l.set(c,f))}}var d=Jt.fromArray(u);return new Vi(l,d,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new Gi(Ui.Argument,t,it.EMPTY_PATH),r=this.parseData(e,n);return y(null!=r,"Parsed data should not be null."),y(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(t){var n=Yi(t);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(Ki(t=this.runPreConverter(t,e)))return Xi("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof Mi)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,e){var n=this,r=new ct(H);return A(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):T(t,function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))}),new It(r)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=this.parseData(o[i],e.childContextForArray(r));null==a&&(a=yt.INSTANCE),n.push(a),r++}return new Ot(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!qi(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof Ri){if(e.dataSource!==Ui.MergeSet)throw e.dataSource===Ui.Update?(y(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof Ni)e.fieldTransforms.push(new $t(e.path,se.instance));else if(t instanceof Li){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new ue(n);e.fieldTransforms.push(new $t(e.path,r))}else if(t instanceof Fi){n=this.parseArrayTransformElements(t._methodName,t._elements);var i=new le(n);e.fieldTransforms.push(new $t(e.path,i))}else g("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return yt.INSTANCE;if("number"==typeof t)return Lt(t)?new wt(t):new xt(t);if("boolean"==typeof t)return vt.of(t);if("string"==typeof t)return new Ct(t);if(t instanceof Date)return new Et(J.fromDate(t));if(t instanceof J)return new Et(new J(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof Y)return new Pt(t);if(t instanceof Q)return new Tt(t);if(t instanceof Hi)return new At(t.databaseId,t.key);throw e.createError("Unsupported field value: "+B(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map(function(e,r){var i=new Gi(Ui.Argument,t,it.EMPTY_PATH);return n.parseData(e,i.childContextForArray(r))})},t}();function Ki(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof J||t instanceof Y||t instanceof Q||t instanceof Hi||t instanceof Mi)}function Xi(t,e,n){if(!Ki(n)||!F(n)){var r=B(n);throw e.createError("an object"===r?t+" a custom object":t+" "+r)}}function Qi(t,e){if(e instanceof Ti)return e._internalPath;if("string"==typeof e)return Zi(t,e);throw new w(_.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Zi(t,e){try{return function(t){if(t.search(Ai)>=0)throw new w(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Ti.bind.apply(Ti,[void 0].concat(t.split("."))))}catch(e){throw new w(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(e){var n=Yi(e);throw new w(_.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function Yi(t){return t instanceof Error?t.message:t.toString()}var Ji="firestore.googleapis.com",$i=!0,to=!1,eo=gr.COLLECTION_DISABLED,no=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new w(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ji,this.ssl=$i}else M("settings","non-empty string","host",t.host),this.host=t.host,R("settings","boolean","ssl",t.ssl),this.ssl=E(t.ssl,$i);if(z("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes"]),R("settings","object","credentials",t.credentials),this.credentials=t.credentials,R("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),this.timestampsInSnapshots=E(t.timestampsInSnapshots,to),R("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=gr.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==eo&&t.cacheSizeBytes<gr.MINIMUM_CACHE_SIZE_BYTES)throw new w(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+gr.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes},t}(),ro=function(){},io=function(){function t(e){var n=this;this._queue=new un,this.INTERNAL={delete:function(t){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(e){return this._firestoreClient?[2,this._firestoreClient.shutdown(t)]:[2]})})}};var r=new ro;if("object"==typeof e.options){var i=e;r.firebaseApp=i,r.databaseId=t.databaseIdFromApp(i),r.persistenceKey=r.firebaseApp.name,r.credentials=new Ii(i)}else{var o=e;if(!o.projectId)throw new w(_.INVALID_ARGUMENT,"Must provide projectId");r.databaseId=new tt(o.projectId,o.database),r.persistenceKey="[DEFAULT]",r.credentials=new Pi}r.settings=new no({}),this._config=r,this._databaseId=r.databaseId}return t.prototype.settings=function(t){if(P("Firestore.settings",arguments,1),D("Firestore.settings","object",1,t),C(t,"persistence"))throw new w(_.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new no(t);if(this._firestoreClient&&!this._config.settings.isEqual(e))throw new w(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._config.settings=e,void 0!==e.credentials&&(this._config.credentials=function(t){if(!t)return new Pi;switch(t.type){case"gapi":return new Di(t.client,t.sessionIndex||"0");case"provider":return t.client;default:throw new w(_.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new w(_.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(new Ci(this._config.settings.cacheSizeBytes,void 0!==t&&E(t.experimentalTabSynchronization,!1)))},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new function(){}),this._firestoreClient},t.prototype.configureClient=function(t){var e=this;y(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),this._config.settings.timestampsInSnapshots||d("\nThe behavior for Date objects stored in Firestore is going to change\nAND YOUR APP MAY BREAK.\nTo hide this warning and ensure your app does not break, you need to add the\nfollowing code to your app before calling any other Cloud Firestore methods:\n\n  const firestore = firebase.firestore();\n  const settings = {/* your settings... */ timestampsInSnapshots: true};\n  firestore.settings(settings);\n\nWith this change, timestamps stored in Cloud Firestore will be read back as\nFirebase Timestamp objects instead of as system Date objects. So you will also\nneed to update code expecting a Date to instead expect a Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at');\n  const date = timestamp.toDate();\n\nPlease audit all existing usages of Date when you enable the new behavior. In a\nfuture release, the behavior will change to the new behavior, so if you do not\nfollow these steps, YOUR APP MAY BREAK."),y(!this._firestoreClient,"configureClient() called multiple times");var n=new function(t,e,n,r){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r}(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl);return this._dataConverter=new Wi(function(t){if(t instanceof so){var n=e._config.databaseId,r=t.firestore._config.databaseId;if(!r.isEqual(n))throw new w(_.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new Hi(e._config.databaseId,t._key)}return t}),this._firestoreClient=new Ei(v.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(t)},t.databaseIdFromApp=function(t){var e=t.options;if(!C(e,"projectId"))throw new w(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new w(_.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new tt(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new w(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(P("Firestore.collection",arguments,1),D("Firestore.collection","non-empty string",1,t),!t)throw new w(_.INVALID_ARGUMENT,"Must provide a non-empty collection path to collection()");return this.ensureClientConfigured(),new fo(nt.fromString(t),this)},t.prototype.doc=function(t){if(P("Firestore.doc",arguments,1),D("Firestore.doc","non-empty string",1,t),!t)throw new w(_.INVALID_ARGUMENT,"Must provide a non-empty document path to doc()");return this.ensureClientConfigured(),so.forPath(nt.fromString(t),this)},t.prototype.runTransaction=function(t){var e=this;return P("Firestore.runTransaction",arguments,1),D("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction(function(n){return t(new oo(e,n))})},t.prototype.batch=function(){return this.ensureClientConfigured(),new ao(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(h()){case c.DEBUG:return"debug";case c.ERROR:return"error";case c.SILENT:return"silent";default:return g("Unknown log level: "+h())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(P("Firestore.setLogLevel",arguments,1),D("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":p(c.DEBUG);break;case"error":p(c.ERROR);break;case"silent":p(c.SILENT);break;default:throw new w(_.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},t}(),oo=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;P("Transaction.get",arguments,1);var n=vo("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return g("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof ut)return new lo(e._firestore,n._key,null,!1,!1);if(r instanceof st)return new lo(e._firestore,n._key,r,!1,!1);throw g("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},t.prototype.set=function(t,e,n){O("Transaction.set",arguments,2,3);var r=vo("Transaction.set",t,this._firestore),i=(n=mo("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,i),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof e||e instanceof Ti?(I("Transaction.update",arguments,3),r=vo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(P("Transaction.update",arguments,2),r=vo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},t.prototype.delete=function(t){P("Transaction.delete",arguments,1);var e=vo("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),ao=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){O("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=vo("WriteBatch.set",t,this._firestore),i=(n=mo("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,ee.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),"string"==typeof e||e instanceof Ti?(I("WriteBatch.update",arguments,3),r=vo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(P("WriteBatch.update",arguments,2),r=vo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,ee.exists(!0))),this},t.prototype.delete=function(t){P("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=vo("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new ae(e._key,ee.NONE)),this},t.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new w(_.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),so=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n){if(e.length%2!=0)throw new w(_.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new ot(e),n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new fo(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(P("DocumentReference.collection",arguments,1),D("DocumentReference.collection","non-empty string",1,t),!t)throw new w(_.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=nt.fromString(t);return new fo(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw V("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){O("DocumentReference.set",arguments,1,2);var n=(e=mo("DocumentReference.set",e)).merge||e.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t,e.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,ee.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof Ti?(I("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(P("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,ee.exists(!0)))},t.prototype.delete=function(){return P("DocumentReference.delete",arguments,0),this._firestoreClient.write([new ae(this._key,ee.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];O("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||ki(t[i])||(z("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),R("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return ki(t[i])?n=t[i]:(D("DocumentReference.onSnapshot","function",i,t[i]),k("DocumentReference.onSnapshot","function",i+1,t[i+1]),k("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Si({next:function(t){if(e.next){y(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new lo(n.firestore,n._key,r,t.fromCache,t.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(Ft.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(t){var e=this;return O("DocumentReference.get",arguments,0,1),yo("DocumentReference.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then(function(t){n(new lo(e.firestore,e._key,t,!0,t instanceof st&&t.hasLocalMutations))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new w(_.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new w(_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t}(),uo=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),lo=function(){function t(t,e,n,r,i){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return t.prototype.data=function(t){return O("DocumentSnapshot.data",arguments,0,1),t=go("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data,mt.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},t.prototype.get=function(t,e){if(O("DocumentSnapshot.get",arguments,1,2),e=go("DocumentSnapshot.get",e),this._document){var n=this._document.data.field(Qi("DocumentSnapshot.get",t));if(void 0!==n)return this.convertValue(n,mt.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new so(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new uo(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw V("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(t,e){var n=this,r={};return t.forEach(function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertValue=function(t,e){if(t instanceof It)return this.convertObject(t,e);if(t instanceof Ot)return this.convertArray(t,e);if(t instanceof At){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||d("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new so(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},t}(),co=function(t){function e(e,n,r,i,o){return t.call(this,e,n,r,i,o)||this}return a.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return y("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},e}(lo),ho=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,r){var i;P("Query.where",arguments,3),D("Query.where","non-empty string",2,n),j("Query.where",3,r);var o=Qi("Query.where",e),a=jt.fromString(n);if(o.isKeyField()){if(a===jt.ARRAY_CONTAINS)throw new w(_.INVALID_ARGUMENT,"Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays.");if("string"==typeof r){if(-1!==r.indexOf("/"))throw new w(_.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it contains a slash.");if(""===r)throw new w(_.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");var s=this._query.path.child(new nt([r]));y(s.length%2==0,"Path should be a document key"),i=new At(this.firestore._databaseId,new ot(s))}else{if(!(r instanceof so))throw new w(_.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+B(r)+".");i=new At(this.firestore._databaseId,r._key)}}else i=this.firestore._dataConverter.parseQueryValue("Query.where",r);var u=Bt.create(o,a,i);return this.validateNewFilter(u),new t(this._query.addFilter(u),this.firestore)},t.prototype.orderBy=function(e,n){var r;if(O("Query.orderBy",arguments,1,2),k("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=qt.ASCENDING;else{if("desc"!==n)throw new w(_.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=qt.DESCENDING}if(null!==this._query.startAt)throw new w(_.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new w(_.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=Qi("Query.orderBy",e),o=new Ht(i,r);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore)},t.prototype.limit=function(e){if(P("Query.limit",arguments,1),D("Query.limit","number",1,e),e<=0)throw new w(_.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new t(this._query.withLimit(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];I("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];I("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];I("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];I("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw V("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(j(t,1,e),e instanceof lo){if(n.length>0)throw new w(_.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new w(_.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new At(this.firestore._databaseId,e.key));else{var s=e.field(a.field);if(void 0===s){var u=a.field.canonicalString();throw new w(_.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Gt(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new w(_.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new w(_.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(-1!==a.indexOf("/"))throw new w(_.INVALID_ARGUMENT,"Invalid query. Document ID '"+a+"' contains a slash in "+t+"()");var s=new ot(this._query.path.child(a));i.push(new At(this.firestore._databaseId,s))}else{var u=this.firestore._dataConverter.parseQueryValue(t,a);i.push(u)}}return new Gt(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];O("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||ki(t[i])||(z("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),R("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),ki(t[i])?n=t[i]:(D("Query.onSnapshot","function",i,t[i]),k("Query.onSnapshot","function",i+1,t[i+1]),k("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Si({next:function(t){e.next&&e.next(new po(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(a)}},t.prototype.get=function(t){var e=this;return O("Query.get",arguments,0,1),yo("Query.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then(function(t){n(new po(e.firestore,e._query,t))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new w(_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.validateNewFilter=function(t){if(t instanceof zt)if(t.isInequality()){var e=this._query.getInequalityFilterField();if(null!==e&&!e.isEqual(t.field))throw new w(_.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+e.toString()+"' and '"+t.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(t.field,n)}else if(t.op===jt.ARRAY_CONTAINS&&this._query.hasArrayContainsFilter())throw new w(_.INVALID_ARGUMENT,"Invalid query. Queries only support a single array-contains filter.")},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new w(_.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),po=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new uo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;O("QuerySnapshot.forEach",arguments,1,2),D("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach(function(r){t.call(e,n.convertToDocumentImpl(r))})},Object.defineProperty(t.prototype,"query",{get:function(){return new ho(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(z("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),R("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new w(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(e){var o=new co(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key));return y(e.type===Te.Added,"Invalid event type for first snapshot"),y(!r||n.query.docComparator(r,e.doc)<0,"Got added events in wrong order"),r=e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(t){return e||t.type!==Te.Metadata}).map(function(e){var r=new co(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key)),i=-1,a=-1;return e.type!==Te.Added&&(y((i=o.indexOf(e.doc.key))>=0,"Index for document not found"),o=o.delete(e.doc.key)),e.type!==Te.Removed&&(a=(o=o.add(e.doc)).indexOf(e.doc.key)),{type:function(t){switch(t){case Te.Added:return"added";case Te.Modified:case Te.Metadata:return"modified";case Te.Removed:return"removed";default:return g("Unknown change type: "+t)}}(e.type),doc:r,oldIndex:i,newIndex:a}})}(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw V("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new co(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key))},t}();["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(t){try{Object.defineProperty(po.prototype.docChanges,t,{get:function(){return function(){throw new w(_.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}});var fo=function(t){function e(e,n){var r=t.call(this,Ft.atPath(e),n)||this;if(e.length%2!=1)throw new w(_.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}return a.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new so(new ot(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(O("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=G.newId()),D("CollectionReference.doc","non-empty string",1,t),""===t)throw new w(_.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=nt.fromString(t);return so.forPath(this._query.path.child(e),this.firestore)},e.prototype.add=function(t){P("CollectionReference.add",arguments,1),D("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},e}(ho);function mo(t,e){if(void 0===e)return{merge:!1};if(z(t,e,["merge","mergeFields"]),R(t,"boolean","merge",e.merge),void 0!==(n=e.mergeFields)&&function(t,e,n,r,i){if(!(r instanceof Array))throw new w(_.INVALID_ARGUMENT,"Function "+t+"() requires its mergeFields option to be an array, but it was: "+B(r));for(var o=0;o<r.length;++o)if(!("string"==typeof(a=r[o])||a instanceof Ti))throw new w(_.INVALID_ARGUMENT,"Function "+t+"() requires all mergeFields elements to be a string or a FieldPath, but the value at index "+o+" was: "+B(r[o]));var a}(t,0,0,n),void 0!==e.mergeFields&&void 0!==e.merge)throw new w(_.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function go(t,e){return void 0===e?{}:(z(t,e,["serverTimestamps"]),N(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function yo(t,e){k(t,"object",1,e),e&&(z(t,e,["source"]),N(t,0,"source",e.source,["default","server","cache"]))}function vo(t,e,n){if(e instanceof so){if(e.firestore!==n)throw new w(_.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw V(t,"DocumentReference",1,e)}var bo=x(io,"Use firebase.firestore() instead."),_o=x(oo,"Use firebase.firestore().runTransaction() instead."),wo=x(ao,"Use firebase.firestore().batch() instead."),xo=x(so,"Use firebase.firestore().doc() instead."),Co=x(lo),Eo=x(co),So=x(ho),To=x(po),Ao=x(fo,"Use firebase.firestore().collection() instead."),Po={Firestore:bo,GeoPoint:Y,Timestamp:J,Blob:Z,Transaction:_o,WriteBatch:wo,DocumentReference:xo,DocumentSnapshot:Co,Query:So,QueryDocumentSnapshot:Eo,QuerySnapshot:To,CollectionReference:Ao,FieldPath:Ti,FieldValue:Bi,setLogLevel:io.setLogLevel,CACHE_SIZE_UNLIMITED:eo};function Io(t){t.INTERNAL.registerService("firestore",function(t){return new io(t)},function(t){y(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(Po))}Io(i),e.registerFirestore=Io},"6MUB":function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,i){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(i){var o=encodeURIComponent(r(i))+n;return Array.isArray(t[i])?t[i].map(function(t){return o+encodeURIComponent(r(t))}).join(e):o+encodeURIComponent(r(t[i]))}).join(e):i?encodeURIComponent(r(i))+n+encodeURIComponent(r(t)):""}},"6ahw":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("iLxQ"),i=n("DKTb"),o={closed:!0,next:function(t){},error:function(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete:function(){}}},"6blF":function(t,e,n){"use strict";var r=n("FFOo"),i=n("L/V9"),o=n("6ahw"),a=n("xTla"),s=n("y3By"),u=n("iLxQ");n.d(e,"a",function(){return l});var l=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var a=this.operator,s=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a?a.call(s,this.source):s.add(this.source||u.a.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),u.a.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=c(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[a.a]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Object(s.b)(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=c(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function c(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},"7Qw6":function(t,e,n){"use strict";n.r(e),n.d(e,"using",function(){return a});var r=n("6blF"),i=n("0/uQ"),o=n(null);function a(t,e){return new r.a(function(n){var r,a;try{r=t()}catch(t){return void n.error(t)}try{a=e(r)}catch(t){return void n.error(t)}var s=(a?Object(i.a)(a):o.b).subscribe(n);return function(){s.unsubscribe(),r&&r.unsubscribe()}})}},"8fdW":function(t,e,n){"use strict";n("ohSZ");var r=n("yQ/h");t.exports=function(t){return r.wrap(n("0Gqm")).wrap(n("4Dop"),{prefix:t.endpoint}).wrap(n("p1SU"),{mime:"application/json"}).wrap(n("SpDt")).wrap(n("ioW7"),{params:{access_token:t.accessToken}}).wrap(n("R2Y0"),{access_token:t.accessToken}).wrap(n("aRIw")).wrap(n("gaK2"))}},"8g8A":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("mrSG"),i=function(t){function e(){var n=t.call(this,"object unsubscribed")||this;return n.name="ObjectUnsubscribedError",Object.setPrototypeOf(n,e.prototype),n}return r.c(e,t),e}(Error)},"9/5/":function(t,e){var n=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,u=parseInt,l="object"==typeof global&&global&&global.Object===Object&&global,c="object"==typeof self&&self&&self.Object===Object&&self,h=l||c||Function("return this")(),p=Object.prototype.toString,f=Math.max,d=Math.min,m=function(){return h.Date.now()};function g(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function y(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&p.call(t)==r}(t))return n;if(g(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=g(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var l=a.test(t);return l||s.test(t)?u(t.slice(2),l?2:8):o.test(t)?n:+t}t.exports=function(t,e,n){var r,i,o,a,s,u,l=0,c=!1,h=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(e){var n=r,o=i;return r=i=void 0,l=e,a=t.apply(o,n)}function b(t){var n=t-u;return void 0===u||n>=e||n<0||h&&t-l>=o}function _(){var t=m();if(b(t))return w(t);s=setTimeout(_,function(t){var n=e-(t-u);return h?d(n,o-(t-l)):n}(t))}function w(t){return s=void 0,p&&r?v(t):(r=i=void 0,a)}function x(){var t=m(),n=b(t);if(r=arguments,i=this,u=t,n){if(void 0===s)return function(t){return l=t,s=setTimeout(_,e),c?v(t):a}(u);if(h)return s=setTimeout(_,e),v(u)}return void 0===s&&(s=setTimeout(_,e)),a}return e=y(e)||0,g(n)&&(c=!!n.leading,o=(h="maxWait"in n)?f(y(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),x.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=i=s=void 0},x.flush=function(){return void 0===s?a:w(m())},x}},"909l":function(t,e,n){"use strict";n.r(e),n.d(e,"zip",function(){return c}),n.d(e,"ZipOperator",function(){return h}),n.d(e,"ZipSubscriber",function(){return p});var r=n("mrSG"),i=n("IUTb"),o=n("isby"),a=n("FFOo"),s=n("MGBS"),u=n("zotm"),l=n("En8+");function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),Object(i.a)(t,void 0).lift(new h(n))}var h=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new p(t,this.resultSelector))},t}(),p=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null));var i=t.call(this,e)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:null,i.values=r,i}return r.c(e,t),e.prototype._next=function(t){var e=this.iterators;Object(o.a)(t)?e.push(new d(t)):e.push("function"==typeof t[l.a]?new f(t[l.a]()):new m(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];r.stillUnsubscribed?this.add(r.subscribe(r,n)):this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++)if("function"==typeof(a=t[r]).hasValue&&!a.hasValue())return;var i=!1,o=[];for(r=0;r<e;r++){var a,s=(a=t[r]).next();if(a.hasCompleted()&&(i=!0),s.done)return void n.complete();o.push(s.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(a.a),f=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),d=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[l.a]=function(){return this},t.prototype.next=function(t){var e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),m=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return r.c(e,t),e.prototype[l.a]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return Object(u.a)(this,this.observable,this,e)},e}(s.a)},"9F9j":function(t,e,n){"use strict";var r,i;r=n("trmM"),(i=new function t(e){this.lookup=function(t){var n;return n="string"==typeof t?r.parse(t):t,e[n.raw]?e[n.raw]:e[n.type+n.suffix]?e[n.type+n.suffix]:e[n.type]?e[n.type]:e[n.suffix]?e[n.suffix]:Promise.reject(new Error('Unable to locate converter for mime "'+n.raw+'"'))},this.delegate=function(t){return{read:(function(){var e=arguments;return this.lookup(t).then((function(t){return t.read.apply(this,e)}).bind(this))}).bind(this),write:(function(){var e=arguments;return this.lookup(t).then((function(t){return t.write.apply(this,e)}).bind(this))}).bind(this)}},this.register=function(t,n){return e[t]=Promise.resolve(n),e[t]},this.child=function(){return new t(Object.create(e))}}({})).register("application/hal",n("OYtS")),i.register("application/json",n("errM")),i.register("application/x-www-form-urlencoded",n("gwTh")),i.register("multipart/form-data",n("sWiY")),i.register("text/plain",n("F/JV")),i.register("+json",i.delegate("application/json")),t.exports=i},"9Pg3":function(t,e){t.exports=function(){function t(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,n){var r={start:function(){var t,n,r,a,s,c,h,p,f;for(c=i,h=i,t=[],p=i,f=i,null!==(n=l())&&null!==(r=y())?(44===e.charCodeAt(i)?(a=",",i++):(a=null,0===o&&u('","')),null!==a&&null!==(s=y())?n=[n,r,a,s]:(n=null,i=f)):(n=null,i=f),null!==n&&(n=n[0]),null===n&&(i=p);null!==n;)t.push(n),p=i,f=i,null!==(n=l())&&null!==(r=y())?(44===e.charCodeAt(i)?(a=",",i++):(a=null,0===o&&u('","')),null!==a&&null!==(s=y())?n=[n,r,a,s]:(n=null,i=f)):(n=null,i=f),null!==n&&(n=n[0]),null===n&&(i=p);return null!==t&&null!==(n=l())?t=[t,n]:(t=null,i=h),null!==t&&(t=t[0].concat([t[1]])),null===t&&(i=c),t},LinkValue:l,LinkParams:c,URIReference:h,LinkParam:p,LinkParamName:f,LinkParamValue:d,PToken:m,PTokenChar:g,OptionalSP:y,QuotedString:v,QuotedStringInternal:b,Char:_,UpAlpha:w,LoAlpha:x,Alpha:C,Digit:E,SP:S,DQ:T,QDText:A,QuotedPair:P};if(void 0!==n){if(void 0===r[n])throw new Error("Invalid rule name: "+t(n)+".")}else n="start";var i=0,o=0,a=0,s=[];function u(t){i<a||(i>a&&(a=i,s=[]),s.push(t))}function l(){var t,n,r,a,s,l,p,f,d,m;if(p=i,f=i,60===e.charCodeAt(i)?(t="<",i++):(t=null,0===o&&u('"<"')),null!==t)if(null!==(n=h()))if(62===e.charCodeAt(i)?(r=">",i++):(r=null,0===o&&u('">"')),null!==r)if(null!==(a=y())){for(s=[],l=c();null!==l;)s.push(l),l=c();null!==s?t=[t,n,r,a,s]:(t=null,i=f)}else t=null,i=f;else t=null,i=f;else t=null,i=f;else t=null,i=f;return null!==t&&(d=t[1],m={},t[4].forEach(function(t){m[t[0]]=t[1]}),m.href=d,t=m),null===t&&(i=p),t}function c(){var t,n,r,a,s,l;return s=i,l=i,59===e.charCodeAt(i)?(t=";",i++):(t=null,0===o&&u('";"')),null!==t&&null!==(n=y())&&null!==(r=p())&&null!==(a=y())?t=[t,n,r,a]:(t=null,i=l),null!==t&&(t=t[2]),null===t&&(i=s),t}function h(){var t,n,r;if(r=i,/^[^>]/.test(e.charAt(i))?(n=e.charAt(i),i++):(n=null,0===o&&u("[^>]")),null!==n)for(t=[];null!==n;)t.push(n),/^[^>]/.test(e.charAt(i))?(n=e.charAt(i),i++):(n=null,0===o&&u("[^>]"));else t=null;return null!==t&&(t=t.join("")),null===t&&(i=r),t}function p(){var t,e,n,r;return n=i,r=i,null!==(t=f())&&null!==(e=null!==(e=d())?e:"")?t=[t,e]:(t=null,i=r),null!==t&&(t=[t[0],t[1]]),null===t&&(i=n),t}function f(){var t,n,r;if(r=i,/^[a-z]/.test(e.charAt(i))?(n=e.charAt(i),i++):(n=null,0===o&&u("[a-z]")),null!==n)for(t=[];null!==n;)t.push(n),/^[a-z]/.test(e.charAt(i))?(n=e.charAt(i),i++):(n=null,0===o&&u("[a-z]"));else t=null;return null!==t&&(t=t.join("")),null===t&&(i=r),t}function d(){var t,n,r,a;return r=i,a=i,61===e.charCodeAt(i)?(t="=",i++):(t=null,0===o&&u('"="')),null!==t?(null===(n=m())&&(n=v()),null!==n?t=[t,n]:(t=null,i=a)):(t=null,i=a),null!==t&&(t=t[1]),null===t&&(i=r),t}function m(){var t,e,n;if(n=i,null!==(e=g()))for(t=[];null!==e;)t.push(e),e=g();else t=null;return null!==t&&(t=t.join("")),null===t&&(i=n),t}function g(){var t;return 33===e.charCodeAt(i)?(t="!",i++):(t=null,0===o&&u('"!"')),null===t&&(35===e.charCodeAt(i)?(t="#",i++):(t=null,0===o&&u('"#"')),null===t&&(36===e.charCodeAt(i)?(t="$",i++):(t=null,0===o&&u('"$"')),null===t&&(37===e.charCodeAt(i)?(t="%",i++):(t=null,0===o&&u('"%"')),null===t&&(38===e.charCodeAt(i)?(t="&",i++):(t=null,0===o&&u('"&"')),null===t&&(39===e.charCodeAt(i)?(t="'",i++):(t=null,0===o&&u('"\'"')),null===t&&(40===e.charCodeAt(i)?(t="(",i++):(t=null,0===o&&u('"("')),null===t&&(41===e.charCodeAt(i)?(t=")",i++):(t=null,0===o&&u('")"')),null===t&&(42===e.charCodeAt(i)?(t="*",i++):(t=null,0===o&&u('"*"')),null===t&&(43===e.charCodeAt(i)?(t="+",i++):(t=null,0===o&&u('"+"')),null===t&&(45===e.charCodeAt(i)?(t="-",i++):(t=null,0===o&&u('"-"')),null===t&&(46===e.charCodeAt(i)?(t=".",i++):(t=null,0===o&&u('"."')),null===t&&(124===e.charCodeAt(i)?(t="|",i++):(t=null,0===o&&u('"|"')),null===t&&null===(t=E())&&(58===e.charCodeAt(i)?(t=":",i++):(t=null,0===o&&u('":"')),null===t&&(60===e.charCodeAt(i)?(t="<",i++):(t=null,0===o&&u('"<"')),null===t&&(61===e.charCodeAt(i)?(t="=",i++):(t=null,0===o&&u('"="')),null===t&&(62===e.charCodeAt(i)?(t=">",i++):(t=null,0===o&&u('">"')),null===t&&(63===e.charCodeAt(i)?(t="?",i++):(t=null,0===o&&u('"?"')),null===t&&(64===e.charCodeAt(i)?(t="@",i++):(t=null,0===o&&u('"@"')),null===t&&null===(t=C())&&(91===e.charCodeAt(i)?(t="[",i++):(t=null,0===o&&u('"["')),null===t&&(93===e.charCodeAt(i)?(t="]",i++):(t=null,0===o&&u('"]"')),null===t&&(94===e.charCodeAt(i)?(t="^",i++):(t=null,0===o&&u('"^"')),null===t&&(95===e.charCodeAt(i)?(t="_",i++):(t=null,0===o&&u('"_"')),null===t&&(96===e.charCodeAt(i)?(t="`",i++):(t=null,0===o&&u('"`"')),null===t&&(123===e.charCodeAt(i)?(t="{",i++):(t=null,0===o&&u('"{"')),null===t&&(/^[\/\/]/.test(e.charAt(i))?(t=e.charAt(i),i++):(t=null,0===o&&u("[\\/\\/]")),null===t&&(125===e.charCodeAt(i)?(t="}",i++):(t=null,0===o&&u('"}"')),null===t&&(126===e.charCodeAt(i)?(t="~",i++):(t=null,0===o&&u('"~"'))))))))))))))))))))))))))))),t}function y(){var t,e;for(t=[],e=S();null!==e;)t.push(e),e=S();return t}function v(){var t,e,n,r,o;return r=i,o=i,null!==(t=T())&&null!==(e=b())&&null!==(n=T())?t=[t,e,n]:(t=null,i=o),null!==t&&(t=t[1]),null===t&&(i=r),t}function b(){var t,e,n;for(n=i,t=[],null===(e=A())&&(e=P());null!==e;)t.push(e),null===(e=A())&&(e=P());return null!==t&&(t=t.join("")),null===t&&(i=n),t}function _(){var t;return/^[\0-\x7f]/.test(e.charAt(i))?(t=e.charAt(i),i++):(t=null,0===o&&u("[\\0-\x7f]")),t}function w(){var t;return/^[A-Z]/.test(e.charAt(i))?(t=e.charAt(i),i++):(t=null,0===o&&u("[A-Z]")),t}function x(){var t;return/^[a-z]/.test(e.charAt(i))?(t=e.charAt(i),i++):(t=null,0===o&&u("[a-z]")),t}function C(){var t;return null===(t=w())&&(t=x()),t}function E(){var t;return/^[0-9]/.test(e.charAt(i))?(t=e.charAt(i),i++):(t=null,0===o&&u("[0-9]")),t}function S(){var t;return/^[ ]/.test(e.charAt(i))?(t=e.charAt(i),i++):(t=null,0===o&&u("[ ]")),t}function T(){var t;return/^["]/.test(e.charAt(i))?(t=e.charAt(i),i++):(t=null,0===o&&u('["]')),t}function A(){var t;return/^[^"]/.test(e.charAt(i))?(t=e.charAt(i),i++):(t=null,0===o&&u('[^"]')),t}function P(){var t,n,r;return r=i,/^[\\]/.test(e.charAt(i))?(t=e.charAt(i),i++):(t=null,0===o&&u("[\\\\]")),null!==t&&null!==(n=_())?t=[t,n]:(t=null,i=r),t}var I=r[n]();if(null===I||i!==e.length){var O=Math.max(i,a),D=O<e.length?e.charAt(O):null,k=function(){for(var t=1,n=1,r=!1,o=0;o<Math.max(i,a);o++){var s=e.charAt(o);"\n"===s?(r||t++,n=1,r=!1):"\r"===s||"\u2028"===s||"\u2029"===s?(t++,n=1,r=!0):(n++,r=!1)}return{line:t,column:n}}();throw new this.SyntaxError(function(t){t.sort();for(var e=null,n=[],r=0;r<t.length;r++)t[r]!==e&&(n.push(t[r]),e=t[r]);return n}(s),D,O,k.line,k.column)}return I},toSource:function(){return this._source},SyntaxError:function(e,n,r,i,o){this.name="SyntaxError",this.expected=e,this.found=n,this.message=function(e,n){var r;switch(e.length){case 0:r="end of input";break;case 1:r=e[0];break;default:r=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return"Expected "+r+" but "+(n?t(n):"end of input")+" found."}(e,n),this.offset=r,this.line=i,this.column=o}};return e.SyntaxError.prototype=Error.prototype,e}()},Bi8L:function(t,e,n){"use strict";var r=n("R/WN");window.Suggestions=t.exports=r},CcnG:function(t,e,n){"use strict";n.r(e),n.d(e,"\u0275angular_packages_core_core_l",function(){return Hr}),n.d(e,"\u0275angular_packages_core_core_i",function(){return Ur}),n.d(e,"\u0275angular_packages_core_core_j",function(){return qr}),n.d(e,"\u0275angular_packages_core_core_k",function(){return Gr}),n.d(e,"\u0275angular_packages_core_core_f",function(){return Oe}),n.d(e,"\u0275angular_packages_core_core_g",function(){return xr}),n.d(e,"\u0275angular_packages_core_core_h",function(){return Ir}),n.d(e,"\u0275angular_packages_core_core_c",function(){return pe}),n.d(e,"\u0275angular_packages_core_core_d",function(){return ee}),n.d(e,"\u0275angular_packages_core_core_e",function(){return ae}),n.d(e,"\u0275angular_packages_core_core_m",function(){return sn}),n.d(e,"\u0275angular_packages_core_core_o",function(){return nn}),n.d(e,"\u0275angular_packages_core_core_n",function(){return en}),n.d(e,"\u0275angular_packages_core_core_r",function(){return an}),n.d(e,"\u0275angular_packages_core_core_p",function(){return rn}),n.d(e,"\u0275angular_packages_core_core_q",function(){return on}),n.d(e,"\u0275angular_packages_core_core_v",function(){return Gp}),n.d(e,"\u0275angular_packages_core_core_y",function(){return Jp}),n.d(e,"\u0275angular_packages_core_core_x",function(){return Zp}),n.d(e,"\u0275angular_packages_core_core_w",function(){return Hp}),n.d(e,"\u0275angular_packages_core_core_u",function(){return Np}),n.d(e,"\u0275angular_packages_core_core_z",function(){return tf}),n.d(e,"\u0275angular_packages_core_core_ba",function(){return Qh}),n.d(e,"\u0275angular_packages_core_core_bb",function(){return Hu}),n.d(e,"\u0275angular_packages_core_core_a",function(){return y}),n.d(e,"\u0275angular_packages_core_core_b",function(){return v}),n.d(e,"\u0275angular_packages_core_core_s",function(){return ma}),n.d(e,"\u0275angular_packages_core_core_t",function(){return Ii}),n.d(e,"createPlatform",function(){return kn}),n.d(e,"assertPlatform",function(){return Rn}),n.d(e,"destroyPlatform",function(){return Nn}),n.d(e,"getPlatform",function(){return Ln}),n.d(e,"PlatformRef",function(){return Fn}),n.d(e,"ApplicationRef",function(){return jn}),n.d(e,"enableProdMode",function(){return In}),n.d(e,"isDevMode",function(){return On}),n.d(e,"createPlatformFactory",function(){return Mn}),n.d(e,"NgProbeToken",function(){return Dn}),n.d(e,"APP_ID",function(){return Ie}),n.d(e,"PACKAGE_ROOT_URL",function(){return Le}),n.d(e,"PLATFORM_INITIALIZER",function(){return Me}),n.d(e,"PLATFORM_ID",function(){return Re}),n.d(e,"APP_BOOTSTRAP_LISTENER",function(){return Ne}),n.d(e,"APP_INITIALIZER",function(){return Ae}),n.d(e,"ApplicationInitStatus",function(){return Pe}),n.d(e,"DebugElement",function(){return cr}),n.d(e,"DebugNode",function(){return lr}),n.d(e,"asNativeElements",function(){return hr}),n.d(e,"getDebugNode",function(){return mr}),n.d(e,"Testability",function(){return wn}),n.d(e,"TestabilityRegistry",function(){return xn}),n.d(e,"setTestabilityGetter",function(){return Cn}),n.d(e,"TRANSLATIONS",function(){return jr}),n.d(e,"TRANSLATIONS_FORMAT",function(){return zr}),n.d(e,"LOCALE_ID",function(){return Br}),n.d(e,"MissingTranslationStrategy",function(){return Vr}),n.d(e,"ApplicationModule",function(){return Wr}),n.d(e,"wtfCreateScope",function(){return ln}),n.d(e,"wtfLeave",function(){return cn}),n.d(e,"wtfStartTimeRange",function(){return hn}),n.d(e,"wtfEndTimeRange",function(){return pn}),n.d(e,"Type",function(){return F}),n.d(e,"EventEmitter",function(){return fn}),n.d(e,"ErrorHandler",function(){return Kt}),n.d(e,"Sanitizer",function(){return wi}),n.d(e,"SecurityContext",function(){return _i}),n.d(e,"ANALYZE_FOR_ENTRY_COMPONENTS",function(){return b}),n.d(e,"Attribute",function(){return _}),n.d(e,"ContentChild",function(){return C}),n.d(e,"ContentChildren",function(){return x}),n.d(e,"Query",function(){return w}),n.d(e,"ViewChild",function(){return S}),n.d(e,"ViewChildren",function(){return E}),n.d(e,"Component",function(){return D}),n.d(e,"Directive",function(){return O}),n.d(e,"HostBinding",function(){return N}),n.d(e,"HostListener",function(){return L}),n.d(e,"Input",function(){return M}),n.d(e,"Output",function(){return R}),n.d(e,"Pipe",function(){return k}),n.d(e,"CUSTOM_ELEMENTS_SCHEMA",function(){return Nt}),n.d(e,"NO_ERRORS_SCHEMA",function(){return Lt}),n.d(e,"NgModule",function(){return Ft}),n.d(e,"ViewEncapsulation",function(){return Bt}),n.d(e,"Version",function(){return jt}),n.d(e,"VERSION",function(){return zt}),n.d(e,"defineInjectable",function(){return l}),n.d(e,"defineInjector",function(){return c}),n.d(e,"forwardRef",function(){return tt}),n.d(e,"resolveForwardRef",function(){return et}),n.d(e,"Injectable",function(){return Rt}),n.d(e,"inject",function(){return Pt}),n.d(e,"INJECTOR",function(){return ct}),n.d(e,"Injector",function(){return pt}),n.d(e,"ReflectiveInjector",function(){return he}),n.d(e,"createInjector",function(){return be}),n.d(e,"ResolvedReflectiveFactory",function(){return ie}),n.d(e,"ReflectiveKey",function(){return Jt}),n.d(e,"InjectionToken",function(){return h}),n.d(e,"Inject",function(){return nt}),n.d(e,"Optional",function(){return rt}),n.d(e,"Self",function(){return it}),n.d(e,"SkipSelf",function(){return ot}),n.d(e,"Host",function(){return at}),n.d(e,"NgZone",function(){return dn}),n.d(e,"RenderComponentType",function(){return Vn}),n.d(e,"Renderer",function(){return qn}),n.d(e,"Renderer2",function(){return Kn}),n.d(e,"RendererFactory2",function(){return Hn}),n.d(e,"RendererStyleFlags2",function(){return Wn}),n.d(e,"RootRenderer",function(){return Gn}),n.d(e,"COMPILER_OPTIONS",function(){return Ve}),n.d(e,"Compiler",function(){return ze}),n.d(e,"CompilerFactory",function(){return Ue}),n.d(e,"ModuleWithComponentFactories",function(){return Be}),n.d(e,"ComponentFactory",function(){return Ge}),n.d(e,"ComponentRef",function(){return qe}),n.d(e,"ComponentFactoryResolver",function(){return Ze}),n.d(e,"ElementRef",function(){return Xn}),n.d(e,"NgModuleFactory",function(){return tn}),n.d(e,"NgModuleRef",function(){return $e}),n.d(e,"NgModuleFactoryLoader",function(){return Qn}),n.d(e,"getModuleFactory",function(){return Jn}),n.d(e,"QueryList",function(){return $n}),n.d(e,"SystemJsNgModuleLoader",function(){return nr}),n.d(e,"SystemJsNgModuleLoaderConfig",function(){return tr}),n.d(e,"TemplateRef",function(){return ir}),n.d(e,"ViewContainerRef",function(){return or}),n.d(e,"EmbeddedViewRef",function(){return ur}),n.d(e,"ViewRef",function(){return sr}),n.d(e,"ChangeDetectionStrategy",function(){return T}),n.d(e,"ChangeDetectorRef",function(){return ar}),n.d(e,"DefaultIterableDiffer",function(){return Er}),n.d(e,"IterableDiffers",function(){return kr}),n.d(e,"KeyValueDiffers",function(){return Mr}),n.d(e,"SimpleChange",function(){return br}),n.d(e,"WrappedValue",function(){return vr}),n.d(e,"platformCore",function(){return Fr}),n.d(e,"\u0275ALLOW_MULTIPLE_PLATFORMS",function(){return Pn}),n.d(e,"\u0275APP_ID_RANDOM_PROVIDER",function(){return De}),n.d(e,"\u0275defaultIterableDiffers",function(){return Nr}),n.d(e,"\u0275defaultKeyValueDiffers",function(){return Lr}),n.d(e,"\u0275devModeEqual",function(){return yr}),n.d(e,"\u0275isListLikeIterable",function(){return _r}),n.d(e,"\u0275ChangeDetectorStatus",function(){return A}),n.d(e,"\u0275isDefaultChangeDetectionStrategy",function(){return P}),n.d(e,"\u0275Console",function(){return Fe}),n.d(e,"\u0275inject",function(){return Pt}),n.d(e,"\u0275setCurrentInjector",function(){return At}),n.d(e,"\u0275APP_ROOT",function(){return fe}),n.d(e,"\u0275ivyEnabled",function(){return I}),n.d(e,"\u0275ComponentFactory",function(){return Ge}),n.d(e,"\u0275CodegenComponentFactoryResolver",function(){return Ye}),n.d(e,"\u0275resolveComponentResources",function(){return Kr}),n.d(e,"\u0275ReflectionCapabilities",function(){return Y}),n.d(e,"\u0275RenderDebugInfo",function(){return Un}),n.d(e,"\u0275_sanitizeHtml",function(){return mi}),n.d(e,"\u0275_sanitizeStyle",function(){return bi}),n.d(e,"\u0275_sanitizeUrl",function(){return $r}),n.d(e,"\u0275global",function(){return V}),n.d(e,"\u0275looseIdentical",function(){return W}),n.d(e,"\u0275stringify",function(){return K}),n.d(e,"\u0275makeDecorator",function(){return m}),n.d(e,"\u0275isObservable",function(){return Te}),n.d(e,"\u0275isPromise",function(){return Se}),n.d(e,"\u0275clearOverrides",function(){return $s}),n.d(e,"\u0275initServicesIfNeeded",function(){return ps}),n.d(e,"\u0275overrideComponentView",function(){return Js}),n.d(e,"\u0275overrideProvider",function(){return Ys}),n.d(e,"\u0275NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR",function(){return xa}),n.d(e,"\u0275defineComponent",function(){return pp}),n.d(e,"\u0275defineDirective",function(){return vp}),n.d(e,"\u0275definePipe",function(){return bp}),n.d(e,"\u0275defineNgModule",function(){return mp}),n.d(e,"\u0275detectChanges",function(){return Sh}),n.d(e,"\u0275renderComponent",function(){return lp}),n.d(e,"\u0275directiveInject",function(){return Bp}),n.d(e,"\u0275injectElementRef",function(){return jp}),n.d(e,"\u0275injectTemplateRef",function(){return zp}),n.d(e,"\u0275injectViewContainerRef",function(){return Vp}),n.d(e,"\u0275injectChangeDetectorRef",function(){return Up}),n.d(e,"\u0275injectAttribute",function(){return qp}),n.d(e,"\u0275PublicFeature",function(){return nf}),n.d(e,"\u0275InheritDefinitionFeature",function(){return wp}),n.d(e,"\u0275NgOnChangesFeature",function(){return Cp}),n.d(e,"\u0275markDirty",function(){return Ah}),n.d(e,"\u0275NgModuleFactory",function(){return _f}),n.d(e,"\u0275NC",function(){return Ph}),n.d(e,"\u0275C",function(){return hh}),n.d(e,"\u0275E",function(){return Mc}),n.d(e,"\u0275NH",function(){return Dc}),n.d(e,"\u0275NM",function(){return Oc}),n.d(e,"\u0275NS",function(){return Ic}),n.d(e,"\u0275Ee",function(){return kc}),n.d(e,"\u0275L",function(){return Wc}),n.d(e,"\u0275T",function(){return ah}),n.d(e,"\u0275V",function(){return dh}),n.d(e,"\u0275Q",function(){return Wf}),n.d(e,"\u0275Qr",function(){return tp}),n.d(e,"\u0275d",function(){return Gh}),n.d(e,"\u0275P",function(){return _h}),n.d(e,"\u0275b",function(){return Oh}),n.d(e,"\u0275i1",function(){return Nh}),n.d(e,"\u0275i2",function(){return Lh}),n.d(e,"\u0275i3",function(){return Fh}),n.d(e,"\u0275i4",function(){return Bh}),n.d(e,"\u0275i5",function(){return jh}),n.d(e,"\u0275i6",function(){return zh}),n.d(e,"\u0275i7",function(){return Vh}),n.d(e,"\u0275i8",function(){return Uh}),n.d(e,"\u0275iV",function(){return Rh}),n.d(e,"\u0275pb1",function(){return kf}),n.d(e,"\u0275pb2",function(){return Mf}),n.d(e,"\u0275pb3",function(){return Rf}),n.d(e,"\u0275pb4",function(){return Nf}),n.d(e,"\u0275pbV",function(){return Lf}),n.d(e,"\u0275f0",function(){return wf}),n.d(e,"\u0275f1",function(){return xf}),n.d(e,"\u0275f2",function(){return Cf}),n.d(e,"\u0275f3",function(){return Ef}),n.d(e,"\u0275f4",function(){return Sf}),n.d(e,"\u0275f5",function(){return Tf}),n.d(e,"\u0275f6",function(){return Af}),n.d(e,"\u0275f7",function(){return Pf}),n.d(e,"\u0275f8",function(){return If}),n.d(e,"\u0275fV",function(){return Of}),n.d(e,"\u0275cR",function(){return ph}),n.d(e,"\u0275cr",function(){return fh}),n.d(e,"\u0275qR",function(){return Kf}),n.d(e,"\u0275ql",function(){return Hh}),n.d(e,"\u0275e",function(){return Qc}),n.d(e,"\u0275p",function(){return Yc}),n.d(e,"\u0275pD",function(){return vh}),n.d(e,"\u0275rS",function(){return Dh}),n.d(e,"\u0275a",function(){return Zc}),n.d(e,"\u0275s",function(){return eh}),n.d(e,"\u0275sm",function(){return oh}),n.d(e,"\u0275sp",function(){return ih}),n.d(e,"\u0275sa",function(){return rh}),n.d(e,"\u0275cp",function(){return th}),n.d(e,"\u0275t",function(){return sh}),n.d(e,"\u0275v",function(){return mh}),n.d(e,"\u0275st",function(){return qh}),n.d(e,"\u0275ld",function(){return Wh}),n.d(e,"\u0275Pp",function(){return Df}),n.d(e,"\u0275whenRendered",function(){return hp}),n.d(e,"\u0275iA",function(){return sf}),n.d(e,"\u0275iEM",function(){return uf}),n.d(e,"\u0275iI1",function(){return lf}),n.d(e,"\u0275iI2",function(){return cf}),n.d(e,"\u0275iI3",function(){return hf}),n.d(e,"\u0275iI4",function(){return pf}),n.d(e,"\u0275iI5",function(){return ff}),n.d(e,"\u0275iI6",function(){return df}),n.d(e,"\u0275iI7",function(){return mf}),n.d(e,"\u0275iI8",function(){return gf}),n.d(e,"\u0275IV",function(){return yf}),n.d(e,"\u0275iM",function(){return of}),n.d(e,"\u0275sanitizeHtml",function(){return nd}),n.d(e,"\u0275sanitizeStyle",function(){return rd}),n.d(e,"\u0275sanitizeUrl",function(){return id}),n.d(e,"\u0275sanitizeResourceUrl",function(){return od}),n.d(e,"\u0275bypassSanitizationTrustHtml",function(){return Zf}),n.d(e,"\u0275bypassSanitizationTrustStyle",function(){return Yf}),n.d(e,"\u0275bypassSanitizationTrustScript",function(){return Jf}),n.d(e,"\u0275bypassSanitizationTrustUrl",function(){return $f}),n.d(e,"\u0275bypassSanitizationTrustResourceUrl",function(){return td}),n.d(e,"\u0275registerModuleFactory",function(){return Yn}),n.d(e,"\u0275EMPTY_ARRAY",function(){return bo}),n.d(e,"\u0275EMPTY_MAP",function(){return _o}),n.d(e,"\u0275and",function(){return wo}),n.d(e,"\u0275ccf",function(){return Vo}),n.d(e,"\u0275cmf",function(){return tu}),n.d(e,"\u0275crt",function(){return zi}),n.d(e,"\u0275did",function(){return pa}),n.d(e,"\u0275eld",function(){return xo}),n.d(e,"\u0275elementEventFullName",function(){return Ji}),n.d(e,"\u0275getComponentViewDefinitionFactory",function(){return Uo}),n.d(e,"\u0275inlineInterpolate",function(){return yo}),n.d(e,"\u0275interpolate",function(){return go}),n.d(e,"\u0275mod",function(){return ko}),n.d(e,"\u0275mpd",function(){return Do}),n.d(e,"\u0275ncd",function(){return Ra}),n.d(e,"\u0275nov",function(){return $o}),n.d(e,"\u0275pid",function(){return fa}),n.d(e,"\u0275prd",function(){return da}),n.d(e,"\u0275pad",function(){return Fa}),n.d(e,"\u0275pod",function(){return Ba}),n.d(e,"\u0275ppd",function(){return La}),n.d(e,"\u0275qud",function(){return Ia}),n.d(e,"\u0275ted",function(){return za}),n.d(e,"\u0275unv",function(){return Fi}),n.d(e,"\u0275vid",function(){return qa});var r=n("mrSG"),i=n("pugT"),o=n("K9Ia"),a=n("6blF"),s=n("p0ib"),u=n("S1nX");function l(t){return{providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function c(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}var h=function(){function t(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0!==e?l({providedIn:e.providedIn||"root",factory:e.factory}):void 0}return t.prototype.toString=function(){return"InjectionToken "+this._desc},t}(),p="__annotations__",f="__parameters__",d="__prop__metadata__";function m(t,e,n,i,o){var a=g(e);function s(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof s)return a.call.apply(a,Object(r.f)([this],e)),this;var u=new((t=s).bind.apply(t,Object(r.f)([void 0],e))),l=function(t){return o&&o.apply(void 0,Object(r.f)([t],e)),(t.hasOwnProperty(p)?t[p]:Object.defineProperty(t,p,{value:[]})[p]).push(u),t};return i&&i(l),l}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=t,s.annotationCls=s,s}function g(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t){var i=t.apply(void 0,Object(r.f)(e));for(var o in i)this[o]=i[o]}}}function y(t,e,n){var i=g(e);function o(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof o)return i.apply(this,e),this;var a=new((t=o).bind.apply(t,Object(r.f)([void 0],e)));return s.annotation=a,s;function s(t,e,n){for(var r=t.hasOwnProperty(f)?t[f]:Object.defineProperty(t,f,{value:[]})[f];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(a),t}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o}function v(t,e,n){var i=g(e);function o(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this instanceof o)return i.apply(this,e),this;var a=new((t=o).bind.apply(t,Object(r.f)([void 0],e)));return function(t,e){var n=t.constructor,r=n.hasOwnProperty(d)?n[d]:Object.defineProperty(n,d,{value:{}})[d];r[e]=r.hasOwnProperty(e)&&r[e]||[],r[e].unshift(a)}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o}var b=new h("AnalyzeForEntryComponents"),_=y("Attribute",function(t){return{attributeName:t}}),w=function(){},x=v("ContentChildren",function(t,e){return void 0===e&&(e={}),Object(r.a)({selector:t,first:!1,isViewQuery:!1,descendants:!1},e)},w),C=v("ContentChild",function(t,e){return void 0===e&&(e={}),Object(r.a)({selector:t,first:!0,isViewQuery:!1,descendants:!0},e)},w),E=v("ViewChildren",function(t,e){return void 0===e&&(e={}),Object(r.a)({selector:t,first:!1,isViewQuery:!0,descendants:!0},e)},w),S=v("ViewChild",function(t,e){return Object(r.a)({selector:t,first:!0,isViewQuery:!0,descendants:!0},e)},w),T=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),A=function(t){return t[t.CheckOnce=0]="CheckOnce",t[t.Checked=1]="Checked",t[t.CheckAlways=2]="CheckAlways",t[t.Detached=3]="Detached",t[t.Errored=4]="Errored",t[t.Destroyed=5]="Destroyed",t}({});function P(t){return null==t||t===T.Default}var I=!1,O=m("Directive",function(t){return void 0===t&&(t={}),t},void 0,void 0,function(t,e){}),D=m("Component",function(t){return void 0===t&&(t={}),Object(r.a)({changeDetection:T.Default},t)},O,void 0,function(t,e){}),k=m("Pipe",function(t){return Object(r.a)({pure:!0},t)},void 0,void 0,function(t,e){}),M=v("Input",function(t){return{bindingPropertyName:t}}),R=v("Output",function(t){return{bindingPropertyName:t}}),N=v("HostBinding",function(t){return{hostPropertyName:t}}),L=v("HostListener",function(t,e){return{eventName:t,args:e}}),F=Function;function B(t){return"function"==typeof t}var j="undefined"!=typeof window&&window,z="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,V="undefined"!=typeof global&&global||j||z,U=Promise.resolve(0),q=null;function G(){if(!q){var t=V.Symbol;if(t&&t.iterator)q=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(q=r)}}return q}function H(t){"undefined"==typeof Zone?U.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function W(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function K(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(K).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}var X=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*arguments\)/,Q=/^class\s+[A-Za-z\d$_]*\s*extends\s+[A-Za-z\d$_]+\s*{/,Z=/^class\s+[A-Za-z\d$_]*\s*extends\s+[A-Za-z\d$_]+\s*{[\s\S]*constructor\s*\(/,Y=function(){function t(t){this._reflect=t||V.Reflect}return t.prototype.isReflectionEnabled=function(){return!0},t.prototype.factory=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new(t.bind.apply(t,Object(r.f)([void 0],e)))}},t.prototype._zipTypesAndAnnotations=function(t,e){var n;n=void 0===t?new Array(e.length):new Array(t.length);for(var r=0;r<n.length;r++)n[r]=void 0===t?[]:t[r]!=Object?[t[r]]:[],e&&null!=e[r]&&(n[r]=n[r].concat(e[r]));return n},t.prototype._ownParameters=function(t,e){var n=t.toString();if(X.exec(n)||Q.exec(n)&&!Z.exec(n))return null;if(t.parameters&&t.parameters!==e.parameters)return t.parameters;var r=t.ctorParameters;if(r&&r!==e.ctorParameters){var i="function"==typeof r?r():r,o=i.map(function(t){return t&&t.type}),a=i.map(function(t){return t&&J(t.decorators)});return this._zipTypesAndAnnotations(o,a)}var s=t.hasOwnProperty(f)&&t[f],u=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",t);return u||s?this._zipTypesAndAnnotations(u,s):new Array(t.length).fill(void 0)},t.prototype.parameters=function(t){if(!B(t))return[];var e=$(t),n=this._ownParameters(t,e);return n||e===Object||(n=this.parameters(e)),n||[]},t.prototype._ownAnnotations=function(t,e){if(t.annotations&&t.annotations!==e.annotations){var n=t.annotations;return"function"==typeof n&&n.annotations&&(n=n.annotations),n}return t.decorators&&t.decorators!==e.decorators?J(t.decorators):t.hasOwnProperty(p)?t[p]:null},t.prototype.annotations=function(t){if(!B(t))return[];var e=$(t),n=this._ownAnnotations(t,e)||[];return(e!==Object?this.annotations(e):[]).concat(n)},t.prototype._ownPropMetadata=function(t,e){if(t.propMetadata&&t.propMetadata!==e.propMetadata){var n=t.propMetadata;return"function"==typeof n&&n.propMetadata&&(n=n.propMetadata),n}if(t.propDecorators&&t.propDecorators!==e.propDecorators){var r=t.propDecorators,i={};return Object.keys(r).forEach(function(t){i[t]=J(r[t])}),i}return t.hasOwnProperty(d)?t[d]:null},t.prototype.propMetadata=function(t){if(!B(t))return{};var e=$(t),n={};if(e!==Object){var i=this.propMetadata(e);Object.keys(i).forEach(function(t){n[t]=i[t]})}var o=this._ownPropMetadata(t,e);return o&&Object.keys(o).forEach(function(t){var e=[];n.hasOwnProperty(t)&&e.push.apply(e,Object(r.f)(n[t])),e.push.apply(e,Object(r.f)(o[t])),n[t]=e}),n},t.prototype.hasLifecycleHook=function(t,e){return t instanceof F&&e in t.prototype},t.prototype.guards=function(t){return{}},t.prototype.getter=function(t){return new Function("o","return o."+t+";")},t.prototype.setter=function(t){return new Function("o","v","return o."+t+" = v;")},t.prototype.method=function(t){return new Function("o","args","if (!o."+t+") throw new Error('\""+t+"\" is undefined');\n        return o."+t+".apply(o, args);")},t.prototype.importUri=function(t){return"object"==typeof t&&t.filePath?t.filePath:"./"+K(t)},t.prototype.resourceUri=function(t){return"./"+K(t)},t.prototype.resolveIdentifier=function(t,e,n,r){return r},t.prototype.resolveEnum=function(t,e){return t[e]},t}();function J(t){return t?t.map(function(t){var e=t.type.annotationCls,n=t.args?t.args:[];return new(e.bind.apply(e,Object(r.f)([void 0],n)))}):[]}function $(t){var e=t.prototype?Object.getPrototypeOf(t.prototype):null;return(e?e.constructor:null)||Object}function tt(t){return t.__forward_ref__=tt,t.toString=function(){return K(this())},t}function et(t){return"function"==typeof t&&t.hasOwnProperty("__forward_ref__")&&t.__forward_ref__===tt?t():t}var nt=y("Inject",function(t){return{token:t}}),rt=y("Optional"),it=y("Self"),ot=y("SkipSelf"),at=y("Host"),st="__source",ut=new Object,lt=ut,ct=new h("INJECTOR"),ht=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=ut),e===ut)throw new Error("NullInjectorError: No provider for "+K(t)+"!");return e},t}(),pt=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?new xt(t,e):new xt(t.providers,t.parent,t.name||null)},t.THROW_IF_NOT_FOUND=ut,t.NULL=new ht,t.ngInjectableDef=l({providedIn:"any",factory:function(){return Pt(ct)}}),t}(),ft=function(t){return t},dt=[],mt=ft,gt=function(){return Array.prototype.slice.call(arguments)},yt={},vt=function(t){for(var e in t)if(t[e]===yt)return e;throw Error("!prop")}({provide:String,useValue:yt}),bt=pt.NULL,_t=/\n/gm,wt="\u0275",xt=function(){function t(t,e,n){void 0===e&&(e=bt),void 0===n&&(n=null),this.parent=e,this.source=n;var r=this._records=new Map;r.set(pt,{token:pt,fn:ft,deps:dt,value:this,useNew:!1}),r.set(ct,{token:ct,fn:ft,deps:dt,value:this,useNew:!1}),function t(e,n){if(n)if((n=et(n))instanceof Array)for(var r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw St("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw St("Unexpected provider",n);var i=et(n.provide),o=function(t){var e=function(t){var e=dt,n=t.deps;if(n&&n.length){e=[];for(var r=0;r<n.length;r++){var i=6;if((u=et(n[r]))instanceof Array)for(var o=0,a=u;o<a.length;o++){var s=a[o];s instanceof rt||s==rt?i|=1:s instanceof ot||s==ot?i&=-3:s instanceof it||s==it?i&=-5:u=s instanceof nt?s.token:et(s)}e.push({token:u,options:i})}}else if(t.useExisting){var u;e=[{token:u=et(t.useExisting),options:6}]}else if(!(n||vt in t))throw St("'deps' required",t);return e}(t),n=ft,r=dt,i=!1,o=et(t.provide);if(vt in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)i=!0,n=et(t.useClass);else{if("function"!=typeof o)throw St("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);i=!0,n=o}return{deps:e,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var a=e.get(i);if(a){if(a.fn!==gt)throw Ct(i)}else e.set(i,a={token:n.provide,deps:[],useNew:!1,fn:gt,value:dt});a.deps.push({token:i=n,options:6})}var s=e.get(i);if(s&&s.fn==gt)throw Ct(i);e.set(i,o)}}(r,t)}return t.prototype.get=function(t,e,n){void 0===n&&(n=0);var i=this._records.get(t);try{return function t(e,n,i,o,a,s){try{return function(e,n,i,o,a,s){var u,l;if(!n||4&s)2&s||(l=o.get(e,a,0));else{if((l=n.value)==mt)throw Error(wt+"Circular dependency");if(l===dt){n.value=mt;var c=n.useNew,h=n.fn,p=n.deps,f=dt;if(p.length){f=[];for(var d=0;d<p.length;d++){var m=p[d],g=m.options,y=2&g?i.get(m.token):void 0;f.push(t(m.token,y,i,y||4&g?o:bt,1&g?null:pt.THROW_IF_NOT_FOUND,0))}}n.value=l=c?new((u=h).bind.apply(u,Object(r.f)([void 0],f))):h.apply(void 0,f)}}return l}(e,n,i,o,a,s)}catch(t){throw t instanceof Error||(t=new Error(t)),(t.ngTempTokenPath=t.ngTempTokenPath||[]).unshift(e),n&&n.value==mt&&(n.value=dt),t}}(t,i,this._records,this.parent,e,n)}catch(e){var o=e.ngTempTokenPath;throw t[st]&&o.unshift(t[st]),e.message=Et("\n"+e.message,o,this.source),e.ngTokenPath=o,e.ngTempTokenPath=null,e}},t.prototype.toString=function(){var t=[];return this._records.forEach(function(e,n){return t.push(K(n))}),"StaticInjector["+t.join(", ")+"]"},t}();function Ct(t){return St("Cannot mix multi providers and regular providers",t)}function Et(t,e,n){void 0===n&&(n=null),t=t&&"\n"===t.charAt(0)&&t.charAt(1)==wt?t.substr(2):t;var r=K(e);if(e instanceof Array)r=e.map(K).join(" -> ");else if("object"==typeof e){var i=[];for(var o in e)if(e.hasOwnProperty(o)){var a=e[o];i.push(o+":"+("string"==typeof a?JSON.stringify(a):K(a)))}r="{"+i.join(", ")+"}"}return"StaticInjectorError"+(n?"("+n+")":"")+"["+r+"]: "+t.replace(_t,"\n  ")}function St(t,e){return new Error(Et(t,e))}var Tt=void 0;function At(t){var e=Tt;return Tt=t,e}function Pt(t,e){if(void 0===e&&(e=0),void 0===Tt)throw new Error("inject() must be called from an injection context");if(null===Tt){var n=t.ngInjectableDef;if(n&&"root"==n.providedIn)return void 0===n.value?n.value=n.factory():n.value;if(8&e)return null;throw new Error("Injector: NOT_FOUND ["+K(t)+"]")}return Tt.get(t,8&e?null:void 0,e)}function It(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,o=0,a=0;a<r.length;a++){var s=r[a];s instanceof rt||"Optional"===s.ngMetadataName?o|=8:s instanceof ot||"SkipSelf"===s.ngMetadataName?o|=4:s instanceof it||"Self"===s.ngMetadataName?o|=2:i=s instanceof nt?s.token:s}e.push(Pt(i,o))}else e.push(Pt(r))}return e}var Ot={},Dt=function(t,e){for(var n in t)if(t[n]===e)return n;throw Error("Could not find renamed property on target object.")}({provide:String,useValue:Ot},Ot),kt=[];function Mt(t,e){if(!e){var n=(l=new Y).parameters(t);return function(){return new(t.bind.apply(t,Object(r.f)([void 0],It(n))))}}if(Dt in e){var i=e;return function(){return i.useValue}}if(e.useExisting){var o=e;return function(){return Pt(o.useExisting)}}if(e.useFactory){var a=e;return function(){return a.useFactory.apply(a,Object(r.f)(It(a.deps||kt)))}}if(e.useClass){var s=e,u=e.deps;if(!u){var l=new Y;u=l.parameters(t)}return function(){var t;return new((t=s.useClass).bind.apply(t,Object(r.f)([void 0],It(u))))}}var c=e.deps;return c||(l=new Y,c=l.parameters(t)),function(){return new(t.bind.apply(t,Object(r.f)([void 0],It(c))))}}var Rt=m("Injectable",void 0,void 0,void 0,function(t,e){return n=t,void((r=e)&&void 0!==r.providedIn&&void 0===n.ngInjectableDef&&(n.ngInjectableDef=l({providedIn:r.providedIn,factory:Mt(n,r)})));var n,r}),Nt={name:"custom-elements"},Lt={name:"no-errors-schema"},Ft=m("NgModule",function(t){return t},void 0,void 0,function(t,e){return n=t,o=(i=e)&&i.imports||[],i&&i.exports&&(o=Object(r.f)(o,[i.exports])),void(n.ngInjectorDef=c({factory:Mt(n,{useClass:n}),providers:i&&i.providers,imports:o}));var n,i,o}),Bt=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({}),jt=function(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")},zt=new jt("6.1.3"),Vt="ngDebugContext",Ut="ngOriginalError",qt="ngErrorLogger";function Gt(t){return t[Vt]}function Ht(t){return t[Ut]}function Wt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.error.apply(t,Object(r.f)(e))}var Kt=function(){function t(){this._console=console}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t[qt]||Wt}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)},t.prototype._findContext=function(t){return t?Gt(t)?Gt(t):this._findContext(Ht(t)):null},t.prototype._findOriginalError=function(t){for(var e=Ht(t);e&&Ht(e);)e=Ht(e);return e},t}();function Xt(t){return t.length>1?" ("+function(t){for(var e=[],n=0;n<t.length;++n){if(e.indexOf(t[n])>-1)return e.push(t[n]),e;e.push(t[n])}return e}(t.slice().reverse()).map(function(t){return K(t.token)}).join(" -> ")+")":""}function Qt(t,e,n,r){var i=[e],o=n(i),a=r?function(t,e){var n=o+" caused by: "+(e instanceof Error?e.message:e),r=Error(n);return r[Ut]=e,r}(0,r):Error(o);return a.addKey=Zt,a.keys=i,a.injectors=[t],a.constructResolvingMessage=n,a[Ut]=r,a}function Zt(t,e){this.injectors.push(t),this.keys.push(e),this.message=this.constructResolvingMessage(this.keys)}function Yt(t,e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];n.push(o&&0!=o.length?o.map(K).join(" "):"?")}return Error("Cannot resolve all parameters for '"+K(t)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+K(t)+"' is decorated with Injectable.")}var Jt=function(){function t(t,e){if(this.token=t,this.id=e,!t)throw new Error("Token must be defined!");this.displayName=K(this.token)}return t.get=function(t){return $t.get(et(t))},Object.defineProperty(t,"numberOfKeys",{get:function(){return $t.numberOfKeys},enumerable:!0,configurable:!0}),t}(),$t=new(function(){function t(){this._allKeys=new Map}return t.prototype.get=function(t){if(t instanceof Jt)return t;if(this._allKeys.has(t))return this._allKeys.get(t);var e=new Jt(t,Jt.numberOfKeys);return this._allKeys.set(t,e),e},Object.defineProperty(t.prototype,"numberOfKeys",{get:function(){return this._allKeys.size},enumerable:!0,configurable:!0}),t}()),te=new(function(){function t(t){this.reflectionCapabilities=t}return t.prototype.updateCapabilities=function(t){this.reflectionCapabilities=t},t.prototype.factory=function(t){return this.reflectionCapabilities.factory(t)},t.prototype.parameters=function(t){return this.reflectionCapabilities.parameters(t)},t.prototype.annotations=function(t){return this.reflectionCapabilities.annotations(t)},t.prototype.propMetadata=function(t){return this.reflectionCapabilities.propMetadata(t)},t.prototype.hasLifecycleHook=function(t,e){return this.reflectionCapabilities.hasLifecycleHook(t,e)},t.prototype.getter=function(t){return this.reflectionCapabilities.getter(t)},t.prototype.setter=function(t){return this.reflectionCapabilities.setter(t)},t.prototype.method=function(t){return this.reflectionCapabilities.method(t)},t.prototype.importUri=function(t){return this.reflectionCapabilities.importUri(t)},t.prototype.resourceUri=function(t){return this.reflectionCapabilities.resourceUri(t)},t.prototype.resolveIdentifier=function(t,e,n,r){return this.reflectionCapabilities.resolveIdentifier(t,e,n,r)},t.prototype.resolveEnum=function(t,e){return this.reflectionCapabilities.resolveEnum(t,e)},t}())(new Y),ee=function(){function t(t,e,n){this.key=t,this.optional=e,this.visibility=n}return t.fromKey=function(e){return new t(e,!1,null)},t}(),ne=[],re=function(t,e,n){this.key=t,this.resolvedFactories=e,this.multiProvider=n,this.resolvedFactory=this.resolvedFactories[0]},ie=function(t,e){this.factory=t,this.dependencies=e};function oe(t){return new re(Jt.get(t.provide),[function(t){var e,n;if(t.useClass){var r=et(t.useClass);e=te.factory(r),n=se(r)}else t.useExisting?(e=function(t){return t},n=[ee.fromKey(Jt.get(t.useExisting))]):t.useFactory?(e=t.useFactory,n=function(t,e){if(e){var n=e.map(function(t){return[t]});return e.map(function(e){return ue(t,e,n)})}return se(t)}(t.useFactory,t.deps)):(e=function(){return t.useValue},n=ne);return new ie(e,n)}(t)],t.multi||!1)}function ae(t){var e=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e.get(r.key.id);if(i){if(r.multiProvider!==i.multiProvider)throw Error("Cannot mix multi providers and regular providers, got: "+i+" "+r);if(r.multiProvider)for(var o=0;o<r.resolvedFactories.length;o++)i.resolvedFactories.push(r.resolvedFactories[o]);else e.set(r.key.id,r)}else{var a;a=r.multiProvider?new re(r.key,r.resolvedFactories.slice(),r.multiProvider):r,e.set(r.key.id,a)}}return e}(function t(e,n){return e.forEach(function(e){if(e instanceof F)n.push({provide:e,useClass:e});else if(e&&"object"==typeof e&&void 0!==e.provide)n.push(e);else{if(!(e instanceof Array))throw Error("Invalid provider - only instances of Provider and Type are allowed, got: "+e);t(e,n)}}),n}(t,[]).map(oe),new Map);return Array.from(e.values())}function se(t){var e=te.parameters(t);if(!e)return[];if(e.some(function(t){return null==t}))throw Yt(t,e);return e.map(function(n){return ue(t,n,e)})}function ue(t,e,n){var r=null,i=!1;if(!Array.isArray(e))return le(e instanceof nt?e.token:e,i,null);for(var o=null,a=0;a<e.length;++a){var s=e[a];s instanceof F?r=s:s instanceof nt?r=s.token:s instanceof rt?i=!0:s instanceof it||s instanceof ot?o=s:s instanceof h&&(r=s)}if(null!=(r=et(r)))return le(r,i,o);throw Yt(t,n)}function le(t,e,n){return new ee(Jt.get(t),e,n)}var ce=new Object,he=function(){function t(){}return t.resolve=function(t){return ae(t)},t.resolveAndCreate=function(e,n){var r=t.resolve(e);return t.fromResolvedProviders(r,n)},t.fromResolvedProviders=function(t,e){return new pe(t,e)},t}(),pe=function(){function t(t,e){this._constructionCounter=0,this._providers=t,this.parent=e||null;var n=t.length;this.keyIds=new Array(n),this.objs=new Array(n);for(var r=0;r<n;r++)this.keyIds[r]=t[r].key.id,this.objs[r]=ce}return t.prototype.get=function(t,e){return void 0===e&&(e=lt),this._getByKey(Jt.get(t),null,e)},t.prototype.resolveAndCreateChild=function(t){var e=he.resolve(t);return this.createChildFromResolved(e)},t.prototype.createChildFromResolved=function(e){var n=new t(e);return n.parent=this,n},t.prototype.resolveAndInstantiate=function(t){return this.instantiateResolved(he.resolve([t])[0])},t.prototype.instantiateResolved=function(t){return this._instantiateProvider(t)},t.prototype.getProviderAtIndex=function(t){if(t<0||t>=this._providers.length)throw function(t){return Error("Index "+t+" is out-of-bounds.")}(t);return this._providers[t]},t.prototype._new=function(t){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw Qt(this,t.key,function(t){return"Cannot instantiate cyclic dependency!"+Xt(t)});return this._instantiateProvider(t)},t.prototype._getMaxNumberOfObjects=function(){return this.objs.length},t.prototype._instantiateProvider=function(t){if(t.multiProvider){for(var e=new Array(t.resolvedFactories.length),n=0;n<t.resolvedFactories.length;++n)e[n]=this._instantiate(t,t.resolvedFactories[n]);return e}return this._instantiate(t,t.resolvedFactories[0])},t.prototype._instantiate=function(t,e){var n,i,o,a=this,s=e.factory;try{n=e.dependencies.map(function(t){return a._getByReflectiveDependency(t)})}catch(e){throw e.addKey&&e.addKey(this,t.key),e}try{i=s.apply(void 0,Object(r.f)(n))}catch(e){throw Qt(this,t.key,function(t){var e=K(t[0].token);return o.message+": Error during instantiation of "+e+"!"+Xt(t)+"."},o=e)}return i},t.prototype._getByReflectiveDependency=function(t){return this._getByKey(t.key,t.visibility,t.optional?null:lt)},t.prototype._getByKey=function(e,n,r){return e===t.INJECTOR_KEY?this:n instanceof it?this._getByKeySelf(e,r):this._getByKeyDefault(e,r,n)},t.prototype._getObjByKeyId=function(t){for(var e=0;e<this.keyIds.length;e++)if(this.keyIds[e]===t)return this.objs[e]===ce&&(this.objs[e]=this._new(this._providers[e])),this.objs[e];return ce},t.prototype._throwOrNull=function(t,e){if(e!==lt)return e;throw function(t,e){return Qt(t,e,function(t){return"No provider for "+K(t[0].token)+"!"+Xt(t)})}(this,t)},t.prototype._getByKeySelf=function(t,e){var n=this._getObjByKeyId(t.id);return n!==ce?n:this._throwOrNull(t,e)},t.prototype._getByKeyDefault=function(e,n,r){var i;for(i=r instanceof ot?this.parent:this;i instanceof t;){var o=i,a=o._getObjByKeyId(e.id);if(a!==ce)return a;i=o.parent}return null!==i?i.get(e.token,n):this._throwOrNull(e,n)},Object.defineProperty(t.prototype,"displayName",{get:function(){return"ReflectiveInjector(providers: ["+function(t,e){for(var n=new Array(t._providers.length),r=0;r<t._providers.length;++r)n[r]=' "'+t.getProviderAtIndex(r).key.displayName+'" ';return n}(this).join(", ")+"])"},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.displayName},t.INJECTOR_KEY=Jt.get(pt),t}(),fe=new h("The presence of this token marks an injector as being the root injector."),de={},me={},ge=[],ye=void 0;function ve(){return void 0===ye&&(ye=new ht),ye}function be(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),e=e||ve(),new _e(t,n,e)}var _e=function(){function t(t,e,n){var r=this;this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this.destroyed=!1,Ce([t],function(t){return r.processInjectorType(t,new Set)}),e&&Ce(e,function(t){return r.processProvider(t)}),this.records.set(ct,xe(void 0,this)),this.isRootInjector=this.records.has(fe),this.injectorDefTypes.forEach(function(t){return r.get(t)})}return t.prototype.destroy=function(){this.assertNotDestroyed(),this.destroyed=!0;try{this.onDestroy.forEach(function(t){return t.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}},t.prototype.get=function(t,e,n){void 0===e&&(e=lt),void 0===n&&(n=0),this.assertNotDestroyed();var r,i=At(this);try{if(!(4&n)){var o=this.records.get(t);if(void 0===o){var a=("function"==typeof(r=t)||"object"==typeof r&&r instanceof h)&&t.ngInjectableDef||void 0;void 0!==a&&this.injectableDefInScope(a)&&(o=we(t),this.records.set(t,o))}if(void 0!==o)return this.hydrate(t,o)}return 2&n&&ve(),this.parent.get(t,e)}finally{At(i)}},t.prototype.assertNotDestroyed=function(){if(this.destroyed)throw new Error("Injector has already been destroyed.")},t.prototype.processInjectorType=function(t,e){var n=this,r=(t=et(t)).ngInjectorDef,i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,a=void 0!==i&&t.providers||ge;if(void 0!==i&&(r=i.ngInjectorDef),null!=r){if(e.has(o))throw new Error("Circular dependency: type "+K(o)+" ends up importing itself.");if(this.injectorDefTypes.add(o),this.records.set(o,xe(r.factory)),null!=r.imports){e.add(o);try{Ce(r.imports,function(t){return n.processInjectorType(t,e)})}finally{e.delete(o)}}null!=r.providers&&Ce(r.providers,function(t){return n.processProvider(t)}),Ce(a,function(t){return n.processProvider(t)})}},t.prototype.processProvider=function(t){var e=Ee(t=et(t))?t:et(t.provide),n=function(t){var e=et(t),n=de,i=void 0;if(Ee(t))return we(t);if(e=et(t.provide),vt in t)n=t.useValue;else if(t.useExisting)i=function(){return Pt(t.useExisting)};else if(t.useFactory)i=function(){return t.useFactory.apply(t,Object(r.f)(It(t.deps||[])))};else{var o=t.useClass||e;if(!t.deps)return we(o);i=function(){return new(o.bind.apply(o,Object(r.f)([void 0],It(t.deps))))}}return xe(i,n)}(t);if(Ee(t)||!0!==t.multi){var i=this.records.get(e);if(i&&void 0!==i.multi)throw new Error("Mixed multi-provider for "+K(e))}else{var o=this.records.get(e);if(o){if(void 0===o.multi)throw new Error("Mixed multi-provider for "+e+".")}else(o=xe(void 0,de,!0)).factory=function(){return It(o.multi)},this.records.set(e,o);e=t,o.multi.push(t)}this.records.set(e,n)},t.prototype.hydrate=function(t,e){if(e.value===me)throw new Error("Circular dep for "+K(t));var n;return e.value===de&&(e.value=me,e.value=e.factory()),"object"==typeof e.value&&e.value&&"object"==typeof(n=e.value)&&null!=n&&n.ngOnDestroy&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value},t.prototype.injectableDefInScope=function(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||"root"===t.providedIn&&this.isRootInjector:this.injectorDefTypes.has(t.providedIn))},t}();function we(t){var e=t.ngInjectableDef;if(void 0===e){if(t instanceof h)throw new Error("Token "+K(t)+" is missing an ngInjectableDef definition.");return xe(function(){return new t})}return xe(e.factory)}function xe(t,e,n){return void 0===e&&(e=de),void 0===n&&(n=!1),{factory:t,value:e,multi:n?[]:void 0}}function Ce(t,e){t.forEach(function(t){return Array.isArray(t)?Ce(t,e):e(t)})}function Ee(t){return"function"==typeof t}function Se(t){return!!t&&"function"==typeof t.then}function Te(t){return!!t&&"function"==typeof t.subscribe}var Ae=new h("Application Initializer"),Pe=function(){function t(t){var e=this;this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.runInitializers=function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();Se(i)&&e.push(i)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}},t}(),Ie=new h("AppId");function Oe(){return""+ke()+ke()+ke()}var De={provide:Ie,useFactory:Oe,deps:[]};function ke(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Me=new h("Platform Initializer"),Re=new h("Platform ID"),Ne=new h("appBootstrapListener"),Le=new h("Application Packages Root URL"),Fe=function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.warn=function(t){console.warn(t)},t}(),Be=function(t,e){this.ngModuleFactory=t,this.componentFactories=e};function je(){throw new Error("Runtime compiler is not loaded")}var ze=function(){function t(){}return t.prototype.compileModuleSync=function(t){throw je()},t.prototype.compileModuleAsync=function(t){throw je()},t.prototype.compileModuleAndAllComponentsSync=function(t){throw je()},t.prototype.compileModuleAndAllComponentsAsync=function(t){throw je()},t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t.prototype.getModuleId=function(t){},t}(),Ve=new h("compilerOptions"),Ue=function(){},qe=function(){},Ge=function(){};function He(t){var e=Error("No component factory found for "+K(t)+". Did you add it to @NgModule.entryComponents?");return e[Xe]=t,e}var We,Ke,Xe="ngComponent",Qe=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw He(t)},t}(),Ze=function(){function t(){}return t.NULL=new Qe,t}(),Ye=function(){function t(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(var r=0;r<t.length;r++){var i=t[r];this._factories.set(i.componentType,i)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw He(t);return new Je(e,this._ngModule)},t}(),Je=function(t){function e(e,n){var r=t.call(this)||this;return r.factory=e,r.ngModule=n,r.selector=e.selector,r.componentType=e.componentType,r.ngContentSelectors=e.ngContentSelectors,r.inputs=e.inputs,r.outputs=e.outputs,r}return Object(r.c)(e,t),e.prototype.create=function(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)},e}(Ge),$e=function(){},tn=function(){};function en(){var t=V.wtf;return!(!t||!(We=t.trace)||(Ke=We.events,0))}function nn(t,e){return void 0===e&&(e=null),Ke.createScope(t,e)}function rn(t,e){return We.leaveScope(t,e),e}function on(t,e){return We.beginTimeRange(t,e)}function an(t){We.endTimeRange(t)}var sn=en();function un(t,e){return null}var ln=sn?nn:function(t,e){return un},cn=sn?rn:function(t,e){return e},hn=sn?on:function(t,e){return null},pn=sn?an:function(t){return null},fn=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.__isAsync=e,n}return Object(r.c)(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,r){var o,a=function(t){return null},s=function(){return null};e&&"object"==typeof e?(o=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(a=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(s=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(o=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(a=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),r&&(s=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var u=t.prototype.subscribe.call(this,o,a,s);return e instanceof i.a&&e.add(u),u},e}(o.a),dn=function(){function t(t){var e,n=t.enableLongStackTrace,r=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fn(!1),this.onMicrotaskEmpty=new fn(!1),this.onStable=new fn(!1),this.onError=new fn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,n,r,i,o,a){try{return vn(e),t.invokeTask(r,i,o,a)}finally{bn(e)}},onInvoke:function(t,n,r,i,o,a,s){try{return vn(e),t.invoke(r,i,o,a,s)}finally{bn(e)}},onHasTask:function(t,n,r,i){t.hasTask(r,i),n===r&&("microTask"==i.change?(e.hasPendingMicrotasks=i.microTask,yn(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,n,r,i){return t.handleError(r,i),e.runOutsideAngular(function(){return e.onError.emit(i)}),!1}})}return t.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},t.assertInAngularZone=function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},t.assertNotInAngularZone=function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},t.prototype.run=function(t,e,n){return this._inner.run(t,e,n)},t.prototype.runTask=function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,gn,mn,mn);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}},t.prototype.runGuarded=function(t,e,n){return this._inner.runGuarded(t,e,n)},t.prototype.runOutsideAngular=function(t){return this._outer.run(t)},t}();function mn(){}var gn={};function yn(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function vn(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function bn(t){t._nesting--,yn(t)}var _n=function(){function t(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fn,this.onMicrotaskEmpty=new fn,this.onStable=new fn,this.onError=new fn}return t.prototype.run=function(t){return t()},t.prototype.runGuarded=function(t){return t()},t.prototype.runOutsideAngular=function(t){return t()},t.prototype.runTask=function(t){return t()},t}(),wn=function(){function t(t){var e=this;this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents(),t.run(function(){e.taskTrackingZone=Zone.current.get("TaskTrackingZone")})}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){dn.assertNotInAngularZone(),H(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;if(this.isStable())H(function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1});else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)}),this._didWork=!0}},t.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(t){return{source:t.source,isPeriodic:t.data.isPeriodic,delay:t.data.delay,creationLocation:t.creationLocation,xhr:t.data.target}}):[]},t.prototype.addCallback=function(t,e,n){var r=this,i=-1;e&&e>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(t){return t.timeoutId!==i}),t(r._didWork,r.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})},t.prototype.whenStable=function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findProviders=function(t,e,n){return[]},t}(),xn=function(){function t(){this._applications=new Map,Sn.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.unregisterApplication=function(t){this._applications.delete(t)},t.prototype.unregisterAllApplications=function(){this._applications.clear()},t.prototype.getTestability=function(t){return this._applications.get(t)||null},t.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},t.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),Sn.findTestabilityInTree(this,t,e)},t.ctorParameters=function(){return[]},t}();function Cn(t){Sn=t}var En,Sn=new(function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,n){return null},t}()),Tn=!0,An=!1,Pn=new h("AllowMultipleToken");function In(){if(An)throw new Error("Cannot enable prod mode after platform setup.");Tn=!1}function On(){return An=!0,Tn}var Dn=function(t,e){this.name=t,this.token=e};function kn(t){if(En&&!En.destroyed&&!En.injector.get(Pn,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");En=t.get(Fn);var e=t.get(Me,null);return e&&e.forEach(function(t){return t()}),En}function Mn(t,e,n){void 0===n&&(n=[]);var r="Platform: "+e,i=new h(r);return function(e){void 0===e&&(e=[]);var o=Ln();if(!o||o.injector.get(Pn,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var a=n.concat(e).concat({provide:i,useValue:!0});kn(pt.create({providers:a,name:r}))}return Rn(i)}}function Rn(t){var e=Ln();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}function Nn(){En&&!En.destroyed&&En.destroy()}function Ln(){return En&&!En.destroyed?En:null}var Fn=function(){function t(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return t.prototype.bootstrapModuleFactory=function(t,e){var n,r=this,i="noop"===(n=e?e.ngZone:void 0)?new _n:("zone.js"===n?void 0:n)||new dn({enableLongStackTrace:On()}),o=[{provide:dn,useValue:i}];return i.run(function(){var e=pt.create({providers:o,parent:r.injector,name:t.moduleType.name}),n=t.create(e),a=n.injector.get(Kt,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return zn(r._modules,n)}),i.runOutsideAngular(function(){return i.onError.subscribe({next:function(t){a.handleError(t)}})}),function(t,e,i){try{var o=((a=n.injector.get(Pe)).runInitializers(),a.donePromise.then(function(){return r._moduleDoBootstrap(n),n}));return Se(o)?o.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):o}catch(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}var a}(a,i)})},t.prototype.bootstrapModule=function(t,e){var n=this;void 0===e&&(e=[]);var r=this.injector.get(Ue),i=Bn({},e);return r.createCompiler([i]).compileModuleAsync(t).then(function(t){return n.bootstrapModuleFactory(t,i)})},t.prototype._moduleDoBootstrap=function(t){var e=t.injector.get(jn);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module "+K(t.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');t.instance.ngDoBootstrap(e)}this._modules.push(t)},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(t.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),t}();function Bn(t,e){return Array.isArray(e)?e.reduce(Bn,t):Object(r.a)({},t,e)}var jn=function(){function t(t,e,n,r,i,o){var l=this;this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=On(),this._zone.onMicrotaskEmpty.subscribe({next:function(){l._zone.run(function(){l.tick()})}});var c=new a.a(function(t){l._stable=l._zone.isStable&&!l._zone.hasPendingMacrotasks&&!l._zone.hasPendingMicrotasks,l._zone.runOutsideAngular(function(){t.next(l._stable),t.complete()})}),h=new a.a(function(t){var e;l._zone.runOutsideAngular(function(){e=l._zone.onStable.subscribe(function(){dn.assertNotInAngularZone(),H(function(){l._stable||l._zone.hasPendingMacrotasks||l._zone.hasPendingMicrotasks||(l._stable=!0,t.next(!0))})})});var n=l._zone.onUnstable.subscribe(function(){dn.assertInAngularZone(),l._stable&&(l._stable=!1,l._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,h.pipe(Object(u.a)()))}return t.prototype.bootstrap=function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof Ge?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n instanceof Je?null:this._injector.get($e),o=n.create(pt.NULL,[],e||n.selector,i);o.onDestroy(function(){r._unloadComponent(o)});var a=o.injector.get(wn,null);return a&&o.injector.get(xn).registerApplication(o.location.nativeElement,a),this._loadComponent(o),On()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o},t.prototype.tick=function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=t._tickScope();try{this._runningTick=!0,this._views.forEach(function(t){return t.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(t){return t.checkNoChanges()})}catch(t){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(t)})}finally{this._runningTick=!1,cn(n)}},t.prototype.attachView=function(t){var e=t;this._views.push(e),e.attachToAppRef(this)},t.prototype.detachView=function(t){var e=t;zn(this._views,e),e.detachFromAppRef()},t.prototype._loadComponent=function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ne,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})},t.prototype._unloadComponent=function(t){this.detachView(t.hostView),zn(this.components,t)},t.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(t){return t.destroy()})},Object.defineProperty(t.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),t._tickScope=ln("ApplicationRef#tick()"),t}();function zn(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var Vn=function(t,e,n,r,i,o){this.id=t,this.templateUrl=e,this.slotCount=n,this.encapsulation=r,this.styles=i,this.animations=o},Un=function(){},qn=function(){},Gn=function(){},Hn=function(){},Wn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({}),Kn=function(){},Xn=function(t){this.nativeElement=t},Qn=function(){},Zn=new Map;function Yn(t,e){var n=Zn.get(t);if(n)throw new Error("Duplicate module registered for "+t+" - "+n.moduleType.name+" vs "+e.moduleType.name);Zn.set(t,e)}function Jn(t){var e=Zn.get(t);if(!e)throw new Error("No module with ID "+t+" loaded");return e}var $n=function(){function t(){this.dirty=!0,this._results=[],this.changes=new fn,this.length=0}return t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.find=function(t){return this._results.find(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[G()]=function(){return this._results[G()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=function t(e){return e.reduce(function(e,n){var r=Array.isArray(n)?t(n):n;return e.concat(r)},[])}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},t.prototype.notifyOnChanges=function(){this.changes.emit(this)},t.prototype.setDirty=function(){this.dirty=!0},t.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},t}(),tr=function(){},er={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},nr=function(){function t(t,e){this._compiler=t,this._config=e||er}return t.prototype.load=function(t){return this._compiler instanceof ze?this.loadFactory(t):this.loadAndCompile(t)},t.prototype.loadAndCompile=function(t){var e=this,i=Object(r.e)(t.split("#"),2),o=i[0],a=i[1];return void 0===a&&(a="default"),n("crnd")(o).then(function(t){return t[a]}).then(function(t){return rr(t,o,a)}).then(function(t){return e._compiler.compileModuleAsync(t)})},t.prototype.loadFactory=function(t){var e=Object(r.e)(t.split("#"),2),i=e[0],o=e[1],a="NgFactory";return void 0===o&&(o="default",a=""),n("crnd")(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(function(t){return t[o+a]}).then(function(t){return rr(t,i,o)})},t}();function rr(t,e,n){if(!t)throw new Error("Cannot find '"+n+"' in '"+e+"'");return t}var ir=function(){},or=function(){},ar=function(){},sr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e}(ar),ur=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e}(sr),lr=function(){function t(t,e,n){this._debugContext=n,this.nativeNode=t,e&&e instanceof cr?e.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(t.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),t}(),cr=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return i.properties={},i.attributes={},i.classes={},i.styles={},i.childNodes=[],i.nativeElement=e,i}return Object(r.c)(e,t),e.prototype.addChild=function(t){t&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var n,i=this,o=this.childNodes.indexOf(t);-1!==o&&((n=this.childNodes).splice.apply(n,Object(r.f)([o+1,0],e)),e.forEach(function(t){t.parent&&t.parent.removeChild(t),t.parent=i}))},e.prototype.insertBefore=function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))},e.prototype.query=function(t){return this.queryAll(t)[0]||null},e.prototype.queryAll=function(t){var e=[];return pr(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return fr(this,t,e),e},Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes.filter(function(t){return t instanceof e})},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})},e}(lr);function hr(t){return t.map(function(t){return t.nativeElement})}function pr(t,e,n){t.childNodes.forEach(function(t){t instanceof cr&&(e(t)&&n.push(t),pr(t,e,n))})}function fr(t,e,n){t instanceof cr&&t.childNodes.forEach(function(t){e(t)&&n.push(t),t instanceof cr&&fr(t,e,n)})}var dr=new Map;function mr(t){return dr.get(t)||null}function gr(t){dr.set(t.nativeNode,t)}function yr(t,e){var n=_r(t),r=_r(e);return n&&r?function(t,e,n){for(var r=t[G()](),i=e[G()]();;){var o=r.next(),a=i.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!n(o.value,a.value))return!1}}(t,e,yr):!(n||!t||"object"!=typeof t&&"function"!=typeof t||r||!e||"object"!=typeof e&&"function"!=typeof e)||W(t,e)}var vr=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t.unwrap=function(e){return t.isWrapped(e)?e.wrapped:e},t.isWrapped=function(e){return e instanceof t},t}(),br=function(){function t(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}return t.prototype.isFirstChange=function(){return this.firstChange},t}();function _r(t){return!!wr(t)&&(Array.isArray(t)||!(t instanceof Map)&&G()in t)}function wr(t){return null!==t&&("function"==typeof t||"object"==typeof t)}var xr=function(){function t(){}return t.prototype.supports=function(t){return _r(t)},t.prototype.create=function(t){return new Er(t)},t}(),Cr=function(t,e){return e},Er=function(){function t(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Cr}return t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<Pr(n,r,i)?e:n,a=Pr(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,l=s-r;if(u!=l){for(var c=0;c<u;c++){var h=c<i.length?i[c]:i[c]=0,p=h+c;l<=p&&p<u&&(i[c]=h+1)}i[o.previousIndex]=l-u}}a!==s&&t(o,a,s)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(null==t&&(t=[]),!_r(t))throw new Error("Error trying to diff '"+K(t)+"'. Only arrays and iterables are allowed");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)i=this._trackByFn(s,r=t[s]),null!==o&&W(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),W(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r=t[G()](),i=void 0;!(i=r.next()).done;)e(i.value)}(t,function(t){i=e._trackByFn(n,t),null!==o&&W(o.trackById,i)?(a&&(o=e._verifyReinsertion(o,t,i,n)),W(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),a=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=t,this.isDirty},Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t=void 0,e=void 0;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(W(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(W(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Sr(e,n),i,r),t},t.prototype._verifyReinsertion=function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._moveAfter=function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._addAfter=function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ar),this._linkedRecords.put(t),t.currentIndex=n,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ar),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t},t}(),Sr=function(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Tr=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&W(n.trackById,t))return n;return null},t.prototype.remove=function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head},t}(),Ar=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=t.trackById,n=this.map.get(e);n||(n=new Tr,this.map.set(e,n)),n.add(t)},t.prototype.get=function(t,e){var n=this.map.get(t);return n?n.get(t,e):null},t.prototype.remove=function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t}();function Pr(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var Ir=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||wr(t)},t.prototype.create=function(){return new Or},t}(),Or=function(){function t(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||wr(t)))throw new Error("Error trying to diff '"+K(t)+"'. Only maps and objects are allowed")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},t.prototype._insertBeforeOrAppend=function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null},t.prototype._getOrCreateRecordForKey=function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new Dr(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},t.prototype._maybeAddToChanges=function(t,e){W(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})},t}(),Dr=function(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},kr=function(){function t(t){this.factories=t}return t.create=function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ot,new rt]]}},t.prototype.find=function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'")},t.ngInjectableDef=l({providedIn:"root",factory:function(){return new t([new xr])}}),t}(),Mr=function(){function t(t){this.factories=t}return t.create=function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ot,new rt]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '"+t+"'")},t}(),Rr=[new Ir],Nr=new kr([new xr]),Lr=new Mr(Rr),Fr=Mn(null,"core",[{provide:Re,useValue:"unknown"},{provide:Fn,deps:[pt]},{provide:xn,deps:[]},{provide:Fe,deps:[]}]),Br=new h("LocaleId"),jr=new h("Translations"),zr=new h("TranslationsFormat"),Vr=function(t){return t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Ignore=2]="Ignore",t}({});function Ur(){return Nr}function qr(){return Lr}function Gr(t){return t||"en-US"}var Hr=[{provide:jn,useClass:jn,deps:[dn,Fe,pt,Kt,Ze,Pe]},{provide:Pe,useClass:Pe,deps:[[new rt,Ae]]},{provide:ze,useClass:ze,deps:[]},De,{provide:kr,useFactory:Ur,deps:[]},{provide:Mr,useFactory:qr,deps:[]},{provide:Br,useFactory:Gr,deps:[[new nt(Br),new rt,new ot]]}],Wr=function(t){};function Kr(t){var e=[],n=new Map;function r(r){var i=n.get(r);if(!i){var o=t(r);n.set(r,i=o.then(Qr)),e.push(i)}return i}return Xr.forEach(function(t){t.templateUrl&&r(t.templateUrl).then(function(e){t.template=e,t.templateUrl=void 0});var e=t.styleUrls,n=t.styles||(t.styles=[]),i=t.styles.length;e&&e.forEach(function(o,a){n.push(""),r(o).then(function(r){n[i+a]=r,e.splice(e.indexOf(o),1),0==e.length&&(t.styleUrls=void 0)})})}),Xr.clear(),Promise.all(e).then(function(){return null})}var Xr=new Set;function Qr(t){return"string"==typeof t?t:t.text()}var Zr=function(){function t(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement("body"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return t.prototype.getInertBodyElement_XHR=function(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(t){return null}var e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(null);var n=e.response.body;return n.removeChild(n.firstChild),n},t.prototype.getInertBodyElement_DOMParser=function(t){t="<body><remove></remove>"+t+"</body>";try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(t){return null}},t.prototype.getInertBodyElement_InertDocument=function(t){var e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},t.prototype.stripCustomNsAttrs=function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.removeAttribute(r)}for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling},t}(),Yr=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Jr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function $r(t){return(t=String(t)).match(Yr)||t.match(Jr)?t:(On()&&console.warn("WARNING: sanitizing unsafe URL value "+t+" (see http://g.co/ng/security#xss)"),"unsafe:"+t)}function ti(t){var e,n,i={};try{for(var o=Object(r.g)(t.split(",")),a=o.next();!a.done;a=o.next())i[a.value]=!0}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}function ei(){for(var t,e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o={};try{for(var a=Object(r.g)(n),s=a.next();!s.done;s=a.next()){var u=s.value;for(var l in u)u.hasOwnProperty(l)&&(o[l]=!0)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return o}var ni,ri=ti("area,br,col,hr,img,wbr"),ii=ti("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),oi=ti("rp,rt"),ai=ei(oi,ii),si=ei(ri,ei(ii,ti("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ei(oi,ti("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ai),ui=ti("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),li=ti("srcset"),ci=ei(ui,li,ti("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),hi=function(){function t(){this.sanitizedSomething=!1,this.buf=[]}return t.prototype.sanitizeChildren=function(t){for(var e=t.firstChild;e;)if(e.nodeType===Node.ELEMENT_NODE?this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var n=this.checkClobberedElement(e,e.nextSibling);if(n){e=n;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")},t.prototype.startElement=function(t){var e=t.nodeName.toLowerCase();if(si.hasOwnProperty(e)){this.buf.push("<"),this.buf.push(e);for(var n,r=t.attributes,i=0;i<r.length;i++){var o=r.item(i),a=o.name,s=a.toLowerCase();if(ci.hasOwnProperty(s)){var u=o.value;ui[s]&&(u=$r(u)),li[s]&&(n=u,u=(n=String(n)).split(",").map(function(t){return $r(t.trim())}).join(", ")),this.buf.push(" ",a,'="',di(u),'"')}else this.sanitizedSomething=!0}this.buf.push(">")}else this.sanitizedSomething=!0},t.prototype.endElement=function(t){var e=t.nodeName.toLowerCase();si.hasOwnProperty(e)&&!ri.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},t.prototype.chars=function(t){this.buf.push(di(t))},t.prototype.checkClobberedElement=function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e},t}(),pi=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fi=/([^\#-~ |!])/g;function di(t){return t.replace(/&/g,"&amp;").replace(pi,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(fi,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function mi(t,e){var n=null;try{ni=ni||new Zr(t);var r=e?String(e):"";n=ni.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=ni.getInertBodyElement(r)}while(r!==o);var a=new hi,s=a.sanitizeChildren(gi(n)||n);return On()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),s}finally{if(n)for(var u=gi(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}function gi(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var yi=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),vi=/^url\(([^)]+)\)$/;function bi(t){if(!(t=String(t).trim()))return"";var e=t.match(vi);return e&&$r(e[1])===e[1]||t.match(yi)&&function(t){for(var e=!0,n=!0,r=0;r<t.length;r++){var i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(On()&&console.warn("WARNING: sanitizing unsafe style value "+t+" (see http://g.co/ng/security#xss)."),"unsafe")}var _i=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({}),wi=function(){};function xi(t,e,n){var r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function Ci(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Ei(t,e){return t.nodes[e]}function Si(t,e){return t.nodes[e]}function Ti(t,e){return t.nodes[e]}function Ai(t,e){return t.nodes[e]}function Pi(t,e){return t.nodes[e]}var Ii=function(){},Oi={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function Di(t,e,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+e+"'. Current value: '"+n+"'.";return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return ki(n,e),n}(i,t)}function ki(t,e){t[Vt]=e,t[qt]=e.logError.bind(e)}function Mi(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+t)}var Ri=function(){},Ni=new Map;function Li(t){var e=Ni.get(t);return e||(e=K(t)+"_"+Ni.size,Ni.set(t,e)),e}function Fi(t,e,n,r){if(vr.isWrapped(r)){r=vr.unwrap(r);var i=t.def.nodes[e].bindingIndex+n,o=vr.unwrap(t.oldValues[i]);t.oldValues[i]=new vr(o)}return r}var Bi="$$undefined",ji="$$empty";function zi(t){return{id:Bi,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var Vi=0;function Ui(t){if(t&&t.id===Bi){var e=null!=t.encapsulation&&t.encapsulation!==Bt.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+Vi++:ji}return t&&t.id===ji&&(t=null),t||null}function qi(t,e,n,r){return!(!(2&t.state)&&W(t.oldValues[e.bindingIndex+n],r))}function Gi(t,e,n,r){return!!qi(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function Hi(t,e,n,r){var i=t.oldValues[e.bindingIndex+n];if(1&t.state||!yr(i,r)){var o=e.bindings[n].name;throw Di(Oi.createDebugContext(t,e.nodeIndex),o+": "+i,o+": "+r,0!=(1&t.state))}}function Wi(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function Ki(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function Xi(t,e,n,r){try{return Wi(33554432&t.def.nodes[e].flags?Si(t,e).componentView:t),Oi.handleEvent(t,e,n,r)}catch(e){t.root.errorHandler.handleError(e)}}function Qi(t){return t.parent?Si(t.parent,t.parentNodeDef.nodeIndex):null}function Zi(t){return t.parent?t.parentNodeDef.parent:null}function Yi(t,e){switch(201347067&e.flags){case 1:return Si(t,e.nodeIndex).renderElement;case 2:return Ei(t,e.nodeIndex).renderText}}function Ji(t,e){return t?t+":"+e:e}function $i(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function to(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function eo(t){return 1<<t%32}function no(t){var e={},n=0,i={};return t&&t.forEach(function(t){var o=Object(r.e)(t,2),a=o[0],s=o[1];"number"==typeof a?(e[a]=s,n|=eo(a)):i[a]=s}),{matchedQueries:e,references:i,matchedQueryIds:n}}function ro(t,e){return t.map(function(t){var n,i,o;return Array.isArray(t)?(o=(n=Object(r.e)(t,2))[0],i=n[1]):(o=0,i=t),i&&("function"==typeof i||"object"==typeof i)&&e&&Object.defineProperty(i,st,{value:e,configurable:!0}),{flags:o,token:i,tokenKey:Li(i)}})}function io(t,e,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===Bt.Native?Si(t,n.renderParent.nodeIndex).renderElement:void 0:e}var oo=new WeakMap;function ao(t){var e=oo.get(t);return e||((e=t(function(){return Ri})).factory=t,oo.set(t,e)),e}function so(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(Yi(t,t.def.lastRenderRootNode))),uo(t,e,0,t.def.nodes.length-1,n,r,i)}function uo(t,e,n,r,i,o,a){for(var s=n;s<=r;s++){var u=t.def.nodes[s];11&u.flags&&co(t,u,e,i,o,a),s+=u.childCount}}function lo(t,e,n,r,i,o){for(var a=t;a&&!$i(a);)a=a.parent;for(var s=a.parent,u=Zi(a),l=u.nodeIndex+u.childCount,c=u.nodeIndex+1;c<=l;c++){var h=s.def.nodes[c];h.ngContentIndex===e&&co(s,h,n,r,i,o),c+=h.childCount}if(!s.parent){var p=t.root.projectableNodes[e];if(p)for(c=0;c<p.length;c++)ho(t,p[c],n,r,i,o)}}function co(t,e,n,r,i,o){if(8&e.flags)lo(t,e.ngContent.index,n,r,i,o);else{var a=Yi(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&ho(t,a,n,r,i,o),32&e.bindingFlags&&ho(Si(t,e.nodeIndex).componentView,a,n,r,i,o)):ho(t,a,n,r,i,o),16777216&e.flags)for(var s=Si(t,e.nodeIndex).viewContainer._embeddedViews,u=0;u<s.length;u++)so(s[u],n,r,i,o);1&e.flags&&!e.element.name&&uo(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,o)}}function ho(t,e,n,r,i,o){var a=t.renderer;switch(n){case 1:a.appendChild(r,e);break;case 2:a.insertBefore(r,e,i);break;case 3:a.removeChild(r,e);break;case 0:o.push(e)}}var po=/^:([^:]+):(.+)$/;function fo(t){if(":"===t[0]){var e=t.match(po);return[e[1],e[2]]}return["",t]}function mo(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}function go(t,e){for(var n="",r=0;r<2*t;r+=2)n=n+e[r]+vo(e[r+1]);return n+e[2*t]}function yo(t,e,n,r,i,o,a,s,u,l,c,h,p,f,d,m,g,y,v,b){switch(t){case 1:return e+vo(n)+r;case 2:return e+vo(n)+r+vo(i)+o;case 3:return e+vo(n)+r+vo(i)+o+vo(a)+s;case 4:return e+vo(n)+r+vo(i)+o+vo(a)+s+vo(u)+l;case 5:return e+vo(n)+r+vo(i)+o+vo(a)+s+vo(u)+l+vo(c)+h;case 6:return e+vo(n)+r+vo(i)+o+vo(a)+s+vo(u)+l+vo(c)+h+vo(p)+f;case 7:return e+vo(n)+r+vo(i)+o+vo(a)+s+vo(u)+l+vo(c)+h+vo(p)+f+vo(d)+m;case 8:return e+vo(n)+r+vo(i)+o+vo(a)+s+vo(u)+l+vo(c)+h+vo(p)+f+vo(d)+m+vo(g)+y;case 9:return e+vo(n)+r+vo(i)+o+vo(a)+s+vo(u)+l+vo(c)+h+vo(p)+f+vo(d)+m+vo(g)+y+vo(v)+b;default:throw new Error("Does not support more than 9 expressions")}}function vo(t){return null!=t?t.toString():""}var bo=[],_o={};function wo(t,e,n,r,i,o){t|=1;var a=no(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:a.matchedQueries,matchedQueryIds:a.matchedQueryIds,references:a.references,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?ao(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Ri},provider:null,text:null,query:null,ngContent:null}}function xo(t,e,n,i,o,a,s,u,l,c,h,p){var f;void 0===s&&(s=[]),c||(c=Ri);var d=no(n),m=d.matchedQueries,g=d.references,y=d.matchedQueryIds,v=null,b=null;a&&(v=(f=Object(r.e)(fo(a),2))[0],b=f[1]),u=u||[];for(var _=new Array(u.length),w=0;w<u.length;w++){var x=Object(r.e)(u[w],3),C=x[0],E=x[1],S=x[2],T=Object(r.e)(fo(E),2),A=T[0],P=T[1],I=void 0,O=void 0;switch(15&C){case 4:O=S;break;case 1:case 8:I=S}_[w]={flags:C,ns:A,name:P,nonMinifiedName:P,securityContext:I,suffix:O}}l=l||[];var D=new Array(l.length);for(w=0;w<l.length;w++){var k=Object(r.e)(l[w],2);D[w]={type:0,target:k[0],eventName:k[1],propName:null}}var M=(s=s||[]).map(function(t){var e=Object(r.e)(t,2),n=e[0],i=e[1],o=Object(r.e)(fo(n),2);return[o[0],o[1],i]});return p=Ui(p),h&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:m,matchedQueryIds:y,references:g,ngContentIndex:i,childCount:o,bindings:_,bindingFlags:mo(_),outputs:D,element:{ns:v,name:b,attrs:M,template:null,componentProvider:null,componentView:h||null,componentRendererType:p,publicProviders:null,allProviders:null,handleEvent:c||Ri},provider:null,text:null,query:null,ngContent:null}}function Co(t,e,n){var i,o=n.element,a=t.root.selectorOrNode,s=t.renderer;if(t.parent||!a){i=o.name?s.createElement(o.name,o.ns):s.createComment("");var u=io(t,e,n);u&&s.appendChild(u,i)}else i=s.selectRootElement(a);if(o.attrs)for(var l=0;l<o.attrs.length;l++){var c=Object(r.e)(o.attrs[l],3);s.setAttribute(i,c[1],c[2],c[0])}return i}function Eo(t,e,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],a=So(t,n.nodeIndex,Ji(o.target,o.eventName)),s=o.target,u=t;"component"===o.target&&(s=null,u=e);var l=u.renderer.listen(s||r,o.eventName,a);t.disposables[n.outputIndex+i]=l}}function So(t,e,n){return function(r){return Xi(t,e,n,r)}}function To(t,e,n,r){if(!Gi(t,e,n,r))return!1;var i=e.bindings[n],o=Si(t,e.nodeIndex),a=o.renderElement,s=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,o){var a=e.securityContext,s=a?t.root.sanitizer.sanitize(a,o):o;s=null!=s?s.toString():null;var u=t.renderer;null!=o?u.setAttribute(n,i,s,r):u.removeAttribute(n,i,r)}(t,i,a,i.ns,s,r);break;case 2:!function(t,e,n,r){var i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,a,s,r);break;case 4:!function(t,e,n,r,i){var o=t.root.sanitizer.sanitize(_i.STYLE,i);if(null!=o){o=o.toString();var a=e.suffix;null!=a&&(o+=a)}else o=null;var s=t.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(t,i,a,s,r);break;case 8:!function(t,e,n,r,i){var o=e.securityContext,a=o?t.root.sanitizer.sanitize(o,i):i;t.renderer.setProperty(n,r,a)}(33554432&e.flags&&32&i.flags?o.componentView:t,i,a,s,r)}return!0}var Ao=new Object,Po=Li(pt),Io=Li(ct),Oo=Li($e);function Do(t,e,n,r){return n=et(n),{index:-1,deps:ro(r,K(e)),flags:t,token:e,value:n}}function ko(t){for(var e={},n=[],r=!1,i=0;i<t.length;i++){var o=t[i];o.token===fe&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=i,e[Li(o.token)]=o}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:r}}function Mo(t,e,n){void 0===n&&(n=pt.THROW_IF_NOT_FOUND);var r,i,o=At(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);var a=e.tokenKey;switch(a){case Po:case Io:case Oo:return t}var s=t._def.providersByKey[a];if(s){var u=t._providers[s.index];return void 0===u&&(u=t._providers[s.index]=Ro(t,s)),u===Ao?void 0:u}if(e.token.ngInjectableDef&&(r=t,null!=(i=e.token.ngInjectableDef).providedIn&&(function(t,e){return t._def.modules.indexOf(i.providedIn)>-1}(r)||"root"===i.providedIn&&r._def.isRoot))){var l=t._providers.length;return t._def.providersByKey[e.tokenKey]={flags:5120,value:e.token.ngInjectableDef.factory,deps:[],index:l,token:e.token},t._providers[l]=Ao,t._providers[l]=Ro(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{At(o)}}function Ro(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var i=n.length;switch(i){case 0:return new e;case 1:return new e(Mo(t,n[0]));case 2:return new e(Mo(t,n[0]),Mo(t,n[1]));case 3:return new e(Mo(t,n[0]),Mo(t,n[1]),Mo(t,n[2]));default:for(var o=new Array(i),a=0;a<i;a++)o[a]=Mo(t,n[a]);return new(e.bind.apply(e,Object(r.f)([void 0],o)))}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var i=n.length;switch(i){case 0:return e();case 1:return e(Mo(t,n[0]));case 2:return e(Mo(t,n[0]),Mo(t,n[1]));case 3:return e(Mo(t,n[0]),Mo(t,n[1]),Mo(t,n[2]));default:for(var o=Array(i),a=0;a<i;a++)o[a]=Mo(t,n[a]);return e.apply(void 0,Object(r.f)(o))}}(t,e.value,e.deps);break;case 2048:n=Mo(t,e.deps[0]);break;case 256:n=e.value}return n===Ao||null==n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?Ao:n}function No(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var r=n[e];return r.viewContainerParent=null,jo(n,e),Oi.dirtyParentQueries(r),Fo(r),r}function Lo(t,e,n){var r=e?Yi(e,e.def.lastRenderRootNode):t.renderElement;so(n,2,n.renderer.parentNode(r),n.renderer.nextSibling(r),void 0)}function Fo(t){so(t,3,null,null,void 0)}function Bo(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function jo(t,e){e>=t.length-1?t.pop():t.splice(e,1)}var zo=new Object;function Vo(t,e,n,r,i,o){return new qo(t,e,n,r,i,o)}function Uo(t){return t.viewDefFactory}var qo=function(t){function e(e,n,r,i,o,a){var s=t.call(this)||this;return s.selector=e,s.componentType=n,s._inputs=i,s._outputs=o,s.ngContentSelectors=a,s.viewDefFactory=r,s}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){if(!r)throw new Error("ngModule should be provided");var i=ao(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,a=Oi.createRootView(t,e||[],n,i,r,zo),s=Ti(a,o).instance;return n&&a.renderer.setAttribute(Si(a,0).renderElement,"ng-version",zt.full),new Go(a,new Xo(a),s)},e}(Ge),Go=function(t){function e(e,n,r){var i=t.call(this)||this;return i._view=e,i._viewRef=n,i._component=r,i._elDef=i._view.def.nodes[0],i.hostView=n,i.changeDetectorRef=n,i.instance=r,i}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return new Xn(Si(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new Jo(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewRef.destroy()},e.prototype.onDestroy=function(t){this._viewRef.onDestroy(t)},e}(qe);function Ho(t,e,n){return new Wo(t,e,n)}var Wo=function(){function t(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}return Object.defineProperty(t.prototype,"element",{get:function(){return new Xn(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new Jo(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentInjector",{get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=Zi(t),t=t.parent;return t?new Jo(t,e):new Jo(this._view,null)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=No(this._data,t);Oi.destroyView(e)}},t.prototype.get=function(t){var e=this._embeddedViews[t];if(e){var n=new Xo(e);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(t.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r},t.prototype.createComponent=function(t,e,n,r,i){var o=n||this.parentInjector;i||t instanceof Je||(i=o.get($e));var a=t.create(o,r,void 0,i);return this.insert(a.hostView,e),a},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,o,a=t;return i=a._view,o=(n=this._data).viewContainer._embeddedViews,null!==(r=e)&&void 0!==r||(r=o.length),i.viewContainerParent=this._view,Bo(o,r,i),function(t,e){var n=Qi(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,n){if(!(4&n.flags)){e.parent.def.nodeFlags|=4,n.flags|=4;for(var r=n.parent;r;)r.childFlags|=4,r=r.parent}}(0,e.parentNodeDef)}}(n,i),Oi.dirtyParentQueries(i),Lo(n,r>0?o[r-1]:null,i),a.attachToViewContainerRef(this),t},t.prototype.move=function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,o,a,s=this._embeddedViews.indexOf(t._view);return i=e,a=(o=(n=this._data).viewContainer._embeddedViews)[r=s],jo(o,r),null==i&&(i=o.length),Bo(o,i,a),Oi.dirtyParentQueries(a),Fo(a),Lo(n,i>0?o[i-1]:null,a),t},t.prototype.indexOf=function(t){return this._embeddedViews.indexOf(t._view)},t.prototype.remove=function(t){var e=No(this._data,t);e&&Oi.destroyView(e)},t.prototype.detach=function(t){var e=No(this._data,t);return e?new Xo(e):null},t}();function Ko(t){return new Xo(t)}var Xo=function(){function t(t){this._view=t,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(t.prototype,"rootNodes",{get:function(){return so(this._view,0,void 0,void 0,t=[]),t;var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){Wi(this._view)},t.prototype.detach=function(){this._view.state&=-5},t.prototype.detectChanges=function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{Oi.checkAndUpdateView(this._view)}finally{t.end&&t.end()}},t.prototype.checkNoChanges=function(){Oi.checkNoChangesView(this._view)},t.prototype.reattach=function(){this._view.state|=4},t.prototype.onDestroy=function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)},t.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Oi.destroyView(this._view)},t.prototype.detachFromAppRef=function(){this._appRef=null,Fo(this._view),Oi.dirtyParentQueries(this._view)},t.prototype.attachToAppRef=function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t},t.prototype.attachToViewContainerRef=function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t},t}();function Qo(t,e){return new Zo(t,e)}var Zo=function(t){function e(e,n){var r=t.call(this)||this;return r._parentView=e,r._def=n,r}return Object(r.c)(e,t),e.prototype.createEmbeddedView=function(t){return new Xo(Oi.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))},Object.defineProperty(e.prototype,"elementRef",{get:function(){return new Xn(Si(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),e}(ir);function Yo(t,e){return new Jo(t,e)}var Jo=function(){function t(t,e){this.view=t,this.elDef=e}return t.prototype.get=function(t,e){return void 0===e&&(e=pt.THROW_IF_NOT_FOUND),Oi.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:Li(t)},e)},t}();function $o(t,e){var n=t.def.nodes[e];if(1&n.flags){var r=Si(t,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return Ei(t,n.nodeIndex).renderText;if(20240&n.flags)return Ti(t,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+e)}function ta(t){return new ea(t.renderer)}var ea=function(){function t(t){this.delegate=t}return t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.createElement=function(t,e){var n=Object(r.e)(fo(e),2),i=this.delegate.createElement(n[1],n[0]);return t&&this.delegate.appendChild(t,i),i},t.prototype.createViewRoot=function(t){return t},t.prototype.createTemplateAnchor=function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e},t.prototype.createText=function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n},t.prototype.projectNodes=function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])},t.prototype.attachViewAfter=function(t,e){for(var n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t),i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}},t.prototype.destroyView=function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.listenGlobal=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.setElementProperty=function(t,e,n){this.delegate.setProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var i=Object(r.e)(fo(e),2),o=i[0],a=i[1];null!=n?this.delegate.setAttribute(t,a,n,o):this.delegate.removeAttribute(t,a,o)},t.prototype.setBindingDebugInfo=function(t,e,n){},t.prototype.setElementClass=function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,n){t[e].apply(t,n)},t.prototype.setText=function(t,e){this.delegate.setValue(t,e)},t.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},t}();function na(t,e,n,r){return new ra(t,e,n,r)}var ra=function(){function t(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),r=0;r<e.providers.length;r++){var i=e.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=Ro(t,i))}}(this)}return t.prototype.get=function(t,e,n){void 0===e&&(e=pt.THROW_IF_NOT_FOUND),void 0===n&&(n=0);var r=0;return 4&n?r|=1:2&n&&(r|=4),Mo(this,{token:t,tokenKey:Li(t),flags:r},e)},Object.defineProperty(t.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return this.get(Ze)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+K(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(t,e){for(var n=t._def,r=new Set,i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){var o=t._providers[i];if(o&&o!==Ao){var a=o.ngOnDestroy;"function"!=typeof a||r.has(o)||(a.apply(o),r.add(o))}}}(this),this._destroyListeners.forEach(function(t){return t()})},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},t}(),ia=Li(qn),oa=Li(Kn),aa=Li(Xn),sa=Li(or),ua=Li(ir),la=Li(ar),ca=Li(pt),ha=Li(ct);function pa(t,e,n,i,o,a,s,u){var l=[];if(s)for(var c in s){var h=Object(r.e)(s[c],2);l[h[0]]={flags:8,name:c,nonMinifiedName:h[1],ns:null,securityContext:null,suffix:null}}var p=[];if(u)for(var f in u)p.push({type:1,propName:f,target:null,eventName:u[f]});return ma(t,e|=16384,n,i,o,o,a,l,p)}function fa(t,e,n){return ma(-1,t|=16,null,0,e,e,n)}function da(t,e,n,r,i){return ma(-1,t,e,0,n,r,i)}function ma(t,e,n,r,i,o,a,s,u){var l=no(n),c=l.matchedQueries,h=l.references,p=l.matchedQueryIds;u||(u=[]),s||(s=[]),o=et(o);var f=ro(a,K(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:p,references:h,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:mo(s),outputs:u,element:null,provider:{token:i,value:o,deps:f},text:null,query:null,ngContent:null}}function ga(t,e){return _a(t,e)}function ya(t,e){for(var n=t;n.parent&&!$i(n);)n=n.parent;return wa(n.parent,Zi(n),!0,e.provider.value,e.provider.deps)}function va(t,e){var n=wa(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var r=0;r<e.outputs.length;r++){var i=e.outputs[r],o=n[i.propName].subscribe(ba(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=o.unsubscribe.bind(o)}return n}function ba(t,e,n){return function(r){return Xi(t,e,n,r)}}function _a(t,e){var n=(8192&e.flags)>0,i=e.provider;switch(201347067&e.flags){case 512:return wa(t,e.parent,n,i.value,i.deps);case 1024:return function(t,e,n,i,o){var a=o.length;switch(a){case 0:return i();case 1:return i(Ca(t,e,n,o[0]));case 2:return i(Ca(t,e,n,o[0]),Ca(t,e,n,o[1]));case 3:return i(Ca(t,e,n,o[0]),Ca(t,e,n,o[1]),Ca(t,e,n,o[2]));default:for(var s=Array(a),u=0;u<a;u++)s[u]=Ca(t,e,n,o[u]);return i.apply(void 0,Object(r.f)(s))}}(t,e.parent,n,i.value,i.deps);case 2048:return Ca(t,e.parent,n,i.deps[0]);case 256:return i.value}}function wa(t,e,n,i,o){var a=o.length;switch(a){case 0:return new i;case 1:return new i(Ca(t,e,n,o[0]));case 2:return new i(Ca(t,e,n,o[0]),Ca(t,e,n,o[1]));case 3:return new i(Ca(t,e,n,o[0]),Ca(t,e,n,o[1]),Ca(t,e,n,o[2]));default:for(var s=new Array(a),u=0;u<a;u++)s[u]=Ca(t,e,n,o[u]);return new(i.bind.apply(i,Object(r.f)([void 0],s)))}}var xa={};function Ca(t,e,n,r,i){if(void 0===i&&(i=pt.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var o=t;2&r.flags&&(i=null);var a=r.tokenKey;a===la&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);for(var s=t;s;){if(e)switch(a){case ia:return ta(Ea(s,e,n));case oa:return Ea(s,e,n).renderer;case aa:return new Xn(Si(s,e.nodeIndex).renderElement);case sa:return Si(s,e.nodeIndex).viewContainer;case ua:if(e.element.template)return Si(s,e.nodeIndex).template;break;case la:return Ko(Ea(s,e,n));case ca:case ha:return Yo(s,e);default:var u=(n?e.element.allProviders:e.element.publicProviders)[a];if(u){var l=Ti(s,u.nodeIndex);return l||(l={instance:_a(s,u)},s.nodes[u.nodeIndex]=l),l.instance}}n=$i(s),e=Zi(s),s=s.parent,4&r.flags&&(s=null)}var c=o.root.injector.get(r.token,xa);return c!==xa||i===xa?c:o.root.ngModule.injector.get(r.token,i)}function Ea(t,e,n){var r;if(n)r=Si(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!$i(r);)r=r.parent;return r}function Sa(t,e,n,r,i,o){if(32768&n.flags){var a=Si(t,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};var s=vr.unwrap(t.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new br(s,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,o}function Ta(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,r=0,i=0;i<n.length;i++){var o=n[i],a=o.parent;for(!a&&o.flags&e&&Pa(t,i,o.flags&e,r++),0==(o.childFlags&e)&&(i+=o.childCount);a&&1&a.flags&&i===a.nodeIndex+a.childCount;)a.directChildFlags&e&&(r=Aa(t,a,e,r)),a=a.parent}}function Aa(t,e,n,r){for(var i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){var o=t.def.nodes[i];o.flags&n&&Pa(t,i,o.flags&n,r++),i+=o.childCount}return r}function Pa(t,e,n,r){var i=Ti(t,e);if(i){var o=i.instance;o&&(Oi.setCurrentNode(t,e),1048576&n&&Ci(t,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&Ci(t,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}function Ia(t,e,n){var r=[];for(var i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:eo(e),bindings:r},ngContent:null}}function Oa(t){for(var e=t.def.nodeMatchedQueries;t.parent&&to(t);){var n=t.parentNodeDef;t=t.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++)67108864&(o=t.def.nodes[i]).flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&Pi(t,i).setDirty(),!(1&o.flags&&i+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}if(134217728&t.def.nodeFlags)for(i=0;i<t.def.nodes.length;i++){var o;134217728&(o=t.def.nodes[i]).flags&&536870912&o.flags&&Pi(t,i).setDirty(),i+=o.childCount}}function Da(t,e){var n=Pi(t,e.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&e.flags){var o=e.parent.parent;i=ka(t,o.nodeIndex,o.nodeIndex+o.childCount,e.query,[]),r=Ti(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=ka(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);for(var a=e.query.bindings,s=!1,u=0;u<a.length;u++){var l=a[u],c=void 0;switch(l.bindingType){case 0:c=n.first;break;case 1:c=n,s=!0}r[l.propName]=c}s&&n.notifyOnChanges()}}function ka(t,e,n,r,i){for(var o=e;o<=n;o++){var a=t.def.nodes[o],s=a.matchedQueries[r.id];if(null!=s&&i.push(Ma(t,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=Si(t,o);if((a.childMatchedQueries&r.filterId)===r.filterId&&(ka(t,o+1,o+a.childCount,r,i),o+=a.childCount),16777216&a.flags)for(var l=u.viewContainer._embeddedViews,c=0;c<l.length;c++){var h=l[c],p=Qi(h);p&&p===u&&ka(h,0,h.def.nodes.length-1,r,i)}var f=u.template._projectedViews;if(f)for(c=0;c<f.length;c++){var d=f[c];ka(d,0,d.def.nodes.length-1,r,i)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(o+=a.childCount)}return i}function Ma(t,e,n){if(null!=n)switch(n){case 1:return Si(t,e.nodeIndex).renderElement;case 0:return new Xn(Si(t,e.nodeIndex).renderElement);case 2:return Si(t,e.nodeIndex).template;case 3:return Si(t,e.nodeIndex).viewContainer;case 4:return Ti(t,e.nodeIndex).instance}}function Ra(t,e){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:e}}}function Na(t,e,n){var r=io(t,e,n);r&&lo(t,n.ngContent.index,1,r,null,void 0)}function La(t,e){return ja(128,t,new Array(e+1))}function Fa(t,e){return ja(32,t,new Array(e))}function Ba(t,e){for(var n=Object.keys(e),r=n.length,i=new Array(r),o=0;o<r;o++){var a=n[o];i[e[a]]=a}return ja(64,t,i)}function ja(t,e,n){for(var r=new Array(n.length),i=0;i<n.length;i++){var o=n[i];r[i]={flags:8,name:o,ns:null,nonMinifiedName:o,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:mo(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function za(t,e,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Va(t,e,n){var r,i=t.renderer;r=i.createText(n.text.prefix);var o=io(t,e,n);return o&&i.appendChild(o,r),{renderText:r}}function Ua(t,e){return(null!=t?t.toString():"")+e.suffix}function qa(t,e,n,r){for(var i=0,o=0,a=0,s=0,u=0,l=null,c=null,h=!1,p=!1,f=null,d=0;d<e.length;d++){var m=e[d];if(m.nodeIndex=d,m.parent=l,m.bindingIndex=i,m.outputIndex=o,m.renderParent=c,a|=m.flags,u|=m.matchedQueryIds,m.element){var g=m.element;g.publicProviders=l?l.element.publicProviders:Object.create(null),g.allProviders=g.publicProviders,h=!1,p=!1,m.element.template&&(u|=m.element.template.nodeMatchedQueries)}if(Ha(l,m,e.length),i+=m.bindings.length,o+=m.outputs.length,!c&&3&m.flags&&(f=m),20224&m.flags){h||(h=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);var y=0!=(32768&m.flags);0==(8192&m.flags)||y?l.element.publicProviders[Li(m.provider.token)]=m:(p||(p=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[Li(m.provider.token)]=m),y&&(l.element.componentProvider=m)}if(l?(l.childFlags|=m.flags,l.directChildFlags|=m.flags,l.childMatchedQueries|=m.matchedQueryIds,m.element&&m.element.template&&(l.childMatchedQueries|=m.element.template.nodeMatchedQueries)):s|=m.flags,m.childCount>0)l=m,Ga(m)||(c=m);else for(;l&&d===l.nodeIndex+l.childCount;){var v=l.parent;v&&(v.childFlags|=l.childFlags,v.childMatchedQueries|=l.childMatchedQueries),c=(l=v)&&Ga(l)?l.renderParent:l}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||Ri,updateRenderer:r||Ri,handleEvent:function(t,n,r,i){return e[n].element.handleEvent(t,r,i)},bindingCount:i,outputCount:o,lastRenderRootNode:f}}function Ga(t){return 0!=(1&t.flags)&&null===t.element.name}function Ha(t,e,n){var r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+e.nodeIndex+"!")}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+e.nodeIndex+"!");if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+e.nodeIndex+"!");if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+e.nodeIndex+"!")}if(e.childCount){var i=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=i&&e.nodeIndex+e.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+e.nodeIndex+"!")}}function Wa(t,e,n,r){var i=Qa(t.root,t.renderer,t,e,n);return Za(i,t.component,r),Ya(i),i}function Ka(t,e,n){var r=Qa(t,t.renderer,null,null,e);return Za(r,n,n),Ya(r),r}function Xa(t,e,n,r){var i,o=e.element.componentRendererType;return i=o?t.root.rendererFactory.createRenderer(r,o):t.root.renderer,Qa(t.root,i,t,e.element.componentProvider,n)}function Qa(t,e,n,r,i){var o=new Array(i.nodes.length),a=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:a,initIndex:-1}}function Za(t,e,n){t.component=e,t.context=n}function Ya(t){var e;$i(t)&&(e=Si(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,r=t.nodes,i=0;i<n.nodes.length;i++){var o=n.nodes[i];Oi.setCurrentNode(t,i);var a=void 0;switch(201347067&o.flags){case 1:var s=Co(t,e,o),u=void 0;if(33554432&o.flags){var l=ao(o.element.componentView);u=Oi.createComponentView(t,o,l,s)}Eo(t,u,o,s),a={renderElement:s,componentView:u,viewContainer:null,template:o.element.template?Qo(t,o):void 0},16777216&o.flags&&(a.viewContainer=Ho(t,o,a));break;case 2:a=Va(t,e,o);break;case 512:case 1024:case 2048:case 256:(a=r[i])||4096&o.flags||(a={instance:ga(t,o)});break;case 16:a={instance:ya(t,o)};break;case 16384:(a=r[i])||(a={instance:va(t,o)}),32768&o.flags&&Za(Si(t,o.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new $n;break;case 8:Na(t,e,o),a=void 0}r[i]=a}as(t,os.CreateViewNodes),cs(t,201326592,268435456,0)}function Ja(t){es(t),Oi.updateDirectives(t,1),ss(t,os.CheckNoChanges),Oi.updateRenderer(t,1),as(t,os.CheckNoChanges),t.state&=-97}function $a(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,xi(t,0,256),es(t),Oi.updateDirectives(t,0),ss(t,os.CheckAndUpdate),cs(t,67108864,536870912,0);var e=xi(t,256,512);Ta(t,2097152|(e?1048576:0)),Oi.updateRenderer(t,0),as(t,os.CheckAndUpdate),cs(t,134217728,536870912,0),Ta(t,8388608|((e=xi(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,xi(t,768,1024)}function ts(t,e,n,i,o,a,s,u,l,c,h,p,f){return 0===n?function(t,e,n,r,i,o,a,s,u,l,c,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,o,a,s,u,l,c,h){var p=e.bindings.length,f=!1;return p>0&&To(t,e,0,n)&&(f=!0),p>1&&To(t,e,1,r)&&(f=!0),p>2&&To(t,e,2,i)&&(f=!0),p>3&&To(t,e,3,o)&&(f=!0),p>4&&To(t,e,4,a)&&(f=!0),p>5&&To(t,e,5,s)&&(f=!0),p>6&&To(t,e,6,u)&&(f=!0),p>7&&To(t,e,7,l)&&(f=!0),p>8&&To(t,e,8,c)&&(f=!0),p>9&&To(t,e,9,h)&&(f=!0),f}(t,e,n,r,i,o,a,s,u,l,c,h);case 2:return function(t,e,n,r,i,o,a,s,u,l,c,h){var p=!1,f=e.bindings,d=f.length;if(d>0&&Gi(t,e,0,n)&&(p=!0),d>1&&Gi(t,e,1,r)&&(p=!0),d>2&&Gi(t,e,2,i)&&(p=!0),d>3&&Gi(t,e,3,o)&&(p=!0),d>4&&Gi(t,e,4,a)&&(p=!0),d>5&&Gi(t,e,5,s)&&(p=!0),d>6&&Gi(t,e,6,u)&&(p=!0),d>7&&Gi(t,e,7,l)&&(p=!0),d>8&&Gi(t,e,8,c)&&(p=!0),d>9&&Gi(t,e,9,h)&&(p=!0),p){var m=e.text.prefix;d>0&&(m+=Ua(n,f[0])),d>1&&(m+=Ua(r,f[1])),d>2&&(m+=Ua(i,f[2])),d>3&&(m+=Ua(o,f[3])),d>4&&(m+=Ua(a,f[4])),d>5&&(m+=Ua(s,f[5])),d>6&&(m+=Ua(u,f[6])),d>7&&(m+=Ua(l,f[7])),d>8&&(m+=Ua(c,f[8])),d>9&&(m+=Ua(h,f[9]));var g=Ei(t,e.nodeIndex).renderText;t.renderer.setValue(g,m)}return p}(t,e,n,r,i,o,a,s,u,l,c,h);case 16384:return function(t,e,n,r,i,o,a,s,u,l,c,h){var p=Ti(t,e.nodeIndex),f=p.instance,d=!1,m=void 0,g=e.bindings.length;return g>0&&qi(t,e,0,n)&&(d=!0,m=Sa(t,p,e,0,n,m)),g>1&&qi(t,e,1,r)&&(d=!0,m=Sa(t,p,e,1,r,m)),g>2&&qi(t,e,2,i)&&(d=!0,m=Sa(t,p,e,2,i,m)),g>3&&qi(t,e,3,o)&&(d=!0,m=Sa(t,p,e,3,o,m)),g>4&&qi(t,e,4,a)&&(d=!0,m=Sa(t,p,e,4,a,m)),g>5&&qi(t,e,5,s)&&(d=!0,m=Sa(t,p,e,5,s,m)),g>6&&qi(t,e,6,u)&&(d=!0,m=Sa(t,p,e,6,u,m)),g>7&&qi(t,e,7,l)&&(d=!0,m=Sa(t,p,e,7,l,m)),g>8&&qi(t,e,8,c)&&(d=!0,m=Sa(t,p,e,8,c,m)),g>9&&qi(t,e,9,h)&&(d=!0,m=Sa(t,p,e,9,h,m)),m&&f.ngOnChanges(m),65536&e.flags&&Ci(t,256,e.nodeIndex)&&f.ngOnInit(),262144&e.flags&&f.ngDoCheck(),d}(t,e,n,r,i,o,a,s,u,l,c,h);case 32:case 64:case 128:return function(t,e,n,r,i,o,a,s,u,l,c,h){var p=e.bindings,f=!1,d=p.length;if(d>0&&Gi(t,e,0,n)&&(f=!0),d>1&&Gi(t,e,1,r)&&(f=!0),d>2&&Gi(t,e,2,i)&&(f=!0),d>3&&Gi(t,e,3,o)&&(f=!0),d>4&&Gi(t,e,4,a)&&(f=!0),d>5&&Gi(t,e,5,s)&&(f=!0),d>6&&Gi(t,e,6,u)&&(f=!0),d>7&&Gi(t,e,7,l)&&(f=!0),d>8&&Gi(t,e,8,c)&&(f=!0),d>9&&Gi(t,e,9,h)&&(f=!0),f){var m=Ai(t,e.nodeIndex),g=void 0;switch(201347067&e.flags){case 32:g=new Array(p.length),d>0&&(g[0]=n),d>1&&(g[1]=r),d>2&&(g[2]=i),d>3&&(g[3]=o),d>4&&(g[4]=a),d>5&&(g[5]=s),d>6&&(g[6]=u),d>7&&(g[7]=l),d>8&&(g[8]=c),d>9&&(g[9]=h);break;case 64:g={},d>0&&(g[p[0].name]=n),d>1&&(g[p[1].name]=r),d>2&&(g[p[2].name]=i),d>3&&(g[p[3].name]=o),d>4&&(g[p[4].name]=a),d>5&&(g[p[5].name]=s),d>6&&(g[p[6].name]=u),d>7&&(g[p[7].name]=l),d>8&&(g[p[8].name]=c),d>9&&(g[p[9].name]=h);break;case 128:var y=n;switch(d){case 1:g=y.transform(n);break;case 2:g=y.transform(r);break;case 3:g=y.transform(r,i);break;case 4:g=y.transform(r,i,o);break;case 5:g=y.transform(r,i,o,a);break;case 6:g=y.transform(r,i,o,a,s);break;case 7:g=y.transform(r,i,o,a,s,u);break;case 8:g=y.transform(r,i,o,a,s,u,l);break;case 9:g=y.transform(r,i,o,a,s,u,l,c);break;case 10:g=y.transform(r,i,o,a,s,u,l,c,h)}}m.value=g}return f}(t,e,n,r,i,o,a,s,u,l,c,h);default:throw"unreachable"}}(t,e,i,o,a,s,u,l,c,h,p,f):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var r=!1,i=0;i<n.length;i++)To(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)Gi(t,e,o,n[o])&&(i=!0);if(i){var a="";for(o=0;o<n.length;o++)a+=Ua(n[o],r[o]);a=e.text.prefix+a;var s=Ei(t,e.nodeIndex).renderText;t.renderer.setValue(s,a)}return i}(t,e,n);case 16384:return function(t,e,n){for(var r=Ti(t,e.nodeIndex),i=r.instance,o=!1,a=void 0,s=0;s<n.length;s++)qi(t,e,s,n[s])&&(o=!0,a=Sa(t,r,e,s,n[s],a));return a&&i.ngOnChanges(a),65536&e.flags&&Ci(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var i=e.bindings,o=!1,a=0;a<n.length;a++)Gi(t,e,a,n[a])&&(o=!0);if(o){var s=Ai(t,e.nodeIndex),u=void 0;switch(201347067&e.flags){case 32:u=n;break;case 64:for(u={},a=0;a<n.length;a++)u[i[a].name]=n[a];break;case 128:var l=n[0],c=n.slice(1);u=l.transform.apply(l,Object(r.f)(c))}s.value=u}return o}(t,e,n);default:throw"unreachable"}}(t,e,i)}function es(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(4&r.flags){var i=Si(t,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var a=i[o];a.state|=32,Ki(a,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function ns(t,e,n,r,i,o,a,s,u,l,c,h,p){return 0===n?function(t,e,n,r,i,o,a,s,u,l,c,h){var p=e.bindings.length;p>0&&Hi(t,e,0,n),p>1&&Hi(t,e,1,r),p>2&&Hi(t,e,2,i),p>3&&Hi(t,e,3,o),p>4&&Hi(t,e,4,a),p>5&&Hi(t,e,5,s),p>6&&Hi(t,e,6,u),p>7&&Hi(t,e,7,l),p>8&&Hi(t,e,8,c),p>9&&Hi(t,e,9,h)}(t,e,r,i,o,a,s,u,l,c,h,p):function(t,e,n){for(var r=0;r<n.length;r++)Hi(t,e,r,n[r])}(t,e,r),!1}function rs(t,e){if(Pi(t,e.nodeIndex).dirty)throw Di(Oi.createDebugContext(t,e.nodeIndex),"Query "+e.query.id+" not dirty","Query "+e.query.id+" dirty",0!=(1&t.state))}function is(t){if(!(128&t.state)){if(ss(t,os.Destroy),as(t,os.Destroy),Ta(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=Qi(t);if(e){var n=e.template._projectedViews;n&&(jo(n,n.indexOf(t)),Oi.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var r=t.def.nodes[n];1&r.flags?t.renderer.destroyNode(Si(t,n).renderElement):2&r.flags?t.renderer.destroyNode(Ei(t,n).renderText):(67108864&r.flags||134217728&r.flags)&&Pi(t,n).destroy()}}(t),$i(t)&&t.renderer.destroy(),t.state|=128}}var os=function(t){return t[t.CreateViewNodes=0]="CreateViewNodes",t[t.CheckNoChanges=1]="CheckNoChanges",t[t.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate=3]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",t[t.Destroy=5]="Destroy",t}({});function as(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?us(Si(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function ss(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=Si(t,r).viewContainer._embeddedViews,a=0;a<o.length;a++)us(o[a],e);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function us(t,e){var n=t.state;switch(e){case os.CheckNoChanges:0==(128&n)&&(12==(12&n)?Ja(t):64&n&&ls(t,os.CheckNoChangesProjectedViews));break;case os.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Ja(t):64&n&&ls(t,e));break;case os.CheckAndUpdate:0==(128&n)&&(12==(12&n)?$a(t):64&n&&ls(t,os.CheckAndUpdateProjectedViews));break;case os.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?$a(t):64&n&&ls(t,e));break;case os.Destroy:is(t);break;case os.CreateViewNodes:Ya(t)}}function ls(t,e){ss(t,e),as(t,e)}function cs(t,e,n,r){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var i=t.def.nodes.length,o=0;o<i;o++){var a=t.def.nodes[o];if(a.flags&e&&a.flags&n)switch(Oi.setCurrentNode(t,a.nodeIndex),r){case 0:Da(t,a);break;case 1:rs(t,a)}a.childFlags&e&&a.childFlags&n||(o+=a.childCount)}}var hs=!1;function ps(){if(!hs){hs=!0;var t=On()?{setCurrentNode:Ns,createRootView:ds,createEmbeddedView:gs,createComponentView:ys,createNgModuleRef:vs,overrideProvider:xs,overrideComponentView:Cs,clearOverrides:Es,checkAndUpdateView:Ps,checkNoChangesView:Is,destroyView:Os,createDebugContext:function(t,e){return new Hs(t,e)},handleEvent:Ls,updateDirectives:Fs,updateRenderer:Bs}:{setCurrentNode:function(){},createRootView:fs,createEmbeddedView:Wa,createComponentView:Xa,createNgModuleRef:na,overrideProvider:Ri,overrideComponentView:Ri,clearOverrides:Ri,checkAndUpdateView:$a,checkNoChangesView:Ja,destroyView:is,createDebugContext:function(t,e){return new Hs(t,e)},handleEvent:function(t,e,n,r){return t.def.handleEvent(t,e,n,r)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?Ts:As,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?Ts:As,t)}};Oi.setCurrentNode=t.setCurrentNode,Oi.createRootView=t.createRootView,Oi.createEmbeddedView=t.createEmbeddedView,Oi.createComponentView=t.createComponentView,Oi.createNgModuleRef=t.createNgModuleRef,Oi.overrideProvider=t.overrideProvider,Oi.overrideComponentView=t.overrideComponentView,Oi.clearOverrides=t.clearOverrides,Oi.checkAndUpdateView=t.checkAndUpdateView,Oi.checkNoChangesView=t.checkNoChangesView,Oi.destroyView=t.destroyView,Oi.resolveDep=Ca,Oi.createDebugContext=t.createDebugContext,Oi.handleEvent=t.handleEvent,Oi.updateDirectives=t.updateDirectives,Oi.updateRenderer=t.updateRenderer,Oi.dirtyParentQueries=Oa}}function fs(t,e,n,r,i,o){return Ka(ms(t,i,i.injector.get(Hn),e,n),r,o)}function ds(t,e,n,r,i,o){var a=i.injector.get(Hn),s=ms(t,i,new Qs(a),e,n),u=Ss(r);return Ks(Rs.create,Ka,null,[s,u,o])}function ms(t,e,n,r,i){var o=e.injector.get(wi),a=e.injector.get(Kt);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:n.createRenderer(null,null),errorHandler:a}}function gs(t,e,n,r){var i=Ss(n);return Ks(Rs.create,Wa,null,[t,e,i,r])}function ys(t,e,n,r){return n=ws.get(e.element.componentProvider.provider.token)||Ss(n),Ks(Rs.create,Xa,null,[t,e,n,r])}function vs(t,e,n,r){return na(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===bs.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(function(t){var r=bs.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),t.modules.forEach(function(t){_s.forEach(function(r,i){i.ngInjectableDef.providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasDeprecatedOverrides;return e.hasOverrides?(function(t){for(var e=0;e<t.providers.length;e++){var r=t.providers[e];n&&(r.flags|=4096);var i=bs.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=ro(i.deps),r.value=i.value)}if(_s.size>0){var o=new Set(t.modules);_s.forEach(function(e,r){if(o.has(r.ngInjectableDef.providedIn)){var i={token:r,flags:e.flags|(n?4096:0),deps:ro(e.deps),value:e.value,index:t.providers.length};t.providers.push(i),t.providersByKey[Li(r)]=i}})}}(t=t.factory(function(){return Ri})),t):t}(r))}var bs=new Map,_s=new Map,ws=new Map;function xs(t){bs.set(t.token,t),"function"==typeof t.token&&t.token.ngInjectableDef&&"function"==typeof t.token.ngInjectableDef.providedIn&&_s.set(t.token,t)}function Cs(t,e){var n=ao(ao(Uo(e)).nodes[0].element.componentView);ws.set(t,n)}function Es(){bs.clear(),_s.clear(),ws.clear()}function Ss(t){if(0===bs.size)return t;var e=function(t){for(var e=[],n=null,r=0;r<t.nodes.length;r++){var i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&bs.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return Ri});for(var n=0;n<e.length;n++)r(t,e[n]);return t;function r(t,e){for(var n=e+1;n<t.nodes.length;n++){var r=t.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,o=bs.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=ro(o.deps),i.value=o.value)}}}}function Ts(t,e,n,r,i,o,a,s,u,l,c,h,p){var f=t.def.nodes[e];return ts(t,f,n,r,i,o,a,s,u,l,c,h,p),224&f.flags?Ai(t,e).value:void 0}function As(t,e,n,r,i,o,a,s,u,l,c,h,p){var f=t.def.nodes[e];return ns(t,f,n,r,i,o,a,s,u,l,c,h,p),224&f.flags?Ai(t,e).value:void 0}function Ps(t){return Ks(Rs.detectChanges,$a,null,[t])}function Is(t){return Ks(Rs.checkNoChanges,Ja,null,[t])}function Os(t){return Ks(Rs.destroy,is,null,[t])}var Ds,ks,Ms,Rs=function(t){return t[t.create=0]="create",t[t.detectChanges=1]="detectChanges",t[t.checkNoChanges=2]="checkNoChanges",t[t.destroy=3]="destroy",t[t.handleEvent=4]="handleEvent",t}({});function Ns(t,e){ks=t,Ms=e}function Ls(t,e,n,r){return Ns(t,e),Ks(Rs.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function Fs(t,e){if(128&t.state)throw Mi(Rs[Ds]);return Ns(t,qs(t,0)),t.def.updateDirectives(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?js(t,a,r,i):zs(t,a,r,i),16384&a.flags&&Ns(t,qs(t,n)),224&a.flags?Ai(t,a.nodeIndex).value:void 0},t)}function Bs(t,e){if(128&t.state)throw Mi(Rs[Ds]);return Ns(t,Gs(t,0)),t.def.updateRenderer(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?js(t,a,r,i):zs(t,a,r,i),3&a.flags&&Ns(t,Gs(t,n)),224&a.flags?Ai(t,a.nodeIndex).value:void 0},t)}function js(t,e,n,i){if(ts.apply(void 0,Object(r.f)([t,e,n],i))){var o=1===n?i[0]:i;if(16384&e.flags){for(var a={},s=0;s<e.bindings.length;s++){var u=e.bindings[s],l=o[s];8&u.flags&&(a[(f=u.nonMinifiedName,"ng-reflect-"+(f=f.replace(/[$@]/g,"_").replace(Vs,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"-"+t[1].toLowerCase()})))]=Us(l))}var c=e.parent,h=Si(t,c.nodeIndex).renderElement;if(c.element.name)for(var p in a)null!=(l=a[p])?t.renderer.setAttribute(h,p,l):t.renderer.removeAttribute(h,p);else t.renderer.setValue(h,"bindings="+JSON.stringify(a,null,2))}}var f}function zs(t,e,n,i){ns.apply(void 0,Object(r.f)([t,e,n],i))}var Vs=/([A-Z])/g;function Us(t){try{return null!=t?t.toString().slice(0,30):t}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function qs(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function Gs(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var Hs=function(){function t(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];for(var n=this.nodeDef,r=t;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=Zi(r),r=r.parent;this.elDef=n,this.elView=r}return Object.defineProperty(t.prototype,"elOrCompView",{get:function(){return Si(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return Yo(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){var t={};if(this.elDef){Ws(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&Ws(this.elView,n,t),e+=n.childCount}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentRenderElement",{get:function(){var t=function(t){for(;t&&!$i(t);)t=t.parent;return t.parent?Si(t.parent,Zi(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?Yi(this.view,this.nodeDef):Yi(this.elView,this.elDef)},enumerable:!0,configurable:!0}),t.prototype.logError=function(t){for(var e,n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];2&this.nodeDef.flags?(e=this.view.def,n=this.nodeDef.nodeIndex):(e=this.elView.def,n=this.elDef.nodeIndex);var a=function(t,e){for(var n=-1,r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(e,n),s=-1;e.factory(function(){var e;return++s===a?(e=t.error).bind.apply(e,Object(r.f)([t],i)):Ri}),s<a&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,Object(r.f)(i)))},t}();function Ws(t,e,n){for(var r in e.references)n[r]=Ma(t,e,e.references[r])}function Ks(t,e,n,r){var i=Ds,o=ks,a=Ms;try{Ds=t;var s=e.apply(n,r);return ks=o,Ms=a,Ds=i,s}catch(t){if(Gt(t)||!ks)throw t;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),ki(t,e),t}(t,Xs())}}function Xs(){return ks?new Hs(ks,Ms):null}var Qs=function(){function t(t){this.delegate=t}return t.prototype.createRenderer=function(t,e){return new Zs(this.delegate.createRenderer(t,e))},t.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},t.prototype.end=function(){this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},t}(),Zs=function(){function t(t){this.delegate=t,this.data=this.delegate.data}return t.prototype.destroyNode=function(t){!function(t){dr.delete(t.nativeNode)}(mr(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)},t.prototype.destroy=function(){this.delegate.destroy()},t.prototype.createElement=function(t,e){var n=this.delegate.createElement(t,e),r=Xs();if(r){var i=new cr(n,null,r);i.name=t,gr(i)}return n},t.prototype.createComment=function(t){var e=this.delegate.createComment(t),n=Xs();return n&&gr(new lr(e,null,n)),e},t.prototype.createText=function(t){var e=this.delegate.createText(t),n=Xs();return n&&gr(new lr(e,null,n)),e},t.prototype.appendChild=function(t,e){var n=mr(t),r=mr(e);n&&r&&n instanceof cr&&n.addChild(r),this.delegate.appendChild(t,e)},t.prototype.insertBefore=function(t,e,n){var r=mr(t),i=mr(e),o=mr(n);r&&i&&r instanceof cr&&r.insertBefore(o,i),this.delegate.insertBefore(t,e,n)},t.prototype.removeChild=function(t,e){var n=mr(t),r=mr(e);n&&r&&n instanceof cr&&n.removeChild(r),this.delegate.removeChild(t,e)},t.prototype.selectRootElement=function(t){var e=this.delegate.selectRootElement(t),n=Xs();return n&&gr(new cr(e,null,n)),e},t.prototype.setAttribute=function(t,e,n,r){var i=mr(t);i&&i instanceof cr&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)},t.prototype.removeAttribute=function(t,e,n){var r=mr(t);r&&r instanceof cr&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){var n=mr(t);n&&n instanceof cr&&(n.classes[e]=!0),this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){var n=mr(t);n&&n instanceof cr&&(n.classes[e]=!1),this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,r){var i=mr(t);i&&i instanceof cr&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)},t.prototype.removeStyle=function(t,e,n){var r=mr(t);r&&r instanceof cr&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){var r=mr(t);r&&r instanceof cr&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)},t.prototype.listen=function(t,e,n){if("string"!=typeof t){var r=mr(t);r&&r.listeners.push(new function(t,e){this.name=t,this.callback=e}(e,n))}return this.delegate.listen(t,e,n)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setValue=function(t,e){return this.delegate.setValue(t,e)},t}();function Ys(t){return ps(),Oi.overrideProvider(t)}function Js(t,e){return ps(),Oi.overrideComponentView(t,e)}function $s(){return ps(),Oi.clearOverrides()}function tu(t,e,n){return new eu(t,e,n)}var eu=function(t){function e(e,n,r){var i=t.call(this)||this;return i.moduleType=e,i._bootstrapComponents=n,i._ngModuleDefFactory=r,i}return Object(r.c)(e,t),e.prototype.create=function(t){ps();var e=function(t){var e=Array.from(t.providers),n=Array.from(t.modules),r={};for(var i in t.providersByKey)r[i]=t.providersByKey[i];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:r}}(ao(this._ngModuleDefFactory));return Oi.createNgModuleRef(this.moduleType,t||pt.NULL,this._bootstrapComponents,e)},e}(tn);function nu(t,e,n){t!=e&&su(n)}function ru(t,e,n){t==e&&su(n)}function iu(t,e,n){t>=e&&su(n)}function ou(t,e){null==t&&su(e)}function au(t,e){void 0===e&&(e="Type passed in is not ComponentType, it does not have 'ngComponentDef' property."),t.ngComponentDef||su(e)}function su(t){throw new Error("ASSERTION ERROR: "+t)}var uu=16,lu=0,cu=1,hu=2,pu=3,fu=4,du=5,mu=6,gu=7,yu=8,vu=9,bu=10,_u=11,wu=12,xu=13,Cu=14,Eu=15;function Su(t,e,n,r){ngDevMode&&nu(r.firstTemplatePass,!0,"Should only be called on first template pass"),e&&(r.initHooks||(r.initHooks=[])).push(t,e),n&&((r.initHooks||(r.initHooks=[])).push(t,n),(r.checkHooks||(r.checkHooks=[])).push(t,n))}function Tu(t,e){if(e.firstTemplatePass)for(var n=t>>14,r=n+(4095&t),i=n;i<r;i++){var o=e.directives[i];Au(o,e,i),Pu(o,e,i),Iu(o,e,i)}}function Au(t,e,n){t.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(n,t.afterContentInit),t.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(n,t.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,t.afterContentChecked))}function Pu(t,e,n){t.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(n,t.afterViewInit),t.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(n,t.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,t.afterViewChecked))}function Iu(t,e,n){null!=t.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(n,t.onDestroy)}function Ou(t,e,n){16&t[fu]&&(Du(t[gu],e.initHooks,e.checkHooks,n),t[fu]&=-17)}function Du(t,e,n,r){var i=r?e:n;i&&ku(t,i)}function ku(t,e){for(var n=0;n<e.length;n+=2)e[n+1].call(t[e[n]])}function Mu(t){throw new Error("Multiple components match node with tagname "+t.tagName)}"undefined"==typeof ngDevMode&&("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global);var Ru=0,Nu=4,Lu=5,Fu="ngProjectAs",Bu=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function ju(t){return!!t.listen}var zu={createRenderer:function(t,e){return document}};function Vu(t,e){ou(t,"should be called with a node"),nu(t.tNode.type,e,"should be a "+qu(e))}function Uu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];ou(t,"should be called with a node"),nu(e.some(function(e){return t.tNode.type===e}),!0,"Should be one of "+e.map(qu).join(", "))}function qu(t){return 1==t?"Projection":0==t?"Container":2==t?"View":3==t?"Element":"<unknown>"}function Gu(t){return"function"==typeof t?t.name||t:"string"==typeof t?t:null==t?"":""+t}function Hu(t,e){return ngDevMode&&Wu(t+uu,e),e[t+uu]}function Wu(t,e){iu(t,e?e.length:0,"index expected to be a valid data index")}function Ku(t){return Array.isArray(t)?t[0]:t}function Xu(t){if(2===t.tNode.type){var e=t.data;return e[hu]?e[hu][du]:null}return t.tNode.next?t.view[t.tNode.next.index]:null}function Qu(t){return t.tNode.child?Ku((2===t.tNode.type?t.data:t.view)[t.tNode.child.index]):null}function Zu(t){if(-1===t.tNode.index&&2===t.tNode.type){var e=t.data[Cu];return-1===e?null:t.view[e].dynamicLContainerNode}var n=t.tNode.parent;return Ku(n?t.view[n.index]:t.view[du])}var Yu=[];function Ju(t,e,n,r,i,o){for(var a=t,s=-1;a;){var u=null,l=i?i.native:null,c=a.tNode.type;if(3===c)tl(n,r,l,a.native,o),a.dynamicLContainerNode&&tl(n,r,l,a.dynamicLContainerNode.native,o);else if(0===c){tl(n,r,l,a.native,o);var h=a,p=h.dynamicLContainerNode?h.dynamicLContainerNode.data:h.data;i&&(p[Lu]=i),(u=p[Nu].length?Qu(p[Nu][0]):null)&&(o=h.dynamicLContainerNode?h.dynamicLContainerNode.native:h.native)}else if(1===c){var f=$u(a.view),d=f.tNode.projection[a.tNode.projection];Yu[++s]=a,u=d?f.data[cu][d.index]:null}else u=Qu(a);if(null===u)for(null===(u=Xu(a))&&8192&a.tNode.flags&&(u=Xu(Yu[s--]));a&&!u;){if(null===(a=Zu(a))||a===e)return null;a.tNode.next||0!==c||(o=a.native),u=Xu(a)}a=u}}function $u(t){for(var e=t[du];2===e.tNode.type;)ngDevMode&&ou(t[cu],"lViewData.parent"),e=(t=t[cu])[du];return ngDevMode&&Vu(e,3),ngDevMode&&ou(e.data,"node.data"),e}function tl(t,e,n,r,i){0===t?ju(e)?e.insertBefore(n,r,i):n.insertBefore(r,i,!0):1===t?ju(e)?e.removeChild(n,r):n.removeChild(r):2===t&&(ngDevMode&&ngDevMode.rendererDestroyNode++,e.destroyNode(r))}function el(t,e){return ju(e)?e.createText(Gu(t)):e.createTextNode(Gu(t))}function nl(t,e,n,r){ngDevMode&&Vu(t,0),ngDevMode&&Vu(e,2);var i=t.data[Lu];i&&i.native&&Ju(Qu(e),e,n?0:1,t.view[_u],i,r)}function rl(t,e,n){var r=t.data[Nu],i=e.data;return n>0&&(r[n-1].data[hu]=i),n<r.length?(i[hu]=r[n].data,r.splice(n,0,e)):(r.push(e),i[hu]=null),-1===e.tNode.index&&(i[Cu]=t.tNode.parent.index,e.view=t.view),i[pu]&&i[pu].insertView(n),i[fu]|=8,e}function il(t,e){var n=t.data[Nu],r=n[e];e>0&&(n[e-1].data[hu]=r.data[hu]),n.splice(e,1),t.tNode.detached||nl(t,r,!1);var i=r.data;return i[pu]&&i[pu].removeView(),i[Cu]=-1,r.view=null,r.data[fu]&=-9,r}function ol(t,e){var n=t.data[Nu][e];return il(t,e),sl(n.data),n}function al(t){if(-1===t[lu].childIndex)return null;var e=t[t[lu].childIndex];return e.data?e.data:e.dynamicLContainerNode.data}function sl(t){var e=t[_u];ju(e)&&e.destroyNode&&Ju(t[du],t[du],2,e),function(t){if(-1===t[lu].childIndex)return ll(t);for(var e=al(t);e;){var n=null;if(e.length>=uu?e[lu].childIndex>-1&&(n=al(e)):e[Nu].length&&(n=e[Nu][0].data),null==n){for(;e&&!e[hu]&&e!==t;)ll(e),e=ul(e,t);ll(e||t),n=e&&e[hu]}e=n}}(t),t[fu]|=32}function ul(t,e){var n;return(n=t[du])&&2===n.tNode.type?Zu(n).data:t[cu]===e?null:t[cu]}function ll(t){if(t[lu]){var e=t;!function(t){var e=t[lu].cleanup;if(null!=e){for(var n=0;n<e.length-1;n+=2)"string"==typeof e[n]?(Ku(t[e[n+1]]).native.removeEventListener(e[n],t[yu][e[n+2]],e[n+3]),n+=2):"number"==typeof e[n]?(0,t[yu][e[n]])():e[n].call(t[yu][e[n+1]]);t[yu]=null}}(e),function(t){var e,n=t[lu];null!=n&&null!=(e=n.destroyHooks)&&ku(t[gu],e)}(e),(r=(n=e)[lu]&&n[lu].pipeDestroyHooks)&&ku(n,r),-1===e[lu].id&&ju(e[_u])&&(ngDevMode&&ngDevMode.rendererDestroy++,e[_u].destroy())}var n,r}function cl(t,e){if(ngDevMode&&Uu(t,3,2),3===t.tNode.type)return t.view!==e||null===t.data;ngDevMode&&Vu(t,2);var n=Zu(t);return null!=n&&(ngDevMode&&Vu(n,0),null!=n.data[Lu])}function hl(t,e,n){if(null!==e&&cl(t,n)){var r=n[_u];if(2===t.tNode.type){var i=Zu(t),o=i.data[Lu],a=i.data[Nu],s=a.indexOf(t),u=s+1<a.length?Qu(a[s+1]).native:i.native;ju(r)?r.insertBefore(o.native,e,u):o.native.insertBefore(e,u,!0)}else ju(r)?r.appendChild(t.native,e):t.native.appendChild(e);return!0}return!1}function pl(t,e,n){if(null!==e&&cl(t,n)){var r=n[_u];return ju(r)?r.removeChild(t.native,e):t.native.removeChild(e),!0}return!1}function fl(t,e,n,r){if(hl(e,t.native,n),0===t.tNode.type){var i=t.data;i[Lu]=r;for(var o=i[Nu],a=0;a<o.length;a++)nl(t,o[a],!0,t.native)}t.dynamicLContainerNode&&(t.dynamicLContainerNode.data[Lu]=r,hl(e,t.dynamicLContainerNode.native,n))}function dl(t,e){ngDevMode&&ou(e[0],"Selector should have a tag name");for(var n,r,i,o,a,s=4,u=t.attrs,l=u?u.indexOf(1):-1,c=!1,h=0;h<e.length;h++){var p=e[h];if("number"!=typeof p){if(!c)if(4&s){if(s=2|1&s,""!==p&&p!==t.tagName){if(ml(s))return!1;c=!0}}else{var f=gl(8&s?"class":p,u);if(-1===f){if(ml(s))return!1;c=!0;continue}var d=8&s?p:e[++h];if(""!==d){var m=void 0;if(l>-1&&f>l?m="":(ngDevMode&&ru(u[f],0,"We do not match directives on namespaced attributes"),m=u[f+1]),8&s&&(i=(n=m).length,a=(o=n.indexOf(r=d))+r.length,-1===o||o>0&&" "!==n[o-1]||a<i&&" "!==n[a])||2&s&&d!==m){if(ml(s))return!1;c=!0}}}}else{if(!c&&!ml(s)&&!ml(p))return!1;if(c&&ml(p))continue;c=!1,s=p|1&s}}return ml(s)||c}function ml(t){return 0==(1&t)}function gl(t,e){if(null===e)return-1;for(var n=!1,r=0;r<e.length;){var i=e[r];if(i===t)return r;0===i?r+=4:(1===i&&(n=!0),r+=n?1:2)}return-1}function yl(t,e){for(var n=0;n<e.length;n++)if(dl(t,e[n]))return!0;return!1}function vl(t,e,n){for(var r=function(t){var e=t.attrs;if(null!=e){var n=e.indexOf(Fu);if(0==(1&n))return e[n+1]}return null}(t),i=0;i<e.length;i++)if(r===n[i]||null===r&&yl(t,e[i]))return i+1;return 0}var bl=[],_l={};function wl(t,e,n){var r=6+3*e,i=Bl(t,r),o=Fl(t,r);if(Wl(o,i,n)){Nl(t,r,n);var a=Dl(o),s=Bl(t,a);if(!s||s!==n){var u=!1,l=!0,c=2==(2&o);!Gl(n,c)&&Gl(s,c)&&(u=!0,l=!1),El(t,a,u),El(t,r,l),zl(t,!0)}}}function xl(t,e,n,r,i,o){n=i&&n?i(e,n):n,o?o[e]=n:n?(ngDevMode&&ngDevMode.rendererSetStyle++,ju(r)?r.setStyle(t,e,n,Bu.DashCase):t.style.setProperty(e,n)):(ngDevMode&&ngDevMode.rendererRemoveStyle++,ju(r)?r.removeStyle(t,e,Bu.DashCase):t.style.removeProperty(e))}function Cl(t,e,n,r,i){i?i[e]=n:n?(ngDevMode&&ngDevMode.rendererAddClass++,ju(r)?r.addClass(t,e):t.classList.add(e)):(ngDevMode&&ngDevMode.rendererRemoveClass++,ju(r)?r.removeClass(t,e):t.classList.remove(e))}function El(t,e,n){var r=e>=6?e+0:e;n?t[r]|=1:t[r]&=-2}function Sl(t,e){return 1==(1&t[e>=6?e+0:e])}function Tl(t,e){return 2==(2&t[e>=6?e+0:e])}function Al(t,e){return 4==(4&t[e>=6?e+0:e])}function Pl(t,e,n){return 7&t|e<<3|n<<17}function Il(t,e){var n=Ol(e);return t[2][n]}function Ol(t){return t>>3&16383}function Dl(t){var e=t>>17&16383;return e>=6?e:-1}function kl(t){return Dl(t[3])}function Ml(t){return t[1]}function Rl(t,e,n){t[e+1]=n}function Nl(t,e,n){t[e+2]=n}function Ll(t,e,n){t[3===e?e:e+0]=n}function Fl(t,e){return t[3===e?e:e+0]}function Bl(t,e){return t[e+2]}function jl(t,e){return t[e+1]}function zl(t,e){El(t,3,e)}function Vl(t,e,n){for(var r=(n||0)+1;r<t.length;r+=3)if(t[r]==e)return r-1;return-1}function Ul(t,e,n){var r=Bl(t,e),i=jl(t,e),o=Fl(t,e),a=o,s=Fl(t,n),u=Dl(a);u>=0&&Ll(t,u,Pl(l=Fl(t,u),Ol(l),n));var l,c=Dl(s);c>=0&&Ll(t,c,Pl(l=Fl(t,c),Ol(l),e)),Nl(t,e,Bl(t,n)),Rl(t,e,jl(t,n)),Ll(t,e,Fl(t,n)),Nl(t,n,r),Rl(t,n,i),Ll(t,n,o)}function ql(t,e,n,r,i,o){var a=e<t.length;t.splice(e,0,1|i|(n?2:0),r,o),a&&function(t,n){for(var r=e+3;r<t.length;r+=3){var i=Dl(Fl(t,r));if(i>0){var o=Ol(Fl(t,i));Ll(t,i,Pl((Sl(t,i)?1:0)|(Tl(t,i)?2:0)|(Al(t,i)?4:0),o,r))}}}(t)}function Gl(t,e){return e?!!t:null!==t}function Hl(t,e,n){return e?2:n&&n(t)?4:0}function Wl(t,e,n){return!(2&t)&&e&&n&&4&t?e.toString()!==n.toString():e!==n}var Kl,Xl,Ql,Zl,Yl,Jl,$l,tc,ec,nc="__ngHostLNode__",rc=Promise.resolve(null),ic=[0,0],oc=new Array(uu).fill(null),ac="__CIRCULAR__",sc=null;function uc(){return Kl}function lc(){return tc&&tc[wu]}function cc(){return tc}function hc(){return Ql}function pc(t){return t[yu]||(t[yu]=[])}function fc(t){return t[lu].cleanup||(t[lu].cleanup=[])}var dc=!1,mc=!0;function gc(t,e){var n=tc;return ec=t&&t[gu],Yl=t&&t[lu],$l=t&&1==(1&t[fu]),mc=t&&Yl.firstTemplatePass,Kl=t&&t[_u],null!=e&&(Ql=e,Zl=!0),tc=t,Jl=t&&t[pu],n}function yc(t,e){e||(dc||Du(ec,Yl.viewHooks,Yl.viewCheckHooks,$l),tc[fu]&=-6),tc[fu]|=16,tc[mu]=-1,gc(t,null)}function vc(){dc||Ou(tc,Yl,$l),function(t){for(var e=al(tc);null!==e;e=e[hu])if(e.length<uu&&null===e[Ru])for(var n=e,r=0;r<n[Nu].length;r++){var i=n[Nu][r],o=i.data;ngDevMode&&ou(o[lu],"TView must be allocated"),Sc(i,o[lu],o[vu],2)}}(),dc||Du(ec,Yl.contentHooks,Yl.contentCheckHooks,$l),Yl.firstTemplatePass=mc=!1,bc(Yl.hostBindings),function(t){if(null!=t.contentQueries)for(var e=0;e<t.contentQueries.length;e+=2){var n=t.contentQueries[e];t.directives[n].contentQueriesRefresh(n,t.contentQueries[e+1])}}(Yl),function(t){if(null!=t)for(var e=0;e<t.length;e+=2)gh(t[e],t[e+1])}(Yl.components)}function bc(t){if(null!=t)for(var e=Yl.directives,n=0;n<t.length;n+=2){var r=t[n],i=e[r];i.hostBindings&&i.hostBindings(r,t[n+1])}}function _c(){dc||(Ou(tc,Yl,$l),Du(ec,Yl.contentHooks,Yl.contentCheckHooks,$l))}function wc(t,e,n,r,i){return[e,tc,null,null,25|r,null,-1,null,null,n,tc&&tc[bu],t,i||null,null,-1,null]}function xc(t,e,n,r,i,o){return{native:r,view:e,nodeInjector:n?n.nodeInjector:null,data:i,queries:o,tNode:null,dynamicLContainerNode:null}}function Cc(t,e,n,r,i,o){var a=Zl?Ql:Ql&&Zu(Ql),s=a&&a.view===tc?a.tNode:null,u=(Zl?Jl:Ql&&Ql.queries)||a&&a.queries&&a.queries.child(),l=null!=o,c=xc(0,tc,a,n,l?o:null,u);if(-1===t||2===e)c.tNode=(o?o[lu].node:null)||Jc(e,t,null,null,s,null);else{var h=t+uu;ngDevMode&&ip(h);var p=Yl.data;if(tc[h]=c,h>=p.length){var f=p[h]=Jc(e,h,r,i,s,null);if(!Zl&&Ql){var d=Ql.tNode;d.next=f,d.dynamicContainerNode&&(d.dynamicContainerNode.next=f)}}c.tNode=p[h],Zl&&(Jl=null,(null==Ql.tNode.child&&Ql.view===tc||2===Ql.tNode.type)&&(Ql.tNode.child=c.tNode))}if(2==(2&e)&&l){var m=o;ngDevMode&&null!=m[du]&&su("lViewData[HOST_NODE] should not have been initialized"),m[du]=c,mc&&(m[lu].node=c.tNode)}return Ql=c,Zl=!0,c}function Ec(){Zl=!1,Ql=null}function Sc(t,e,n,r){var i,o=Zl,a=Ql;if(null==t.data[cu]&&t.data[vu]&&!e.template)Ch(t.data[vu]);else try{Zl=!0,Ql=null,i=gc(t.data,t),Dc(),e.template(r,n),2&r?vc():t.data[lu].firstTemplatePass=mc=!1}finally{yc(i,1==(1&r)),Zl=o,Ql=a}return t}function Tc(t,e,n,r){var i=gc(e,t);try{Xl.begin&&Xl.begin(),r?(Dc(),r(Ac(e),n),vc()):(_c(),bc(ic),gh(0,uu))}finally{Xl.end&&Xl.end(),yc(i)}}function Ac(t){return 1&t[fu]?3:2}var Pc=null;function Ic(){Pc="http://www.w3.org/2000/svg/"}function Oc(){Pc="http://www.w3.org/1998/MathML/"}function Dc(){Pc=null}function kc(t,e,n,r){Mc(t,e,n,r),Qc()}function Mc(t,e,n,r){ngDevMode&&nu(tc[mu],-1,"elements should be created before any bindings"),ngDevMode&&ngDevMode.rendererCreateElement++;var i=Rc(e);ngDevMode&&rp(t-1);var o=Cc(t,3,i,e,n||null,null);return sc=o,n&&qc(i,n),hl(Zu(o),i,tc),Nc(r),i}function Rc(t,e){var n=e||Kl;return ju(n)?n.createElement(t,Pc):null===Pc?n.createElement(t):n.createElementNS(Pc,t)}function Nc(t){var e=Ql;mc?(ngDevMode&&ngDevMode.firstTemplatePass++,function(t,e,n){var r=n?{"":-1}:null,i=e.currentMatches=Lc(t);if(i)for(var o=0;o<i.length;o+=2){var a=i[o],s=o+1;Fc(a,s,i,e),zc(i[s],a,r)}r&&function(t,e,n){if(e)for(var r=t.localNames=[],i=0;i<e.length;i+=2){var o=n[e[i+1]];if(null==o)throw new Error("Export of name '"+e[i+1]+"' not found!");r.push(e[i],o)}}(t,n,r)}(e.tNode,Yl,t||null)):function(){var t=Ql.tNode,e=4095&t.flags;if(e>0)for(var n=t.flags>>14,r=n+e,i=Yl.directives,o=n;o<r;o++){var a=i[o];uh(o,a.factory(),a)}}(),function(){var t=Ql.tNode.localNames;if(t)for(var e=0;e<t.length;e+=2){var n=t[e+1];tc.push(-1===n?Ql.native:ec[n])}}()}function Lc(t){var e=Yl.directiveRegistry,n=null;if(e)for(var r=0;r<e.length;r++){var i=e[r];yl(t,i.selectors)&&(i.template&&(4096&t.flags&&Mu(t),t.flags=4096),i.diPublic&&i.diPublic(i),(n||(n=[])).push(i,null))}return n}function Fc(t,e,n,r){if(null===n[e]){n[e]=ac;var i=t.factory();return(r.directives||(r.directives=[])).push(t),uh(n[e]=r.directives.length-1,i,t)}return n[e]===ac&&function(e){throw new Error("Cannot instantiate cyclic dependency! "+t.type)}(),null}function Bc(t){mc&&(Yl.components||(Yl.components=[])).push(t,tc.length-1)}function jc(t,e,n){t&&null!=t.changeDetectorRef&&t.changeDetectorRef._setComponentContext(n,e)}function zc(t,e,n){n&&(e.exportAs&&(n[e.exportAs]=t),e.template&&(n[""]=t))}function Vc(t,e,n,r){return t.ngPrivateData||(t.ngPrivateData=Uc(-1,t,e,n,r))}function Uc(t,e,n,r,i){return ngDevMode&&ngDevMode.tView++,{id:t,template:e,viewQuery:i,node:null,data:oc.slice(),childIndex:-1,bindingStartIndex:-1,directives:null,firstTemplatePass:!0,initHooks:null,checkHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,pipeDestroyHooks:null,cleanup:null,hostBindings:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof n?n():n,pipeRegistry:"function"==typeof r?r():r,currentMatches:null}}function qc(t,e){for(var n=ju(Kl),r=0;r<e.length;){var i=e[r];if(1===i)break;if(i===Fu)r+=2;else if(ngDevMode&&ngDevMode.rendererSetAttribute++,0===i){var o=e[r+1],a=e[r+2],s=e[r+3];n?Kl.setAttribute(t,a,s,o):t.setAttributeNS(o,a,s),r+=4}else s=e[r+1],n?Kl.setAttribute(t,i,s):t.setAttribute(i,s),r+=2}}function Gc(t,e){ngDevMode&&rp(-1),Xl=t;var n=t.createRenderer(null,null),r="string"==typeof e?ju(n)?n.selectRootElement(e):n.querySelector(e):e;if(ngDevMode&&!r)throw new Error("Renderer: "+("string"==typeof e?"Host node with selector not found:":"Host node is required:")+" ["+Gu(e)+"]");return r}function Hc(t,e,n,r){Ec();var i=Cc(0,3,e,null,null,wc(Kl,Vc(n.template,n.directiveDefs,n.pipeDefs,n.viewQuery),null,n.onPush?4:2,r));return mc&&(i.tNode.flags=4096,n.diPublic&&n.diPublic(n),Yl.directives=[n]),i}function Wc(t,e,n){void 0===n&&(n=!1),ngDevMode&&ep();var r=Ql,i=r.native;if(ngDevMode&&ngDevMode.rendererAddEventListener++,ju(Kl)){var o=function(t,e){return function(n){return xh(t),e(n)}}(tc,e),a=Kl.listen(i,t,o);Xc(tc,a)}else{o=function(t,e){return function(n){xh(t),!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}(tc,e),i.addEventListener(t,o,n);var s=pc(tc);s.push(o),mc&&fc(tc).push(t,r.tNode.index,s.length-1,n)}var u=r.tNode;void 0===u.outputs&&(u.outputs=$c(r.tNode.flags,1));var l,c=u.outputs;c&&(l=c[t])&&function(t,e){for(var n=0;n<t.length;n+=2){ngDevMode&&rp(t[n],ec);var r=ec[t[n]][t[n+1]].subscribe(e);Kc(tc,r,r.unsubscribe)}}(l,e)}function Kc(t,e,n){t||(t=tc),pc(t).push(e),t[lu].firstTemplatePass&&fc(t).push(n,t[yu].length-1)}function Xc(t,e){pc(t).push(e),t[lu].firstTemplatePass&&fc(t).push(t[yu].length-1,null)}function Qc(){Zl?Zl=!1:(ngDevMode&&np(),Ql=Zu(Ql)),ngDevMode&&Vu(Ql,3);var t=Ql.queries;t&&t.addNode(Ql),Tu(Ql.tNode.flags,Yl),sc=null}function Zc(t,e,n,r){if(n!==Ph){var i=Kh(t);if(null==n)ngDevMode&&ngDevMode.rendererRemoveAttribute++,ju(Kl)?Kl.removeAttribute(i.native,e):i.native.removeAttribute(e);else{ngDevMode&&ngDevMode.rendererSetAttribute++;var o=null==r?Gu(n):r(n);ju(Kl)?Kl.setAttribute(i.native,e,o):i.native.setAttribute(e,o)}}}function Yc(t,e,n,r){if(n!==Ph){var i=Kh(t),o=i.tNode;o&&void 0===o.inputs&&(o.inputs=$c(i.tNode.flags,0));var a,s=o&&o.inputs;if(s&&(a=s[e]))!function(t,e){for(var n=0;n<t.length;n+=2)ngDevMode&&rp(t[n],ec),ec[t[n]][t[n+1]]=e}(a,n),function(t){!t.data||2&t.data[fu]||(t.data[fu]|=4)}(i);else{n=null!=r?r(n):n;var u=i.native;ngDevMode&&ngDevMode.rendererSetProperty++,ju(Kl)?Kl.setProperty(u,e,n):u.setProperty?u.setProperty(e,n):u[e]=n}}}function Jc(t,e,n,r,i,o){return ngDevMode&&ngDevMode.tNode++,{type:t,index:e,flags:0,tagName:n,attrs:r,localNames:null,initialInputs:void 0,inputs:void 0,outputs:void 0,tViews:o,next:null,child:null,parent:i,dynamicContainerNode:null,detached:null,stylingTemplate:null,projection:null}}function $c(t,e){var n=4095&t,r=null;if(n>0)for(var i=t>>14,o=i+n,a=0===e,s=Yl.directives,u=i;u<o;u++){var l=s[u],c=a?l.inputs:l.outputs;for(var h in c)if(c.hasOwnProperty(h)){var p=c[h];(r=r||{}).hasOwnProperty(h)?r[h].push(u,p):r[h]=[u,p]}}return r}function th(t,e,n){var r;wl(r=nh(t),e+r[4],!!n)}function eh(t,e,n){var r=sc.tNode;r.stylingTemplate||(r.stylingTemplate=function(t,e,n){var r=[null],i=[null,n||null,r,0,0,null],o={},a={},s=0;if(e)for(var u=!1,l=0;l<e.length;l++)if(1===(p=e[l]))u=!0;else{var c=p;if(u){var h=e[++l];r.push(h),o[c]=r.length-1}else s++,o[c]=0}if(i[4]=s,t)for(u=!1,l=0;l<t.length;l++){var p;if(1===(p=t[l]))u=!0;else{var f=p;u?(h=t[++l],r.push(h),a[f]=r.length-1):a[f]=0}}var d=Object.keys(o),m=Object.keys(a),g=d.length,y=d.length+m.length,v=3*y*2+6;for(l=6;l<v;l++)i.push(null);var b=3*y+6;for(l=0;l<y;l++){var _=l>=g,w=(c=_?m[l-g]:d[l],_?a[c]:o[c]),x=r[w],C=3*l+b,E=3*l+6,S=Hl(c,_,n||null);Ll(i,E,Pl(S,w,C)),Rl(i,E,c),Nl(i,E,null),Ll(i,C,Pl(S|(null!==x?1:0),w,E)),Rl(i,C,c),Nl(i,C,null)}return Ll(i,3,Pl(0,0,b)),zl(i,r.length>1),i}(t,e,n)),(e&&e.length||t&&t.length)&&rh(r.index-uu)}function nh(t){var e=Wh(t);if(!Array.isArray(e)){var n=e,r=n.tNode;ngDevMode&&ou(r.stylingTemplate,"getStylingContext() called before elementStyling()"),e=tc[t+uu]=function(t,e){var n=r.stylingTemplate.slice();return n[0]=t,n}(n)}return e}function rh(t){!function(t,e,n,r){if(function(t){return Sl(t,3)}(t)){for(var i=t[0].native,o=kl(t),a=Ml(t),s=6;s<t.length;s+=3)if(Sl(t,s)){var u=jl(t,s),l=Bl(t,s),c=Fl(t,s),h=!!(2&c),p=l;s<o&&!Gl(p,h)&&(p=Bl(t,Dl(c))),Gl(p,h)||(p=Il(t,c)),h?Cl(i,u,!!p,e,void 0):xl(i,u,p,e,4&c?a:null,void 0),El(t,s,!1)}zl(t,!1)}}(nh(t),Kl)}function ih(t,e,n,r){var i=null;n&&(i=r?Gu(n)+r:n),wl(nh(t),e,i)}function oh(t,e,n){!function(t,e,n){var r=bl,i=!1,o=!1;if("string"==typeof e){var a=t[5];a&&a===e?o=!0:(t[5]=e,r=e.split(/\s+/),i=!0)}else r=e?Object.keys(e):bl,t[5]=null;e=e||_l;var s=n?Object.keys(n):bl;n=n||_l;for(var u=s.length,l=!1,c=kl(t),h=0,p=s.length+r.length;c<t.length&&h<p;){var f=h>=u;if(!o||!f){var d=f?h-u:h,m=f?r[d]:s[d],g=f?!!i||e[m]:n[m];if((S=jl(t,c))===m){var y=Bl(t,c);Wl(T=Fl(t,c),y,g)&&(Nl(t,c,g),(w=Il(t,T))!==g&&(El(t,c,!0),l=!0))}else{var v=Vl(t,m,c);if(v>0){var b=Bl(t,v),_=Fl(t,v);if(Ul(t,c,v),b!==g){var w=Il(t,_);Nl(t,c,g),w!==g&&(El(t,c,!0),l=!0)}}else ql(t,c,f,m,Hl(m,f,Ml(t)),g),l=!0}}c+=3,h++}for(;c<t.length;){var x=2==(2&(T=Fl(t,c)));if(o&&x)break;Gl(y=Bl(t,c),x)&&(El(t,c,!0),Nl(t,c,null),l=!0),c+=3}for(var C=Ml(t);h<p;){var E=h>=u;if(o&&E)break;d=E?h-u:h;var S=E?r[d]:s[d],T=(y=E?!!i||e[S]:n[S],1|Hl(S,E,C));t.push(T,S,y),h++,l=!0}l&&zl(t,!0)}(nh(t),e,n)}function ah(t,e){ngDevMode&&nu(tc[mu],-1,"text nodes should be created before bindings"),ngDevMode&&ngDevMode.rendererCreateTextNode++;var n=el(e,Kl),r=Cc(t,3,n,null,null);Zl=!1,hl(Zu(r),n,tc)}function sh(t,e){if(e!==Ph){ngDevMode&&rp(t+uu);var n=Kh(t);ngDevMode&&ou(n,"LNode should exist"),ngDevMode&&ou(n.native,"native element should exist"),ngDevMode&&ngDevMode.rendererSetText++,ju(Kl)?Kl.setValue(n.native,Gu(e)):n.native.textContent=Gu(e)}}function uh(t,e,n){var r=lh(t,e,n);ngDevMode&&ou(Ql.tNode,"previousOrParentNode.tNode");var i,o=Ql.tNode;return n.template&&function(t,e,n){var r=Vc(n.template,n.directiveDefs,n.pipeDefs,n.viewQuery),i=wh(tc,Ql.tNode.index,wc(Xl.createRenderer(Ql.native,n.rendererType),r,null,n.onPush?4:2,lc()));Ql.data=i,i[du]=Ql,jc(Ql.nodeInjector,e,i),mc&&Bc(t)}(t,e,n),mc&&(Su(t,n.onInit,n.doCheck,Yl),n.hostBindings&&(i=t,ngDevMode&&nu(mc,!0,"Should only be called in first template pass."),(Yl.hostBindings||(Yl.hostBindings=[])).push(i,tc.length-1-uu))),o&&o.attrs&&function(t,e,r,i){var o=i.initialInputs;(void 0===o||t>=o.length)&&(o=function(t,e,n){var r=n.initialInputs||(n.initialInputs=[]);r[t]=null;for(var i=n.attrs,o=0;o<i.length;){var a=i[o];if(1===a)break;if(0!==a){var s=e[a],u=i[o+1];void 0!==s&&(r[t]||(r[t]=[])).push(s,u),o+=2}else o+=4}return r}(t,n.inputs,i));var a=o[t];if(a)for(var s=0;s<a.length;s+=2)e[a[s]]=a[s+1]}(t,r,0,o),n.contentQueries&&n.contentQueries(),r}function lh(t,e,n){if(ngDevMode&&nu(tc[mu],-1,"directives should be created before any bindings"),ngDevMode&&ep(),Object.defineProperty(e,nc,{enumerable:!1,value:Ql}),null==ec&&(tc[gu]=ec=[]),ngDevMode&&ip(t,ec),ec[t]=e,mc){var r=Ql.tNode.flags;0==(4095&r)?Ql.tNode.flags=t<<14|4096&r|1:(ngDevMode&&ru(4095&r,4095,"Reached the max number of directives"),Ql.tNode.flags++)}else{var i=n.diPublic;i&&i(n)}return null!=n.attributes&&3==Ql.tNode.type&&qc(Ql.native,n.attributes),e}function ch(t,e,n){ngDevMode&&ou(t,"containers should have a parent");var r=cl(t,e)?t:null;return r&&2===r.tNode.type&&(r=Zu(r).data[Lu]),[n?null:0,e,null,null,[],r]}function hh(t,e,n,r,i){ngDevMode&&nu(tc[mu],-1,"container nodes should be created before any bindings");var o=ch(Zl?Ql:Zu(Ql),tc),a=Kl.createComment(ngDevMode?"container":""),s=Cc(t,0,a,n||null,r||null,o);hl(Zu(s),a,tc),mc&&(s.tNode.tViews=e?Uc(-1,e,Yl.directiveRegistry,Yl.pipeRegistry,null):[]),wh(tc,t+uu,s.data);var u=s.queries;u&&(o[pu]=u.container()),Nc(i),Zl=!1,ngDevMode&&Vu(Ql,0),u&&u.addNode(s),Tu(s.tNode.flags,Yl)}function ph(t){Ql=Kh(t),ngDevMode&&Vu(Ql,0),Zl=!0,Ql.data[Ru]=0,dc||Ou(tc,Yl,$l)}function fh(){Zl?Zl=!1:(ngDevMode&&Vu(Ql,2),ngDevMode&&np(),Ql=Zu(Ql)),ngDevMode&&Vu(Ql,0);var t=Ql;ngDevMode&&Vu(t,0);for(var e=t.data[Ru];e<t.data[Nu].length;)ol(t,e)}function dh(t){var e=Zl?Ql:Zu(Ql);ngDevMode&&Vu(e,0);var n=e.data,r=function(t,e,r){for(var i=t.data[Nu],o=n[Ru];o<i.length;o++){var a=i[o].data[lu].id;if(a===r)return i[o];if(!(a<r))break;ol(t,o)}return null}(e,0,t);if(r)Ql=r,ngDevMode&&Vu(Ql,2),Zl=!0,gc(r.data,r);else{var i=wc(Kl,function(t,e){ngDevMode&&Vu(e,0);var n=e.tNode.tViews;return ngDevMode&&ou(n,"TView expected"),ngDevMode&&nu(Array.isArray(n),!0,"TViews should be in an array"),(t>=n.length||null==n[t])&&(n[t]=Uc(t,null,Yl.directiveRegistry,Yl.pipeRegistry,null)),n[t]}(t,e),null,2,lc());n[pu]&&(i[pu]=n[pu].createView()),gc(i,r=Cc(t,2,null,null,null,i))}return e&&($l&&rl(e,r,n[Ru]),n[Ru]++),Ac(r.data)}function mh(){vc(),Zl=!1,Ql=tc[du],yc(tc[cu]),ngDevMode&&nu(Zl,!1,"isParent"),ngDevMode&&Vu(Ql,2)}function gh(t,e){ngDevMode&&rp(e);var n=tc[e];ngDevMode&&Vu(n,3),ngDevMode&&ou(n.data,"Component's host node should have an LViewData attached.");var r=n.data;yh(r)&&6&r[fu]&&(ngDevMode&&rp(t,ec),Th(r,n,ec[t]))}function yh(t){return 8==(8&t[fu])}function vh(t,e){var n=$u(tc);if(!n.tNode.projection)for(var r=n.tNode.projection=new Array(t?t.length+1:1).fill(null),i=r.slice(),o=n.tNode.child;null!==o;){var a=t?vl(o,t,e):0,s=o.next;i[a]?i[a].next=o:(r[a]=o,o.next=null),i[a]=o,o=s}}var bh=[];function _h(t,e,n){void 0===e&&(e=0);var r=Cc(t,1,null,null,n||null,null);null===r.tNode.projection&&(r.tNode.projection=e),Zl=!1;var i=Zu(r);if(cl(i,tc))for(var o=$u(tc),a=o.tNode.projection[e],s=o.view,u=-1,l=void 0,c=2===i.tNode.type?(l=Zu(i))&&l.data[Lu]:i;a;){if(1===a.type){var h=$u(s),p=h.tNode.projection[a.projection];if(p){bh[++u]=s[a.index],a=p,s=h.view;continue}}else(f=s[a.index]).tNode.flags|=8192,fl(f,i,tc,c);var f;null===a.next&&s!==o.view&&(a=(f=bh[u--]).tNode,s=f.view),a=a.next}}function wh(t,e,n){return t[xu]?t[xu][hu]=n:mc&&(Yl.childIndex=e),t[xu]=n,n}function xh(t){for(var e=t;null!=e[cu];)e[fu]|=4,e=e[cu];var n,r;e[fu]|=4,ngDevMode&&ou(e[vu],"rootContext"),(n=e[vu]).clean==rc&&(n.clean=new Promise(function(t){return r=t}),n.scheduler(function(){Ch(n),r(null),n.clean=rc}))}function Ch(t){for(var e=0;e<t.components.length;e++){var n=t.components[e],r=ap(n);ngDevMode&&ou(r.data,"Component host node should be attached to an LView"),Tc(r,Eh(n),n)}}function Eh(t){ngDevMode&&ou(t,"component");for(var e=ap(t).view;e[cu];)e=e[cu];return e}function Sh(t){var e=ap(t);ngDevMode&&ou(e.data,"Component host node should be attached to an LViewData instance."),Th(e.data,e,t)}function Th(t,e,n){var r=gc(t,e),i=t[lu],o=i.template,a=i.viewQuery;try{Dc(),function(e,n,r){e&&1&t[fu]&&e(1,r)}(a,0,n),o(Ac(t),n),vc(),function(t,e){t&&t(2,e)}(a,n)}finally{yc(r)}}function Ah(t){ngDevMode&&ou(t,"component"),xh(ap(t).view)}var Ph={};function Ih(){ngDevMode&&nu(tc[mu],-1,"Binding index should not yet be set "+tc[mu]),-1===Yl.bindingStartIndex&&(Yl.bindingStartIndex=tc.length),tc[mu]=Yl.bindingStartIndex}function Oh(t){return Qh(t)?t:Ph}function Dh(t){tc.length+=t,tc.fill(Ph,-t),Ih()}function kh(t){var e=tc[mu];return tc[mu]=Yl.bindingStartIndex-t,e}function Mh(t){tc[mu]=t}function Rh(t){ngDevMode&&iu(2,t.length,"should have at least 3 values"),ngDevMode&&nu(t.length%2,1,"should have an odd number of values");for(var e=!1,n=1;n<t.length;n+=2)Qh(t[n])&&(e=!0);if(!e)return Ph;var r=t[0];for(n=1;n<t.length;n+=2)r+=Gu(t[n])+t[n+1];return r}function Nh(t,e,n){return Qh(e)?t+Gu(e)+n:Ph}function Lh(t,e,n,r,i){return Yh(e,r)?t+Gu(e)+n+Gu(r)+i:Ph}function Fh(t,e,n,r,i,o,a){var s=Yh(e,r);return(s=Qh(o)||s)?t+Gu(e)+n+Gu(r)+i+Gu(o)+a:Ph}function Bh(t,e,n,r,i,o,a,s,u){return Jh(e,r,o,s)?t+Gu(e)+n+Gu(r)+i+Gu(o)+a+Gu(s)+u:Ph}function jh(t,e,n,r,i,o,a,s,u,l,c){var h=Jh(e,r,o,s);return(h=Qh(l)||h)?t+Gu(e)+n+Gu(r)+i+Gu(o)+a+Gu(s)+u+Gu(l)+c:Ph}function zh(t,e,n,r,i,o,a,s,u,l,c,h,p){var f=Jh(e,r,o,s);return(f=Yh(l,h)||f)?t+Gu(e)+n+Gu(r)+i+Gu(o)+a+Gu(s)+u+Gu(l)+c+Gu(h)+p:Ph}function Vh(t,e,n,r,i,o,a,s,u,l,c,h,p,f,d){var m=Jh(e,r,o,s);return m=Yh(l,h)||m,(m=Qh(f)||m)?t+Gu(e)+n+Gu(r)+i+Gu(o)+a+Gu(s)+u+Gu(l)+c+Gu(h)+p+Gu(f)+d:Ph}function Uh(t,e,n,r,i,o,a,s,u,l,c,h,p,f,d,m,g){var y=Jh(e,r,o,s);return(y=Jh(l,h,f,m)||y)?t+Gu(e)+n+Gu(r)+i+Gu(o)+a+Gu(s)+u+Gu(l)+c+Gu(h)+p+Gu(f)+d+Gu(m)+g:Ph}function qh(t,e){var n=t+uu;n>=Yl.data.length&&(Yl.data[n]=null),tc[n]=e}function Gh(t){return ngDevMode&&ou(ec,"Directives array should be defined if reading a dir."),ngDevMode&&rp(t,ec),ec[t]}function Hh(t){return ngDevMode&&ou(tc[Eu],"Content QueryList array should be defined if reading a query."),ngDevMode&&rp(t,tc[Eu]),tc[Eu][t]}function Wh(t){return Hu(t,tc)}function Kh(t){return function(t,e){return Ku(Hu(t,tc))}(t)}function Xh(){return ngDevMode&&rp(tc[mu]),ngDevMode&&ru(tc[tc[mu]],Ph,"Stored value should never be NO_CHANGE."),tc[tc[mu]++]}function Qh(t){ngDevMode&&ru(t,Ph,"Incoming value should never be NO_CHANGE."),-1===tc[mu]&&Ih();var e,n,r=tc[mu];if(r>=tc.length)tc[tc[mu]++]=t;else{if(n=t,(e=tc[r])!=e&&n!=n||e===n)return tc[mu]++,!1;!function(e,n,i,o){if(n){var a="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+tc[r]+"'. Current value: '"+t+"'.";throw e&&(a+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),new Error(a)}}($l,dc),tc[tc[mu]++]=t}return!0}function Zh(t){return Qh(t),t}function Yh(t,e){var n=Qh(t);return Qh(e)||n}function Jh(t,e,n,r){var i=Yh(t,e);return Yh(n,r)||i}function $h(){return Yl}function tp(t){var e=(tc[Eu]||(tc[Eu]=[])).push(t);if(mc){var n=ec.length-1,r=Yl.contentQueries||(Yl.contentQueries=[]);n!==(Yl.contentQueries.length?Yl.contentQueries[Yl.contentQueries.length-2]:-1)&&r.push(n,e-1)}}function ep(){nu(Zl,!0,"previousOrParentNode should be a parent")}function np(){ou(Zu(Ql),"previousOrParentNode should have a parent")}function rp(t,e){null==e&&(e=tc),Wu(t,e||tc)}function ip(t,e){null==e&&(e=tc),nu(e.length,t,"index "+t+" expected to be at the end of arr (length "+e.length+")")}function op(t,e){if(mc)for(var n=Yl.bindingStartIndex-t,r=0;r<e;r++)nu(tc[n+r],Ph,"The reserved slots should be set to `NO_CHANGE` on first template pass")}function ap(t){ngDevMode&&ou(t,"expecting component got null");var e=t[nc];return ngDevMode&&ou(t,"object is not a component"),e}var sp=rc,up=ic;function lp(t,e){void 0===e&&(e={}),ngDevMode&&au(t);var n,r=e.rendererFactory||zu,i=e.sanitizer||null,o=t.ngComponentDef;o.type!=t&&(o.type=t);var a=Gc(r,e.host||o.selectors[0][0]),s=cp(e.scheduler||requestAnimationFrame.bind(window)),u=wc(r.createRenderer(a,o.rendererType),Uc(-1,null,null,null,null),s,o.onPush?4:2);u[bu]=e.injector||null;var l,c=gc(u,null);try{r.begin&&r.begin(),l=Hc(0,a,o,i),s.components.push(n=lh(0,o.factory(),o)),jc(l.nodeInjector,n,l.data),e.hostFeatures&&e.hostFeatures.forEach(function(t){return t(n,o)}),_c(),bc(up),Th(l.data,l,n)}finally{yc(c),r.end&&r.end()}return n}function cp(t){return{components:[],scheduler:t,clean:sp}}function hp(t){return function(t){var e=Eh(t)[vu];return ngDevMode&&ou(e,"rootContext"),e}(t).clean}function pp(t){var e=t.type,n=t.pipes,r=t.directives,i={},o={type:e,diPublic:null,factory:t.factory,template:t.template||null,hostBindings:t.hostBindings||null,contentQueries:t.contentQueries||null,contentQueriesRefresh:t.contentQueriesRefresh||null,attributes:t.attributes||null,inputs:yp(t.inputs,i),declaredInputs:i,outputs:yp(t.outputs),rendererType:Ui(t.rendererType)||null,exportAs:t.exportAs||null,onInit:e.prototype.ngOnInit||null,doCheck:e.prototype.ngDoCheck||null,afterContentInit:e.prototype.ngAfterContentInit||null,afterContentChecked:e.prototype.ngAfterContentChecked||null,afterViewInit:e.prototype.ngAfterViewInit||null,afterViewChecked:e.prototype.ngAfterViewChecked||null,onDestroy:e.prototype.ngOnDestroy||null,onPush:t.changeDetection===T.OnPush,directiveDefs:r?function(){return("function"==typeof r?r():r).map(fp)}:null,pipeDefs:n?function(){return("function"==typeof n?n():n).map(dp)}:null,selectors:t.selectors,viewQuery:t.viewQuery||null,features:t.features||null},a=t.features;return a&&a.forEach(function(t){return t(o)}),o}function fp(t){var e=t.ngComponentDef||t.ngDirectiveDef;if(ngDevMode&&!e)throw new Error("'"+t.name+"' is neither 'ComponentType' or 'DirectiveType'.");return e}function dp(t){var e=t.ngPipeDef;if(ngDevMode&&!e)throw new Error("'"+t.name+"' is not a 'PipeType'.");return e}function mp(t){return{type:t.type,bootstrap:t.bootstrap||[],declarations:t.declarations||[],imports:t.imports||[],exports:t.exports||[],transitiveCompileScopes:null}}var gp={};function yp(t,e){if(null==t)return gp;var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[o]=r)}return n}var vp=pp;function bp(t){return{name:t.name,factory:t.factory,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function _p(t,e){for(var n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function wp(t){for(var e=Object.getPrototypeOf(t.type.prototype).constructor,n=void 0,i=function(){var i,o;if(function(t){return"function"==typeof t.template}(t))n=e.ngComponentDef||e.ngDirectiveDef;else{if(e.ngComponentDef)throw new Error("Directives cannot inherit Components");n=e.ngDirectiveDef}if(n){_p(t.inputs,n.inputs),_p(t.declaredInputs,n.declaredInputs),_p(t.outputs,n.outputs);var a=t.hostBindings,s=n.hostBindings;s&&(t.hostBindings=a?function(t,e){s(t,e),a(t,e)}:s),t.afterContentChecked=t.afterContentChecked||n.afterContentChecked,t.afterContentInit=t.afterContentInit||n.afterContentInit,t.afterViewChecked=t.afterViewChecked||n.afterViewChecked,t.afterViewInit=t.afterViewInit||n.afterViewInit,t.doCheck=t.doCheck||n.doCheck,t.onDestroy=t.onDestroy||n.onDestroy,t.onInit=t.onInit||n.onInit;var u=n.features;if(u)try{for(var l=Object(r.g)(u),c=l.next();!c.done;c=l.next()){var h=c.value;h&&h!==wp&&h(t)}}catch(t){i={error:t}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}}else{var p=e.prototype;p&&(t.afterContentChecked=t.afterContentChecked||p.afterContentChecked,t.afterContentInit=t.afterContentInit||p.afterContentInit,t.afterViewChecked=t.afterViewChecked||p.afterViewChecked,t.afterViewInit=t.afterViewInit||p.afterViewInit,t.doCheck=t.doCheck||p.doCheck,t.onDestroy=t.onDestroy||p.onDestroy,t.onInit=t.onInit||p.onInit)}e=Object.getPrototypeOf(e)};e&&!n;)i()}var xp="__ngOnChanges_";function Cp(t){var e=t.declaredInputs,n=t.type.prototype,r=function(t){if(e.hasOwnProperty(t)){for(var r=e[t],i=xp+r,o=void 0,a=n;!o&&a&&Object.getPrototypeOf(a)!==Object.getPrototypeOf(Object.prototype);)o=Object.getOwnPropertyDescriptor(a,r),a=Object.getPrototypeOf(a);var s=o&&o.set;Object.defineProperty(n,r,{get:o&&o.get||(s?void 0:function(){return this[i]}),set:function(e){var n=this[xp];n||(n={},Object.defineProperty(this,xp,{value:n,writable:!0}));var r=!this.hasOwnProperty(i),o=n[t];o?o.currentValue=e:n[t]=new br(this[i],e,r),r?Object.defineProperty(this,i,{value:e,writable:!0}):this[i]=e,s&&s.call(this,e)}})}};for(var i in e)r(i);null!=t.onInit&&(t.onInit=Ep(t.onInit)),t.doCheck=Ep(t.doCheck)}function Ep(t){return function(){var e=this[xp];null!=e&&(this.ngOnChanges(e),this[xp]=null),t&&t.apply(this)}}var Sp=function(){function t(t,e){this._view=t,this._appRef=null,this._viewContainerRef=null,this._lViewNode=null,this.context=e}return t.prototype._setComponentContext=function(t,e){this._view=t,this.context=e},Object.defineProperty(t.prototype,"destroyed",{get:function(){return 32==(32&this._view[fu])},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this._viewContainerRef&&yh(this._view)&&(this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),this._viewContainerRef=null),sl(this._view)},t.prototype.onDestroy=function(t){Xc(this._view,t)},t.prototype.markForCheck=function(){xh(this._view)},t.prototype.detach=function(){this._view[fu]&=-9},t.prototype.reattach=function(){this._view[fu]|=8},t.prototype.detectChanges=function(){Sh(this.context)},t.prototype.checkNoChanges=function(){!function(t){dc=!0;try{Sh(t)}finally{dc=!1}}(this.context)},t.prototype.attachToViewContainerRef=function(t){this._viewContainerRef=t},t.prototype.detachFromAppRef=function(){this._appRef=null},t.prototype.attachToAppRef=function(t){this._appRef=t},t}(),Tp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.resolveComponentFactory=function(t){return ngDevMode&&au(t),new Op(t.ngComponentDef)},e}(Ze);function Ap(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}var Pp=new h("ROOT_CONTEXT_TOKEN",{providedIn:"root",factory:function(){return cp(Pt(Ip))}}),Ip=new h("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return requestAnimationFrame.bind(window)}}),Op=function(t){function e(e){var n=t.call(this)||this;return n.componentDef=e,n.componentType=e.type,n.selector=e.selectors[0][0],n.ngContentSelectors=[],n}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){return Ap(this.componentDef.inputs)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return Ap(this.componentDef.outputs)},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){var i=void 0===n,o=r?r.injector.get(Hn):zu,a=i?Rc(this.selector,o.createRenderer(null,this.componentDef.rendererType)):Gc(o,n),s=r&&!i?r.injector.get(Pp):cp(requestAnimationFrame.bind(window)),u=wc(o.createRenderer(a,this.componentDef.rendererType),Uc(-1,null,null,null,null),s,this.componentDef.onPush?4:2);u[bu]=r&&r.injector||null;var l,c,h=gc(u,null);try{if(o.begin&&o.begin(),c=Hc(0,a,this.componentDef),s.components.push(l=lh(0,this.componentDef.factory(),this.componentDef)),jc(c.nodeInjector,l,c.data),function(t,e){var n=ap(t),r=n.view[lu];Su(0,e.onInit,e.doCheck,r),Tu(n.tNode.flags,r)}(l,this.componentDef),e)for(var p=0,f=c.tNode.projection=[],d=0;d<e.length;d++){for(var m=e[d],g=null,y=null,v=0;v<m.length;v++){var b=Cc(++p,3,m[v],null,null);y?y.next=b.tNode:g=b.tNode,y=b.tNode}f.push(g)}Sc(c,c.data[lu],l,1),c.data[fu]&=-2}finally{gc(h,null),o.end&&o.end()}var _=new Dp(this.componentType,l,u,t,a);return i&&(_.hostView._lViewNode.tNode.child=c.tNode),_},e}(Ge),Dp=function(t){function e(e,n,r,i,o){var a=t.call(this)||this;return a.destroyCbs=[],a.instance=n,a.hostView=a.changeDetectorRef=new Sp(r,n),a.hostView._lViewNode=Cc(-1,2,null,null,null,r),a.injector=i,a.location=new Xn(o),a.componentType=e,a}return Object(r.c)(e,t),e.prototype.destroy=function(){ngDevMode&&ou(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.forEach(function(t){return t()}),this.destroyCbs=null},e.prototype.onDestroy=function(t){ngDevMode&&ou(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.push(t)},e}(qe),kp="__NG_ELEMENT_ID__",Mp=256,Rp=0;function Np(){return ngDevMode&&ep(),Lp(hc())}function Lp(t){var e=t.nodeInjector,n=Zu(t),r=n&&n.nodeInjector;return e!=r?e:t.nodeInjector={parent:r,node:t,bf0:0,bf1:0,bf2:0,bf3:0,bf4:0,bf5:0,bf6:0,bf7:0,cbf0:null==r?0:r.cbf0|r.bf0,cbf1:null==r?0:r.cbf1|r.bf1,cbf2:null==r?0:r.cbf2|r.bf2,cbf3:null==r?0:r.cbf3|r.bf3,cbf4:null==r?0:r.cbf4|r.bf4,cbf5:null==r?0:r.cbf5|r.bf5,cbf6:null==r?0:r.cbf6|r.bf6,cbf7:null==r?0:r.cbf7|r.bf7,templateRef:null,viewContainerRef:null,elementRef:null,changeDetectorRef:null}}function Fp(t){!function(t,e){!function(t,e){var n=e[kp];null==n&&(n=e[kp]=Rp++);var r=n%Mp,i=1<<r;r<128?r<64?r<32?t.bf0|=i:t.bf1|=i:r<96?t.bf2|=i:t.bf3|=i:r<192?r<160?t.bf4|=i:t.bf5|=i:r<224?t.bf6|=i:t.bf7|=i}(t,e.type)}(Np(),t)}function Bp(t,e){return void 0===e&&(e=0),Hp(Np(),t,e)}function jp(){return Zp(Np())}function zp(){return tf(Np())}function Vp(){return Jp(Np())}function Up(){return Gp(Np(),null)}function qp(t){ngDevMode&&ep();var e=hc();ngDevMode&&Vu(e,3);var n=e.tNode;ngDevMode&&ou(n,"expecting tNode");var r=n.attrs;if(r)for(var i=0;i<r.length;i+=2){var o=r[i];if(1===o)break;if(o==t)return r[i+1]}}function Gp(t,e){if(t.changeDetectorRef)return t.changeDetectorRef;var n=t.node;return 4096==(4096&n.tNode.flags)?t.changeDetectorRef=new Sp(n.data,e):3===n.tNode.type?t.changeDetectorRef=function(t){var e=function(t){for(;2===t.tNode.type;)t=t.view[du];return t}(t),n=e.nodeInjector;return n&&n.changeDetectorRef||new Sp(e.data,e.view[gu][e.tNode.flags>>14])}(n.view[du]):null}function Hp(t,e,n){void 0===n&&(n=0);var r,i="number"==typeof(r=e[kp])?r%Mp:null;if(null===i){var o=At(hc().view[bu]);try{return Pt(e,n)}finally{At(o)}}else for(var a=t;a&&(a=Kp(a,i,n));){var s=a.node,u=s.tNode.flags,l=4095&u;if(0!==l)for(var c=u>>14,h=c+l,p=s.view[lu].directives,f=c;f<h;f++){var d=p[f];if(d.type===e&&d.diPublic)return s.view[gu][f]}var m=void 0;if(a===t&&(m=Wp(s,e)))return m;a=2&n||1&n&&!Xp(a)?null:a.parent}if(8&n)return null;throw new Error("Injector: NOT_FOUND ["+Gu(e)+"]")}function Wp(t,e){var n=t.view[lu].currentMatches;if(n)for(var r=0;r<n.length;r+=2){var i=n[r];if(i.type===e)return Fc(i,r+1,n,t.view[lu])}return null}function Kp(t,e,n){for(var r=1<<e,i=4&n?t.parent:t;i;){if(((e<128?e<64?e<32?i.bf0:i.bf1:e<96?i.bf2:i.bf3:e<192?e<160?i.bf4:i.bf5:e<224?i.bf6:i.bf7)&r)===r)return i;if(2&n||1&n&&!Xp(i))return null;i=(e<128?e<64?e<32?i.cbf0:i.cbf1:e<96?i.cbf2:i.cbf3:e<192?e<160?i.cbf4:i.cbf5:e<224?i.cbf6:i.cbf7)&r?i.parent:null}return null}function Xp(t){return!!t.parent&&t.parent.node.view===t.node.view}var Qp=function(t){this.read=t};function Zp(t){return t.elementRef||(t.elementRef=new Yp(t.node.native))}var Yp=function(t){this.nativeElement=t};function Jp(t){if(!t.viewContainerRef){var e=t.node;ngDevMode&&Uu(e,0,3);var n=Zu(e),r=ch(n,e.view,!0),i=e.view[_u].createComment(ngDevMode?"container":""),o=xc(0,e.view,n,i,r,null);hl(n,i,e.view),e.queries&&(o.queries=e.queries.container());var a=e.tNode;a.dynamicContainerNode||(a.dynamicContainerNode=Jc(0,-1,null,null,a,null)),o.tNode=a.dynamicContainerNode,e.dynamicLContainerNode=o,wh(e.view,a.index,r),t.viewContainerRef=new $p(o)}return t.viewContainerRef}var $p=function(){function t(t){this._lContainerNode=t,this._viewRefs=[]}return t.prototype.clear=function(){for(var t=this._lContainerNode.data;t[Nu].length;)this.remove(0)},t.prototype.get=function(t){return this._viewRefs[t]||null},Object.defineProperty(t.prototype,"length",{get:function(){return this._lContainerNode.data[Nu].length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){var r=this._adjustIndex(n),i=t.createEmbeddedView(e||{},this._lContainerNode,r);return i.attachToViewContainerRef(this),this._viewRefs.splice(r,0,i),i},t.prototype.createComponent=function(t,e,n,r,i){var o=n||this.parentInjector;!i&&o&&(i=o.get($e));var a=t.create(o,r,void 0,i);return this.insert(a.hostView,e),a},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n=t._lViewNode,r=this._adjustIndex(e);rl(this._lContainerNode,n,r);var i=this._lContainerNode.data[Nu],o=r+1<i.length?Qu(i[r+1]).native:this._lContainerNode.native;return nl(this._lContainerNode,n,!0,o),t.attachToViewContainerRef(this),this._viewRefs.splice(r,0,t),t},t.prototype.move=function(t,e){var n=this.indexOf(t);return this.detach(n),this.insert(t,this._adjustIndex(e)),t},t.prototype.indexOf=function(t){return this._viewRefs.indexOf(t)},t.prototype.remove=function(t){var e=this._adjustIndex(t,-1);ol(this._lContainerNode,e),this._viewRefs.splice(e,1)},t.prototype.detach=function(t){var e=this._adjustIndex(t,-1);return il(this._lContainerNode,e),this._viewRefs.splice(e,1)[0]||null},t.prototype._adjustIndex=function(t,e){return void 0===e&&(e=0),null==t?this._lContainerNode.data[Nu].length+e:(ngDevMode&&(t<=-1&&su("index must be positive"),iu(t,this._lContainerNode.data[Nu].length+1+e,"index")),t)},t}();function tf(t){if(!t.templateRef){ngDevMode&&Vu(t.node,0);var e=t.node,n=e.tNode;ngDevMode&&ou(n.tViews,"TView must be allocated"),t.templateRef=new ef(Zp(t),n.tViews,uc(),e.data[pu])}return t.templateRef}var ef=function(){function t(t,e,n,r){this._tView=e,this._renderer=n,this._queries=r,this.elementRef=t}return t.prototype.createEmbeddedView=function(t,e,n){var r=function(t,e,n,r){var i=Zl,o=Ql;Zl=!0,Ql=null;var a=wc(n,t,e,2,lc());r&&(a[pu]=r.createView());var s=Cc(-1,2,null,null,null,a);return Zl=i,Ql=o,s}(this._tView,t,this._renderer,this._queries);e&&rl(e,r,n),Sc(r,this._tView,t,1);var i=new Sp(r.data,t);return i._lViewNode=r,i},t}();function nf(t){t.diPublic=Fp}var rf=/{\$([^}]+)}/g;function of(t,e,n,r,i){var o=t.split(rf),a=new Array(r?r.length+1:1).fill(void 0);return function t(e,n,r,i,o,a,s,u){var l=[],c=[],h=0,p=0,f=o&&o[e]?o[e]:null,d=a&&a[e]?a[e]:null;for(i[e]=l;n<r.length;n++){var m=r[n];if(1&n){var g=void 0;if(f&&void 0!==f[m]){g=f[m];var y=s?s.indexOf(m):-1;-1!==y&&y+1!==e?l.push(-2147483648|g):(l.push(1073741824|g),h++),c.push(m)}else if(d&&void 0!==d[m])l.push(1610612736|(g=d[m])),c.push(m);else if(l.push(-1073741824),e>0&&0==--h)break;if(void 0!==g&&g>p&&(p=g),s){var v=s.indexOf(m)+1;0!==v&&v!==e&&(n=t(v,n,r,i,o,a,s,u))}}else m&&l.push(536870912,m)}if(o){var b=o[e];if(b)for(var _=Object.keys(b),w=0;w<_.length;w++)-1===c.indexOf(C=_[w])&&(l.push(-536870912|(E=b[C])),E>p&&(p=E))}if(a){var x=a[e];if(x)for(_=Object.keys(x),w=0;w<_.length;w++){var C;if(-1===c.indexOf(C=_[w])){var E=x[C];ngDevMode&&iu(E.toString(2).length,28,"Index "+E+" is too big and will overflow"),l.push(-536870912|E),E>p&&(p=E)}}}if(0===e&&"number"==typeof u)for(w=p+1;w<=u;w++)ngDevMode&&iu(w.toString(2).length,28,"Index "+w+" is too big and will overflow"),l.push(-1610612736|w);return n}(0,0,o,a,e,n,r,i),a}function af(t,e,n){ngDevMode&&ngDevMode.rendererMoveNode++;var r=cc();hl(e,t.native||null,r);var i=t.view[lu].firstTemplatePass;return i&&(n===e&&t.tNode!==e.tNode.child?(t.tNode.next=e.tNode.child,e.tNode.child=t.tNode):n!==e&&t.tNode!==n.tNode.next?(t.tNode.next=n.tNode.next,n.tNode.next=t.tNode):t.tNode.next=null,e.view===t.view&&(t.tNode.parent=e.tNode)),0===t.tNode.type&&t.dynamicLContainerNode?(hl(e,t.dynamicLContainerNode.native||null,r),i&&(t.tNode.dynamicContainerNode=t.dynamicLContainerNode.tNode,t.dynamicLContainerNode.tNode.parent=t.tNode),t.dynamicLContainerNode):t}function sf(t,e){var n=cc();if(ngDevMode&&nu(n[mu],-1,"i18nApply should be called before any binding"),e){var r=uc(),i=Zu(Wh(t))||hc(),o=i;Ec();for(var a=0;a<e.length;a++){var s=e[a];switch(-536870912&s){case 1073741824:var u=Wh(536870911&s);o=af(u,i,o),i=u;break;case 1610612736:case-2147483648:case-1610612736:o=af(Wh(536870911&s),i,o);break;case 536870912:ngDevMode&&ngDevMode.rendererCreateTextNode++;var l=el(e[++a],r);o=af(Cc(n.length-uu,3,l,null,null),i,o),Ec();break;case-1073741824:o=i,i=Zu(i);break;case-536870912:ngDevMode&&ngDevMode.rendererRemoveNode++;var c=Wh(536870911&s),h=Zu(c);pl(h,c.native||null,n),0===c.tNode.type&&c.dynamicLContainerNode&&(pl(h,c.dynamicLContainerNode.native||null,n),c.dynamicLContainerNode.tNode.detached=!0,c.dynamicLContainerNode.data[Lu]=null)}}}}function uf(t,e){for(var n=t.split(rf),r=1;r<n.length;r+=2)n[r]=e[n[r]];return n}function lf(t,e){if(!Qh(e))return Ph;for(var n="",r=0;r<t.length;r++)n+=1&r?Gu(e):t[r];return n}function cf(t,e,n){if(!Yh(e,n))return Ph;for(var r="",i=0;i<t.length;i++)r+=1&i?Gu(1&t[i]?n:e):t[i];return r}function hf(t,e,n,r){var i=Yh(e,n);if(!(i=Qh(r)||i))return Ph;for(var o="",a=0;a<t.length;a++)if(1&a){var s=t[a];o+=Gu(2&s?r:1&s?n:e)}else o+=t[a];return o}function pf(t,e,n,r,i){if(!Jh(e,n,r,i))return Ph;for(var o="",a=0;a<t.length;a++)if(1&a){var s=t[a],u=1&s;o+=Gu(2&s?u?i:r:u?n:e)}else o+=t[a];return o}function ff(t,e,n,r,i,o){var a=Jh(e,n,r,i);if(!(a=Qh(o)||a))return Ph;for(var s="",u=0;u<t.length;u++)if(1&u){var l=t[u],c=1&l;s+=Gu(4&l?o:2&l?c?i:r:c?n:e)}else s+=t[u];return s}function df(t,e,n,r,i,o,a){var s=Jh(e,n,r,i);if(!(s=Yh(o,a)||s))return Ph;for(var u="",l=0;l<t.length;l++)if(1&l){var c=t[l],h=1&c;u+=Gu(4&c?h?a:o:2&c?h?i:r:h?n:e)}else u+=t[l];return u}function mf(t,e,n,r,i,o,a,s){var u=Jh(e,n,r,i);if(u=Yh(o,a)||u,!(u=Qh(s)||u))return Ph;for(var l="",c=0;c<t.length;c++)if(1&c){var h=t[c],p=2&h,f=1&h;l+=Gu(4&h?p?s:f?a:o:p?f?i:r:f?n:e)}else l+=t[c];return l}function gf(t,e,n,r,i,o,a,s,u){var l=Jh(e,n,r,i);if(!(l=Jh(o,a,s,u)||l))return Ph;for(var c="",h=0;h<t.length;h++)if(1&h){var p=t[h],f=2&p,d=1&p;c+=Gu(4&p?f?d?u:s:d?a:o:f?d?i:r:d?n:e)}else c+=t[h];return c}function yf(t,e){for(var n=!1,r=0;r<e.length;r++)Qh(e[r])&&(n=!0);if(!n)return Ph;var i="";for(r=0;r<t.length;r++)i+=1&r?Gu(e[t[r]]):t[r];return i}var vf={provide:Ze,useFactory:function(){return new Tp},deps:[]},bf=function(t){function e(e,n){var r=t.call(this)||this;r._bootstrapComponents=[],r.destroyCbs=[];var i=e.ngModuleDef;return ngDevMode&&ou(i,"NgModule '"+K(e)+"' is not a subtype of 'NgModuleType'."),r._bootstrapComponents=i.bootstrap,r.injector=be(e,n,[vf,{provide:$e,useValue:r}]),r.instance=r.injector.get(e),r.componentFactoryResolver=new Tp,r}return Object(r.c)(e,t),e.prototype.destroy=function(){ngDevMode&&ou(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.forEach(function(t){return t()}),this.destroyCbs=null},e.prototype.onDestroy=function(t){ngDevMode&&ou(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.push(t)},e}($e),_f=function(t){function e(e){var n=t.call(this)||this;return n.moduleType=e,n}return Object(r.c)(e,t),e.prototype.create=function(t){return new bf(this.moduleType,t)},e}(tn);function wf(t,e,n){ngDevMode&&op(t,1);var r=kh(t),i=$l?Zh(n?e.call(n):e()):Xh();return Mh(r),i}function xf(t,e,n,r){ngDevMode&&op(t,2);var i=kh(t),o=Qh(n)?Zh(r?e.call(r,n):e(n)):Xh();return Mh(i),o}function Cf(t,e,n,r,i){ngDevMode&&op(t,3);var o=kh(t),a=Yh(n,r)?Zh(i?e.call(i,n,r):e(n,r)):Xh();return Mh(o),a}function Ef(t,e,n,r,i,o){ngDevMode&&op(t,4);var a=kh(t),s=Yh(n,r),u=Qh(i)||s?Zh(o?e.call(o,n,r,i):e(n,r,i)):Xh();return Mh(a),u}function Sf(t,e,n,r,i,o,a){ngDevMode&&op(t,5);var s=kh(t),u=Jh(n,r,i,o)?Zh(a?e.call(a,n,r,i,o):e(n,r,i,o)):Xh();return Mh(s),u}function Tf(t,e,n,r,i,o,a,s){ngDevMode&&op(t,6);var u=kh(t),l=Jh(n,r,i,o),c=Qh(a)||l?Zh(s?e.call(s,n,r,i,o,a):e(n,r,i,o,a)):Xh();return Mh(u),c}function Af(t,e,n,r,i,o,a,s,u){ngDevMode&&op(t,7);var l=kh(t),c=Jh(n,r,i,o),h=Yh(a,s)||c?Zh(u?e.call(u,n,r,i,o,a,s):e(n,r,i,o,a,s)):Xh();return Mh(l),h}function Pf(t,e,n,r,i,o,a,s,u,l){ngDevMode&&op(t,8);var c=kh(t),h=Jh(n,r,i,o);h=Yh(a,s)||h;var p=Qh(u)||h?Zh(l?e.call(l,n,r,i,o,a,s,u):e(n,r,i,o,a,s,u)):Xh();return Mh(c),p}function If(t,e,n,r,i,o,a,s,u,l,c){ngDevMode&&op(t,9);var h=kh(t),p=Jh(n,r,i,o),f=Jh(a,s,u,l)||p?Zh(c?e.call(c,n,r,i,o,a,s,u,l):e(n,r,i,o,a,s,u,l)):Xh();return Mh(h),f}function Of(t,e,n,r){ngDevMode&&op(t,n.length+1);for(var i=kh(t),o=!1,a=0;a<n.length;a++)Qh(n[a])&&(o=!0);var s=o?Zh(e.apply(r,n)):Xh();return Mh(i),s}function Df(t,e){var n,r=$h(),i=t+uu;r.firstTemplatePass?(n=function(t,e){if(e)for(var n=0;n<e.length;n++){var r=e[n];if(t===r.name)return r}throw new Error("Pipe with name '"+t+"' not found!")}(e,r.pipeRegistry),r.data[i]=n,n.onDestroy&&(r.pipeDestroyHooks||(r.pipeDestroyHooks=[])).push(i,n.onDestroy)):n=r.data[i];var o=n.factory();return qh(t,o),o}function kf(t,e,n){var r=Wh(t);return Ff(t)?xf(e,r.transform,n,r):r.transform(n)}function Mf(t,e,n,r){var i=Wh(t);return Ff(t)?Cf(e,i.transform,n,r,i):i.transform(n,r)}function Rf(t,e,n,r,i){var o=Wh(t);return Ff(t)?Ef(e,o.transform,n,r,i,o):o.transform(n,r,i)}function Nf(t,e,n,r,i,o){var a=Wh(t);return Ff(t)?Sf(e,a.transform,n,r,i,o,a):a.transform(n,r,i,o)}function Lf(t,e,n){var r=Wh(t);return Ff(t)?Of(e,r.transform,n,r):r.transform.apply(r,n)}function Ff(t){return $h().data[t+uu].pure}var Bf=function(){function t(t){this.shallow=null,this.deep=null,this.deep=null==t?null:t}return t.prototype.track=function(t,e,n,r){n?this.deep=Gf(this.deep,t,e,null!=r?r:null):this.shallow=Gf(this.shallow,t,e,null!=r?r:null)},t.prototype.clone=function(){return this.deep?new t(this.deep):null},t.prototype.child=function(){return null===this.deep?null:null===this.shallow?this:new t(this.deep)},t.prototype.container=function(){for(var e=null,n=this.deep;n;){var r=[];n.values.push(r);var i={next:null,list:n.list,predicate:n.predicate,values:r,containerValues:null};i.next=e,e=i,n=n.next}return e?new t(e):null},t.prototype.createView=function(){for(var e=null,n=this.deep;n;){var r={next:null,list:n.list,predicate:n.predicate,values:[],containerValues:n.values};r.next=e,e=r,n=n.next}return e?new t(e):null},t.prototype.insertView=function(t){for(var e=this.deep;e;)ngDevMode&&ou(e.containerValues,"View queries need to have a pointer to container values."),e.containerValues.splice(t,0,e.values),e=e.next},t.prototype.addNode=function(t){Uf(this.shallow,t),Uf(this.deep,t)},t.prototype.removeView=function(){for(var t=this.deep;t;){ngDevMode&&ou(t.containerValues,"View queries need to have a pointer to container values.");var e=t.containerValues,n=e.indexOf(t.values),r=e.splice(n,1);ngDevMode&&nu(r.length,1,"removed.length"),r[0].length&&t.list.setDirty(),t=t.next}},t}();function jf(t,e){var n=t.localNames;if(n)for(var r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function zf(t,e){for(var n=t.view[lu].directives,r=t.tNode.flags,i=r>>14,o=i+(4095&r),a=i;a<o;a++){var s=n[a];if(s.type===e&&s.diPublic)return a}return null}function Vf(t,e,n,r){if(n instanceof Qp)return n.read(t,e,r);var i=zf(e,n);return null!==i?e.view[gu][i]:null}function Uf(t,e){for(var n=Lp(e);t;){var r=t.predicate,i=r.type;if(i)null!==(s=zf(e,i))&&null!==(u=Vf(n,e,r.read||i,s))&&qf(t,u);else for(var o=r.selector,a=0;a<o.length;a++){var s,u;null!==(s=jf(e.tNode,o[a]))&&(ngDevMode&&ou(r.read,"the node should have a predicate"),null!==(u=Vf(n,e,r.read,s))&&qf(t,u))}t=t.next}}function qf(t,e){t.values.push(e),t.list.setDirty()}function Gf(t,e,n,r){return{next:t,list:e,predicate:function(t,e){var n=Array.isArray(t);return{type:n?null:t,selector:n?t:null,read:e}}(n,r),values:e._valuesTree,containerValues:null}}var Hf=function(){function t(){this.dirty=!0,this.changes=new fn,this._values=[],this._valuesTree=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){var t=this._values;return t.length?t[0]:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){var t=this._values;return t.length?t[t.length-1]:null},enumerable:!0,configurable:!0}),t.prototype.map=function(t){return this._values.map(t)},t.prototype.filter=function(t){return this._values.filter(t)},t.prototype.find=function(t){return this._values.find(t)},t.prototype.reduce=function(t,e){return this._values.reduce(t,e)},t.prototype.forEach=function(t){this._values.forEach(t)},t.prototype.some=function(t){return this._values.some(t)},t.prototype.toArray=function(){return this._values.slice(0)},t.prototype[G()]=function(){return this._values[G()]()},t.prototype.toString=function(){return this._values.toString()},t.prototype.reset=function(t){this._values=function(t){for(var e=[],n=0;n<t.length;){var r=t[n];Array.isArray(r)?r.length>0?(t=r.concat(t.slice(n+1)),n=0):n++:(e.push(r),n++)}return e}(t),this.dirty=!1},t.prototype.notifyOnChanges=function(){this.changes.emit(this)},t.prototype.setDirty=function(){this.dirty=!0},t.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},t}();function Wf(t,e,n,r){ngDevMode&&ep();var i,o=new Hf;return(i=Bf,Jl||(Jl=Ql.queries&&Ql.queries.clone()||new i)).track(o,e,n,r),Kc(null,o,o.destroy),null!=t&&qh(t,o),o}function Kf(t){return!!t.dirty&&(t.reset(t._valuesTree),t.notifyOnChanges(),!0)}var Xf="__SANITIZER_TRUSTED_BRAND__";function Qf(t,e){return t instanceof String&&t[Xf]===e}function Zf(t){return ed(t,"Html")}function Yf(t){return ed(t,"Style")}function Jf(t){return ed(t,"Script")}function $f(t){return ed(t,"Url")}function td(t){return ed(t,"ResourceUrl")}function ed(t,e){var n=new String(t);return n[Xf]=e,n}function nd(t){var e=lc();return e?e.sanitize(_i.HTML,t)||"":Qf(t,"Html")?t.toString():mi(document,Gu(t))}function rd(t){var e=lc();return e?e.sanitize(_i.STYLE,t)||"":Qf(t,"Style")?t.toString():bi(Gu(t))}function id(t){var e=lc();return e?e.sanitize(_i.URL,t)||"":Qf(t,"Url")?t.toString():$r(Gu(t))}function od(t){var e=lc();if(e)return e.sanitize(_i.RESOURCE_URL,t)||"";if(Qf(t,"ResourceUrl"))return t.toString();throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)")}},CxY0:function(t,e,n){"use strict";var r=n("rWzI"),i=n("Nehr");function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=b,e.resolve=function(t,e){return b(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?b(t,!1,!0).resolveObject(e):e},e.format=function(t){return i.isString(t)&&(t=b(t)),t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),h=["%","/","?",";","#"].concat(c),p=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=n("r8II");function b(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),s=-1!==o&&o<t.indexOf("#")?"?":"#",l=t.split(s);l[0]=l[0].replace(/\\/g,"/");var b=t=l.join(s);if(b=b.trim(),!n&&1===t.split("#").length){var _=u.exec(b);if(_)return this.path=b,this.href=b,this.pathname=_[1],_[2]?(this.search=_[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=a.exec(b);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,b=b.substr(w.length)}if(n||w||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var C="//"===b.substr(0,2);!C||w&&g[w]||(b=b.substr(2),this.slashes=!0)}if(!g[w]&&(C||w&&!y[w])){for(var E,S,T=-1,A=0;A<p.length;A++)-1!==(P=b.indexOf(p[A]))&&(-1===T||P<T)&&(T=P);for(-1!==(S=-1===T?b.lastIndexOf("@"):b.lastIndexOf("@",T))&&(E=b.slice(0,S),b=b.slice(S+1),this.auth=decodeURIComponent(E)),T=-1,A=0;A<h.length;A++){var P;-1!==(P=b.indexOf(h[A]))&&(-1===T||P<T)&&(T=P)}-1===T&&(T=b.length),this.host=b.slice(0,T),b=b.slice(T),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var O=this.hostname.split(/\./),D=(A=0,O.length);A<D;A++){var k=O[A];if(k&&!k.match(f)){for(var M="",R=0,N=k.length;R<N;R++)k.charCodeAt(R)>127?M+="x":M+=k[R];if(!M.match(f)){var L=O.slice(0,A),F=O.slice(A+1),B=k.match(d);B&&(L.push(B[1]),F.unshift(B[2])),F.length&&(b="/"+F.join(".")+b),this.hostname=L.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),I||(this.hostname=r.toASCII(this.hostname));var j=this.port?":"+this.port:"";this.host=(this.hostname||"")+j,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!m[x])for(A=0,D=c.length;A<D;A++){var z=c[A];if(-1!==b.indexOf(z)){var V=encodeURIComponent(z);V===z&&(V=escape(z)),b=b.split(z).join(V)}}var U=b.indexOf("#");-1!==U&&(this.hash=b.substr(U),b=b.slice(0,U));var q=b.indexOf("?");return-1!==q?(this.search=b.substr(q),this.query=b.substr(q+1),e&&(this.query=v.parse(this.query)),b=b.slice(0,q)):e&&(this.search="",this.query={}),b&&(this.pathname=b),y[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(j=this.pathname||"")+(this.search||"")),this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=v.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),l=0;l<u.length;l++){var c=u[l];"protocol"!==c&&(n[c]=t[c])}return y[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!y[t.protocol]){for(var h=Object.keys(t),p=0;p<h.length;p++){var f=h[p];n[f]=t[f]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||g[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}return n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,(n.pathname||n.search)&&(n.path=(n.pathname||"")+(n.search||"")),n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=v||m||n.host&&t.pathname,_=b,w=n.pathname&&n.pathname.split("/")||[],x=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!y[n.protocol]);if(x&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),b=b&&(""===d[0]||""===w[0])),v)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,w=d;else if(d.length)w||(w=[]),w.pop(),w=w.concat(d),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search))return x&&(n.hostname=n.host=w.shift(),(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift())),n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!w.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var C=w.slice(-1)[0],E=(n.host||t.host||w.length>1)&&("."===C||".."===C)||""===C,S=0,T=w.length;T>=0;T--)"."===(C=w[T])?w.splice(T,1):".."===C?(w.splice(T,1),S++):S&&(w.splice(T,1),S--);if(!b&&!_)for(;S--;S)w.unshift("..");!b||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),E&&"/"!==w.join("/").substr(-1)&&w.push("");var A,P=""===w[0]||w[0]&&"/"===w[0].charAt(0);return x&&(n.hostname=n.host=P?"":w.length?w.shift():"",(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift())),(b=b||n.host&&w.length)&&!P&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},DKTb:function(t,e,n){"use strict";function r(t){setTimeout(function(){throw t})}n.d(e,"a",function(){return r})},E2g8:function(t,e,n){t.exports=function(){"use strict";function t(t){return"function"==typeof t}var e=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=0,r=void 0,i=void 0,o=function(t,e){p[n]=t,p[n+1]=e,2===(n+=2)&&(i?i(f):v())},a="undefined"!=typeof window?window:void 0,s=a||{},u=s.MutationObserver||s.WebKitMutationObserver,l="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),c="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var t=setTimeout;return function(){return t(f,1)}}var p=new Array(1e3);function f(){for(var t=0;t<n;t+=2)(0,p[t])(p[t+1]),p[t]=void 0,p[t+1]=void 0;n=0}var d,m,g,y,v=void 0;function b(t,e){var n=this,r=new this.constructor(x);void 0===r[w]&&F(r);var i=n._state;if(i){var a=arguments[i-1];o(function(){return N(i,r,a,n._result)})}else M(n,r,t,e);return r}function _(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(x);return I(e,t),e}l?v=function(){return process.nextTick(f)}:u?(m=0,g=new u(f),y=document.createTextNode(""),g.observe(y,{characterData:!0}),v=function(){y.data=m=++m%2}):c?((d=new MessageChannel).port1.onmessage=f,v=function(){return d.port2.postMessage(0)}):v=void 0===a?function(){try{var t=Function("return this")().require("vertx");return void 0!==(r=t.runOnLoop||t.runOnContext)?function(){r(f)}:h()}catch(t){return h()}}():h();var w=Math.random().toString(36).substring(2);function x(){}var C=void 0,E=1,S=2,T={error:null};function A(t){try{return t.then}catch(t){return T.error=t,T}}function P(e,n,r){n.constructor===e.constructor&&r===b&&n.constructor.resolve===_?function(t,e){e._state===E?D(t,e._result):e._state===S?k(t,e._result):M(e,void 0,function(e){return I(t,e)},function(e){return k(t,e)})}(e,n):r===T?(k(e,T.error),T.error=null):void 0===r?D(e,n):t(r)?function(t,e,n){o(function(t){var r=!1,i=function(n,i,o,a){try{n.call(i,function(n){r||(r=!0,e!==n?I(t,n):D(t,n))},function(e){r||(r=!0,k(t,e))})}catch(t){return t}}(n,e);!r&&i&&(r=!0,k(t,i))},t)}(e,n,r):D(e,n)}function I(t,e){var n,r;t===e?k(t,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=e),null===n||"object"!==r&&"function"!==r?D(t,e):P(t,e,A(e)))}function O(t){t._onerror&&t._onerror(t._result),R(t)}function D(t,e){t._state===C&&(t._result=e,t._state=E,0!==t._subscribers.length&&o(R,t))}function k(t,e){t._state===C&&(t._state=S,t._result=e,o(O,t))}function M(t,e,n,r){var i=t._subscribers,a=i.length;t._onerror=null,i[a]=e,i[a+E]=n,i[a+S]=r,0===a&&t._state&&o(R,t)}function R(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,a=0;a<e.length;a+=3)i=e[a+n],(r=e[a])?N(n,r,i,o):i(o);t._subscribers.length=0}}function N(e,n,r,i){var o=t(r),a=void 0,s=void 0,u=void 0,l=void 0;if(o){if((a=function(t,e){try{return t(e)}catch(t){return T.error=t,T}}(r,i))===T?(l=!0,s=a.error,a.error=null):u=!0,n===a)return void k(n,new TypeError("A promises callback cannot return that same promise."))}else a=i,u=!0;n._state!==C||(o&&u?I(n,a):l?k(n,s):e===E?D(n,a):e===S&&k(n,a))}var L=0;function F(t){t[w]=L++,t._state=void 0,t._result=void 0,t._subscribers=[]}var B=function(){function t(t,n){this._instanceConstructor=t,this.promise=new t(x),this.promise[w]||F(this.promise),e(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?D(this.promise,this._result):(this.length=this.length||0,this._enumerate(n),0===this._remaining&&D(this.promise,this._result))):k(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===C&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===_){var i=A(t);if(i===b&&t._state!==C)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===j){var o=new n(x);P(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===C&&(this._remaining--,t===S?k(r,n):this._result[e]=n),0===this._remaining&&D(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;M(t,void 0,function(t){return n._settledAt(E,e,t)},function(t){return n._settledAt(S,e,t)})},t}(),j=function(){function e(t){this[w]=L++,this._result=this._state=void 0,this._subscribers=[],x!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e(function(e){I(t,e)},function(e){k(t,e)})}catch(e){k(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return j.prototype.then=b,j.all=function(t){return new B(this,t).promise},j.race=function(t){var n=this;return e(t)?new n(function(e,r){for(var i=t.length,o=0;o<i;o++)n.resolve(t[o]).then(e,r)}):new n(function(t,e){return e(new TypeError("You must pass an array to race."))})},j.resolve=_,j.reject=function(t){var e=new this(x);return k(e,t),e},j._setScheduler=function(t){i=t},j._setAsap=function(t){o=t},j._asap=o,j.polyfill=function(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=j},j.Promise=j,j}()},ELzr:function(t,e,n){"use strict";n.r(e),n.d(e,"onErrorResumeNext",function(){return s});var r=n("6blF"),i=n("0/uQ"),o=n("isby"),a=n(null);function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return a.b;var n=t[0],u=t.slice(1);return 1===t.length&&Object(o.a)(n)?s.apply(void 0,n):new r.a(function(t){var e=function(){return t.add(s.apply(void 0,u).subscribe(t))};return Object(i.a)(n).subscribe({next:function(e){t.next(e)},error:e,complete:e})})}},EWOM:function(t,e,n){"use strict";n.r(e),n.d(e,"pairs",function(){return o}),n.d(e,"dispatch",function(){return a});var r=n("6blF"),i=n("pugT");function o(t,e){return new r.a(e?function(n){var r=Object.keys(t),o=new i.a;return o.add(e.schedule(a,0,{keys:r,index:0,subscriber:n,subscription:o,obj:t})),o}:function(e){for(var n=Object.keys(t),r=0;r<n.length&&!e.closed;r++){var i=n[r];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()})}function a(t){var e=t.keys,n=t.index,r=t.subscriber,i=t.subscription,o=t.obj;if(!r.closed)if(n<e.length){var a=e[n];r.next([a,o[a]]),i.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}},"En8+":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},"F/JV":function(t,e,n){"use strict";t.exports={read:function(t){return t},write:function(t){return t.toString()}}},FFOo:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("mrSG"),i=n("2Bdj"),o=n("6ahw"),a=n("pugT"),s=n("L/V9"),u=n("iLxQ"),l=n("DKTb"),c=function(t){function e(e,n,r){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=o.a;break;case 1:if(!e){i.destination=o.a;break}if("object"==typeof e){if(p(e)){var a=e[s.a]();i.syncErrorThrowable=a.syncErrorThrowable,i.destination=a,a.add(i)}else i.syncErrorThrowable=!0,i.destination=new h(i,e);break}default:i.syncErrorThrowable=!0,i.destination=new h(i,e,n,r)}return i}return r.c(e,t),e.prototype[s.a]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(a.a),h=function(t){function e(e,n,r,a){var s,u=t.call(this)||this;u._parentSubscriber=e;var l=u;return Object(i.a)(n)?s=n:n&&(s=n.next,r=n.error,a=n.complete,n!==o.a&&(l=Object.create(n),Object(i.a)(l.unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(u))),u._context=l,u._next=s,u._error=r,u._complete=a,u}return r.c(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;u.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=u.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(l.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(l.a)(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};u.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),u.a.useDeprecatedSynchronousErrorHandling)throw t;Object(l.a)(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!u.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return u.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Object(l.a)(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(c);function p(t){return t instanceof c||"syncErrorThrowable"in t&&t[s.a]}},Fxb1:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n("6blF"),i=n("+tJ4"),o=n("S5XQ"),a=n("u67D"),s=n("JcRv"),u=n("2ePl"),l=n("/WYv"),c=n("McSo"),h=n("En8+"),p=n("xTla"),f=function(t){if(t instanceof r.a)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[p.a])return Object(s.a)(t);if(Object(u.a)(t))return Object(i.a)(t);if(Object(l.a)(t))return Object(o.a)(t);if(t&&"function"==typeof t[h.a])return Object(a.a)(t);var e=Object(c.a)(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},GDxn:function(t,e,n){"use strict";n.r(e),n.d(e,"NEVER",function(){return o}),n.d(e,"never",function(){return a});var r=n("6blF"),i=n("+umK"),o=new r.a(i.a);function a(){return o}},GFlT:function(t,e,n){"use strict";n.r(e),n.d(e,"generate",function(){return a});var r=n("6blF"),i=n("mChF"),o=n("nkY7");function a(t,e,n,a,u){var l,c;return 1==arguments.length?(c=t.initialState,e=t.condition,n=t.iterate,l=t.resultSelector||i.a,u=t.scheduler):void 0===a||Object(o.a)(a)?(c=t,l=i.a,u=a):(c=t,l=a),new r.a(function(t){var r=c;if(u)return u.schedule(s,0,{subscriber:t,iterate:n,condition:e,resultSelector:l,state:r});for(;;){if(e){var i=void 0;try{i=e(r)}catch(e){return void t.error(e)}if(!i){t.complete();break}}var o=void 0;try{o=l(r)}catch(e){return void t.error(e)}if(t.next(o),t.closed)break;try{r=n(r)}catch(e){return void t.error(e)}}})}function s(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(n){var r=void 0;try{r=n(t.state)}catch(t){return void e.error(t)}if(!r)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}},IUTb:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("6blF"),i=n("pugT"),o=n("+tJ4");function a(t,e){return new r.a(e?function(n){var r=new i.a,o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r}:Object(o.a)(t))}},IY04:function(t,e,n){"use strict";t.exports=function(t,e,n,r,i,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;(u=new Error(e.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},Iab2:function(t,e,n){var r,i;void 0===(i="function"==typeof(r=function(){"use strict";function e(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){o(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function n(t){var e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,o=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype?function(t,o,a){var s=i.URL||i.webkitURL,u=document.createElement("a");u.download=o=o||t.name||"download",u.rel="noopener","string"==typeof t?(u.href=t,u.origin===location.origin?r(u):n(u.href)?e(t,o,a):r(u,u.target="_blank")):(u.href=s.createObjectURL(t),setTimeout(function(){s.revokeObjectURL(u.href)},4e4),setTimeout(function(){r(u)},0))}:"msSaveOrOpenBlob"in navigator?function(t,i,o){if(i=i||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),i);else if(n(t))e(t,i,o);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout(function(){r(a)})}}:function(t,n,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,r);var a="application/octet-stream"===t.type,s=/constructor/i.test(i.HTMLElement)||i.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&s)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=u?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},l.readAsDataURL(t)}else{var c=i.URL||i.webkitURL,h=c.createObjectURL(t);o?o.location=h:location.href=h,o=null,setTimeout(function(){c.revokeObjectURL(h)},4e4)}});i.saveAs=o.saveAs=o,void 0!==t&&(t.exports=o)})?r.apply(e,[]):r)||(t.exports=i)},Ip0R:function(t,e,n){"use strict";n.r(e),n.d(e,"\u0275angular_packages_common_common_e",function(){return Yt}),n.d(e,"\u0275angular_packages_common_common_d",function(){return H}),n.d(e,"\u0275angular_packages_common_common_a",function(){return It}),n.d(e,"\u0275angular_packages_common_common_b",function(){return Mt}),n.d(e,"\u0275angular_packages_common_common_g",function(){return _e}),n.d(e,"\u0275angular_packages_common_common_f",function(){return Ue}),n.d(e,"\u0275registerLocaleData",function(){return g}),n.d(e,"formatDate",function(){return et}),n.d(e,"formatCurrency",function(){return Et}),n.d(e,"formatNumber",function(){return Tt}),n.d(e,"formatPercent",function(){return St}),n.d(e,"NgLocaleLocalization",function(){return kt}),n.d(e,"NgLocalization",function(){return Ot}),n.d(e,"registerLocaleData",function(){return g}),n.d(e,"Plural",function(){return b}),n.d(e,"NumberFormatStyle",function(){return v}),n.d(e,"FormStyle",function(){return _}),n.d(e,"TranslationWidth",function(){return w}),n.d(e,"FormatWidth",function(){return x}),n.d(e,"NumberSymbol",function(){return C}),n.d(e,"WeekDay",function(){return E}),n.d(e,"getNumberOfCurrencyDigits",function(){return X}),n.d(e,"getCurrencySymbol",function(){return W}),n.d(e,"getLocaleDayPeriods",function(){return T}),n.d(e,"getLocaleDayNames",function(){return A}),n.d(e,"getLocaleMonthNames",function(){return P}),n.d(e,"getLocaleId",function(){return S}),n.d(e,"getLocaleEraNames",function(){return I}),n.d(e,"getLocaleWeekEndRange",function(){return D}),n.d(e,"getLocaleFirstDayOfWeek",function(){return O}),n.d(e,"getLocaleDateFormat",function(){return k}),n.d(e,"getLocaleDateTimeFormat",function(){return R}),n.d(e,"getLocaleExtraDayPeriodRules",function(){return V}),n.d(e,"getLocaleExtraDayPeriods",function(){return U}),n.d(e,"getLocalePluralCase",function(){return j}),n.d(e,"getLocaleTimeFormat",function(){return M}),n.d(e,"getLocaleNumberSymbol",function(){return N}),n.d(e,"getLocaleNumberFormat",function(){return L}),n.d(e,"getLocaleCurrencyName",function(){return B}),n.d(e,"getLocaleCurrencySymbol",function(){return F}),n.d(e,"\u0275parseCookieValue",function(){return Rt}),n.d(e,"CommonModule",function(){return qe}),n.d(e,"DeprecatedI18NPipesModule",function(){return Ge}),n.d(e,"NgClass",function(){return Nt}),n.d(e,"NgForOf",function(){return Bt}),n.d(e,"NgForOfContext",function(){return Ft}),n.d(e,"NgIf",function(){return zt}),n.d(e,"NgIfContext",function(){return Vt}),n.d(e,"NgPlural",function(){return Kt}),n.d(e,"NgPluralCase",function(){return Xt}),n.d(e,"NgStyle",function(){return Qt}),n.d(e,"NgSwitch",function(){return Gt}),n.d(e,"NgSwitchCase",function(){return Ht}),n.d(e,"NgSwitchDefault",function(){return Wt}),n.d(e,"NgTemplateOutlet",function(){return Zt}),n.d(e,"NgComponentOutlet",function(){return Lt}),n.d(e,"DOCUMENT",function(){return He}),n.d(e,"AsyncPipe",function(){return Ee}),n.d(e,"DatePipe",function(){return Ie}),n.d(e,"I18nPluralPipe",function(){return De}),n.d(e,"I18nSelectPipe",function(){return ke}),n.d(e,"JsonPipe",function(){return Me}),n.d(e,"LowerCasePipe",function(){return Se}),n.d(e,"CurrencyPipe",function(){return Be}),n.d(e,"DecimalPipe",function(){return Le}),n.d(e,"PercentPipe",function(){return Fe}),n.d(e,"SlicePipe",function(){return Ve}),n.d(e,"UpperCasePipe",function(){return Pe}),n.d(e,"TitleCasePipe",function(){return Ae}),n.d(e,"KeyValuePipe",function(){return Re}),n.d(e,"DeprecatedDatePipe",function(){return de}),n.d(e,"DeprecatedCurrencyPipe",function(){return be}),n.d(e,"DeprecatedDecimalPipe",function(){return ye}),n.d(e,"DeprecatedPercentPipe",function(){return ve}),n.d(e,"\u0275PLATFORM_BROWSER_ID",function(){return We}),n.d(e,"\u0275PLATFORM_SERVER_ID",function(){return Ke}),n.d(e,"\u0275PLATFORM_WORKER_APP_ID",function(){return Xe}),n.d(e,"\u0275PLATFORM_WORKER_UI_ID",function(){return Qe}),n.d(e,"isPlatformBrowser",function(){return Ze}),n.d(e,"isPlatformServer",function(){return Ye}),n.d(e,"isPlatformWorkerApp",function(){return Je}),n.d(e,"isPlatformWorkerUi",function(){return $e}),n.d(e,"VERSION",function(){return tn}),n.d(e,"ViewportScroller",function(){return en}),n.d(e,"\u0275NullViewportScroller",function(){return rn}),n.d(e,"PlatformLocation",function(){return o}),n.d(e,"LOCATION_INITIALIZED",function(){return a}),n.d(e,"LocationStrategy",function(){return s}),n.d(e,"APP_BASE_HREF",function(){return u}),n.d(e,"HashLocationStrategy",function(){return h}),n.d(e,"PathLocationStrategy",function(){return p}),n.d(e,"Location",function(){return l});var r=n("CcnG"),i=n("mrSG"),o=function(){},a=new r.InjectionToken("Location Initialized"),s=function(){},u=new r.InjectionToken("appBaseHref"),l=function(){function t(e){var n=this;this._subject=new r.EventEmitter,this._platformStrategy=e;var i=this._platformStrategy.getBaseHref();this._baseHref=t.stripTrailingSlash(c(i)),this._platformStrategy.onPopState(function(t){n._subject.emit({url:n.path(!0),pop:!0,state:t.state,type:t.type})})}return t.prototype.path=function(t){return void 0===t&&(t=!1),this.normalize(this._platformStrategy.path(t))},t.prototype.isCurrentPathEqualTo=function(e,n){return void 0===n&&(n=""),this.path()==this.normalize(e+t.normalizeQueryParams(n))},t.prototype.normalize=function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,c(e)))},t.prototype.prepareExternalUrl=function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)},t.prototype.go=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n=null),this._platformStrategy.pushState(n,"",t,e)},t.prototype.replaceState=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n=null),this._platformStrategy.replaceState(n,"",t,e)},t.prototype.forward=function(){this._platformStrategy.forward()},t.prototype.back=function(){this._platformStrategy.back()},t.prototype.subscribe=function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})},t.normalizeQueryParams=function(t){return t&&"?"!==t[0]?"?"+t:t},t.joinWithSlash=function(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e},t.stripTrailingSlash=function(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)},t}();function c(t){return t.replace(/\/index.html$/,"")}var h=function(t){function e(e,n){var r=t.call(this)||this;return r._platformLocation=e,r._baseHref="",null!=n&&(r._baseHref=n),r}return Object(i.c)(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e},e.prototype.prepareExternalUrl=function(t){var e=l.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(s),p=function(t){function e(e,n){var r=t.call(this)||this;if(r._platformLocation=e,null==n&&(n=r._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=n,r}return Object(i.c)(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.prepareExternalUrl=function(t){return l.joinWithSlash(this._baseHref,t)},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.pathname+l.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?""+e+n:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(s),f=void 0,d=["en",[["a","p"],["AM","PM"],f],[["AM","PM"],f,f],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],f,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],f,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",f,"{1} 'at' {0}",f],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],m={};function g(t,e,n){"string"!=typeof e&&(n=e,e=t[0]),e=e.toLowerCase().replace(/_/g,"-"),m[e]=t,n&&(m[e][19]=n)}var y={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,0],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",0],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",0],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",0],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",0],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",0],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",0],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,0],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UZS:[void 0,void 0,0],VEF:[void 0,"Bs"],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},v=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}({}),b=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),_=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),w=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),x=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),C=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({}),E=function(t){return t[t.Sunday=0]="Sunday",t[t.Monday=1]="Monday",t[t.Tuesday=2]="Tuesday",t[t.Wednesday=3]="Wednesday",t[t.Thursday=4]="Thursday",t[t.Friday=5]="Friday",t[t.Saturday=6]="Saturday",t}({});function S(t){return H(t)[0]}function T(t,e,n){var r=H(t);return q(q([r[1],r[2]],e),n)}function A(t,e,n){var r=H(t);return q(q([r[3],r[4]],e),n)}function P(t,e,n){var r=H(t);return q(q([r[5],r[6]],e),n)}function I(t,e){return q(H(t)[7],e)}function O(t){return H(t)[8]}function D(t){return H(t)[9]}function k(t,e){return q(H(t)[10],e)}function M(t,e){return q(H(t)[11],e)}function R(t,e){return q(H(t)[12],e)}function N(t,e){var n=H(t),r=n[13][e];if(void 0===r){if(e===C.CurrencyDecimal)return n[13][C.Decimal];if(e===C.CurrencyGroup)return n[13][C.Group]}return r}function L(t,e){return H(t)[14][e]}function F(t){return H(t)[15]||null}function B(t){return H(t)[16]||null}function j(t){return H(t)[18]}function z(t){if(!t[19])throw new Error('Missing extra locale data for the locale "'+t[0]+'". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.')}function V(t){var e=H(t);return z(e),(e[19][2]||[]).map(function(t){return"string"==typeof t?G(t):[G(t[0]),G(t[1])]})}function U(t,e,n){var r=H(t);return z(r),q(q([r[19][0],r[19][1]],e)||[],n)||[]}function q(t,e){for(var n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function G(t){var e=Object(i.e)(t.split(":"),2);return{hours:+e[0],minutes:+e[1]}}function H(t){var e=t.toLowerCase().replace(/_/g,"-"),n=m[e];if(n)return n;var r=e.split("-")[0];if(n=m[r])return n;if("en"===r)return d;throw new Error('Missing locale data for the locale "'+t+'".')}function W(t,e,n){void 0===n&&(n="en");var r=function(t){return H(t)[17]}(n)[t]||y[t]||[],i=r[1];return"narrow"===e&&"string"==typeof i?i:r[0]||t}var K=2;function X(t){var e,n=y[t];return n&&(e=n[2]),"number"==typeof e?e:K}var Q=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Z={},Y=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,J=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),$=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),tt=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function et(t,e,n,r){var o=function(t){if(ft(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();var e,n=parseFloat(t);if(!isNaN(t-n))return new Date(n);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){var r=Object(i.e)(t.split("-").map(function(t){return+t}),3);return new Date(r[0],r[1]-1,r[2])}if(e=t.match(Q))return pt(e)}var o=new Date(t);if(!ft(o))throw new Error('Unable to convert "'+t+'" into a date');return o}(t);e=function t(e,n){var r=S(e);if(Z[r]=Z[r]||{},Z[r][n])return Z[r][n];var i="";switch(n){case"shortDate":i=k(e,x.Short);break;case"mediumDate":i=k(e,x.Medium);break;case"longDate":i=k(e,x.Long);break;case"fullDate":i=k(e,x.Full);break;case"shortTime":i=M(e,x.Short);break;case"mediumTime":i=M(e,x.Medium);break;case"longTime":i=M(e,x.Long);break;case"fullTime":i=M(e,x.Full);break;case"short":var o=t(e,"shortTime"),a=t(e,"shortDate");i=nt(R(e,x.Short),[o,a]);break;case"medium":var s=t(e,"mediumTime"),u=t(e,"mediumDate");i=nt(R(e,x.Medium),[s,u]);break;case"long":var l=t(e,"longTime"),c=t(e,"longDate");i=nt(R(e,x.Long),[l,c]);break;case"full":var h=t(e,"fullTime"),p=t(e,"fullDate");i=nt(R(e,x.Full),[h,p])}return i&&(Z[r][n]=i),i}(n,e)||e;for(var a,s=[];e;){if(!(a=Y.exec(e))){s.push(e);break}var u=(s=s.concat(a.slice(1))).pop();if(!u)break;e=u}var l=o.getTimezoneOffset();r&&(l=ht(r,l),o=function(t,e,n){var r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(ht(e,r)-r))}(o,r));var c="";return s.forEach(function(t){var e=function(t){if(ct[t])return ct[t];var e;switch(t){case"G":case"GG":case"GGG":e=ot(tt.Eras,w.Abbreviated);break;case"GGGG":e=ot(tt.Eras,w.Wide);break;case"GGGGG":e=ot(tt.Eras,w.Narrow);break;case"y":e=it($.FullYear,1,0,!1,!0);break;case"yy":e=it($.FullYear,2,0,!0,!0);break;case"yyy":e=it($.FullYear,3,0,!1,!0);break;case"yyyy":e=it($.FullYear,4,0,!1,!0);break;case"M":case"L":e=it($.Month,1,1);break;case"MM":case"LL":e=it($.Month,2,1);break;case"MMM":e=ot(tt.Months,w.Abbreviated);break;case"MMMM":e=ot(tt.Months,w.Wide);break;case"MMMMM":e=ot(tt.Months,w.Narrow);break;case"LLL":e=ot(tt.Months,w.Abbreviated,_.Standalone);break;case"LLLL":e=ot(tt.Months,w.Wide,_.Standalone);break;case"LLLLL":e=ot(tt.Months,w.Narrow,_.Standalone);break;case"w":e=lt(1);break;case"ww":e=lt(2);break;case"W":e=lt(1,!0);break;case"d":e=it($.Date,1);break;case"dd":e=it($.Date,2);break;case"E":case"EE":case"EEE":e=ot(tt.Days,w.Abbreviated);break;case"EEEE":e=ot(tt.Days,w.Wide);break;case"EEEEE":e=ot(tt.Days,w.Narrow);break;case"EEEEEE":e=ot(tt.Days,w.Short);break;case"a":case"aa":case"aaa":e=ot(tt.DayPeriods,w.Abbreviated);break;case"aaaa":e=ot(tt.DayPeriods,w.Wide);break;case"aaaaa":e=ot(tt.DayPeriods,w.Narrow);break;case"b":case"bb":case"bbb":e=ot(tt.DayPeriods,w.Abbreviated,_.Standalone,!0);break;case"bbbb":e=ot(tt.DayPeriods,w.Wide,_.Standalone,!0);break;case"bbbbb":e=ot(tt.DayPeriods,w.Narrow,_.Standalone,!0);break;case"B":case"BB":case"BBB":e=ot(tt.DayPeriods,w.Abbreviated,_.Format,!0);break;case"BBBB":e=ot(tt.DayPeriods,w.Wide,_.Format,!0);break;case"BBBBB":e=ot(tt.DayPeriods,w.Narrow,_.Format,!0);break;case"h":e=it($.Hours,1,-12);break;case"hh":e=it($.Hours,2,-12);break;case"H":e=it($.Hours,1);break;case"HH":e=it($.Hours,2);break;case"m":e=it($.Minutes,1);break;case"mm":e=it($.Minutes,2);break;case"s":e=it($.Seconds,1);break;case"ss":e=it($.Seconds,2);break;case"S":e=it($.FractionalSeconds,1);break;case"SS":e=it($.FractionalSeconds,2);break;case"SSS":e=it($.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=at(J.Short);break;case"ZZZZZ":e=at(J.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=at(J.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=at(J.Long);break;default:return null}return ct[t]=e,e}(t);c+=e?e(o,n,l):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function nt(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function rt(t,e,n,r,i){void 0===n&&(n="-");var o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));for(var a=String(t);a.length<e;)a="0"+a;return r&&(a=a.substr(a.length-e)),o+a}function it(t,e,n,r,i){return void 0===n&&(n=0),void 0===r&&(r=!1),void 0===i&&(i=!1),function(o,a){var s,u=function(t,e){switch(t){case $.FullYear:return e.getFullYear();case $.Month:return e.getMonth();case $.Date:return e.getDate();case $.Hours:return e.getHours();case $.Minutes:return e.getMinutes();case $.Seconds:return e.getSeconds();case $.FractionalSeconds:return e.getMilliseconds();case $.Day:return e.getDay();default:throw new Error('Unknown DateType value "'+t+'".')}}(t,o);if((n>0||u>-n)&&(u+=n),t===$.Hours)0===u&&-12===n&&(u=12);else if(t===$.FractionalSeconds)return s=e,rt(u,3).substr(0,s);var l=N(a,C.MinusSign);return rt(u,e,l,r,i)}}function ot(t,e,n,r){return void 0===n&&(n=_.Format),void 0===r&&(r=!1),function(i,o){return function(t,e,n,r,i,o){switch(n){case tt.Months:return P(e,i,r)[t.getMonth()];case tt.Days:return A(e,i,r)[t.getDay()];case tt.DayPeriods:var a=t.getHours(),s=t.getMinutes();if(o){var u,l=V(e),c=U(e,i,r);if(l.forEach(function(t,e){if(Array.isArray(t)){var n=t[0],r=t[1],i=r.hours;a>=n.hours&&s>=n.minutes&&(a<i||a===i&&s<r.minutes)&&(u=c[e])}else t.hours===a&&t.minutes===s&&(u=c[e])}),u)return u}return T(e,i,r)[a<12?0:1];case tt.Eras:return I(e,r)[t.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+n)}}(i,o,t,e,n,r)}}function at(t){return function(e,n,r){var i=-1*r,o=N(n,C.MinusSign),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case J.Short:return(i>=0?"+":"")+rt(a,2,o)+rt(Math.abs(i%60),2,o);case J.ShortGMT:return"GMT"+(i>=0?"+":"")+rt(a,1,o);case J.Long:return"GMT"+(i>=0?"+":"")+rt(a,2,o)+":"+rt(Math.abs(i%60),2,o);case J.Extended:return 0===r?"Z":(i>=0?"+":"")+rt(a,2,o)+":"+rt(Math.abs(i%60),2,o);default:throw new Error('Unknown zone width "'+t+'"')}}}var st=0,ut=4;function lt(t,e){return void 0===e&&(e=!1),function(n,r){var i,o,a,s;if(e){var u=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,l=n.getDate();i=1+Math.floor((l+u)/7)}else{var c=(a=n.getFullYear(),s=new Date(a,st,1).getDay(),new Date(a,0,1+(s<=ut?ut:ut+7)-s)),h=(o=n,new Date(o.getFullYear(),o.getMonth(),o.getDate()+(ut-o.getDay()))).getTime()-c.getTime();i=1+Math.round(h/6048e5)}return rt(i,t,N(r,C.MinusSign))}}var ct={};function ht(t,e){t=t.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function pt(t){var e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));var a=Number(t[4]||0)-n,s=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.round(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,a,s,u,l),e}function ft(t){return t instanceof Date&&!isNaN(t.valueOf())}var dt=/^(\d+)?\.((\d+)(-(\d+))?)?$/,mt=22,gt=".",yt="0",vt=";",bt=",",_t="#",wt="\xa4",xt="%";function Ct(t,e,n,r,i,o,a){void 0===a&&(a=!1);var s="",u=!1;if(isFinite(t)){var l=function(e){var n,r,i,o,a,s=Math.abs(t)+"",u=0;for((r=s.indexOf(gt))>-1&&(s=s.replace(gt,"")),(i=s.search(/e/i))>0?(r<0&&(r=i),r+=+s.slice(i+1),s=s.substring(0,i)):r<0&&(r=s.length),i=0;s.charAt(i)===yt;i++);if(i===(a=s.length))n=[0],r=1;else{for(a--;s.charAt(a)===yt;)a--;for(r-=i,n=[],o=0;i<=a;i++,o++)n[o]=Number(s.charAt(i))}return r>mt&&(n=n.splice(0,mt-1),u=r-1,r=1),{digits:n,exponent:u,integerLen:r}}();a&&(l=function(t){if(0===t.digits[0])return t;var e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(l));var c=e.minInt,h=e.minFrac,p=e.maxFrac;if(o){var f=o.match(dt);if(null===f)throw new Error(o+" is not a valid digit info");var d=f[1],m=f[3],g=f[5];null!=d&&(c=Pt(d)),null!=m&&(h=Pt(m)),null!=g?p=Pt(g):null!=m&&h>p&&(p=h)}!function(t,e,n){if(e>n)throw new Error("The minimum number of digits after fraction ("+e+") is higher than the maximum ("+n+").");var r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),a=o+t.integerLen,s=r[a];if(a>0){r.splice(Math.max(t.integerLen,a));for(var u=a;u<r.length;u++)r[u]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,a=o+1),r[0]=0;for(var l=1;l<a;l++)r[l]=0}if(s>=5)if(a-1<0){for(var c=0;c>a;c--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[a-1]++;for(;i<Math.max(0,o);i++)r.push(0);var h=0!==o,p=e+t.integerLen,f=r.reduceRight(function(t,e,n,r){return r[n]=(e+=t)<10?e:e-10,h&&(0===r[n]&&n>=p?r.pop():h=!1),e>=10?1:0},0);f&&(r.unshift(f),t.integerLen++)}(l,h,p);var y=l.digits,v=l.integerLen,b=l.exponent,_=[];for(u=y.every(function(t){return!t});v<c;v++)y.unshift(0);for(;v<0;v++)y.unshift(0);v>0?_=y.splice(v,y.length):(_=y,y=[0]);var w=[];for(y.length>=e.lgSize&&w.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)w.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&w.unshift(y.join("")),s=w.join(N(n,r)),_.length&&(s+=N(n,i)+_.join("")),b&&(s+=N(n,C.Exponential)+"+"+b)}else s=N(n,C.Infinity);return t<0&&!u?e.negPre+s+e.negSuf:e.posPre+s+e.posSuf}function Et(t,e,n,r,i){var o=At(L(e,v.Currency),N(e,C.MinusSign));return o.minFrac=X(r),o.maxFrac=o.minFrac,Ct(t,o,e,C.CurrencyGroup,C.CurrencyDecimal,i).replace(wt,n).replace(wt,"")}function St(t,e,n){return Ct(t,At(L(e,v.Percent),N(e,C.MinusSign)),e,C.Group,C.Decimal,n,!0).replace(new RegExp(xt,"g"),N(e,C.PercentSign))}function Tt(t,e,n){return Ct(t,At(L(e,v.Decimal),N(e,C.MinusSign)),e,C.Group,C.Decimal,n)}function At(t,e){void 0===e&&(e="-");var n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(vt),i=r[0],o=r[1],a=-1!==i.indexOf(gt)?i.split(gt):[i.substring(0,i.lastIndexOf(yt)+1),i.substring(i.lastIndexOf(yt)+1)],s=a[0],u=a[1]||"";n.posPre=s.substr(0,s.indexOf(_t));for(var l=0;l<u.length;l++){var c=u.charAt(l);c===yt?n.minFrac=n.maxFrac=l+1:c===_t?n.maxFrac=l+1:n.posSuf+=c}var h=s.split(bt);if(n.gSize=h[1]?h[1].length:0,n.lgSize=h[2]||h[1]?(h[2]||h[1]).length:0,o){var p=i.length-n.posPre.length-n.posSuf.length,f=o.indexOf(_t);n.negPre=o.substr(0,f).replace(/'/g,""),n.negSuf=o.substr(f+p).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function Pt(t){var e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}var It=new r.InjectionToken("UseV4Plurals"),Ot=function(){};function Dt(t,e,n,r){var i="="+t;if(e.indexOf(i)>-1)return i;if(i=n.getPluralCategory(t,r),e.indexOf(i)>-1)return i;if(e.indexOf("other")>-1)return"other";throw new Error('No plural message found for value "'+t+'"')}var kt=function(t){function e(e,n){var r=t.call(this)||this;return r.locale=e,r.deprecatedPluralFn=n,r}return Object(i.c)(e,t),e.prototype.getPluralCategory=function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):j(e||this.locale)(t)){case b.Zero:return"zero";case b.One:return"one";case b.Two:return"two";case b.Few:return"few";case b.Many:return"many";default:return"other"}},e}(Ot);function Mt(t,e){"string"==typeof e&&(e=parseInt(e,10));var n=e,r=n.toString().replace(/^[^.]*\.?/,""),i=Math.floor(Math.abs(n)),o=r.length,a=parseInt(r,10),s=parseInt(n.toString().replace(/^[^.]*\.?|0+$/g,""),10)||0;switch(t.split("-")[0].toLowerCase()){case"af":case"asa":case"az":case"bem":case"bez":case"bg":case"brx":case"ce":case"cgg":case"chr":case"ckb":case"ee":case"el":case"eo":case"es":case"eu":case"fo":case"fur":case"gsw":case"ha":case"haw":case"hu":case"jgo":case"jmc":case"ka":case"kk":case"kkj":case"kl":case"ks":case"ksb":case"ky":case"lb":case"lg":case"mas":case"mgo":case"ml":case"mn":case"nb":case"nd":case"ne":case"nn":case"nnh":case"nyn":case"om":case"or":case"os":case"ps":case"rm":case"rof":case"rwk":case"saq":case"seh":case"sn":case"so":case"sq":case"ta":case"te":case"teo":case"tk":case"tr":case"ug":case"uz":case"vo":case"vun":case"wae":case"xog":return 1===n?b.One:b.Other;case"ak":case"ln":case"mg":case"pa":case"ti":return n===Math.floor(n)&&n>=0&&n<=1?b.One:b.Other;case"am":case"as":case"bn":case"fa":case"gu":case"hi":case"kn":case"mr":case"zu":return 0===i||1===n?b.One:b.Other;case"ar":return 0===n?b.Zero:1===n?b.One:2===n?b.Two:n%100===Math.floor(n%100)&&n%100>=3&&n%100<=10?b.Few:n%100===Math.floor(n%100)&&n%100>=11&&n%100<=99?b.Many:b.Other;case"ast":case"ca":case"de":case"en":case"et":case"fi":case"fy":case"gl":case"it":case"nl":case"sv":case"sw":case"ur":case"yi":return 1===i&&0===o?b.One:b.Other;case"be":return n%10==1&&n%100!=11?b.One:n%10===Math.floor(n%10)&&n%10>=2&&n%10<=4&&!(n%100>=12&&n%100<=14)?b.Few:n%10==0||n%10===Math.floor(n%10)&&n%10>=5&&n%10<=9||n%100===Math.floor(n%100)&&n%100>=11&&n%100<=14?b.Many:b.Other;case"br":return n%10==1&&n%100!=11&&n%100!=71&&n%100!=91?b.One:n%10==2&&n%100!=12&&n%100!=72&&n%100!=92?b.Two:n%10===Math.floor(n%10)&&(n%10>=3&&n%10<=4||n%10==9)&&!(n%100>=10&&n%100<=19||n%100>=70&&n%100<=79||n%100>=90&&n%100<=99)?b.Few:0!==n&&n%1e6==0?b.Many:b.Other;case"bs":case"hr":case"sr":return 0===o&&i%10==1&&i%100!=11||a%10==1&&a%100!=11?b.One:0===o&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)||a%10===Math.floor(a%10)&&a%10>=2&&a%10<=4&&!(a%100>=12&&a%100<=14)?b.Few:b.Other;case"cs":case"sk":return 1===i&&0===o?b.One:i===Math.floor(i)&&i>=2&&i<=4&&0===o?b.Few:0!==o?b.Many:b.Other;case"cy":return 0===n?b.Zero:1===n?b.One:2===n?b.Two:3===n?b.Few:6===n?b.Many:b.Other;case"da":return 1===n||0!==s&&(0===i||1===i)?b.One:b.Other;case"dsb":case"hsb":return 0===o&&i%100==1||a%100==1?b.One:0===o&&i%100==2||a%100==2?b.Two:0===o&&i%100===Math.floor(i%100)&&i%100>=3&&i%100<=4||a%100===Math.floor(a%100)&&a%100>=3&&a%100<=4?b.Few:b.Other;case"ff":case"fr":case"hy":case"kab":return 0===i||1===i?b.One:b.Other;case"fil":return 0===o&&(1===i||2===i||3===i)||0===o&&i%10!=4&&i%10!=6&&i%10!=9||0!==o&&a%10!=4&&a%10!=6&&a%10!=9?b.One:b.Other;case"ga":return 1===n?b.One:2===n?b.Two:n===Math.floor(n)&&n>=3&&n<=6?b.Few:n===Math.floor(n)&&n>=7&&n<=10?b.Many:b.Other;case"gd":return 1===n||11===n?b.One:2===n||12===n?b.Two:n===Math.floor(n)&&(n>=3&&n<=10||n>=13&&n<=19)?b.Few:b.Other;case"gv":return 0===o&&i%10==1?b.One:0===o&&i%10==2?b.Two:0!==o||i%100!=0&&i%100!=20&&i%100!=40&&i%100!=60&&i%100!=80?0!==o?b.Many:b.Other:b.Few;case"he":return 1===i&&0===o?b.One:2===i&&0===o?b.Two:0!==o||n>=0&&n<=10||n%10!=0?b.Other:b.Many;case"is":return 0===s&&i%10==1&&i%100!=11||0!==s?b.One:b.Other;case"ksh":return 0===n?b.Zero:1===n?b.One:b.Other;case"kw":case"naq":case"se":case"smn":return 1===n?b.One:2===n?b.Two:b.Other;case"lag":return 0===n?b.Zero:0!==i&&1!==i||0===n?b.Other:b.One;case"lt":return n%10!=1||n%100>=11&&n%100<=19?n%10===Math.floor(n%10)&&n%10>=2&&n%10<=9&&!(n%100>=11&&n%100<=19)?b.Few:0!==a?b.Many:b.Other:b.One;case"lv":case"prg":return n%10==0||n%100===Math.floor(n%100)&&n%100>=11&&n%100<=19||2===o&&a%100===Math.floor(a%100)&&a%100>=11&&a%100<=19?b.Zero:n%10==1&&n%100!=11||2===o&&a%10==1&&a%100!=11||2!==o&&a%10==1?b.One:b.Other;case"mk":return 0===o&&i%10==1||a%10==1?b.One:b.Other;case"mt":return 1===n?b.One:0===n||n%100===Math.floor(n%100)&&n%100>=2&&n%100<=10?b.Few:n%100===Math.floor(n%100)&&n%100>=11&&n%100<=19?b.Many:b.Other;case"pl":return 1===i&&0===o?b.One:0===o&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)?b.Few:0===o&&1!==i&&i%10===Math.floor(i%10)&&i%10>=0&&i%10<=1||0===o&&i%10===Math.floor(i%10)&&i%10>=5&&i%10<=9||0===o&&i%100===Math.floor(i%100)&&i%100>=12&&i%100<=14?b.Many:b.Other;case"pt":return n===Math.floor(n)&&n>=0&&n<=2&&2!==n?b.One:b.Other;case"ro":return 1===i&&0===o?b.One:0!==o||0===n||1!==n&&n%100===Math.floor(n%100)&&n%100>=1&&n%100<=19?b.Few:b.Other;case"ru":case"uk":return 0===o&&i%10==1&&i%100!=11?b.One:0===o&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)?b.Few:0===o&&i%10==0||0===o&&i%10===Math.floor(i%10)&&i%10>=5&&i%10<=9||0===o&&i%100===Math.floor(i%100)&&i%100>=11&&i%100<=14?b.Many:b.Other;case"shi":return 0===i||1===n?b.One:n===Math.floor(n)&&n>=2&&n<=10?b.Few:b.Other;case"si":return 0===n||1===n||0===i&&1===a?b.One:b.Other;case"sl":return 0===o&&i%100==1?b.One:0===o&&i%100==2?b.Two:0===o&&i%100===Math.floor(i%100)&&i%100>=3&&i%100<=4||0!==o?b.Few:b.Other;case"tzm":return n===Math.floor(n)&&n>=0&&n<=1||n===Math.floor(n)&&n>=11&&n<=99?b.One:b.Other;default:return b.Other}}function Rt(t,e){var n,r;e=encodeURIComponent(e);try{for(var o=Object(i.g)(t.split(";")),a=o.next();!a.done;a=o.next()){var s=a.value,u=s.indexOf("="),l=Object(i.e)(-1==u?[s,""]:[s.slice(0,u),s.slice(u+1)],2),c=l[1];if(l[0].trim()===e)return decodeURIComponent(c)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null}var Nt=function(){function t(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._initialClasses=[]}return Object.defineProperty(t.prototype,"klass",{set:function(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClass",{set:function(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r["\u0275isListLikeIterable"])(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._iterableDiffer){var t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){var e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}},t.prototype._applyKeyValueChanges=function(t){var e=this;t.forEachAddedItem(function(t){return e._toggleClass(t.key,t.currentValue)}),t.forEachChangedItem(function(t){return e._toggleClass(t.key,t.currentValue)}),t.forEachRemovedItem(function(t){t.previousValue&&e._toggleClass(t.key,!1)})},t.prototype._applyIterableChanges=function(t){var e=this;t.forEachAddedItem(function(t){if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(r["\u0275stringify"])(t.item));e._toggleClass(t.item,!0)}),t.forEachRemovedItem(function(t){return e._toggleClass(t.item,!1)})},t.prototype._applyClasses=function(t){var e=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach(function(t){return e._toggleClass(t,!0)}):Object.keys(t).forEach(function(n){return e._toggleClass(n,!!t[n])}))},t.prototype._removeClasses=function(t){var e=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach(function(t){return e._toggleClass(t,!1)}):Object.keys(t).forEach(function(t){return e._toggleClass(t,!1)}))},t.prototype._toggleClass=function(t,e){var n=this;(t=t.trim())&&t.split(/\s+/g).forEach(function(t){e?n._renderer.addClass(n._ngEl.nativeElement,t):n._renderer.removeClass(n._ngEl.nativeElement,t)})},t}(),Lt=function(){function t(t){this._viewContainerRef=t,this._componentRef=null,this._moduleRef=null}return t.prototype.ngOnChanges=function(t){if(this._viewContainerRef.clear(),this._componentRef=null,this.ngComponentOutlet){var e=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;if(t.ngComponentOutletNgModuleFactory)if(this._moduleRef&&this._moduleRef.destroy(),this.ngComponentOutletNgModuleFactory){var n=e.get(r.NgModuleRef);this._moduleRef=this.ngComponentOutletNgModuleFactory.create(n.injector)}else this._moduleRef=null;var i=(this._moduleRef?this._moduleRef.componentFactoryResolver:e.get(r.ComponentFactoryResolver)).resolveComponentFactory(this.ngComponentOutlet);this._componentRef=this._viewContainerRef.createComponent(i,this._viewContainerRef.length,e,this.ngComponentOutletContent)}},t.prototype.ngOnDestroy=function(){this._moduleRef&&this._moduleRef.destroy()},t}(),Ft=function(){function t(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}return Object.defineProperty(t.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),t}(),Bt=function(){function t(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOfDirty=!0,this._differ=null}return Object.defineProperty(t.prototype,"ngForOf",{set:function(t){this._ngForOf=t,this._ngForOfDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(t){Object(r.isDevMode)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(t)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTemplate",{set:function(t){t&&(this._template=t)},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(n){throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}},t.prototype._applyChanges=function(t){var e=this,n=[];t.forEachOperation(function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new Ft(null,e._ngForOf,-1,-1),i),a=new jt(t,o);n.push(a)}else null==i?e._viewContainer.remove(r):(o=e._viewContainer.get(r),e._viewContainer.move(o,i),a=new jt(t,o),n.push(a))});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);r=0;for(var i=this._viewContainer.length;r<i;r++){var o=this._viewContainer.get(r);o.context.index=r,o.context.count=i,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})},t.prototype._perViewChange=function(t,e){t.context.$implicit=e.item},t}(),jt=function(t,e){this.record=t,this.view=e},zt=function(){function t(t,e){this._viewContainer=t,this._context=new Vt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}return Object.defineProperty(t.prototype,"ngIf",{set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfThen",{set:function(t){Ut("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfElse",{set:function(t){Ut("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),t.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},t}(),Vt=function(){this.$implicit=null,this.ngIf=null};function Ut(t,e){if(e&&!e.createEmbeddedView)throw new Error(t+" must be a TemplateRef, but received '"+Object(r["\u0275stringify"])(e)+"'.")}var qt=function(){function t(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}return t.prototype.create=function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)},t.prototype.destroy=function(){this._created=!1,this._viewContainerRef.clear()},t.prototype.enforceState=function(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()},t}(),Gt=function(){function t(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return Object.defineProperty(t.prototype,"ngSwitch",{set:function(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)},enumerable:!0,configurable:!0}),t.prototype._addCase=function(){return this._caseCount++},t.prototype._addDefault=function(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)},t.prototype._matchCase=function(t){var e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e},t.prototype._updateDefaultCases=function(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(var e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}},t}(),Ht=function(){function t(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new qt(t,e)}return t.prototype.ngDoCheck=function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))},t}(),Wt=function(){return function(t,e,n){n._addDefault(new qt(t,e))}}(),Kt=function(){function t(t){this._localization=t,this._caseViews={}}return Object.defineProperty(t.prototype,"ngPlural",{set:function(t){this._switchValue=t,this._updateView()},enumerable:!0,configurable:!0}),t.prototype.addCase=function(t,e){this._caseViews[t]=e},t.prototype._updateView=function(){this._clearViews();var t=Object.keys(this._caseViews),e=Dt(this._switchValue,t,this._localization);this._activateView(this._caseViews[e])},t.prototype._clearViews=function(){this._activeView&&this._activeView.destroy()},t.prototype._activateView=function(t){t&&(this._activeView=t,this._activeView.create())},t}(),Xt=function(){return function(t,e,n,r){this.value=t;var i=!isNaN(Number(t));r.addCase(i?"="+t:t,new qt(n,e))}}(),Qt=function(){function t(t,e,n){this._differs=t,this._ngEl=e,this._renderer=n}return Object.defineProperty(t.prototype,"ngStyle",{set:function(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._differ){var t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}},t.prototype._applyChanges=function(t){var e=this;t.forEachRemovedItem(function(t){return e._setStyle(t.key,null)}),t.forEachAddedItem(function(t){return e._setStyle(t.key,t.currentValue)}),t.forEachChangedItem(function(t){return e._setStyle(t.key,t.currentValue)})},t.prototype._setStyle=function(t,e){var n=Object(i.e)(t.split("."),2),r=n[0],o=n[1];null!=(e=null!=e&&o?""+e+o:e)?this._renderer.setStyle(this._ngEl.nativeElement,r,e):this._renderer.removeStyle(this._ngEl.nativeElement,r)},t}(),Zt=function(){function t(t){this._viewContainerRef=t}return t.prototype.ngOnChanges=function(t){this._shouldRecreateView(t)?(this._viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._viewRef)),this.ngTemplateOutlet&&(this._viewRef=this._viewContainerRef.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext))):this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)},t.prototype._shouldRecreateView=function(t){var e=t.ngTemplateOutletContext;return!!t.ngTemplateOutlet||e&&this._hasContextShapeChanged(e)},t.prototype._hasContextShapeChanged=function(t){var e,n,r=Object.keys(t.previousValue||{}),o=Object.keys(t.currentValue||{});if(r.length===o.length){try{for(var a=Object(i.g)(o),s=a.next();!s.done;s=a.next())if(-1===r.indexOf(s.value))return!0}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return!1}return!0},t.prototype._updateExistingContext=function(t){var e,n;try{for(var r=Object(i.g)(Object.keys(t)),o=r.next();!o.done;o=r.next()){var a=o.value;this._viewRef.context[a]=this.ngTemplateOutletContext[a]}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t}(),Yt=[Nt,Lt,Bt,zt,Zt,Qt,Gt,Ht,Wt,Kt,Xt];function Jt(t,e){return Error("InvalidPipeArgument: '"+e+"' for pipe '"+Object(r["\u0275stringify"])(t)+"'")}var $t=function(){function t(){}return t.format=function(t,e,n,r){void 0===r&&(r={});var i=r.currency,o=r.currencyAsSymbol,a=void 0!==o&&o,s={minimumIntegerDigits:r.minimumIntegerDigits,minimumFractionDigits:r.minimumFractionDigits,maximumFractionDigits:r.maximumFractionDigits,style:v[n].toLowerCase()};return n==v.Currency&&(s.currency="string"==typeof i?i:void 0,s.currencyDisplay=a?"symbol":"code"),new Intl.NumberFormat(e,s).format(t)},t}(),te=/((?:[^yMLdHhmsazZEwGjJ']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|J+|j+|m+|s+|a|z|Z|G+|w+))(.*)/,ee={yMMMdjms:he(ce([ue("year",1),le("month",3),ue("day",1),ue("hour",1),ue("minute",1),ue("second",1)])),yMdjm:he(ce([ue("year",1),ue("month",1),ue("day",1),ue("hour",1),ue("minute",1)])),yMMMMEEEEd:he(ce([ue("year",1),le("month",4),le("weekday",4),ue("day",1)])),yMMMMd:he(ce([ue("year",1),le("month",4),ue("day",1)])),yMMMd:he(ce([ue("year",1),le("month",3),ue("day",1)])),yMd:he(ce([ue("year",1),ue("month",1),ue("day",1)])),jms:he(ce([ue("hour",1),ue("second",1),ue("minute",1)])),jm:he(ce([ue("hour",1),ue("minute",1)]))},ne={yyyy:he(ue("year",4)),yy:he(ue("year",2)),y:he(ue("year",1)),MMMM:he(le("month",4)),MMM:he(le("month",3)),MM:he(ue("month",2)),M:he(ue("month",1)),LLLL:he(le("month",4)),L:he(le("month",1)),dd:he(ue("day",2)),d:he(ue("day",1)),HH:re(ie(he(se(ue("hour",2),!1)))),H:ie(he(se(ue("hour",1),!1))),hh:re(ie(he(se(ue("hour",2),!0)))),h:ie(he(se(ue("hour",1),!0))),jj:he(ue("hour",2)),j:he(ue("hour",1)),mm:re(he(ue("minute",2))),m:he(ue("minute",1)),ss:re(he(ue("second",2))),s:he(ue("second",1)),sss:he(ue("second",3)),EEEE:he(le("weekday",4)),EEE:he(le("weekday",3)),EE:he(le("weekday",2)),E:he(le("weekday",1)),a:function(t){return function(e,n){return t(e,n).split(" ")[1]}}(he(se(ue("hour",1),!0))),Z:ae("short"),z:ae("long"),ww:he({}),w:he({}),G:he(le("era",1)),GG:he(le("era",2)),GGG:he(le("era",3)),GGGG:he(le("era",4))};function re(t){return function(e,n){var r=t(e,n);return 1==r.length?"0"+r:r}}function ie(t){return function(e,n){return t(e,n).split(" ")[0]}}function oe(t,e,n){return new Intl.DateTimeFormat(e,n).format(t).replace(/[\u200e\u200f]/g,"")}function ae(t){var e={hour:"2-digit",hour12:!1,timeZoneName:t};return function(t,n){var r=oe(t,n,e);return r?r.substring(3):""}}function se(t,e){return t.hour12=e,t}function ue(t,e){var n={};return n[t]=2===e?"2-digit":"numeric",n}function le(t,e){var n={};return n[t]=e<4?e>1?"short":"narrow":"long",n}function ce(t){return t.reduce(function(t,e){return Object(i.a)({},t,e)},{})}function he(t){return function(e,n){return oe(e,n,t)}}var pe=new Map,fe=function(){function t(){}return t.format=function(t,e,n){return function(t,e,n){var r=ee[t];if(r)return r(e,n);var i=t,o=pe.get(i);if(!o){o=[];var a=void 0;te.exec(t);for(var s=t;s;)(a=te.exec(s))?s=(o=o.concat(a.slice(1))).pop():(o.push(s),s=null);pe.set(i,o)}return o.reduce(function(t,r){var i=ne[r];return t+(i?i(e,n):function(t){return"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}(r))},"")}(n,t,e)},t}(),de=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,n){if(void 0===n&&(n="mediumDate"),null==e||""===e||e!=e)return null;var r;if("string"==typeof e&&(e=e.trim()),me(e))r=e;else if(isNaN(e-parseFloat(e)))if("string"==typeof e&&/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){var o=Object(i.e)(e.split("-").map(function(t){return parseInt(t,10)}),3);r=new Date(o[0],o[1]-1,o[2])}else r=new Date(e);else r=new Date(parseFloat(e));if(!me(r)){var a=void 0;if("string"!=typeof e||!(a=e.match(Q)))throw Jt(t,e);r=pt(a)}return fe.format(r,this._locale,t._ALIASES[n]||n)},t._ALIASES={medium:"yMMMdjms",short:"yMdjm",fullDate:"yMMMMEEEEd",longDate:"yMMMMd",mediumDate:"yMMMd",shortDate:"yMd",mediumTime:"jms",shortTime:"jm"},t}();function me(t){return t instanceof Date&&!isNaN(t.valueOf())}function ge(t,e,n,r,i,o,a){if(void 0===o&&(o=null),void 0===a&&(a=!1),null==n)return null;if("number"!=typeof(n="string"!=typeof n||isNaN(+n-parseFloat(n))?n:+n))throw Jt(t,n);var s,u,l;if(r!==v.Currency&&(s=1,u=0,l=3),i){var c=i.match(dt);if(null===c)throw new Error(i+" is not a valid digit info for number pipes");null!=c[1]&&(s=Pt(c[1])),null!=c[3]&&(u=Pt(c[3])),null!=c[5]&&(l=Pt(c[5]))}return $t.format(n,e,r,{minimumIntegerDigits:s,minimumFractionDigits:u,maximumFractionDigits:l,currency:o,currencyAsSymbol:a})}var ye=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,n){return ge(t,this._locale,e,v.Decimal,n)},t}(),ve=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,n){return ge(t,this._locale,e,v.Percent,n)},t}(),be=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,n,r,i){return void 0===n&&(n="USD"),void 0===r&&(r=!1),ge(t,this._locale,e,v.Currency,i,n,r)},t}(),_e=[ye,ve,be,de],we=function(){function t(){}return t.prototype.createSubscription=function(t,e){return t.subscribe({next:e,error:function(t){throw t}})},t.prototype.dispose=function(t){t.unsubscribe()},t.prototype.onDestroy=function(t){t.unsubscribe()},t}(),xe=new(function(){function t(){}return t.prototype.createSubscription=function(t,e){return t.then(e,function(t){throw t})},t.prototype.dispose=function(t){},t.prototype.onDestroy=function(t){},t}()),Ce=new we,Ee=function(){function t(t){this._ref=t,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}return t.prototype.ngOnDestroy=function(){this._subscription&&this._dispose()},t.prototype.transform=function(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue===this._latestReturnedValue?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,r.WrappedValue.wrap(this._latestValue)):(t&&this._subscribe(t),this._latestReturnedValue=this._latestValue,this._latestValue)},t.prototype._subscribe=function(t){var e=this;this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,function(n){return e._updateLatestValue(t,n)})},t.prototype._selectStrategy=function(e){if(Object(r["\u0275isPromise"])(e))return xe;if(Object(r["\u0275isObservable"])(e))return Ce;throw Jt(t,e)},t.prototype._dispose=function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null},t.prototype._updateLatestValue=function(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())},t}(),Se=function(){function t(){}return t.prototype.transform=function(e){if(!e)return e;if("string"!=typeof e)throw Jt(t,e);return e.toLowerCase()},t}(),Te=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g,Ae=function(){function t(){}return t.prototype.transform=function(e){if(!e)return e;if("string"!=typeof e)throw Jt(t,e);return e.replace(Te,function(t){return t[0].toUpperCase()+t.substr(1).toLowerCase()})},t}(),Pe=function(){function t(){}return t.prototype.transform=function(e){if(!e)return e;if("string"!=typeof e)throw Jt(t,e);return e.toUpperCase()},t}(),Ie=function(){function t(t){this.locale=t}return t.prototype.transform=function(e,n,r,i){if(void 0===n&&(n="mediumDate"),null==e||""===e||e!=e)return null;try{return et(e,n,i||this.locale,r)}catch(e){throw Jt(t,e.message)}},t}(),Oe=/#/g,De=function(){function t(t){this._localization=t}return t.prototype.transform=function(e,n,r){if(null==e)return"";if("object"!=typeof n||null===n)throw Jt(t,n);return n[Dt(e,Object.keys(n),this._localization,r)].replace(Oe,e.toString())},t}(),ke=function(){function t(){}return t.prototype.transform=function(e,n){if(null==e)return"";if("object"!=typeof n||"string"!=typeof e)throw Jt(t,n);return n.hasOwnProperty(e)?n[e]:n.hasOwnProperty("other")?n.other:""},t}(),Me=function(){function t(){}return t.prototype.transform=function(t){return JSON.stringify(t,null,2)},t}(),Re=function(){function t(t){this.differs=t}return t.prototype.transform=function(t,e){var n=this;if(void 0===e&&(e=Ne),!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());var r=this.differ.diff(t);return r&&(this.keyValues=[],r.forEachItem(function(t){n.keyValues.push({key:t.key,value:t.currentValue})}),this.keyValues.sort(e)),this.keyValues},t}();function Ne(t,e){var n=t.key,r=e.key;if(n===r)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(null===n)return 1;if(null===r)return-1;if("string"==typeof n&&"string"==typeof r)return n<r?-1:1;if("number"==typeof n&&"number"==typeof r)return n-r;if("boolean"==typeof n&&"boolean"==typeof r)return n<r?-1:1;var i=String(n),o=String(r);return i==o?0:i<o?-1:1}var Le=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,n,r){if(je(e))return null;r=r||this._locale;try{return Tt(ze(e),r,n)}catch(e){throw Jt(t,e.message)}},t}(),Fe=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,n,r){if(je(e))return null;r=r||this._locale;try{return St(ze(e),r,n)}catch(e){throw Jt(t,e.message)}},t}(),Be=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,n,r,i,o){if(void 0===r&&(r="symbol"),je(e))return null;o=o||this._locale,"boolean"==typeof r&&(console&&console.warn&&console.warn('Warning: the currency pipe has been changed in Angular v5. The symbolDisplay option (third parameter) is now a string instead of a boolean. The accepted values are "code", "symbol" or "symbol-narrow".'),r=r?"symbol":"code");var a=n||"USD";"code"!==r&&(a="symbol"===r||"symbol-narrow"===r?W(a,"symbol"===r?"wide":"narrow",o):r);try{return Et(ze(e),o,a,n,i)}catch(e){throw Jt(t,e.message)}},t}();function je(t){return null==t||""===t||t!=t}function ze(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(t+" is not a number");return t}var Ve=function(){function t(){}return t.prototype.transform=function(e,n,r){if(null==e)return e;if(!this.supports(e))throw Jt(t,e);return e.slice(n,r)},t.prototype.supports=function(t){return"string"==typeof t||Array.isArray(t)},t}(),Ue=[Ee,Pe,Se,Me,Ve,Le,Fe,Ae,Be,Ie,De,ke,Re],qe=function(){},Ge=function(){},He=new r.InjectionToken("DocumentToken"),We="browser",Ke="server",Xe="browserWorkerApp",Qe="browserWorkerUi";function Ze(t){return t===We}function Ye(t){return t===Ke}function Je(t){return t===Xe}function $e(t){return t===Qe}var tn=new r.Version("6.1.3"),en=function(){function t(){}return t.ngInjectableDef=Object(r.defineInjectable)({providedIn:"root",factory:function(){return new nn(Object(r.inject)(He),window)}}),t}(),nn=function(){function t(t,e){this.document=t,this.window=e,this.offset=function(){return[0,0]}}return t.prototype.setOffset=function(t){this.offset=Array.isArray(t)?function(){return t}:t},t.prototype.getScrollPosition=function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]},t.prototype.scrollToPosition=function(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])},t.prototype.scrollToAnchor=function(t){if(this.supportScrollRestoration()){var e=this.document.querySelector("#"+t);if(e)return void this.scrollToElement(e);var n=this.document.querySelector("[name='"+t+"']");if(n)return void this.scrollToElement(n)}},t.prototype.setHistoryScrollRestoration=function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}},t.prototype.scrollToElement=function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])},t.prototype.supportScrollRestoration=function(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}},t}(),rn=function(){function t(){}return t.prototype.setOffset=function(t){},t.prototype.getScrollPosition=function(){return[0,0]},t.prototype.scrollToPosition=function(t){},t.prototype.scrollToAnchor=function(t){},t.prototype.setHistoryScrollRestoration=function(t){},t}()},IxPp:function(t,e,n){"use strict";n.r(e),n.d(e,"groupBy",function(){return u}),n.d(e,"GroupedObservable",function(){return p});var r=n("mrSG"),i=n("FFOo"),o=n("pugT"),a=n("6blF"),s=n("K9Ia");function u(t,e,n,r){return function(i){return i.lift(new l(t,e,n,r))}}var l=function(){function t(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),c=function(t){function e(e,n,r,i,o){var a=t.call(this,e)||this;return a.keySelector=n,a.elementSelector=r,a.durationSelector=i,a.subjectSelector=o,a.groups=null,a.attemptedToUnsubscribe=!1,a.count=0,a}return r.c(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},e.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(t){this.error(t)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new s.a,n.set(e,i);var o=new p(e,i,this);if(this.destination.next(o),this.durationSelector){var a=void 0;try{a=this.durationSelector(new p(e,i))}catch(t){return void this.error(t)}this.add(a.subscribe(new h(e,i,this)))}}i.closed||i.next(r)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach(function(e,n){e.error(t)}),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(i.a),h=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.key=e,i.group=n,i.parent=r,i}return r.c(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},e}(i.a),p=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.groupSubject=n,i.refCountSubscription=r,i}return r.c(e,t),e.prototype._subscribe=function(t){var e=new o.a,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new f(n)),e.add(r.subscribe(t)),e},e}(a.a),f=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return r.c(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(o.a)},JcRv:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("xTla"),i=function(t){return function(e){var n=t[r.a]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}}},K9Ia:function(t,e,n){"use strict";var r=n("mrSG"),i=n("6blF"),o=n("FFOo"),a=n("pugT"),s=n("8g8A"),u=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return r.c(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(a.a),l=n("L/V9");n.d(e,"b",function(){return c}),n.d(e,"a",function(){return h});var c=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return r.c(e,t),e}(o.a),h=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return r.c(e,t),e.prototype[l.a]=function(){return new c(this)},e.prototype.lift=function(t){var e=new p(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new s.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new s.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new s.a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),a.a.EMPTY):this.isStopped?(t.complete(),a.a.EMPTY):(this.observers.push(t),new u(this,t))},e.prototype.asObservable=function(){var t=new i.a;return t.source=this,t},e.create=function(t,e){return new p(t,e)},e}(i.a),p=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return r.c(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):a.a.EMPTY},e}(h)},KQya:function(t,e,n){"use strict";var r=n("mrSG"),i=1,o={},a=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.c(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=(a=e.flush.bind(e,null),s=i++,o[s]=a,Promise.resolve().then(function(){return function(t){var e=o[t];e&&e()}(s)}),s)));var a,s},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(delete o[n],e.scheduled=void 0)},e}(n(null).a),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.c(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(n(null).a);n.d(e,"asap",function(){return u});var u=new s(a)},KhEm:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("mrSG"),i=n("K9Ia"),o=n("6blF"),a=(n("FFOo"),n("pugT")),s=n("yGWI"),u=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r.c(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new a.a).add(this.source.subscribe(new c(this.getSubject(),this))),t.closed?(this._connection=null,t=a.a.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return Object(s.a)()(this)},e}(o.a).prototype,l={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:u._subscribe},_isComplete:{value:u._isComplete,writable:!0},getSubject:{value:u.getSubject},connect:{value:u.connect},refCount:{value:u.refCount}},c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.c(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(i.b)},"L/V9":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber"},LyWy:function(t,e,n){"use strict";var r={};t.exports=function(t){var e,n,i,o;for(t||(t={}),e=1,n=arguments.length;e<n;e+=1)for(o in i=arguments[e])o in t&&(t[o]===i[o]||o in r&&r[o]===i[o])||(t[o]=i[o]);return t}},MGBS:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("mrSG"),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.c(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n("FFOo").a)},McSo:function(t,e,n){"use strict";function r(t){return null!=t&&"object"==typeof t}n.d(e,"a",function(){return r})},Nehr:function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},OYtS:function(t,e,n){"use strict";var r,i,o,a,s;function u(t,e,n){Object.defineProperty(t,e,{value:n,configurable:!0,enumerable:!1,writeable:!0})}r=n("4Dop"),i=n("SpDt"),o=n("x8BK"),a=n("QWIM"),s=n("Zamv"),t.exports={read:function(t,e){var n,l;function c(t,e){(e&&l&&l.warn||l.log)&&(l.warn||l.log).call(l,"Relationship '"+t+"' is deprecated, see "+e)}return n=(e=e||{}).client,l=e.console||l,e.registry.lookup(e.mime.suffix).then(function(n){return n.read(t,e)}).then(function(t){return o.findProperties(t,"_embedded",function(t,e,n){Object.keys(t).forEach(function(n){if(!(n in e)){var r=s({entity:t[n]});u(e,n,r)}}),u(e,n,t)}),o.findProperties(t,"_links",function(t,e,o){Object.keys(t).forEach(function(r){var o=t[r];r in e||u(e,r,s.make(a(function(){return o.deprecation&&c(r,o.deprecation),!0===o.templated?i(n)({path:o.href}):n({path:o.href})})))}),u(e,o,t),u(e,"clientFor",function(e,o){var a=t[e];if(!a)throw new Error("Unknown relationship: "+e);return a.deprecation&&c(e,a.deprecation),!0===a.templated?i(o||n,{template:a.href}):r(o||n,{prefix:a.href})}),u(e,"requestFor",function(t,e,n){return this.clientFor(t,n)(e)})}),t})},write:function(t,e){return e.registry.lookup(e.mime.suffix).then(function(n){return n.write(t,e)})}}},"P8+q":function(t,e,n){var r;t.exports=r={},r.simpleFilter=function(t,e){return e.filter(function(e){return r.test(t,e)})},r.test=function(t,e){return null!==r.match(t,e)},r.match=function(t,e,n){var r,i=0,o=[],a=e.length,s=0,u=0,l=(n=n||{}).pre||"",c=n.post||"",h=n.caseSensitive&&e||e.toLowerCase();t=n.caseSensitive&&t||t.toLowerCase();for(var p=0;p<a;p++)r=e[p],h[p]===t[i]?(r=l+r+c,i+=1,u+=1+u):u=0,s+=u,o[o.length]=r;return i===t.length?(s=h===t?1/0:s,{rendered:o.join(""),score:s}):null},r.filter=function(t,e,n){return e&&0!==e.length?"string"!=typeof t?e:(n=n||{},e.reduce(function(e,i,o,a){var s=i;n.extract&&(s=n.extract(i));var u=r.match(t,s,n);return null!=u&&(e[e.length]={string:u.rendered,score:u.score,index:o,original:i}),e},[]).sort(function(t,e){return e.score-t.score||t.index-e.index})):[]}},QWIM:function(t,e,n){"use strict";var r=n("iYKk");t.exports=function(t){var e,n,i,o;return e=!1,i=new Promise(function(t,e){n={resolve:t,reject:e}}),o=i.then,i.then=function(){return e||(e=!0,r(t).then(n.resolve,n.reject)),o.apply(i,arguments)},i}},"R/WN":function(t,e,n){"use strict";var r=n("U6jy"),i=n("P8+q"),o=n("SX8C"),a=function(t,e,n){return this.options=r({minLength:2,limit:5,filter:!0},n=n||{}),this.el=t,this.data=e||[],this.list=new o(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(t){this.handleKeyUp(t.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(t){this.handleKeyDown(t)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(t){this.handlePaste(t)}).bind(this)),this};a.prototype.handleKeyUp=function(t){40!==t&&38!==t&&27!==t&&13!==t&&9!==t&&this.handleInputChange(this.el.value)},a.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:case 9:t.preventDefault(),this.list.isEmpty()||(this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},a.prototype.handleBlur=function(){this.list.selectingListItem||this.list.hide()},a.prototype.handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(t.target.value)},100)}},a.prototype.handleInputChange=function(t){this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates((function(t){for(var e=0;e<t.length&&(this.list.add(t[e]),e!==this.options.limit-1);e++);this.list.draw()}).bind(this))},a.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},a.prototype.update=function(t){this.data=t,this.handleKeyUp()},a.prototype.clear=function(){this.data=[],this.list.clear()},a.prototype.normalize=function(t){return t.toLowerCase()},a.prototype.match=function(t,e){return t.indexOf(e)>-1},a.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")},a.prototype.getCandidates=function(t){var e={pre:"<strong>",post:"</strong>",extract:(function(t){return this.getItemValue(t)}).bind(this)};t(this.options.filter?i.filter(this.query,this.data,e):this.data.map((function(t){for(var e=this.getItemValue(t),n=this.normalize(e),r=n.lastIndexOf(this.query);r>-1;){var i=r+this.query.length;e=e.slice(0,r)+"<strong>"+e.slice(r,i)+"</strong>"+e.slice(i),r=n.slice(0,r).lastIndexOf(this.query)}return{original:t,string:e}}).bind(this)))},a.prototype.getItemValue=function(t){return t},t.exports=a},R2Y0:function(t,e,n){"use strict";n("ohSZ");var r=n("r2d8"),i=n("9Pg3"),o=n("CxY0"),a=n("r8II"),s=r({success:function(t,e){var n=t&&t.headers&&t.headers.Link,r=t&&t.request&&t.request.originator;if(n){var s=i.parse(n).filter(function(t){return"next"===t.rel})[0];s&&(t.nextPage=function(t){var n=o.parse(s.href),i=a.parse(n.query);return i.access_token=i.access_token||e.access_token,n.search=a.stringify(i),r({path:o.format(n),callback:t})})}return t}});t.exports=s},S1nX:function(t,e,n){"use strict";var r=n("KhEm"),i=n("yGWI"),o=n("K9Ia");function a(){return new o.a}function s(){return function(t){return Object(i.a)()((e=a,function(t){var n;n="function"==typeof e?e:function(){return e};var i=Object.create(t,r.a);return i.source=t,i.subjectFactory=n,i})(t));var e}}n.d(e,"a",function(){return s})},S5XQ:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DKTb"),i=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,r.a),e}}},S5bw:function(t,e,n){"use strict";var r=n("mrSG"),i=n("K9Ia"),o=n(null),a=n("pugT"),s=n("FFOo"),u=n("60iU"),l=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return r.c(e,t),e.dispatch=function(t){t.notification.observe(t.destination),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new c(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(u.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(u.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(u.Notification.createComplete())},e}(s.a),c=function(t,e){this.notification=t,this.destination=e},h=n("8g8A"),p=n(null);n.d(e,"ReplaySubject",function(){return f});var f=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r.c(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new d(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new h.a;if(this.isStopped||this.hasError?e=a.a.EMPTY:(this.observers.push(t),e=new p.a(this,t)),i&&t.add(t=new l(t,i)),n)for(var s=0;s<o&&!t.closed;s++)t.next(r[s]);else for(s=0;s<o&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||o.a).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(i.a),d=function(t,e){this.time=t,this.value=e}},S9rb:function(t,e,n){"use strict";var r,i,o;function a(){return i.apply(void 0,arguments)}r=n("nfO7"),"function"!=typeof Promise&&console&&console.log&&console.log("An ES6 Promise implementation is required to use rest.js. See https://github.com/cujojs/when/blob/master/docs/es6-promise-shim.md for using when.js as a Promise polyfill."),a.setDefaultClient=function(t){i=t},a.getDefaultClient=function(){return i},a.resetDefaultClient=function(){i=o},a.setPlatformDefaultClient=function(t){if(o)throw new Error("Unable to redefine platformDefaultClient");i=o=t},t.exports=r(a)},SX8C:function(t,e){"Use strict";var n=function(t){return this.component=t,this.items=[],this.active=0,this.element=document.createElement("ul"),this.element.className="suggestions",this.selectingListItem=!1,t.el.parentNode.insertBefore(this.element,t.el.nextSibling),this};n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(t){this.items.push(t)},n.prototype.clear=function(){this.items=[],this.active=0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()}else this.hide()},n.prototype.drawItem=function(t,e){var n=document.createElement("li"),r=document.createElement("a");e&&(n.className+=" active"),r.innerHTML=t.string,n.appendChild(r),this.element.appendChild(n),n.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),n.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,t)}).bind(this))},n.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()},n.prototype.move=function(t){this.active=t,this.draw()},n.prototype.previous=function(){this.move(0===this.active?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},t.exports=n},SpDt:function(t,e,n){"use strict";var r,i,o;r=n("r2d8"),i=n("2H9D"),o=n("LyWy"),t.exports=r({init:function(t){return t.params=t.params||{},t.template=t.template||"",t},request:function(t,e){var n,r;return n=t.path||e.template,r=o({},t.params,e.params),t.path=i.expand(n,r),delete t.params,t}})},SsYf:function(t,e){t.exports={"country.3148":{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},"country.3145":{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},"country.330":{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},"country.3179":{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},U6jy:function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t};var n=Object.prototype.hasOwnProperty},UR0p:function(t,e,n){"use strict";n.r(e),n.d(e,"VirtualTimeScheduler",function(){return o}),n.d(e,"VirtualAction",function(){return a});var r=n("mrSG"),i=n(null),o=function(t){function e(e,n){void 0===e&&(e=a),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e,function(){return r.frame})||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return r.c(e,t),e.prototype.flush=function(){for(var t,e,n=this.actions,r=this.maxFrames;(e=n.shift())&&(this.frame=e.delay)<=r&&!(t=e.execute(e.state,e.delay)););if(t){for(;e=n.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(n(null).a),a=function(t){function e(e,n,r){void 0===r&&(r=e.index+=1);var i=t.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.index=r,i.active=!0,i.index=e.index=r,i}return r.c(e,t),e.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return t.prototype.schedule.call(this,n,r);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},e.prototype.requestAsyncId=function(t,n,r){void 0===r&&(r=0),this.delay=t.frame+r;var i=t.actions;return i.push(this),i.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},e.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(i.a)},Uv6z:function(t,e){!function(t){"use strict";if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(t){return t&&DataView.prototype.isPrototypeOf(t)},i=ArrayBuffer.isView||function(t){return t&&n.indexOf(Object.prototype.toString.call(t))>-1};c.prototype.append=function(t,e){t=s(t),e=u(e);var n=this.map[t];this.map[t]=n?n+","+e:e},c.prototype.delete=function(t){delete this.map[s(t)]},c.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},c.prototype.set=function(t,e){this.map[s(t)]=u(e)},c.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},c.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),l(t)},c.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),l(t)},c.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),l(t)},e.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},m.call(g.prototype),m.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var a=[301,302,303,307,308];v.redirect=function(t,e){if(-1===a.indexOf(e))throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},t.Headers=c,t.Request=g,t.Response=v,t.fetch=function(t,n){return new Promise(function(r,i){var o=new g(t,n),a=new XMLHttpRequest;a.onload=function(){var t,e,n={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new c,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL"),r(new v("response"in a?a.response:a.responseText,n))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&e.blob&&(a.responseType="blob"),o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function l(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(n[Symbol.iterator]=function(){return n}),n}function c(t){this.map={},t instanceof c?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function h(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function f(t){var e=new FileReader,n=p(e);return e.readAsArrayBuffer(t),n}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&r(t))this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!i(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var t,e,n,r=h(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,n=p(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}function g(t,e){var n,r,i=(e=e||{}).body;if(t instanceof g){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new c(e.headers)),this.method=(r=(n=e.method||this.method||"GET").toUpperCase(),o.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function y(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function v(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)},W0Ae:function(t,e,n){"use strict";n.r(e),n.d(e,"race",function(){return u}),n.d(e,"RaceOperator",function(){return l}),n.d(e,"RaceSubscriber",function(){return c});var r=n("mrSG"),i=n("isby"),o=n("IUTb"),a=n("MGBS"),s=n("zotm");function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!Object(i.a)(t[0]))return t[0];t=t[0]}return Object(o.a)(t,void 0).lift(new l)}var l=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new c(t))},t}(),c=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return r.c(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=Object(s.a)(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var a=this.subscriptions[o];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(e)},e}(a.a)},Wcq6:function(t,e,n){"use strict";n("lcbw");var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;t.exports=i},XlPw:function(t,e,n){"use strict";n.r(e),n.d(e,"throwError",function(){return i});var r=n("6blF");function i(t,e){return new r.a(e?function(n){return e.schedule(o,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function o(t){t.subscriber.error(t.error)}},YcCt:function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,i){e=e||"&",n=n||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var u=t.length;s>0&&u>s&&(u=s);for(var l=0;l<u;++l){var c,h,p,f,d=t[l].replace(a,"%20"),m=d.indexOf(n);m>=0?(c=d.substr(0,m),h=d.substr(m+1)):(c=d,h=""),p=decodeURIComponent(c),f=decodeURIComponent(h),r(o,p)?Array.isArray(o[p])?o[p].push(f):o[p]=[o[p],f]:o[p]=f}return o}},YuTi:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},Zamv:function(t,e,n){"use strict";var r=n("fkpV");function i(t,e){return t.then(function(t){return t&&t[e]},function(t){return Promise.reject(t&&t[e])})}function o(){return i(this,"entity")}function a(){return i(i(this,"status"),"code")}function s(){return i(this,"headers")}function u(t){return t=r(t),i(this.headers(),t)}function l(t){return c((t=[].concat(t)).reduce(function(t,e){return t.then(function(t){if("string"==typeof e&&(e={rel:e}),"function"!=typeof t.entity.clientFor)throw new Error("Hypermedia response expected");return t.entity.clientFor(e.rel)({params:e.params})})},this))}function c(t){return t.status=a,t.headers=s,t.header=u,t.entity=o,t.follow=l,t}function h(t,e,n){return c(Promise.resolve(t).then(e,n))}h.make=c,h.reject=function(t){return c(Promise.reject(t))},h.promise=function(t){return c(new Promise(t))},t.exports=h},Zn8D:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("psW0"),i=n("mChF");function o(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Object(r.a)(i.a,t)}},aRIw:function(t,e,n){var r=n("r2d8")({response:function(t){return{url:t.url,status:t.status&&t.status.code,headers:t.headers,entity:t.entity,error:t.error,callback:t.request&&t.request.callback,nextPage:t.nextPage}}});t.exports=r},awvh:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("mrSG"),i=function(t){function e(n){var r=t.call(this,n?n.length+" errors occurred during unsubscription:\n  "+n.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"")||this;return r.errors=n,r.name="UnsubscriptionError",Object.setPrototypeOf(r,e.prototype),r}return r.c(e,t),e}(Error)},bne5:function(t,e,n){"use strict";n.r(e),n.d(e,"fromEvent",function(){return s});var r=n("6blF"),i=n("isby"),o=n("2Bdj"),a=n("67Y/");function s(t,e,n,u){return Object(o.a)(n)&&(u=n,n=void 0),u?s(t,e,n).pipe(Object(a.a)(function(t){return Object(i.a)(t)?u.apply(void 0,t):u(t)})):new r.a(function(r){!function t(e,n,r,i,o){var a;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var s=e;e.addEventListener(n,r,o),a=function(){return s.removeEventListener(n,r,o)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var u=e;e.on(n,r),a=function(){return u.off(n,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var l=e;e.addListener(n,r),a=function(){return l.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var c=0,h=e.length;c<h;c++)t(e[c],n,r,i,o)}i.add(a)}(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}Object},crnd:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error('Cannot find module "'+t+'".');throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="crnd"},dEwP:function(t,e,n){"use strict";n.r(e),n.d(e,"concat",function(){return s});var r=n("nkY7"),i=n(null),o=n("0/uQ"),a=n(null);function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length||2===t.length&&Object(r.a)(t[1])?Object(o.a)(t[0]):Object(a.a)()(i.a.apply(void 0,t))}},dRYj:function(t,e,n){"use strict";var r=n("IY04"),i=n("vlXQ"),o=n("8fdW"),a=n("rJxV");t.exports=function(t){return function(e,n){this.name=t,r("string"==typeof e,"accessToken required to instantiate Mapbox client");var s=i.DEFAULT_ENDPOINT;void 0!==n&&(r("object"==typeof n,"options must be an object"),n.endpoint&&(r("string"==typeof n.endpoint,"endpoint must be a string"),s=n.endpoint),n.account&&(r("string"==typeof n.account,"account must be a string"),this.owner=n.account)),this.client=o({endpoint:s,accessToken:e}),this.accessToken=e,this.endpoint=s,this.owner=this.owner||a(e),r(!!this.owner,"could not determine account from provided accessToken")}}},dzgT:function(t,e,n){"use strict";n.r(e),n.d(e,"combineLatest",function(){return c}),n.d(e,"CombineLatestOperator",function(){return h}),n.d(e,"CombineLatestSubscriber",function(){return p});var r=n("mrSG"),i=n("nkY7"),o=n("isby"),a=n("MGBS"),s=n("zotm"),u=n("IUTb"),l={};function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return Object(i.a)(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object(o.a)(t[0])&&(t=t[0]),Object(u.a)(t,r).lift(new h(n))}var h=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new p(t,this.resultSelector))},t}(),p=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r.c(e,t),e.prototype._next=function(t){this.values.push(l),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Object(s.a)(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,a=this.toRespond?o[n]===l?--this.toRespond:this.toRespond:0;o[n]=e,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(a.a)},emHa:function(t,e,n){"use strict";n.r(e),n.d(e,"bindNodeCallback",function(){return u});var r=n("6blF"),i=n("svcd"),o=n("67Y/"),a=n("nkY7"),s=n("isby");function u(t,e,n){if(e){if(!Object(a.a)(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return u(t,n).apply(void 0,r).pipe(Object(o.a)(function(t){return Object(s.a)(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var a={subject:void 0,args:e,callbackFunc:t,scheduler:n,context:this};return new r.a(function(r){var o=a.context,s=a.subject;if(n)return n.schedule(l,0,{params:a,subscriber:r,context:o});if(!s){s=a.subject=new i.AsyncSubject;try{t.apply(o,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();n?s.error(n):(s.next(t.length<=1?t[0]:t),s.complete())}]))}catch(t){s.error(t)}}return s.subscribe(r)})}}function l(t){var e=this,n=t.params,r=t.subscriber,o=t.context,a=n.callbackFunc,s=n.args,u=n.scheduler,l=n.subject;if(!l){l=n.subject=new i.AsyncSubject;try{a.apply(o,s.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.shift();e.add(r?u.schedule(h,0,{err:r,subject:l}):u.schedule(c,0,{value:t.length<=1?t[0]:t,subject:l}))}]))}catch(t){this.add(u.schedule(h,0,{err:t,subject:l}))}}this.add(l.subscribe(r))}function c(t){var e=t.subject;e.next(t.value),e.complete()}function h(t){t.subject.error(t.err)}},errM:function(t,e,n){"use strict";t.exports=function t(e,n){return{read:function(t){return JSON.parse(t,e)},write:function(t){return JSON.stringify(t,n)},extend:t}}()},f5t7:function(t,e,n){"use strict";var r=n("IY04"),i=n("dRYj")("MapboxGeocoding");function o(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}i.prototype.geocodeForward=function(t,e,n){if(void 0===n&&"function"==typeof e&&(n=e,e={}),Array.isArray(t)){if("mapbox.places-permanent"!==e.dataset)throw new Error("Batch geocoding is only available with the mapbox.places-permanent endpoint. See https://mapbox.com/api-documentation/#batch-requests for details");t=t.join(";")}r("string"==typeof t,"query must be a string"),r("object"==typeof e,"options must be an object");var i={query:t,dataset:"mapbox.places"},a=3;return e.precision&&(r("number"==typeof e.precision,"precision option must be number"),a=e.precision),e.proximity&&(r("number"==typeof e.proximity.latitude&&"number"==typeof e.proximity.longitude,"proximity must be an object with numeric latitude & longitude properties"),i.proximity=o(e.proximity.longitude,a)+","+o(e.proximity.latitude,a)),e.bbox&&(r("number"==typeof e.bbox[0]&&"number"==typeof e.bbox[1]&&"number"==typeof e.bbox[2]&&"number"==typeof e.bbox[3]&&4===e.bbox.length,"bbox must be an array with numeric values in the form [minX, minY, maxX, maxY]"),i.bbox=e.bbox[0]+","+e.bbox[1]+","+e.bbox[2]+","+e.bbox[3]),e.limit&&(r("number"==typeof e.limit,"limit must be a number"),i.limit=e.limit),e.dataset&&(r("string"==typeof e.dataset,"dataset option must be string"),i.dataset=e.dataset),e.country&&(r("string"==typeof e.country,"country option must be string"),i.country=e.country),e.language&&(r("string"==typeof e.language,"language option must be string"),i.language=e.language),e.types&&(r("string"==typeof e.types,"types option must be string"),i.types=e.types),"boolean"==typeof e.autocomplete&&(r("boolean"==typeof e.autocomplete,"autocomplete must be a boolean"),i.autocomplete=e.autocomplete),this.client({path:"/geocoding/v5/{dataset}/{query}.json{?access_token,proximity,country,types,bbox,limit,autocomplete,language}",params:i,callback:n})},i.prototype.geocodeReverse=function(t,e,n){void 0===n&&"function"==typeof e&&(n=e,e={}),r("object"==typeof t,"location must be an object"),r("object"==typeof e,"options must be an object"),r("number"==typeof t.latitude&&"number"==typeof t.longitude,"location must be an object with numeric latitude & longitude properties");var i={dataset:"mapbox.places"};e.dataset&&(r("string"==typeof e.dataset,"dataset option must be string"),i.dataset=e.dataset);var a=5;return e.precision&&(r("number"==typeof e.precision,"precision option must be number"),a=e.precision),e.language&&(r("string"==typeof e.language,"language option must be string"),i.language=e.language),e.types&&(r("string"==typeof e.types,"types option must be string"),i.types=e.types),e.limit&&(r("number"==typeof e.limit,"limit option must be a number"),r(1===e.types.split(",").length,"a single type must be specified to use the limit option"),i.limit=e.limit),i.longitude=o(t.longitude,a),i.latitude=o(t.latitude,a),this.client({path:"/geocoding/v5/{dataset}/{longitude},{latitude}.json{?access_token,types,limit,language}",params:i,callback:n})},t.exports=i},fkpV:function(t,e,n){"use strict";t.exports=function(t){return t.toLowerCase().split("-").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join("-")}},gI3B:function(t,e,n){"use strict";var r=n("6blF"),i=n(null),o=n("isby");function a(t){return!Object(o.a)(t)&&t-parseFloat(t)+1>=0}var s=n("nkY7");function u(t,e,n){void 0===t&&(t=0);var o=-1;return a(e)?o=Number(e)<1?1:Number(e):Object(s.a)(e)&&(n=e),Object(s.a)(n)||(n=i.a),new r.a(function(e){var r=a(t)?t:+t-n.now();return n.schedule(l,r,{index:0,period:o,subscriber:e})})}function l(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}n.d(e,"timer",function(){return u})},gaK2:function(t,e,n){"use strict";n("ohSZ");var r=n("r2d8")({success:function(t){var e=t&&t.callback;return"function"==typeof e&&e(null,t.entity,t),t},error:function(t){var e=t&&t.callback;if("function"==typeof e){var n=t.error||t.entity;"object"!=typeof n&&(n=new Error(n)),e(n)}return t}});t.exports=r},gwTh:function(t,e,n){"use strict";var r,i;function o(t){return(t=encodeURIComponent(t)).replace(r,"+")}function a(t){return t=t.replace(i," "),decodeURIComponent(t)}r=/%20/g,i=/\+/g,t.exports={read:function(t){var e={};return t.split("&").forEach(function(t){var n,r,i;r=a((n=t.split("="))[0]),i=2===n.length?a(n[1]):null,r in e?(Array.isArray(e[r])||(e[r]=[e[r]]),e[r].push(i)):e[r]=i}),e},write:function(t){var e="";return Object.keys(t).forEach(function(n){e=function t(e,n,r){return Array.isArray(r)?r.forEach(function(r){e=t(e,n,r)}):(e.length>0&&(e+="&"),e+=o(n),void 0!==r&&null!==r&&(e+="="+o(r))),e}(e,n,t[n])}),e}}},iFvi:function(t,e,n){"use strict";var r=n("Bi8L"),i=n("9/5/"),o=n("U6jy"),a=n("+qE3").EventEmitter,s=n("SsYf"),u=n("f5t7");function l(t){this._eventEmitter=new a,this.options=o({},this.options,t)}l.prototype={options:{placeholder:"Search",zoom:16,flyTo:!0,trackProximity:!1,minLength:2,limit:5},onAdd:function(t){this._map=t,this.mapboxClient=new u(this.options.accessToken),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this._clear=this._clear.bind(this),this._updateProximity=this._updateProximity.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=document.createElement("span");n.className="geocoder-icon geocoder-icon-search",this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.placeholder=this.options.placeholder,this._inputEl.addEventListener("keydown",this._onKeyDown),this._inputEl.addEventListener("change",this._onChange);var i=document.createElement("div");return i.classList.add("geocoder-pin-right"),this._clearEl=document.createElement("button"),this._clearEl.className="geocoder-icon geocoder-icon-close",this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this._clear),this._loadingEl=document.createElement("span"),this._loadingEl.className="geocoder-icon geocoder-icon-loading",i.appendChild(this._clearEl),i.appendChild(this._loadingEl),e.appendChild(n),e.appendChild(this._inputEl),e.appendChild(i),this._typeahead=new r(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit}),this._typeahead.getItemValue=function(t){return t.place_name},this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),e},onRemove:function(){return this.container.parentNode.removeChild(this.container),this._map=null,this.options.trackProximity&&this._map.off("moveend",this._updateProximity),this},_onKeyDown:i(function(t){var e=t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target;if(!e.value)return this._clearEl.style.display="none";t.metaKey||-1!==[9,27,37,39,13,38,40].indexOf(t.keyCode)||e.value.length>=this.options.minLength&&this._geocode(e.value)},200),_onChange:function(){this._inputEl.value&&(this._clearEl.style.display="block");var t=this._typeahead.selected;if(t){if(this.options.flyTo)if(!s[t.id]&&t.bbox){var e=t.bbox;this._map.fitBounds([[e[0],e[1]],[e[2],e[3]]])}else s[t.id]?this._map.fitBounds(s[t.id].bbox):this._map.flyTo({center:t.center,zoom:this.options.zoom});this._eventEmitter.emit("result",{result:t})}},_geocode:function(t){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});var e=this.mapboxClient.geocodeForward(t,this.options),n=[];return this.options.localGeocoder&&((n=this.options.localGeocoder(t))||(n=[])),e.then((function(t){this._loadingEl.style.display="none";var e={};"200"==t.status&&(e=t.entity),e.features=e.features?n.concat(e.features):n,this.options.filter&&e.features.length&&(e.features=e.features.filter(this.options.filter)),e.features.length?this._clearEl.style.display="block":(this._clearEl.style.display="none",this._typeahead.selected=null),this._eventEmitter.emit("results",e),this._typeahead.update(e.features)}).bind(this)),e.catch((function(t){this._loadingEl.style.display="none",n.length?this._clearEl.style.display="block":(this._clearEl.style.display="none",this._typeahead.selected=null),this._eventEmitter.emit("results",{features:n}),this._typeahead.update(n),this._eventEmitter.emit("error",{error:t})}).bind(this)),e},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._inputEl.focus(),this._clearEl.style.display="none",this._eventEmitter.emit("clear")},_onQueryResult:function(t){var e=t.entity;if(e.features.length){var n=e.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(this._map.getZoom()>9){var t=this._map.getCenter().wrap();this.setProximity({longitude:t.lng,latitude:t.lat})}else this.setProximity(null)},query:function(t){return this._geocode(t).then(this._onQueryResult),this},setInput:function(t){return this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this},setProximity:function(t){return this.options.proximity=t,this},getProximity:function(){return this.options.proximity},on:function(t,e){return this._eventEmitter.on(t,e),this},off:function(t,e){return this._eventEmitter.removeListener(t,e),this}},t.exports=l},iLxQ:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},iYKk:function(t,e,n){"use strict";t.exports=function(t){try{return Promise.resolve(t())}catch(t){return Promise.reject(t)}}},ioW7:function(t,e,n){"use strict";var r,i,o;r=n("r2d8"),i=n("LyWy"),o=function(){function t(t,e,n){(t in e||t in n)&&(e[t]=i({},n[t],e[t]))}function e(t,e,n){t in n&&!(t in e)&&(e[t]=n[t])}var n={method:e,path:e,params:t,headers:t,entity:e,mixin:t};return function(t,e){for(var r in n)n[r](r,t,e);return t}}(),t.exports=r({request:function(t,e){return o(t,e)}})},isby:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=Array.isArray||function(t){return t&&"number"==typeof t.length}},kERW:function(t,e,n){"use strict";n.r(e),n.d(e,"fromEventPattern",function(){return s});var r=n("6blF"),i=n("isby"),o=n("2Bdj"),a=n("67Y/");function s(t,e,n){return n?s(t,e).pipe(Object(a.a)(function(t){return Object(i.a)(t)?n.apply(void 0,t):n(t)})):new r.a(function(n){var r,i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1===t.length?t[0]:t)};try{r=t(i)}catch(t){return void n.error(t)}if(Object(o.a)(e))return function(){return e(i,r)}})}},lPHp:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__,root;"undefined"!=typeof navigator&&(root=window||{},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=(function(){return function(window){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",initialDefaultFrame=-999999,subframeEnabled=!0,expressionsPlugin,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),cachedColors={},bm_rounder=Math.round,bm_rnd,bm_pow=Math.pow,bm_sqrt=Math.sqrt,bm_abs=Math.abs,bm_floor=Math.floor,bm_max=Math.max,bm_min=Math.min,blitter=10,BMMath={};function ProjectInterface(){return{}}(function(){var t,e=Object.getOwnPropertyNames(Math),n=e.length;for(t=0;t<n;t+=1)BMMath[e[t]]=Math[e[t]]})(),BMMath.random=Math.random,BMMath.abs=function(t){if("object"==typeof t&&t.length){var e,n=createSizedArray(t.length),r=t.length;for(e=0;e<r;e+=1)n[e]=Math.abs(t[e]);return n}return Math.abs(t)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(t){bm_rnd=t?Math.round:function(t){return t}}function styleDiv(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.display="block",t.style.transformOrigin=t.style.webkitTransformOrigin="0 0",t.style.backfaceVisibility=t.style.webkitBackfaceVisibility="visible",t.style.transformStyle=t.style.webkitTransformStyle=t.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(t,e,n,r){this.type=t,this.currentTime=e,this.totalTime=n,this.direction=r<0?-1:1}function BMCompleteEvent(t,e){this.type=t,this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,n,r){this.type=t,this.currentLoop=n,this.totalLoops=e,this.direction=r<0?-1:1}function BMSegmentStartEvent(t,e,n){this.type=t,this.firstFrame=e,this.totalFrames=n}function BMDestroyEvent(t,e){this.type=t,this.target=e}function randomString(t,e){var n;void 0===e&&(e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890");var r="";for(n=t;n>0;--n)r+=e[Math.round(Math.random()*(e.length-1))];return r}function HSVtoRGB(t,e,n){var r,i,o,a,s,u,l,c;switch(u=n*(1-e),l=n*(1-(s=6*t-(a=Math.floor(6*t)))*e),c=n*(1-(1-s)*e),a%6){case 0:r=n,i=c,o=u;break;case 1:r=l,i=n,o=u;break;case 2:r=u,i=n,o=c;break;case 3:r=u,i=l,o=n;break;case 4:r=c,i=u,o=n;break;case 5:r=n,i=u,o=l}return[r,i,o]}function RGBtoHSV(t,e,n){var r,i=Math.max(t,e,n),o=Math.min(t,e,n),a=i-o,s=0===i?0:a/i,u=i/255;switch(i){case o:r=0;break;case t:r=e-n+a*(e<n?6:0),r/=6*a;break;case e:r=n-t+2*a,r/=6*a;break;case n:r=t-e+4*a,r/=6*a}return[r,s,u]}function addSaturationToRGB(t,e){var n=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return n[1]+=e,n[1]>1?n[1]=1:n[1]<=0&&(n[1]=0),HSVtoRGB(n[0],n[1],n[2])}function addBrightnessToRGB(t,e){var n=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return n[2]+=e,n[2]>1?n[2]=1:n[2]<0&&(n[2]=0),HSVtoRGB(n[0],n[1],n[2])}function addHueToRGB(t,e){var n=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return n[0]+=e/360,n[0]>1?n[0]-=1:n[0]<0&&(n[0]+=1),HSVtoRGB(n[0],n[1],n[2])}roundValues(!1);var rgbToHex=function(){var t,e,n=[];for(t=0;t<256;t+=1)e=t.toString(16),n[t]=1==e.length?"0"+e:e;return function(t,e,r){return t<0&&(t=0),e<0&&(e=0),r<0&&(r=0),"#"+n[t]+n[e]+n[r]}}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(t,e){if(this._cbs[t])for(var n=this._cbs[t].length,r=0;r<n;r++)this._cbs[t][r](e)},addEventListener:function(t,e){return this._cbs[t]||(this._cbs[t]=[]),this._cbs[t].push(e),(function(){this.removeEventListener(t,e)}).bind(this)},removeEventListener:function(t,e){if(e){if(this._cbs[t]){for(var n=0,r=this._cbs[t].length;n<r;)this._cbs[t][n]===e&&(this._cbs[t].splice(n,1),n-=1,r-=1),n+=1;this._cbs[t].length||(this._cbs[t]=null)}}else this._cbs[t]=null}};var createTypedArray="function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(t,e){return"float32"===t?new Float32Array(e):"int16"===t?new Int16Array(e):"uint8c"===t?new Uint8ClampedArray(e):void 0}:function(t,e){var n,r=0,i=[];switch(t){case"int16":case"uint8c":n=1;break;default:n=1.1}for(r=0;r<e;r+=1)i.push(n);return i};function createSizedArray(t){return Array.apply(null,{length:t})}function createNS(t){return document.createElementNS(svgNS,t)}function createTag(t){return document.createElement(t)}function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&(this.dynamicProperties.push(t),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(t){this.container=t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var Matrix=function(){var t=Math.cos,e=Math.sin,n=Math.tan,r=Math.round;function i(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function o(n){if(0===n)return this;var r=t(n),i=e(n);return this._t(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1)}function a(n){if(0===n)return this;var r=t(n),i=e(n);return this._t(1,0,0,0,0,r,-i,0,0,i,r,0,0,0,0,1)}function s(n){if(0===n)return this;var r=t(n),i=e(n);return this._t(r,0,i,0,0,1,0,0,-i,0,r,0,0,0,0,1)}function u(n){if(0===n)return this;var r=t(n),i=e(n);return this._t(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1)}function l(t,e){return this._t(1,e,t,1,0,0)}function c(t,e){return this.shear(n(t),n(e))}function h(r,i){var o=t(i),a=e(i);return this._t(o,a,0,0,-a,o,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,n(r),1,0,0,0,0,1,0,0,0,0,1)._t(o,-a,0,0,a,o,0,0,0,0,1,0,0,0,0,1)}function p(t,e,n){return n||0===n||(n=1),1===t&&1===e&&1===n?this:this._t(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1)}function f(t,e,n,r,i,o,a,s,u,l,c,h,p,f,d,m){return this.props[0]=t,this.props[1]=e,this.props[2]=n,this.props[3]=r,this.props[4]=i,this.props[5]=o,this.props[6]=a,this.props[7]=s,this.props[8]=u,this.props[9]=l,this.props[10]=c,this.props[11]=h,this.props[12]=p,this.props[13]=f,this.props[14]=d,this.props[15]=m,this}function d(t,e,n){return n=n||0,0!==t||0!==e||0!==n?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,n,1):this}function m(t,e,n,r,i,o,a,s,u,l,c,h,p,f,d,m){var g=this.props;if(1===t&&0===e&&0===n&&0===r&&0===i&&1===o&&0===a&&0===s&&0===u&&0===l&&1===c&&0===h)return g[12]=g[12]*t+g[15]*p,g[13]=g[13]*o+g[15]*f,g[14]=g[14]*c+g[15]*d,g[15]=g[15]*m,this._identityCalculated=!1,this;var y=g[0],v=g[1],b=g[2],_=g[3],w=g[4],x=g[5],C=g[6],E=g[7],S=g[8],T=g[9],A=g[10],P=g[11],I=g[12],O=g[13],D=g[14],k=g[15];return g[0]=y*t+v*i+b*u+_*p,g[1]=y*e+v*o+b*l+_*f,g[2]=y*n+v*a+b*c+_*d,g[3]=y*r+v*s+b*h+_*m,g[4]=w*t+x*i+C*u+E*p,g[5]=w*e+x*o+C*l+E*f,g[6]=w*n+x*a+C*c+E*d,g[7]=w*r+x*s+C*h+E*m,g[8]=S*t+T*i+A*u+P*p,g[9]=S*e+T*o+A*l+P*f,g[10]=S*n+T*a+A*c+P*d,g[11]=S*r+T*s+A*h+P*m,g[12]=I*t+O*i+D*u+k*p,g[13]=I*e+O*o+D*l+k*f,g[14]=I*n+O*a+D*c+k*d,g[15]=I*r+O*s+D*h+k*m,this._identityCalculated=!1,this}function g(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function y(t){for(var e=0;e<16;){if(t.props[e]!==this.props[e])return!1;e+=1}return!0}function v(t){var e;for(e=0;e<16;e+=1)t.props[e]=this.props[e]}function b(t){var e;for(e=0;e<16;e+=1)this.props[e]=t[e]}function _(t,e,n){return{x:t*this.props[0]+e*this.props[4]+n*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+n*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+n*this.props[10]+this.props[14]}}function w(t,e,n){return t*this.props[0]+e*this.props[4]+n*this.props[8]+this.props[12]}function x(t,e,n){return t*this.props[1]+e*this.props[5]+n*this.props[9]+this.props[13]}function C(t,e,n){return t*this.props[2]+e*this.props[6]+n*this.props[10]+this.props[14]}function E(t){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4];return[t[0]*(this.props[5]/e)+t[1]*(-this.props[4]/e)+(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e,t[0]*(-this.props[1]/e)+t[1]*(this.props[0]/e)+-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e,0]}function S(t){var e,n=t.length,r=[];for(e=0;e<n;e+=1)r[e]=E(t[e]);return r}function T(t,e,n){var r=createTypedArray("float32",6);if(this.isIdentity())r[0]=t[0],r[1]=t[1],r[2]=e[0],r[3]=e[1],r[4]=n[0],r[5]=n[1];else{var i=this.props[0],o=this.props[1],a=this.props[4],s=this.props[5],u=this.props[12],l=this.props[13];r[0]=t[0]*i+t[1]*a+u,r[1]=t[0]*o+t[1]*s+l,r[2]=e[0]*i+e[1]*a+u,r[3]=e[0]*o+e[1]*s+l,r[4]=n[0]*i+n[1]*a+u,r[5]=n[0]*o+n[1]*s+l}return r}function A(t,e,n){return this.isIdentity()?[t,e,n]:[t*this.props[0]+e*this.props[4]+n*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+n*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+n*this.props[10]+this.props[14]]}function P(t,e){if(this.isIdentity())return t+","+e;var n=this.props;return Math.round(100*(t*n[0]+e*n[4]+n[12]))/100+","+Math.round(100*(t*n[1]+e*n[5]+n[13]))/100}function I(){for(var t=0,e=this.props,n="matrix3d(";t<16;)n+=r(1e4*e[t])/1e4,n+=15===t?")":",",t+=1;return n}function O(t){return t<1e-6&&t>0||t>-1e-6&&t<0?r(1e4*t)/1e4:t}function D(){var t=this.props;return"matrix("+O(t[0])+","+O(t[1])+","+O(t[4])+","+O(t[5])+","+O(t[12])+","+O(t[13])+")"}return function(){this.reset=i,this.rotate=o,this.rotateX=a,this.rotateY=s,this.rotateZ=u,this.skew=c,this.skewFromAxis=h,this.shear=l,this.scale=p,this.setTransform=f,this.translate=d,this.transform=m,this.applyToPoint=_,this.applyToX=w,this.applyToY=x,this.applyToZ=C,this.applyToPointArray=A,this.applyToTriplePoints=T,this.applyToPointStringified=P,this.toCSS=I,this.to2dCSS=D,this.clone=v,this.cloneFromProps=b,this.equals=y,this.inversePoints=S,this.inversePoint=E,this._t=this.transform,this.isIdentity=g,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();!function(t,e){var n=this,r=e.pow(256,6),i=e.pow(2,52),o=2*i,a=255;function s(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function u(t,e){for(var n,r=t+"",i=0;i<r.length;)e[a&i]=a&(n^=19*e[a&i])+r.charCodeAt(i++);return l(e)}function l(t){return String.fromCharCode.apply(0,t)}e.seedrandom=function(c,h,p){var f=[],d=u(function t(e,n){var r,i=[],o=typeof e;if(n&&"object"==o)for(r in e)try{i.push(t(e[r],n-1))}catch(t){}return i.length?i:"string"==o?e:e+"\0"}((h=!0===h?{entropy:!0}:h||{}).entropy?[c,l(t)]:null===c?function(){try{var e=new Uint8Array(256);return(n.crypto||n.msCrypto).getRandomValues(e),l(e)}catch(e){var r=n.navigator,i=r&&r.plugins;return[+new Date,n,i,n.screen,l(t)]}}():c,3),f),m=new function(t){var e,n=t.length,r=this,i=0,o=r.i=r.j=0,s=r.S=[];for(n||(t=[n++]);i<256;)s[i]=i++;for(i=0;i<256;i++)s[i]=s[o=a&o+t[i%n]+(e=s[i])],s[o]=e;r.g=function(t){for(var e,n=0,i=r.i,o=r.j,s=r.S;t--;)e=s[i=a&i+1],n=256*n+s[a&(s[i]=s[o=a&o+e])+(s[o]=e)];return r.i=i,r.j=o,n}}(f),g=function(){for(var t=m.g(6),e=r,n=0;t<i;)t=256*(t+n),e*=256,n=m.g(1);for(;t>=o;)t/=2,e/=2,n>>>=1;return(t+n)/e};return g.int32=function(){return 0|m.g(4)},g.quick=function(){return m.g(4)/4294967296},g.double=g,u(l(m.S),t),(h.pass||p||function(t,n,r,i){return i&&(i.S&&s(i,m),t.state=function(){return s(m,{})}),r?(e.random=t,n):t})(g,d,"global"in h?h.global:this==e,h.state)},u(e.random(),t)}([],BMMath);var BezierFactory=function(){var t={getBezierEasing:function(t,n,r,i,o){var a=o||("bez_"+t+"_"+n+"_"+r+"_"+i).replace(/\./g,"p");if(e[a])return e[a];var s=new c([t,n,r,i]);return e[a]=s,s}},e={},n=11,r=1/(n-1),i="function"==typeof Float32Array;function o(t,e){return 1-3*e+3*t}function a(t,e){return 3*e-6*t}function s(t){return 3*t}function u(t,e,n){return((o(e,n)*t+a(e,n))*t+s(e))*t}function l(t,e,n){return 3*o(e,n)*t*t+2*a(e,n)*t+s(e)}function c(t){this._p=t,this._mSampleValues=i?new Float32Array(n):new Array(n),this._precomputed=!1,this.get=this.get.bind(this)}return c.prototype={get:function(t){var e=this._p[0],n=this._p[1],r=this._p[2],i=this._p[3];return this._precomputed||this._precompute(),e===n&&r===i?t:0===t?0:1===t?1:u(this._getTForX(t),n,i)},_precompute:function(){var t=this._p[0],e=this._p[1],n=this._p[2],r=this._p[3];this._precomputed=!0,t===e&&n===r||this._calcSampleValues()},_calcSampleValues:function(){for(var t=this._p[0],e=this._p[2],i=0;i<n;++i)this._mSampleValues[i]=u(i*r,t,e)},_getTForX:function(t){for(var e=this._p[0],i=this._p[2],o=this._mSampleValues,a=0,s=1,c=n-1;s!==c&&o[s]<=t;++s)a+=r;var h=a+(t-o[--s])/(o[s+1]-o[s])*r,p=l(h,e,i);return p>=.001?function(t,e,n,r){for(var i=0;i<4;++i){var o=l(e,n,r);if(0===o)return e;e-=(u(e,n,r)-t)/o}return e}(t,h,e,i):0===p?h:function(t,e,n,r,i){var o,a,s=0;do{(o=u(a=e+(n-e)/2,r,i)-t)>0?n=a:e=a}while(Math.abs(o)>1e-7&&++s<10);return a}(t,a,a+r,e,i)}},t}();function extendPrototype(t,e){var n,r,i=t.length;for(n=0;n<i;n+=1)for(var o in r=t[n].prototype)r.hasOwnProperty(o)&&(e.prototype[o]=r[o])}function getDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)}function createProxyFunction(t){function e(){}return e.prototype=t,e}function bezFunction(){function t(t,e,n,r,i,o){var a=t*r+e*i+n*o-i*r-o*t-n*e;return a>-.001&&a<.001}Math;var e=function(t,e,n,r){var i,o,a,s,u,l,c=defaultCurveSegments,h=0,p=[],f=[],d=bezier_length_pool.newElement();for(a=n.length,i=0;i<c;i+=1){for(u=i/(c-1),l=0,o=0;o<a;o+=1)s=bm_pow(1-u,3)*t[o]+3*bm_pow(1-u,2)*u*n[o]+3*(1-u)*bm_pow(u,2)*r[o]+bm_pow(u,3)*e[o],p[o]=s,null!==f[o]&&(l+=bm_pow(p[o]-f[o],2)),f[o]=p[o];l&&(h+=l=bm_sqrt(l)),d.percents[i]=u,d.lengths[i]=h}return d.addedLength=h,d};function n(t,e){this.partialLength=t,this.point=e}var r,i=(r={},function(e){var i=e.s,o=e.e,a=e.to,s=e.ti,u=(i[0]+"_"+i[1]+"_"+o[0]+"_"+o[1]+"_"+a[0]+"_"+a[1]+"_"+s[0]+"_"+s[1]).replace(/\./g,"p");if(r[u])e.bezierData=r[u];else{var l,c,h,p,f,d,m,g=defaultCurveSegments,y=0,v=null;2===i.length&&(i[0]!=o[0]||i[1]!=o[1])&&t(i[0],i[1],o[0],o[1],i[0]+a[0],i[1]+a[1])&&t(i[0],i[1],o[0],o[1],o[0]+s[0],o[1]+s[1])&&(g=2);var b=new function(t){this.segmentLength=0,this.points=new Array(t)}(g);for(h=a.length,l=0;l<g;l+=1){for(m=createSizedArray(h),f=l/(g-1),d=0,c=0;c<h;c+=1)p=bm_pow(1-f,3)*i[c]+3*bm_pow(1-f,2)*f*(i[c]+a[c])+3*(1-f)*bm_pow(f,2)*(o[c]+s[c])+bm_pow(f,3)*o[c],m[c]=p,null!==v&&(d+=bm_pow(m[c]-v[c],2));y+=d=bm_sqrt(d),b.points[l]=new n(d,m),v=m}b.segmentLength=y,e.bezierData=b,r[u]=b}});function o(t,e){var n=e.percents,r=e.lengths,i=n.length,o=bm_floor((i-1)*t),a=t*e.addedLength,s=0;if(o===i-1||0===o||a===r[o])return n[o];for(var u=r[o]>a?-1:1,l=!0;l;)if(r[o]<=a&&r[o+1]>a?(s=(a-r[o])/(r[o+1]-r[o]),l=!1):o+=u,o<0||o>=i-1){if(o===i-1)return n[o];l=!1}return n[o]+(n[o+1]-n[o])*s}var a=createTypedArray("float32",8);return{getSegmentsLength:function(t){var n,r=segments_length_pool.newElement(),i=t.c,o=t.v,a=t.o,s=t.i,u=t._length,l=r.lengths,c=0;for(n=0;n<u-1;n+=1)l[n]=e(o[n],o[n+1],a[n],s[n+1]),c+=l[n].addedLength;return i&&u&&(l[n]=e(o[n],o[0],a[n],s[0]),c+=l[n].addedLength),r.totalLength=c,r},getNewSegment:function(t,e,n,r,i,s,u){var l,c=o(i=i<0?0:i>1?1:i,u),h=o(s=s>1?1:s,u),p=t.length,f=1-c,d=1-h,m=f*f*f,g=c*f*f*3,y=c*c*f*3,v=c*c*c,b=f*f*d,_=c*f*d+f*c*d+f*f*h,w=c*c*d+f*c*h+c*f*h,x=c*c*h,C=f*d*d,E=c*d*d+f*h*d+f*d*h,S=c*h*d+f*h*h+c*d*h,T=c*h*h,A=d*d*d,P=h*d*d+d*h*d+d*d*h,I=h*h*d+d*h*h+h*d*h,O=h*h*h;for(l=0;l<p;l+=1)a[4*l]=Math.round(1e3*(m*t[l]+g*n[l]+y*r[l]+v*e[l]))/1e3,a[4*l+1]=Math.round(1e3*(b*t[l]+_*n[l]+w*r[l]+x*e[l]))/1e3,a[4*l+2]=Math.round(1e3*(C*t[l]+E*n[l]+S*r[l]+T*e[l]))/1e3,a[4*l+3]=Math.round(1e3*(A*t[l]+P*n[l]+I*r[l]+O*e[l]))/1e3;return a},getPointInSegment:function(t,e,n,r,i,a){var s=o(i,a),u=1-s;return[Math.round(1e3*(u*u*u*t[0]+(s*u*u+u*s*u+u*u*s)*n[0]+(s*s*u+u*s*s+s*u*s)*r[0]+s*s*s*e[0]))/1e3,Math.round(1e3*(u*u*u*t[1]+(s*u*u+u*s*u+u*u*s)*n[1]+(s*s*u+u*s*s+s*u*s)*r[1]+s*s*s*e[1]))/1e3]},buildBezierData:i,pointOnLine2D:t,pointOnLine3D:function(e,n,r,i,o,a,s,u,l){if(0===r&&0===a&&0===l)return t(e,n,i,o,s,u);var c,h=Math.sqrt(Math.pow(i-e,2)+Math.pow(o-n,2)+Math.pow(a-r,2)),p=Math.sqrt(Math.pow(s-e,2)+Math.pow(u-n,2)+Math.pow(l-r,2)),f=Math.sqrt(Math.pow(s-i,2)+Math.pow(u-o,2)+Math.pow(l-a,2));return(c=h>p?h>f?h-p-f:f-p-h:f>p?f-p-h:p-h-f)>-1e-4&&c<1e-4}}}!function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var r=(new Date).getTime(),i=Math.max(0,16-(r-t)),o=setTimeout(function(){e(r+i)},i);return t=r+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var bez=bezFunction();function dataFunctionManager(){function t(t,e){for(var n=0,r=e.length;n<r;){if(e[n].id===t)return e[n].layers.__used?JSON.parse(JSON.stringify(e[n].layers)):(e[n].layers.__used=!0,e[n].layers);n+=1}}function e(t){var r,i,o;for(r=t.length-1;r>=0;r-=1)if("sh"==t[r].ty)if(t[r].ks.k.i)n(t[r].ks.k);else for(o=t[r].ks.k.length,i=0;i<o;i+=1)t[r].ks.k[i].s&&n(t[r].ks.k[i].s[0]),t[r].ks.k[i].e&&n(t[r].ks.k[i].e[0]);else"gr"==t[r].ty&&e(t[r].it)}function n(t){var e,n=t.i.length;for(e=0;e<n;e+=1)t.i[e][0]+=t.v[e][0],t.i[e][1]+=t.v[e][1],t.o[e][0]+=t.v[e][0],t.o[e][1]+=t.v[e][1]}function r(t,e){var n=e?e.split("."):[100,100,100];return t[0]>n[0]||!(n[0]>t[0])&&(t[1]>n[1]||!(n[1]>t[1])&&(t[2]>n[2]||!(n[2]>t[2])&&void 0))}var i,o=function(){var t=[4,4,14];function e(t){var e,n,r=t.length;for(e=0;e<r;e+=1)5===t[e].ty&&((n=t[e]).t.d={k:[{s:n.t.d,t:0}]})}return function(n){if(r(t,n.v)&&(e(n.layers),n.assets)){var i,o=n.assets.length;for(i=0;i<o;i+=1)n.assets[i].layers&&e(n.assets[i].layers)}}}(),a=(i=[4,7,99],function(t){if(t.chars&&!r(i,t.v)){var e,o,a,s,u,l=t.chars.length;for(e=0;e<l;e+=1)if(t.chars[e].data&&t.chars[e].data.shapes)for(a=(u=t.chars[e].data.shapes[0].it).length,o=0;o<a;o+=1)(s=u[o].ks.k).__converted||(n(u[o].ks.k),s.__converted=!0)}}),s=function(){var t=[4,1,9];function e(t){var n,r,i,o=t.length;for(n=0;n<o;n+=1)if("gr"===t[n].ty)e(t[n].it);else if("fl"===t[n].ty||"st"===t[n].ty)if(t[n].c.k&&t[n].c.k[0].i)for(i=t[n].c.k.length,r=0;r<i;r+=1)t[n].c.k[r].s&&(t[n].c.k[r].s[0]/=255,t[n].c.k[r].s[1]/=255,t[n].c.k[r].s[2]/=255,t[n].c.k[r].s[3]/=255),t[n].c.k[r].e&&(t[n].c.k[r].e[0]/=255,t[n].c.k[r].e[1]/=255,t[n].c.k[r].e[2]/=255,t[n].c.k[r].e[3]/=255);else t[n].c.k[0]/=255,t[n].c.k[1]/=255,t[n].c.k[2]/=255,t[n].c.k[3]/=255}function n(t){var n,r=t.length;for(n=0;n<r;n+=1)4===t[n].ty&&e(t[n].shapes)}return function(e){if(r(t,e.v)&&(n(e.layers),e.assets)){var i,o=e.assets.length;for(i=0;i<o;i+=1)e.assets[i].layers&&n(e.assets[i].layers)}}}(),u=function(){var t=[4,4,18];function e(t){var n,r,i;for(n=t.length-1;n>=0;n-=1)if("sh"==t[n].ty)if(t[n].ks.k.i)t[n].ks.k.c=t[n].closed;else for(i=t[n].ks.k.length,r=0;r<i;r+=1)t[n].ks.k[r].s&&(t[n].ks.k[r].s[0].c=t[n].closed),t[n].ks.k[r].e&&(t[n].ks.k[r].e[0].c=t[n].closed);else"gr"==t[n].ty&&e(t[n].it)}function n(t){var n,r,i,o,a,s,u=t.length;for(r=0;r<u;r+=1){if((n=t[r]).hasMask){var l=n.masksProperties;for(o=l.length,i=0;i<o;i+=1)if(l[i].pt.k.i)l[i].pt.k.c=l[i].cl;else for(s=l[i].pt.k.length,a=0;a<s;a+=1)l[i].pt.k[a].s&&(l[i].pt.k[a].s[0].c=l[i].cl),l[i].pt.k[a].e&&(l[i].pt.k[a].e[0].c=l[i].cl)}4===n.ty&&e(n.shapes)}}return function(e){if(r(t,e.v)&&(n(e.layers),e.assets)){var i,o=e.assets.length;for(i=0;i<o;i+=1)e.assets[i].layers&&n(e.assets[i].layers)}}}();return{completeData:function(r,i){r.__complete||(s(r),o(r),a(r),u(r),function r(i,o,a){var s,u,l,c,h,p,f,d=i.length;for(u=0;u<d;u+=1)if("ks"in(s=i[u])&&!s.completed){if(s.completed=!0,s.tt&&(i[u-1].td=s.tt),s.hasMask){var m=s.masksProperties;for(c=m.length,l=0;l<c;l+=1)if(m[l].pt.k.i)n(m[l].pt.k);else for(p=m[l].pt.k.length,h=0;h<p;h+=1)m[l].pt.k[h].s&&n(m[l].pt.k[h].s[0]),m[l].pt.k[h].e&&n(m[l].pt.k[h].e[0])}0===s.ty?(s.layers=t(s.refId,o),r(s.layers,o,a)):4===s.ty?e(s.shapes):5==s.ty&&(0!==(f=s).t.a.length||"m"in f.t.p||(f.singleShape=!0))}}(r.layers,r.assets,i),r.__complete=!0)}}}var dataManager=dataFunctionManager(),FontManager=function(){var t={w:0,size:0,shapes:[]},e=[];function n(t,e){var n=createTag("span");n.style.fontFamily=e;var r=createTag("span");r.innerHTML="giItT1WQy@!-/#",n.style.position="absolute",n.style.left="-10000px",n.style.top="-10000px",n.style.fontSize="300px",n.style.fontVariant="normal",n.style.fontStyle="normal",n.style.fontWeight="normal",n.style.letterSpacing="0",n.appendChild(r),document.body.appendChild(n);var i=r.offsetWidth;return r.style.fontFamily=t+", "+e,{node:r,w:i,parent:n}}function r(t,e){var n=createNS("text");return n.style.fontSize="100px",n.setAttribute("font-family",e.fFamily),n.setAttribute("font-style",e.fStyle),n.setAttribute("font-weight",e.fWeight),n.textContent="1",e.fClass?(n.style.fontFamily="inherit",n.className=e.fClass):n.style.fontFamily=e.fFamily,t.appendChild(n),createTag("canvas").getContext("2d").font=e.fWeight+" "+e.fStyle+" 100px "+e.fFamily,n}e=e.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var i=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this.initTime=Date.now()};return i.getCombinedCharacterCodes=function(){return e},i.prototype.addChars=function(t){if(t){this.chars||(this.chars=[]);var e,n,r,i=t.length,o=this.chars.length;for(e=0;e<i;e+=1){for(n=0,r=!1;n<o;)this.chars[n].style===t[e].style&&this.chars[n].fFamily===t[e].fFamily&&this.chars[n].ch===t[e].ch&&(r=!0),n+=1;r||(this.chars.push(t[e]),o+=1)}}},i.prototype.addFonts=function(t,e){if(t){if(this.chars)return this.isLoaded=!0,void(this.fonts=t.list);var i,o=t.list,a=o.length,s=a;for(i=0;i<a;i+=1){var u,l,c=!0;if(o[i].loaded=!1,o[i].monoCase=n(o[i].fFamily,"monospace"),o[i].sansCase=n(o[i].fFamily,"sans-serif"),o[i].fPath){if("p"===o[i].fOrigin||3===o[i].origin){if((u=document.querySelectorAll('style[f-forigin="p"][f-family="'+o[i].fFamily+'"], style[f-origin="3"][f-family="'+o[i].fFamily+'"]')).length>0&&(c=!1),c){var h=createTag("style");h.setAttribute("f-forigin",o[i].fOrigin),h.setAttribute("f-origin",o[i].origin),h.setAttribute("f-family",o[i].fFamily),h.type="text/css",h.innerHTML="@font-face {font-family: "+o[i].fFamily+"; font-style: normal; src: url('"+o[i].fPath+"');}",e.appendChild(h)}}else if("g"===o[i].fOrigin||1===o[i].origin){for(u=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),l=0;l<u.length;l++)-1!==u[l].href.indexOf(o[i].fPath)&&(c=!1);if(c){var p=createTag("link");p.setAttribute("f-forigin",o[i].fOrigin),p.setAttribute("f-origin",o[i].origin),p.type="text/css",p.rel="stylesheet",p.href=o[i].fPath,document.body.appendChild(p)}}else if("t"===o[i].fOrigin||2===o[i].origin){for(u=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),l=0;l<u.length;l++)o[i].fPath===u[l].src&&(c=!1);if(c){var f=createTag("script");f.setAttribute("f-forigin",o[i].fOrigin),f.setAttribute("f-origin",o[i].origin),f.setAttribute("src",o[i].fPath),e.appendChild(f)}}}else o[i].loaded=!0,s-=1;o[i].helper=r(e,o[i]),o[i].cache={},this.fonts.push(o[i])}0===s?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},i.prototype.getCharData=function(e,n,r){for(var i=0,o=this.chars.length;i<o;){if(this.chars[i].ch===e&&this.chars[i].style===n&&this.chars[i].fFamily===r)return this.chars[i];i+=1}return console&&console.warn&&console.warn("Missing character from exported characters list: ",e,n,r),t},i.prototype.getFontByName=function(t){for(var e=0,n=this.fonts.length;e<n;){if(this.fonts[e].fName===t)return this.fonts[e];e+=1}return this.fonts[0]},i.prototype.measureText=function(t,e,n){var r=this.getFontByName(e),i=t.charCodeAt(0);if(!r.cache[i+1]){var o=r.helper;o.textContent=t,r.cache[i+1]=o.getComputedTextLength()/100}return r.cache[i+1]*n},i.prototype.checkLoadedFonts=function(){var t,e=this.fonts.length,n=e;for(t=0;t<e;t+=1)if(this.fonts[t].loaded)n-=1;else if("t"===this.fonts[t].fOrigin||2===this.fonts[t].origin){if(window.Typekit&&window.Typekit.load&&0===this.typekitLoaded){this.typekitLoaded=1;try{window.Typekit.load({async:!0,active:(function(){this.typekitLoaded=2}).bind(this)})}catch(t){}}2===this.typekitLoaded&&(this.fonts[t].loaded=!0)}else"n"===this.fonts[t].fOrigin||0===this.fonts[t].origin?this.fonts[t].loaded=!0:(this.fonts[t].monoCase.node.offsetWidth!==this.fonts[t].monoCase.w?(n-=1,this.fonts[t].loaded=!0):this.fonts[t].sansCase.node.offsetWidth!==this.fonts[t].sansCase.w&&(n-=1,this.fonts[t].loaded=!0),this.fonts[t].loaded&&(this.fonts[t].sansCase.parent.parentNode.removeChild(this.fonts[t].sansCase.parent),this.fonts[t].monoCase.parent.parentNode.removeChild(this.fonts[t].monoCase.parent)));0!==n&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFonts.bind(this),20):setTimeout((function(){this.isLoaded=!0}).bind(this),0)},i.prototype.loaded=function(){return this.isLoaded},i}(),PropertyFactory=function(){var t=initialDefaultFrame,e=Math.abs;function n(t,e){var n,i=this.offsetTime;"multidimensional"===this.propType&&(n=createTypedArray("float32",this.pv.length));for(var o,a,s,u,l,c,h,p,f=e.lastIndex,d=f,m=this.keyframes.length-1,g=!0;g;){if(o=this.keyframes[d],a=this.keyframes[d+1],d===m-1&&t>=a.t-i){o.h&&(o=a),f=0;break}if(a.t-i>t){f=d;break}d<m-1?d+=1:(f=0,g=!1)}var y,v,b,_,w,x,C,E,S,T=a.t-i,A=o.t-i;if(o.to){o.bezierData||bez.buildBezierData(o);var P=o.bezierData;if(t>=T||t<A){var I=t>=T?P.points.length-1:0;for(u=P.points[I].point.length,s=0;s<u;s+=1)n[s]=P.points[I].point[s]}else{o.__fnct?p=o.__fnct:(p=BezierFactory.getBezierEasing(o.o.x,o.o.y,o.i.x,o.i.y,o.n).get,o.__fnct=p),l=p((t-A)/(T-A));var O,D=P.segmentLength*l,k=e.lastFrame<t&&e._lastBezierData===P?e._lastAddedLength:0;for(h=e.lastFrame<t&&e._lastBezierData===P?e._lastPoint:0,g=!0,c=P.points.length;g;){if(k+=P.points[h].partialLength,0===D||0===l||h===P.points.length-1){for(u=P.points[h].point.length,s=0;s<u;s+=1)n[s]=P.points[h].point[s];break}if(D>=k&&D<k+P.points[h+1].partialLength){for(O=(D-k)/P.points[h+1].partialLength,u=P.points[h].point.length,s=0;s<u;s+=1)n[s]=P.points[h].point[s]+(P.points[h+1].point[s]-P.points[h].point[s])*O;break}h<c-1?h+=1:g=!1}e._lastPoint=h,e._lastAddedLength=k-P.points[h].partialLength,e._lastBezierData=P}}else{var M;if(m=o.s.length,this.sh&&1!==o.h)if(t>=T)n[0]=o.e[0],n[1]=o.e[1],n[2]=o.e[2];else if(t<=A)n[0]=o.s[0],n[1]=o.s[1],n[2]=o.s[2];else{var R=r(o.s),N=r(o.e);y=n,b=(v=function(t,e,n){var r,i,o,a,s,u=[],l=R[0],c=R[1],h=R[2],p=R[3],f=N[0],d=N[1],m=N[2],g=N[3];return(i=l*f+c*d+h*m+p*g)<0&&(i=-i,f=-f,d=-d,m=-m,g=-g),1-i>1e-6?(r=Math.acos(i),o=Math.sin(r),a=Math.sin((1-n)*r)/o,s=Math.sin(n*r)/o):(a=1-n,s=n),u[0]=a*l+s*f,u[1]=a*c+s*d,u[2]=a*h+s*m,u[3]=a*p+s*g,u}(0,0,(t-A)/(T-A)))[0],_=v[1],w=v[2],x=v[3],C=Math.atan2(2*_*x-2*b*w,1-2*_*_-2*w*w),E=Math.asin(2*b*_+2*w*x),S=Math.atan2(2*b*x-2*_*w,1-2*b*b-2*w*w),y[0]=C/degToRads,y[1]=E/degToRads,y[2]=S/degToRads}else for(d=0;d<m;d+=1)1!==o.h&&(t>=T?l=1:t<A?l=0:(o.o.x.constructor===Array?(o.__fnct||(o.__fnct=[]),o.__fnct[d]?p=o.__fnct[d]:(p=BezierFactory.getBezierEasing(o.o.x[d]||o.o.x[0],o.o.y[d]||o.o.y[0],o.i.x[d]||o.i.x[0],o.i.y[d]||o.i.y[0]).get,o.__fnct[d]=p)):o.__fnct?p=o.__fnct:(p=BezierFactory.getBezierEasing(o.o.x,o.o.y,o.i.x,o.i.y).get,o.__fnct=p),l=p((t-A)/(T-A)))),M=1===o.h?o.s[d]:o.s[d]+(o.e[d]-o.s[d])*l,1===m?n=M:n[d]=M}return e.lastIndex=f,n}function r(t){var e=t[0]*degToRads,n=t[1]*degToRads,r=t[2]*degToRads,i=Math.cos(e/2),o=Math.cos(n/2),a=Math.cos(r/2),s=Math.sin(e/2),u=Math.sin(n/2),l=Math.sin(r/2);return[s*u*a+i*o*l,s*o*a+i*u*l,i*u*a-s*o*l,i*o*a-s*u*l]}function i(){var e=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(e===this._caching.lastFrame||this._caching.lastFrame!==t&&(this._caching.lastFrame>=r&&e>=r||this._caching.lastFrame<n&&e<n))){this._caching.lastFrame>=e&&(this._caching._lastBezierData=null,this._caching.lastIndex=0);var i=this.interpolateValue(e,this._caching);this.pv=i}return this._caching.lastFrame=e,this.pv}function o(t){var n;if("unidimensional"===this.propType)e(this.v-(n=t*this.mult))>1e-5&&(this.v=n,this._mdf=!0);else for(var r=0,i=this.v.length;r<i;)e(this.v[r]-(n=t[r]*this.mult))>1e-5&&(this.v[r]=n,this._mdf=!0),r+=1}function a(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=this._isFirstFrame;var t,e=this.effectsSequence.length,n=this.kf?this.pv:this.data.k;for(t=0;t<e;t+=1)n=this.effectsSequence[t](n);this.setVValue(n),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function s(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function u(t,e,n,r){this.propType="unidimensional",this.mult=n||1,this.data=e,this.v=n?e.k*n:e.k,this.pv=e.k,this._mdf=!1,this.elem=t,this.container=r,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=a,this.setVValue=o,this.addEffect=s}function l(t,e,n,r){this.propType="multidimensional",this.mult=n||1,this.data=e,this._mdf=!1,this.elem=t,this.container=r,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1;var i,u=e.k.length;for(this.v=createTypedArray("float32",u),this.pv=createTypedArray("float32",u),createTypedArray("float32",u),this.vel=createTypedArray("float32",u),i=0;i<u;i+=1)this.v[i]=e.k[i]*this.mult,this.pv[i]=e.k[i];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=a,this.setVValue=o,this.addEffect=s}function c(e,r,u,l){this.propType="unidimensional",this.keyframes=r.k,this.offsetTime=e.data.st,this.frameId=-1,this._caching={lastFrame:t,lastIndex:0,value:0,_lastBezierData:null},this.k=!0,this.kf=!0,this.data=r,this.mult=u||1,this.elem=e,this.container=l,this.comp=e.comp,this.v=t,this.pv=t,this._isFirstFrame=!0,this.getValue=a,this.setVValue=o,this.interpolateValue=n,this.effectsSequence=[i.bind(this)],this.addEffect=s}function h(e,r,u,l){this.propType="multidimensional";var c,h,p,f,d,m=r.k.length;for(c=0;c<m-1;c+=1)r.k[c].to&&r.k[c].s&&r.k[c].e&&(p=r.k[c].e,f=r.k[c].to,d=r.k[c].ti,(2===(h=r.k[c].s).length&&(h[0]!==p[0]||h[1]!==p[1])&&bez.pointOnLine2D(h[0],h[1],p[0],p[1],h[0]+f[0],h[1]+f[1])&&bez.pointOnLine2D(h[0],h[1],p[0],p[1],p[0]+d[0],p[1]+d[1])||3===h.length&&(h[0]!==p[0]||h[1]!==p[1]||h[2]!==p[2])&&bez.pointOnLine3D(h[0],h[1],h[2],p[0],p[1],p[2],h[0]+f[0],h[1]+f[1],h[2]+f[2])&&bez.pointOnLine3D(h[0],h[1],h[2],p[0],p[1],p[2],p[0]+d[0],p[1]+d[1],p[2]+d[2]))&&(r.k[c].to=null,r.k[c].ti=null),h[0]===p[0]&&h[1]===p[1]&&0===f[0]&&0===f[1]&&0===d[0]&&0===d[1]&&(2===h.length||h[2]===p[2]&&0===f[2]&&0===d[2])&&(r.k[c].to=null,r.k[c].ti=null));this.effectsSequence=[i.bind(this)],this.keyframes=r.k,this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=u||1,this.elem=e,this.container=l,this.comp=e.comp,this.getValue=a,this.setVValue=o,this.interpolateValue=n,this.frameId=-1;var g=r.k[0].s.length;for(this.v=createTypedArray("float32",g),this.pv=createTypedArray("float32",g),c=0;c<g;c+=1)this.v[c]=t,this.pv[c]=t;this._caching={lastFrame:t,lastIndex:0,value:createTypedArray("float32",g)},this.addEffect=s}return{getProp:function(t,e,n,r,i){var o;if(0===e.a)o=0===n?new u(t,e,r,i):new l(t,e,r,i);else if(1===e.a)o=0===n?new c(t,e,r,i):new h(t,e,r,i);else if(e.k.length)if("number"==typeof e.k[0])o=new l(t,e,r,i);else switch(n){case 0:o=new c(t,e,r,i);break;case 1:o=new h(t,e,r,i)}else o=new u(t,e,r,i);return o.effectsSequence.length&&i.addDynamicProperty(o),o}}}(),TransformPropertyFactory=function(){function t(t,e,n){if(this.elem=t,this.frameId=-1,this.propType="transform",this.data=e,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(n||t),e.p.s?(this.px=PropertyFactory.getProp(t,e.p.x,0,0,this),this.py=PropertyFactory.getProp(t,e.p.y,0,0,this),e.p.z&&(this.pz=PropertyFactory.getProp(t,e.p.z,0,0,this))):this.p=PropertyFactory.getProp(t,e.p,1,0,this),e.r)this.r=PropertyFactory.getProp(t,e.r,0,degToRads,this);else if(e.rx){if(this.rx=PropertyFactory.getProp(t,e.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(t,e.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(t,e.rz,0,degToRads,this),e.or.k[0].ti){var r,i=e.or.k.length;for(r=0;r<i;r+=1)e.or.k[r].to=e.or.k[r].ti=null}this.or=PropertyFactory.getProp(t,e.or,1,degToRads,this),this.or.sh=!0}e.sk&&(this.sk=PropertyFactory.getProp(t,e.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(t,e.sa,0,degToRads,this)),e.a&&(this.a=PropertyFactory.getProp(t,e.a,1,0,this)),e.s&&(this.s=PropertyFactory.getProp(t,e.s,1,.01,this)),this.o=e.o?PropertyFactory.getProp(t,e.o,0,.01,t):{_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return t.prototype={applyToMatrix:function(t){var e=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||e,this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&t.skewFromAxis(-this.sk.v,this.sa.v),this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?t.translate(this.px.v,this.py.v,this.data.p.z?-this.pz.v:0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(t){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||t){if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var e,n,r=this.elem.globalData.frameRate;if(this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(e=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/r,0),n=this.p.getValueAtTime(this.p.keyframes[0].t/r,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(e=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/r,0),n=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.01)/r,0)):(e=this.p.pv,n=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/r,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){e=[],n=[];var i=this.px,o=this.py;i._caching.lastFrame+i.offsetTime<=i.keyframes[0].t?(e[0]=i.getValueAtTime((i.keyframes[0].t+.01)/r,0),e[1]=o.getValueAtTime((o.keyframes[0].t+.01)/r,0),n[0]=i.getValueAtTime(i.keyframes[0].t/r,0),n[1]=o.getValueAtTime(o.keyframes[0].t/r,0)):i._caching.lastFrame+i.offsetTime>=i.keyframes[i.keyframes.length-1].t?(e[0]=i.getValueAtTime(i.keyframes[i.keyframes.length-1].t/r,0),e[1]=o.getValueAtTime(o.keyframes[o.keyframes.length-1].t/r,0),n[0]=i.getValueAtTime((i.keyframes[i.keyframes.length-1].t-.01)/r,0),n[1]=o.getValueAtTime((o.keyframes[o.keyframes.length-1].t-.01)/r,0)):(e=[i.pv,o.pv],n[0]=i.getValueAtTime((i._caching.lastFrame+i.offsetTime-.01)/r,i.offsetTime),n[1]=o.getValueAtTime((o._caching.lastFrame+o.offsetTime-.01)/r,o.offsetTime))}this.v.rotate(-Math.atan2(e[1]-n[1],e[0]-n[0]))}this.data.p.s?this.v.translate(this.px.v,this.py.v,this.data.p.z?-this.pz.v:0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}if(this.r){if(this.r.effectsSequence.length)return;this.pre.rotate(-this.r.v),this.appliedTransformations=4}else this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],t),t.prototype.addDynamicProperty=function(t){this._addDynamicProperty(t),this.elem.addDynamicProperty(t),this._isDirty=!0},t.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(e,n,r){return new t(e,n,r)}}}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var n=0;n<e;)this.v[n]=point_pool.newElement(),this.o[n]=point_pool.newElement(),this.i[n]=point_pool.newElement(),n+=1},ShapePath.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(t,e,n,r,i){var o;switch(this._length=Math.max(this._length,r+1),this._length>=this._maxLength&&this.doubleArrayLength(),n){case"v":o=this.v;break;case"i":o=this.i;break;case"o":o=this.o}(!o[r]||o[r]&&!i)&&(o[r]=point_pool.newElement()),o[r][0]=t,o[r][1]=e},ShapePath.prototype.setTripleAt=function(t,e,n,r,i,o,a,s){this.setXYAt(t,e,"v",a,s),this.setXYAt(n,r,"o",a,s),this.setXYAt(i,o,"i",a,s)},ShapePath.prototype.reverse=function(){var t=new ShapePath;t.setPathData(this.c,this._length);var e=this.v,n=this.o,r=this.i,i=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],r[0][0],r[0][1],n[0][0],n[0][1],0,!1),i=1);var o,a=this._length-1,s=this._length;for(o=i;o<s;o+=1)t.setTripleAt(e[a][0],e[a][1],r[a][0],r[a][1],n[a][0],n[a][1],o,!1),a-=1;return t};var ShapePropertyFactory=function(){var t=-999999;function e(t,e,n){var r,i,o,a,s,u,l,c,h=n.lastIndex,p=this.keyframes;if(t<p[0].t-this.offsetTime)r=p[0].s[0],o=!0,h=0;else if(t>=p[p.length-1].t-this.offsetTime)r=1===p[p.length-2].h?p[p.length-1].s[0]:p[p.length-2].e[0],o=!0;else{for(var f,d,m=h,g=p.length-1,y=!0;y&&(f=p[m],!((d=p[m+1]).t-this.offsetTime>t));)m<g-1?m+=1:y=!1;if(h=m,!(o=1===f.h)){if(t>=d.t-this.offsetTime)c=1;else if(t<f.t-this.offsetTime)c=0;else{var v;f.__fnct?v=f.__fnct:(v=BezierFactory.getBezierEasing(f.o.x,f.o.y,f.i.x,f.i.y).get,f.__fnct=v),c=v((t-(f.t-this.offsetTime))/(d.t-this.offsetTime-(f.t-this.offsetTime)))}i=f.e[0]}r=f.s[0]}for(u=e._length,l=r.i[0].length,n.lastIndex=h,a=0;a<u;a+=1)for(s=0;s<l;s+=1)e.i[a][s]=o?r.i[a][s]:r.i[a][s]+(i.i[a][s]-r.i[a][s])*c,e.o[a][s]=o?r.o[a][s]:r.o[a][s]+(i.o[a][s]-r.o[a][s])*c,e.v[a][s]=o?r.v[a][s]:r.v[a][s]+(i.v[a][s]-r.v[a][s])*c}function n(){this.paths=this.localShapeCollection}function r(t){(function(t,e){if(t._length!==e._length||t.c!==e.c)return!1;var n,r=t._length;for(n=0;n<r;n+=1)if(t.v[n][0]!==e.v[n][0]||t.v[n][1]!==e.v[n][1]||t.o[n][0]!==e.o[n][0]||t.o[n][1]!==e.o[n][1]||t.i[n][0]!==e.i[n][0]||t.i[n][1]!==e.i[n][1])return!1;return!0})(this.v,t)||(this.v=shape_pool.clone(t),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function i(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=!1;var t,e=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k,n=this.effectsSequence.length;for(t=0;t<n;t+=1)e=this.effectsSequence[t](e);this.setVValue(e),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function o(t,e,r){this.propType="shape",this.comp=t.comp,this.container=t,this.elem=t,this.data=e,this.k=!1,this.kf=!1,this._mdf=!1,this.v=shape_pool.clone(3===r?e.pt.k:e.ks.k),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=n,this.effectsSequence=[]}function a(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function s(e,r,i){this.propType="shape",this.comp=e.comp,this.elem=e,this.container=e,this.offsetTime=e.data.st,this.keyframes=3===i?r.pt.k:r.ks.k,this.k=!0,this.kf=!0;var o=this.keyframes[0].s[0].i.length;this.v=shape_pool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,o),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=t,this.reset=n,this._caching={lastFrame:t,lastIndex:0},this.effectsSequence=[(function(){var e=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime,i=this._caching.lastFrame;return i!==t&&(i<n&&e<n||i>r&&e>r)||(this._caching.lastIndex=i<e?this._caching.lastIndex:0,this.interpolateShape(e,this.pv,this._caching)),this._caching.lastFrame=e,this.pv}).bind(this)]}o.prototype.interpolateShape=e,o.prototype.getValue=i,o.prototype.setVValue=r,o.prototype.addEffect=a,s.prototype.getValue=i,s.prototype.interpolateShape=e,s.prototype.setVValue=r,s.prototype.addEffect=a;var u=function(){var t=roundCorner;function e(t,e){this.v=shape_pool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=e.d,this.elem=t,this.comp=t.comp,this.frameId=-1,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return e.prototype={reset:n,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var e=this.p.v[0],n=this.p.v[1],r=this.s.v[0]/2,i=this.s.v[1]/2,o=3!==this.d,a=this.v;a.v[0][0]=e,a.v[0][1]=n-i,a.v[1][0]=o?e+r:e-r,a.v[1][1]=n,a.v[2][0]=e,a.v[2][1]=n+i,a.v[3][0]=o?e-r:e+r,a.v[3][1]=n,a.i[0][0]=o?e-r*t:e+r*t,a.i[0][1]=n-i,a.i[1][0]=o?e+r:e-r,a.i[1][1]=n-i*t,a.i[2][0]=o?e+r*t:e-r*t,a.i[2][1]=n+i,a.i[3][0]=o?e-r:e+r,a.i[3][1]=n+i*t,a.o[0][0]=o?e+r*t:e-r*t,a.o[0][1]=n-i,a.o[1][0]=o?e+r:e-r,a.o[1][1]=n+i*t,a.o[2][0]=o?e-r*t:e+r*t,a.o[2][1]=n+i,a.o[3][0]=o?e-r:e+r,a.o[3][1]=n-i*t}},extendPrototype([DynamicPropertyContainer],e),e}(),l=function(){function t(t,e){this.v=shape_pool.newElement(),this.v.setPathData(!0,0),this.elem=t,this.comp=t.comp,this.data=e,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),1===e.sy?(this.ir=PropertyFactory.getProp(t,e.ir,0,0,this),this.is=PropertyFactory.getProp(t,e.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(t,e.pt,0,0,this),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,degToRads,this),this.or=PropertyFactory.getProp(t,e.or,0,0,this),this.os=PropertyFactory.getProp(t,e.os,0,.01,this),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return t.prototype={reset:n,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var t,e,n,r,i=2*Math.floor(this.pt.v),o=2*Math.PI/i,a=!0,s=this.or.v,u=this.ir.v,l=this.os.v,c=this.is.v,h=2*Math.PI*s/(2*i),p=2*Math.PI*u/(2*i),f=-Math.PI/2;f+=this.r.v;var d=3===this.data.d?-1:1;for(this.v._length=0,t=0;t<i;t+=1){e=a?s:u,n=a?l:c,r=a?h:p;var m=e*Math.cos(f),g=e*Math.sin(f),y=0===m&&0===g?0:g/Math.sqrt(m*m+g*g),v=0===m&&0===g?0:-m/Math.sqrt(m*m+g*g);this.v.setTripleAt(m+=+this.p.v[0],g+=+this.p.v[1],m-y*r*n*d,g-v*r*n*d,m+y*r*n*d,g+v*r*n*d,t,!0),a=!a,f+=o*d}},convertPolygonToPath:function(){var t,e=Math.floor(this.pt.v),n=2*Math.PI/e,r=this.or.v,i=this.os.v,o=2*Math.PI*r/(4*e),a=-Math.PI/2,s=3===this.data.d?-1:1;for(a+=this.r.v,this.v._length=0,t=0;t<e;t+=1){var u=r*Math.cos(a),l=r*Math.sin(a),c=0===u&&0===l?0:l/Math.sqrt(u*u+l*l),h=0===u&&0===l?0:-u/Math.sqrt(u*u+l*l);this.v.setTripleAt(u+=+this.p.v[0],l+=+this.p.v[1],u-c*o*i*s,l-h*o*i*s,u+c*o*i*s,l+h*o*i*s,t,!0),a+=n*s}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],t),t}(),c=function(){function t(t,e){this.v=shape_pool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=t,this.comp=t.comp,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return t.prototype={convertRectToPath:function(){var t=this.p.v[0],e=this.p.v[1],n=this.s.v[0]/2,r=this.s.v[1]/2,i=bm_min(n,r,this.r.v),o=i*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(t+n,e-r+i,t+n,e-r+i,t+n,e-r+o,0,!0),this.v.setTripleAt(t+n,e+r-i,t+n,e+r-o,t+n,e+r-i,1,!0),0!==i?(this.v.setTripleAt(t+n-i,e+r,t+n-i,e+r,t+n-o,e+r,2,!0),this.v.setTripleAt(t-n+i,e+r,t-n+o,e+r,t-n+i,e+r,3,!0),this.v.setTripleAt(t-n,e+r-i,t-n,e+r-i,t-n,e+r-o,4,!0),this.v.setTripleAt(t-n,e-r+i,t-n,e-r+o,t-n,e-r+i,5,!0),this.v.setTripleAt(t-n+i,e-r,t-n+i,e-r,t-n+o,e-r,6,!0),this.v.setTripleAt(t+n-i,e-r,t+n-o,e-r,t+n-i,e-r,7,!0)):(this.v.setTripleAt(t-n,e+r,t-n+o,e+r,t-n,e+r,2),this.v.setTripleAt(t-n,e-r,t-n,e-r+o,t-n,e-r,3))):(this.v.setTripleAt(t+n,e-r+i,t+n,e-r+o,t+n,e-r+i,0,!0),0!==i?(this.v.setTripleAt(t+n-i,e-r,t+n-i,e-r,t+n-o,e-r,1,!0),this.v.setTripleAt(t-n+i,e-r,t-n+o,e-r,t-n+i,e-r,2,!0),this.v.setTripleAt(t-n,e-r+i,t-n,e-r+i,t-n,e-r+o,3,!0),this.v.setTripleAt(t-n,e+r-i,t-n,e+r-o,t-n,e+r-i,4,!0),this.v.setTripleAt(t-n+i,e+r,t-n+i,e+r,t-n+o,e+r,5,!0),this.v.setTripleAt(t+n-i,e+r,t+n-o,e+r,t+n-i,e+r,6,!0),this.v.setTripleAt(t+n,e+r-i,t+n,e+r-i,t+n,e+r-o,7,!0)):(this.v.setTripleAt(t-n,e-r,t-n+o,e-r,t-n,e-r,1,!0),this.v.setTripleAt(t-n,e+r,t-n,e+r-o,t-n,e+r,2,!0),this.v.setTripleAt(t+n,e+r,t+n-o,e+r,t+n,e+r,3,!0)))},getValue:function(t){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:n},extendPrototype([DynamicPropertyContainer],t),t}();return{getShapeProp:function(t,e,n){var r;if(3===n||4===n){var i=3===n?e.pt:e.ks;r=1===i.a||i.k.length?new s(t,e,n):new o(t,e,n)}else 5===n?r=new c(t,e):6===n?r=new u(t,e):7===n&&(r=new l(t,e));return r.k&&t.addDynamicProperty(r),r},getConstructorFunction:function(){return o},getKeyframedConstructorFunction:function(){return s}}}(),ShapeModifiers=function(){var t={},e={};return t.registerModifier=function(t,n){e[t]||(e[t]=n)},t.getModifier=function(t,n,r){return new e[t](n,r)},t}();function ShapeModifier(){}function TrimModifier(){}function RoundCornersModifier(){}function RepeaterModifier(){}function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}function DashProperty(t,e,n,r){this.elem=t,this.frameId=-1,this.dataProps=createSizedArray(e.length),this.renderer=n,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",e.length?e.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(r);var i,o,a=e.length||0;for(i=0;i<a;i+=1)o=PropertyFactory.getProp(t,e[i].v,0,0,this),this.k=o.k||this.k,this.dataProps[i]={n:e[i].n,p:o};this.k||this.getValue(!0),this._isAnimated=this.k}function GradientProperty(t,e,n){this.data=e,this.c=createTypedArray("uint8c",4*e.p);var r=e.k.k[0].s?e.k.k[0].s.length-4*e.p:e.k.k.length-4*e.p;this.o=createTypedArray("float32",r),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=r,this.initDynamicPropertyContainer(n),this.prop=PropertyFactory.getProp(t,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(t){if(!this.closed){var e={shape:t.sh,data:t,localShapeCollection:shapeCollection_pool.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated()}},ShapeModifier.prototype.init=function(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(t,e){this.s=PropertyFactory.getProp(t,e.s,0,.01,this),this.e=PropertyFactory.getProp(t,e.e,0,.01,this),this.o=PropertyFactory.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(t){t.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(t,e,n,r,i){var o=[];e<=1?o.push({s:t,e:e}):t>=1?o.push({s:t-1,e:e-1}):(o.push({s:t,e:1}),o.push({s:0,e:e-1}));var a,s,u=[],l=o.length;for(a=0;a<l;a+=1)(s=o[a]).e*i<r||s.s*i>r+n||u.push([s.s*i<=r?0:(s.s*i-r)/n,s.e*i>=r+n?1:(s.e*i-r)/n]);return u.length||u.push([0,0]),u},TrimModifier.prototype.releasePathsData=function(t){var e,n=t.length;for(e=0;e<n;e+=1)segments_length_pool.release(t[e]);return t.length=0,t},TrimModifier.prototype.processShapes=function(t){var e,n,r;if(this._mdf||t){var i=this.o.v%360/360;if(i<0&&(i+=1),(e=(this.s.v>1?1:this.s.v<0?0:this.s.v)+i)>(n=(this.e.v>1?1:this.e.v<0?0:this.e.v)+i)){var o=e;e=n,n=o}e=1e-4*Math.round(1e4*e),n=1e-4*Math.round(1e4*n),this.sValue=e,this.eValue=n}else e=this.sValue,n=this.eValue;var a,s,u,l,c,h,p=this.shapes.length,f=0;if(n===e)for(a=0;a<p;a+=1)this.shapes[a].localShapeCollection.releaseShapes(),this.shapes[a].shape._mdf=!0,this.shapes[a].shape.paths=this.shapes[a].localShapeCollection;else if(1===n&&0===e||0===n&&1===e){if(this._mdf)for(a=0;a<p;a+=1)this.shapes[a].pathsData.length=0,this.shapes[a].shape._mdf=!0}else{var d,m,g=[];for(a=0;a<p;a+=1)if((d=this.shapes[a]).shape._mdf||this._mdf||t||2===this.m){if(u=(r=d.shape.paths)._length,h=0,!d.shape._mdf&&d.pathsData.length)h=d.totalShapeLength;else{for(l=this.releasePathsData(d.pathsData),s=0;s<u;s+=1)c=bez.getSegmentsLength(r.shapes[s]),l.push(c),h+=c.totalLength;d.totalShapeLength=h,d.pathsData=l}f+=h,d.shape._mdf=!0}else d.shape.paths=d.localShapeCollection;var y,v=e,b=n,_=0;for(a=p-1;a>=0;a-=1)if((d=this.shapes[a]).shape._mdf){for((m=d.localShapeCollection).releaseShapes(),2===this.m&&p>1?(y=this.calculateShapeEdges(e,n,d.totalShapeLength,_,f),_+=d.totalShapeLength):y=[[v,b]],u=y.length,s=0;s<u;s+=1){v=y[s][0],b=y[s][1],g.length=0,b<=1?g.push({s:d.totalShapeLength*v,e:d.totalShapeLength*b}):v>=1?g.push({s:d.totalShapeLength*(v-1),e:d.totalShapeLength*(b-1)}):(g.push({s:d.totalShapeLength*v,e:d.totalShapeLength}),g.push({s:0,e:d.totalShapeLength*(b-1)}));var w=this.addShapes(d,g[0]);if(g[0].s!==g[0].e){if(g.length>1)if(d.shape.paths.shapes[d.shape.paths._length-1].c){var x=w.pop();this.addPaths(w,m),w=this.addShapes(d,g[1],x)}else this.addPaths(w,m),w=this.addShapes(d,g[1]);this.addPaths(w,m)}}d.shape.paths=m}}},TrimModifier.prototype.addPaths=function(t,e){var n,r=t.length;for(n=0;n<r;n+=1)e.addShape(t[n])},TrimModifier.prototype.addSegment=function(t,e,n,r,i,o,a){i.setXYAt(e[0],e[1],"o",o),i.setXYAt(n[0],n[1],"i",o+1),a&&i.setXYAt(t[0],t[1],"v",o),i.setXYAt(r[0],r[1],"v",o+1)},TrimModifier.prototype.addSegmentFromArray=function(t,e,n,r){e.setXYAt(t[1],t[5],"o",n),e.setXYAt(t[2],t[6],"i",n+1),r&&e.setXYAt(t[0],t[4],"v",n),e.setXYAt(t[3],t[7],"v",n+1)},TrimModifier.prototype.addShapes=function(t,e,n){var r,i,o,a,s,u,l,c,h=t.pathsData,p=t.shape.paths.shapes,f=t.shape.paths._length,d=0,m=[],g=!0;for(n?(s=n._length,c=n._length):(n=shape_pool.newElement(),s=0,c=0),m.push(n),r=0;r<f;r+=1){for(u=h[r].lengths,n.c=p[r].c,o=p[r].c?u.length:u.length+1,i=1;i<o;i+=1)if(d+(a=u[i-1]).addedLength<e.s)d+=a.addedLength,n.c=!1;else{if(d>e.e){n.c=!1;break}e.s<=d&&e.e>=d+a.addedLength?(this.addSegment(p[r].v[i-1],p[r].o[i-1],p[r].i[i],p[r].v[i],n,s,g),g=!1):(l=bez.getNewSegment(p[r].v[i-1],p[r].v[i],p[r].o[i-1],p[r].i[i],(e.s-d)/a.addedLength,(e.e-d)/a.addedLength,u[i-1]),this.addSegmentFromArray(l,n,s,g),g=!1,n.c=!1),d+=a.addedLength,s+=1}if(p[r].c&&u.length){if(a=u[i-1],d<=e.e){var y=u[i-1].addedLength;e.s<=d&&e.e>=d+y?(this.addSegment(p[r].v[i-1],p[r].o[i-1],p[r].i[0],p[r].v[0],n,s,g),g=!1):(l=bez.getNewSegment(p[r].v[i-1],p[r].v[0],p[r].o[i-1],p[r].i[0],(e.s-d)/y,(e.e-d)/y,u[i-1]),this.addSegmentFromArray(l,n,s,g),g=!1,n.c=!1)}else n.c=!1;d+=a.addedLength,s+=1}if(n._length&&(n.setXYAt(n.v[c][0],n.v[c][1],"i",c),n.setXYAt(n.v[n._length-1][0],n.v[n._length-1][1],"o",n._length-1)),d>e.e)break;r<f-1&&(n=shape_pool.newElement(),g=!0,m.push(n),s=0)}return m},ShapeModifiers.registerModifier("tm",TrimModifier),extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(t,e){var n=shape_pool.newElement();n.c=t.c;var r,i,o,a,s,u,l,c,h,p,f,d,m,g=t._length,y=0;for(r=0;r<g;r+=1)o=t.i[r],(i=t.v[r])[0]===(a=t.o[r])[0]&&i[1]===a[1]&&i[0]===o[0]&&i[1]===o[1]?0!==r&&r!==g-1||t.c?(s=0===r?t.v[g-1]:t.v[r-1],l=(u=Math.sqrt(Math.pow(i[0]-s[0],2)+Math.pow(i[1]-s[1],2)))?Math.min(u/2,e)/u:0,c=d=i[0]+(s[0]-i[0])*l,h=m=i[1]-(i[1]-s[1])*l,n.setTripleAt(c,h,p=c-(c-i[0])*roundCorner,f=h-(h-i[1])*roundCorner,d,m,y),y+=1,s=r===g-1?t.v[0]:t.v[r+1],l=(u=Math.sqrt(Math.pow(i[0]-s[0],2)+Math.pow(i[1]-s[1],2)))?Math.min(u/2,e)/u:0,c=p=i[0]+(s[0]-i[0])*l,h=f=i[1]+(s[1]-i[1])*l,n.setTripleAt(c,h,p,f,d=c-(c-i[0])*roundCorner,m=h-(h-i[1])*roundCorner,y),y+=1):(n.setTripleAt(i[0],i[1],a[0],a[1],o[0],o[1],y),y+=1):(n.setTripleAt(t.v[r][0],t.v[r][1],t.o[r][0],t.o[r][1],t.i[r][0],t.i[r][1],y),y+=1);return n},RoundCornersModifier.prototype.processShapes=function(t){var e,n,r,i,o,a,s=this.shapes.length,u=this.rd.v;if(0!==u)for(n=0;n<s;n+=1){if(a=(o=this.shapes[n]).localShapeCollection,o.shape._mdf||this._mdf||t)for(a.releaseShapes(),o.shape._mdf=!0,e=o.shape.paths.shapes,i=o.shape.paths._length,r=0;r<i;r+=1)a.addShape(this.processPath(e[r],u));o.shape.paths=o.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("rd",RoundCornersModifier),extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(t,e.c,0,null,this),this.o=PropertyFactory.getProp(t,e.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(t,e.tr,this),this.so=PropertyFactory.getProp(t,e.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(t,e,n,r,i,o){var a=o?-1:1,s=r.s.v[0]+(1-r.s.v[0])*(1-i),u=r.s.v[1]+(1-r.s.v[1])*(1-i);t.translate(r.p.v[0]*a*i,r.p.v[1]*a*i,r.p.v[2]),e.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),e.rotate(-r.r.v*a*i),e.translate(r.a.v[0],r.a.v[1],r.a.v[2]),n.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),n.scale(o?1/s:s,o?1/u:u),n.translate(r.a.v[0],r.a.v[1],r.a.v[2])},RepeaterModifier.prototype.init=function(t,e,n,r){for(this.elem=t,this.arr=e,this.pos=n,this.elemsData=r,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[n]);n>0;)this._elements.unshift(e[n-=1]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(t){var e,n=t.length;for(e=0;e<n;e+=1)t[e]._processed=!1,"gr"===t[e].ty&&this.resetElements(t[e].it)},RepeaterModifier.prototype.cloneElements=function(t){var e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(t,e){var n,r=t.length;for(n=0;n<r;n+=1)t[n]._render=e,"gr"===t[n].ty&&this.changeGroupRender(t[n].it,e)},RepeaterModifier.prototype.processShapes=function(t){var e,n,r,i,o;if(this._mdf||t){var a,s=Math.ceil(this.c.v);if(this._groups.length<s){for(;this._groups.length<s;){var u={it:this.cloneElements(this._elements),ty:"gr"};u.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,u),this._groups.splice(0,0,u),this._currentCopies+=1}this.elem.reloadShapes()}for(o=0,r=0;r<=this._groups.length-1;r+=1)this._groups[r]._render=a=o<s,this.changeGroupRender(this._groups[r].it,a),o+=1;this._currentCopies=s;var l=this.o.v,c=l%1,h=l>0?Math.floor(l):Math.ceil(l),p=this.pMatrix.props,f=this.rMatrix.props,d=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var m,g,y=0;if(l>0){for(;y<h;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),y+=1;c&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,c,!1),y+=c)}else if(l<0){for(;y>h;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),y-=1;c&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-c,!0),y-=c)}for(r=1===this.data.m?0:this._currentCopies-1,i=1===this.data.m?1:-1,o=this._currentCopies;o;){if(g=(n=(e=this.elemsData[r].it)[e.length-1].transform.mProps.v.props).length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=this.so.v+r/(this._currentCopies-1)*(this.eo.v-this.so.v),0!==y){for((0!==r&&1===i||r!==this._currentCopies-1&&-1===i)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]),this.matrix.transform(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15]),this.matrix.transform(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15]),m=0;m<g;m+=1)n[m]=this.matrix.props[m];this.matrix.reset()}else for(this.matrix.reset(),m=0;m<g;m+=1)n[m]=this.matrix.props[m];y+=1,o-=1,r+=i}}else for(o=this._currentCopies,r=0,i=1;o;)n=(e=this.elemsData[r].it)[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,o-=1,r+=i},RepeaterModifier.prototype.addShape=function(){},ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeCollection.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var t;for(t=0;t<this._length;t+=1)shape_pool.release(this.shapes[t]);this._length=0},DashProperty.prototype.getValue=function(t){if((this.elem.globalData.frameId!==this.frameId||t)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||t,this._mdf)){var e=0,n=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),e=0;e<n;e+=1)"o"!=this.dataProps[e].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),GradientProperty.prototype.comparePoints=function(t,e){for(var n=0,r=this.o.length/2;n<r;){if(Math.abs(t[4*n]-t[4*e+2*n])>.01)return!1;n+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var t=0,e=this.data.k.k.length;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){var e,n,r,i=4*this.data.p;for(e=0;e<i;e+=1)n=e%4==0?100:255,r=Math.round(this.prop.v[e]*n),this.c[e]!==r&&(this.c[e]=r,this._cmdf=!t);if(this.o.length)for(i=this.prop.v.length,e=4*this.data.p;e<i;e+=1)n=e%2==0?100:1,r=e%2==0?Math.round(100*this.prop.v[e]):this.prop.v[e],this.o[e-4*this.data.p]!==r&&(this.o[e-4*this.data.p]=r,this._omdf=!t);this._mdf=!t}},extendPrototype([DynamicPropertyContainer],GradientProperty);var buildShapeString=function(t,e,n,r){if(0===e)return"";var i,o=t.o,a=t.i,s=t.v,u=" M"+r.applyToPointStringified(s[0][0],s[0][1]);for(i=1;i<e;i+=1)u+=" C"+r.applyToPointStringified(o[i-1][0],o[i-1][1])+" "+r.applyToPointStringified(a[i][0],a[i][1])+" "+r.applyToPointStringified(s[i][0],s[i][1]);return n&&e&&(u+=" C"+r.applyToPointStringified(o[i-1][0],o[i-1][1])+" "+r.applyToPointStringified(a[0][0],a[0][1])+" "+r.applyToPointStringified(s[0][0],s[0][1]),u+="z"),u},ImagePreloader=function(){var t=function(){var t=createTag("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="#FF0000",e.fillRect(0,0,1,1),t}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(e){var n=function(t,e,n){var r="";if(t.e)r=t.p;else if(e){var i=t.p;-1!==i.indexOf("images/")&&(i=i.split("/")[1]),r=e+i}else r=n,r+=t.u?t.u:"",r+=t.p;return r}(e,this.assetsPath,this.path),r=createTag("img");r.crossOrigin="anonymous",r.addEventListener("load",this._imageLoaded.bind(this),!1),r.addEventListener("error",(function(){i.img=t,this._imageLoaded()}).bind(this),!1),r.src=n;var i={img:r,assetData:e};return i}function r(t,e){this.imagesLoadedCb=e;var n,r=t.length;for(n=0;n<r;n+=1)t[n].layers||(this.totalImages+=1,this.images.push(this._createImageData(t[n])))}function i(t){this.path=t||""}function o(t){this.assetsPath=t||""}function a(t){for(var e=0,n=this.images.length;e<n;){if(this.images[e].assetData===t)return this.images[e].img;e+=1}}function s(){this.imagesLoadedCb=null,this.images.length=0}function u(){return this.totalImages===this.loadedAssets}return function(){this.loadAssets=r,this.setAssetsPath=o,this.setPath=i,this.loaded=u,this.destroy=s,this.getImage=a,this._createImageData=n,this._imageLoaded=e,this.assetsPath="",this.path="",this.totalImages=0,this.loadedAssets=0,this.imagesLoadedCb=null,this.images=[]}}(),featureSupport=function(){var t={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=!1),t}(),filtersFactory={createFilter:function(t){var e=createNS("filter");return e.setAttribute("id",t),e.setAttribute("filterUnits","objectBoundingBox"),e.setAttribute("x","0%"),e.setAttribute("y","0%"),e.setAttribute("width","100%"),e.setAttribute("height","100%"),e},createAlphaToLuminanceFilter:function(){var t=createNS("feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),t}},assetLoader=function(){function t(t){return t.response&&"object"==typeof t.response?t.response:t.response&&"string"==typeof t.response?JSON.parse(t.response):t.responseText?JSON.parse(t.response):void 0}return{load:function(e,n,r){var i,o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="json",o.send(),o.onreadystatechange=function(){if(4==o.readyState)if(200==o.status)i=t(o),n(i);else try{i=t(o),n(i)}catch(t){r&&r(t)}}}}}();function TextAnimatorProperty(t,e,n){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=t,this._renderType=e,this._elem=n,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(n)}function TextAnimatorDataProperty(t,e,n){var r={propType:!1},i=PropertyFactory.getProp,o=e.a;this.a={r:o.r?i(t,o.r,0,degToRads,n):r,rx:o.rx?i(t,o.rx,0,degToRads,n):r,ry:o.ry?i(t,o.ry,0,degToRads,n):r,sk:o.sk?i(t,o.sk,0,degToRads,n):r,sa:o.sa?i(t,o.sa,0,degToRads,n):r,s:o.s?i(t,o.s,1,.01,n):r,a:o.a?i(t,o.a,1,0,n):r,o:o.o?i(t,o.o,0,.01,n):r,p:o.p?i(t,o.p,1,0,n):r,sw:o.sw?i(t,o.sw,0,0,n):r,sc:o.sc?i(t,o.sc,1,0,n):r,fc:o.fc?i(t,o.fc,1,0,n):r,fh:o.fh?i(t,o.fh,0,0,n):r,fs:o.fs?i(t,o.fs,0,.01,n):r,fb:o.fb?i(t,o.fb,0,.01,n):r,t:o.t?i(t,o.t,0,0,n):r},this.s=TextSelectorProp.getTextSelectorProp(t,e.s,n),this.s.t=e.s.t}function LetterProps(t,e,n,r,i,o){this.o=t,this.sw=e,this.sc=n,this.fc=r,this.m=i,this.p=o,this._mdf={o:!0,sw:!!e,sc:!!n,fc:!!r,m:!0,p:!0}}function TextProperty(t,e){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=e,this.elem=t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextAnimatorProperty.prototype.searchProperties=function(){var t,e=this._textData.a.length,n=PropertyFactory.getProp;for(t=0;t<e;t+=1)this._animatorsData[t]=new TextAnimatorDataProperty(this._elem,this._textData.a[t],this);this._textData.p&&"m"in this._textData.p?(this._pathData={f:n(this._elem,this._textData.p.f,0,0,this),l:n(this._elem,this._textData.p.l,0,0,this),r:this._textData.p.r,m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=n(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,this._mdf||this._isFirstFrame||e||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var n,r,i,o,a,s,u,l,c,h,p,f,d,m,g,y,v,b,_=this._moreOptions.alignment.v,w=this._animatorsData,x=this._textData,C=this.mHelper,E=this._renderType,S=this.renderedLetters.length,T=t.l;if(this._hasMaskedPath){if(b=this._pathData.m,!this._pathData.n||this._pathData._mdf){var A,P=b.v;for(this._pathData.r&&(P=P.reverse()),a={tLength:0,segments:[]},o=P._length-1,y=0,i=0;i<o;i+=1)bez.buildBezierData(A={s:P.v[i],e:P.v[i+1],to:[P.o[i][0]-P.v[i][0],P.o[i][1]-P.v[i][1]],ti:[P.i[i+1][0]-P.v[i+1][0],P.i[i+1][1]-P.v[i+1][1]]}),a.tLength+=A.bezierData.segmentLength,a.segments.push(A),y+=A.bezierData.segmentLength;i=o,b.v.c&&(bez.buildBezierData(A={s:P.v[i],e:P.v[0],to:[P.o[i][0]-P.v[i][0],P.o[i][1]-P.v[i][1]],ti:[P.i[0][0]-P.v[0][0],P.i[0][1]-P.v[0][1]]}),a.tLength+=A.bezierData.segmentLength,a.segments.push(A),y+=A.bezierData.segmentLength),this._pathData.pi=a}if(p=0,h=1,l=0,c=!0,m=(a=this._pathData.pi).segments,(s=this._pathData.f.v)<0&&b.v.c)for(a.tLength<Math.abs(s)&&(s=-Math.abs(s)%a.tLength),h=(d=m[p=m.length-1].bezierData.points).length-1;s<0;)s+=d[h].partialLength,(h-=1)<0&&(h=(d=m[p-=1].bezierData.points).length-1);f=(d=m[p].bezierData.points)[h-1],g=(u=d[h]).partialLength}o=T.length,n=0,r=0;var I,O,D,k,M=1.2*t.finalSize*.714,R=!0;D=w.length;var N,L,F,B,j,z,V,U,q,G,H,W,K,X=-1,Q=s,Z=p,Y=h,J=-1,$="",tt=this.defaultPropsArray;if(2===t.j||1===t.j){var et=0,nt=0,rt=2===t.j?-.5:-1,it=0,ot=!0;for(i=0;i<o;i+=1)if(T[i].n){for(et&&(et+=nt);it<i;)T[it].animatorJustifyOffset=et,it+=1;et=0,ot=!0}else{for(O=0;O<D;O+=1)(I=w[O].a).t.propType&&(ot&&2===t.j&&(nt+=I.t.v*rt),et+=(N=w[O].s.getMult(T[i].anIndexes[O],x.a[O].s.totalChars)).length?I.t.v*N[0]*rt:I.t.v*N*rt);ot=!1}for(et&&(et+=nt);it<i;)T[it].animatorJustifyOffset=et,it+=1}for(i=0;i<o;i+=1){if(C.reset(),j=1,T[i].n)n=0,r+=t.yOffset,r+=R?1:0,s=Q,R=!1,this._hasMaskedPath&&(f=(d=m[p=Z].bezierData.points)[(h=Y)-1],g=(u=d[h]).partialLength,l=0),K=G=W=$="",tt=this.defaultPropsArray;else{if(this._hasMaskedPath){if(J!==T[i].line){switch(t.j){case 1:s+=y-t.lineWidths[T[i].line];break;case 2:s+=(y-t.lineWidths[T[i].line])/2}J=T[i].line}X!==T[i].ind&&(T[X]&&(s+=T[X].extra),s+=T[i].an/2,X=T[i].ind),s+=_[0]*T[i].an/200;var at=0;for(O=0;O<D;O+=1)(I=w[O].a).p.propType&&(at+=(N=w[O].s.getMult(T[i].anIndexes[O],x.a[O].s.totalChars)).length?I.p.v[0]*N[0]:I.p.v[0]*N),I.a.propType&&(at+=(N=w[O].s.getMult(T[i].anIndexes[O],x.a[O].s.totalChars)).length?I.a.v[0]*N[0]:I.a.v[0]*N);for(c=!0;c;)l+g>=s+at||!d?(F=f.point[0]+(u.point[0]-f.point[0])*(v=(s+at-l)/u.partialLength),B=f.point[1]+(u.point[1]-f.point[1])*v,C.translate(-_[0]*T[i].an/200,-_[1]*M/100),c=!1):d&&(l+=u.partialLength,(h+=1)>=d.length&&(h=0,m[p+=1]?d=m[p].bezierData.points:b.v.c?(h=0,d=m[p=0].bezierData.points):(l-=u.partialLength,d=null)),d&&(f=u,g=(u=d[h]).partialLength));C.translate(-(L=T[i].an/2-T[i].add),0,0)}else C.translate(-(L=T[i].an/2-T[i].add),0,0),C.translate(-_[0]*T[i].an/200,-_[1]*M/100,0);for(O=0;O<D;O+=1)(I=w[O].a).t.propType&&(N=w[O].s.getMult(T[i].anIndexes[O],x.a[O].s.totalChars),0===n&&0===t.j||(this._hasMaskedPath?s+=N.length?I.t.v*N[0]:I.t.v*N:n+=N.length?I.t.v*N[0]:I.t.v*N));for(t.strokeWidthAnim&&(V=t.sw||0),t.strokeColorAnim&&(z=t.sc?[t.sc[0],t.sc[1],t.sc[2]]:[0,0,0]),t.fillColorAnim&&t.fc&&(U=[t.fc[0],t.fc[1],t.fc[2]]),O=0;O<D;O+=1)(I=w[O].a).a.propType&&((N=w[O].s.getMult(T[i].anIndexes[O],x.a[O].s.totalChars)).length?C.translate(-I.a.v[0]*N[0],-I.a.v[1]*N[1],I.a.v[2]*N[2]):C.translate(-I.a.v[0]*N,-I.a.v[1]*N,I.a.v[2]*N));for(O=0;O<D;O+=1)(I=w[O].a).s.propType&&((N=w[O].s.getMult(T[i].anIndexes[O],x.a[O].s.totalChars)).length?C.scale(1+(I.s.v[0]-1)*N[0],1+(I.s.v[1]-1)*N[1],1):C.scale(1+(I.s.v[0]-1)*N,1+(I.s.v[1]-1)*N,1));for(O=0;O<D;O+=1){if(I=w[O].a,N=w[O].s.getMult(T[i].anIndexes[O],x.a[O].s.totalChars),I.sk.propType&&(N.length?C.skewFromAxis(-I.sk.v*N[0],I.sa.v*N[1]):C.skewFromAxis(-I.sk.v*N,I.sa.v*N)),I.r.propType&&C.rotateZ(N.length?-I.r.v*N[2]:-I.r.v*N),I.ry.propType&&C.rotateY(N.length?I.ry.v*N[1]:I.ry.v*N),I.rx.propType&&C.rotateX(N.length?I.rx.v*N[0]:I.rx.v*N),I.o.propType&&(j+=N.length?(I.o.v*N[0]-j)*N[0]:(I.o.v*N-j)*N),t.strokeWidthAnim&&I.sw.propType&&(V+=N.length?I.sw.v*N[0]:I.sw.v*N),t.strokeColorAnim&&I.sc.propType)for(q=0;q<3;q+=1)z[q]=N.length?z[q]+(I.sc.v[q]-z[q])*N[0]:z[q]+(I.sc.v[q]-z[q])*N;if(t.fillColorAnim&&t.fc){if(I.fc.propType)for(q=0;q<3;q+=1)U[q]=N.length?U[q]+(I.fc.v[q]-U[q])*N[0]:U[q]+(I.fc.v[q]-U[q])*N;I.fh.propType&&(U=addHueToRGB(U,N.length?I.fh.v*N[0]:I.fh.v*N)),I.fs.propType&&(U=addSaturationToRGB(U,N.length?I.fs.v*N[0]:I.fs.v*N)),I.fb.propType&&(U=addBrightnessToRGB(U,N.length?I.fb.v*N[0]:I.fb.v*N))}}for(O=0;O<D;O+=1)(I=w[O].a).p.propType&&(N=w[O].s.getMult(T[i].anIndexes[O],x.a[O].s.totalChars),this._hasMaskedPath?N.length?C.translate(0,I.p.v[1]*N[0],-I.p.v[2]*N[1]):C.translate(0,I.p.v[1]*N,-I.p.v[2]*N):N.length?C.translate(I.p.v[0]*N[0],I.p.v[1]*N[1],-I.p.v[2]*N[2]):C.translate(I.p.v[0]*N,I.p.v[1]*N,-I.p.v[2]*N));if(t.strokeWidthAnim&&(G=V<0?0:V),t.strokeColorAnim&&(H="rgb("+Math.round(255*z[0])+","+Math.round(255*z[1])+","+Math.round(255*z[2])+")"),t.fillColorAnim&&t.fc&&(W="rgb("+Math.round(255*U[0])+","+Math.round(255*U[1])+","+Math.round(255*U[2])+")"),this._hasMaskedPath){if(C.translate(0,-t.ls),C.translate(0,_[1]*M/100+r,0),x.p.p){var st=180*Math.atan((u.point[1]-f.point[1])/(u.point[0]-f.point[0]))/Math.PI;u.point[0]<f.point[0]&&(st+=180),C.rotate(-st*Math.PI/180)}C.translate(F,B,0),s-=_[0]*T[i].an/200,T[i+1]&&X!==T[i+1].ind&&(s+=T[i].an/2,s+=t.tr/1e3*t.finalSize)}else{switch(C.translate(n,r,0),t.ps&&C.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:C.translate(T[i].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[T[i].line]),0,0);break;case 2:C.translate(T[i].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[T[i].line])/2,0,0)}C.translate(0,-t.ls),C.translate(L,0,0),C.translate(_[0]*T[i].an/200,_[1]*M/100,0),n+=T[i].l+t.tr/1e3*t.finalSize}"html"===E?$=C.toCSS():"svg"===E?$=C.to2dCSS():tt=[C.props[0],C.props[1],C.props[2],C.props[3],C.props[4],C.props[5],C.props[6],C.props[7],C.props[8],C.props[9],C.props[10],C.props[11],C.props[12],C.props[13],C.props[14],C.props[15]],K=j}S<=i?(k=new LetterProps(K,G,H,W,$,tt),this.renderedLetters.push(k),S+=1,this.lettersChangedFlag=!0):this.lettersChangedFlag=(k=this.renderedLetters[i]).update(K,G,H,W,$,tt)||this.lettersChangedFlag}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),LetterProps.prototype.update=function(t,e,n,r,i,o){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var a=!1;return this.o!==t&&(this.o=t,this._mdf.o=!0,a=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,a=!0),this.sc!==n&&(this.sc=n,this._mdf.sc=!0,a=!0),this.fc!==r&&(this.fc=r,this._mdf.fc=!0,a=!0),this.m!==i&&(this.m=i,this._mdf.m=!0,a=!0),!o.length||this.p[0]===o[0]&&this.p[1]===o[1]&&this.p[4]===o[4]&&this.p[5]===o[5]&&this.p[12]===o[12]&&this.p[13]===o[13]||(this.p=o,this._mdf.p=!0,a=!0),a},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},TextProperty.prototype.setCurrentData=function(t){t.__complete||this.completeTextData(t),this.currentData=t,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(t){this.effectsSequence.push(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(t){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||t){var e=this.currentData,n=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData,currentTextValue);else{this.lock=!0,this._mdf=!1;var r,i=this.effectsSequence.length,o=t||this.data.d.k[this.keysIndex].s;for(r=0;r<i;r+=1)o=this.effectsSequence[r](n!==this.keysIndex?o:this.currentData,o.t);e!==o&&this.setCurrentData(o),this.pv=this.v=this.currentData,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var t=this.data.d.k,e=this.elem.comp.renderedFrame,n=0,r=t.length;n<=r-1&&!(n===r-1||t[n+1].t>e);)n+=1;return this.keysIndex!==n&&(this.keysIndex=n),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(t){for(var e=FontManager.getCombinedCharacterCodes(),n=[],r=0,i=t.length;r<i;)-1!==e.indexOf(t.charCodeAt(r))?n[n.length-1]+=t.charAt(r):n.push(t.charAt(r)),r+=1;return n},TextProperty.prototype.completeTextData=function(t){t.__complete=!0;var e,n,r,i,o,a,s,u=this.elem.globalData.fontManager,l=this.data,c=[],h=0,p=l.m.g,f=0,d=0,m=0,g=[],y=0,v=0,b=u.getFontByName(t.f),_=0,w=b.fStyle?b.fStyle.split(" "):[],x="normal",C="normal";for(n=w.length,e=0;e<n;e+=1)switch(w[e].toLowerCase()){case"italic":C="italic";break;case"bold":x="700";break;case"black":x="900";break;case"medium":x="500";break;case"regular":case"normal":x="400";break;case"light":case"thin":x="200"}t.fWeight=b.fWeight||x,t.fStyle=C,n=t.t.length,t.finalSize=t.s,t.finalText=this.buildFinalText(t.t),t.finalLineHeight=t.lh;var E,S=t.tr/1e3*t.finalSize;if(t.sz)for(var T,A,P=!0,I=t.sz[0],O=t.sz[1];P;){T=0,y=0,n=(A=this.buildFinalText(t.t)).length,S=t.tr/1e3*t.finalSize;var D=-1;for(e=0;e<n;e+=1)E=A[e].charCodeAt(0),r=!1," "===A[e]?D=e:13!==E&&3!==E||(y=0,r=!0,T+=t.finalLineHeight||1.2*t.finalSize),u.chars?(s=u.getCharData(A[e],b.fStyle,b.fFamily),_=r?0:s.w*t.finalSize/100):_=u.measureText(A[e],t.f,t.finalSize),y+_>I&&" "!==A[e]?(-1===D?n+=1:e=D,T+=t.finalLineHeight||1.2*t.finalSize,A.splice(e,D===e?1:0,"\r"),D=-1,y=0):(y+=_,y+=S);T+=b.ascent*t.finalSize/100,this.canResize&&t.finalSize>this.minimumFontSize&&O<T?(t.finalSize-=1,t.finalLineHeight=t.finalSize*t.lh/t.s):(t.finalText=A,n=t.finalText.length,P=!1)}y=-S,_=0;var k,M=0;for(e=0;e<n;e+=1)if(r=!1,E=(k=t.finalText[e]).charCodeAt(0)," "===k?i="\xa0":13===E||3===E?(M=0,g.push(y),v=y>v?y:v,y=-2*S,i="",r=!0,m+=1):i=t.finalText[e],u.chars?(s=u.getCharData(k,b.fStyle,u.getFontByName(t.f).fFamily),_=r?0:s.w*t.finalSize/100):_=u.measureText(i,t.f,t.finalSize)," "===k?M+=_+S:(y+=_+S+M,M=0),c.push({l:_,an:_,add:f,n:r,anIndexes:[],val:i,line:m,animatorJustifyOffset:0}),2==p){if(f+=_,""===i||"\xa0"===i||e===n-1){for(""!==i&&"\xa0"!==i||(f-=_);d<=e;)c[d].an=f,c[d].ind=h,c[d].extra=_,d+=1;h+=1,f=0}}else if(3==p){if(f+=_,""===i||e===n-1){for(""===i&&(f-=_);d<=e;)c[d].an=f,c[d].ind=h,c[d].extra=_,d+=1;f=0,h+=1}}else c[h].ind=h,c[h].extra=0,h+=1;if(t.l=c,v=y>v?y:v,g.push(y),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=v,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=g;var R,N,L=l.a;a=L.length;var F,B,j=[];for(o=0;o<a;o+=1){for((R=L[o]).a.sc&&(t.strokeColorAnim=!0),R.a.sw&&(t.strokeWidthAnim=!0),(R.a.fc||R.a.fh||R.a.fs||R.a.fb)&&(t.fillColorAnim=!0),B=0,F=R.s.b,e=0;e<n;e+=1)(N=c[e]).anIndexes[o]=B,(1==F&&""!==N.val||2==F&&""!==N.val&&"\xa0"!==N.val||3==F&&(N.n||"\xa0"==N.val||e==n-1)||4==F&&(N.n||e==n-1))&&(1===R.s.rn&&j.push(B),B+=1);l.a[o].s.totalChars=B;var z,V=-1;if(1===R.s.rn)for(e=0;e<n;e+=1)V!=(N=c[e]).anIndexes[o]&&(V=N.anIndexes[o],z=j.splice(Math.floor(Math.random()*j.length),1)[0]),N.anIndexes[o]=z}t.yOffset=t.finalLineHeight||1.2*t.finalSize,t.ls=t.ls||0,t.ascent=b.ascent*t.finalSize/100},TextProperty.prototype.updateDocumentData=function(t,e){var n=this.copyData({},this.data.d.k[e=void 0===e?this.keysIndex:e].s);n=this.copyData(n,t),this.data.d.k[e].s=n,this.recalculate(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(t){var e=this.data.d.k[t].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(t){this.canResize=t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(t){this.minimumFontSize=Math.floor(t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var t=Math.max,e=Math.min,n=Math.floor;function r(t,e){this._currentTextLength=-1,this.k=!1,this.data=e,this.elem=t,this.comp=t.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(t),this.s=PropertyFactory.getProp(t,e.s||{k:0},0,0,this),this.e="e"in e?PropertyFactory.getProp(t,e.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(t,e.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(t,e.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(t,e.ne||{k:0},0,0,this),this.a=PropertyFactory.getProp(t,e.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return r.prototype={getMult:function(r){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var i=BezierFactory.getBezierEasing(this.ne.v/100,0,1-this.xe.v/100,1).get,o=0,a=this.finalS,s=this.finalE,u=this.data.sh;if(2==u)o=i(o=s===a?r>=s?1:0:t(0,e(.5/(s-a)+(r-a)/(s-a),1)));else if(3==u)o=i(o=s===a?r>=s?0:1:1-t(0,e(.5/(s-a)+(r-a)/(s-a),1)));else if(4==u)s===a?o=0:(o=t(0,e(.5/(s-a)+(r-a)/(s-a),1)))<.5?o*=2:o=1-2*(o-.5),o=i(o);else if(5==u){if(s===a)o=0;else{var l=s-a,c=-l/2+(r=e(t(0,r+.5-a),s-a)),h=l/2;o=Math.sqrt(1-c*c/(h*h))}o=i(o)}else 6==u?(s===a?o=0:(r=e(t(0,r+.5-a),s-a),o=(1+Math.cos(Math.PI+2*Math.PI*r/(s-a)))/2),o=i(o)):(r>=n(a)&&(o=r-a<0?1-(a-r):t(0,e(s-r,1))),o=i(o));return o*this.a.v},getValue:function(t){this.iterateDynamicProperties(),this._mdf=t||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,t&&2===this.data.r&&(this.e.v=this._currentTextLength);var e=2===this.data.r?1:100/this.data.totalChars,n=this.o.v/e,r=this.s.v/e+n,i=this.e.v/e+n;if(r>i){var o=r;r=i,i=o}this.finalS=r,this.finalE=i}},extendPrototype([DynamicPropertyContainer],r),{getTextSelectorProp:function(t,e,n){return new r(t,e,n)}}}(),pool_factory=function(t,e,n,r){var i=0,o=t,a=createSizedArray(o);return{newElement:function(){return i?a[i-=1]:e()},release:function(t){i===o&&(a=pooling.double(a),o*=2),n&&n(t),a[i]=t,i+=1}}},pooling={double:function(t){return t.concat(createSizedArray(t.length))}},point_pool=pool_factory(8,function(){return createTypedArray("float32",2)}),shape_pool=(factory=pool_factory(4,function(){return new ShapePath},function(t){var e,n=t._length;for(e=0;e<n;e+=1)point_pool.release(t.v[e]),point_pool.release(t.i[e]),point_pool.release(t.o[e]),t.v[e]=null,t.i[e]=null,t.o[e]=null;t._length=0,t.c=!1}),factory.clone=function(t){var e,n=factory.newElement(),r=void 0===t._length?t.v.length:t._length;for(n.setLength(r),n.c=t.c,e=0;e<r;e+=1)n.setTripleAt(t.v[e][0],t.v[e][1],t.o[e][0],t.o[e][1],t.i[e][0],t.i[e][1],e);return n},factory),shapeCollection_pool=function(){var t={newShapeCollection:function(){return e?r[e-=1]:new ShapeCollection},release:function(t){var i,o=t._length;for(i=0;i<o;i+=1)shape_pool.release(t.shapes[i]);t._length=0,e===n&&(r=pooling.double(r),n*=2),r[e]=t,e+=1}},e=0,n=4,r=createSizedArray(n);return t}(),segments_length_pool=pool_factory(8,function(){return{lengths:[],totalLength:0}},function(t){var e,n=t.lengths.length;for(e=0;e<n;e+=1)bezier_length_pool.release(t.lengths[e]);t.lengths.length=0}),bezier_length_pool=pool_factory(8,function(){return{addedLength:0,percents:createTypedArray("float32",defaultCurveSegments),lengths:createTypedArray("float32",defaultCurveSegments)}}),factory;function BaseRenderer(){}function SVGRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var n=createNS("defs");this.svgElement.appendChild(n);var r=createNS("g");this.svgElement.appendChild(r),this.layerElement=r,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!e||!1!==e.hideOnTransparent,viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||""},this.globalData={_mdf:!1,frameNum:-1,defs:n,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function MaskElement(t,e,n){this.data=t,this.element=e,this.globalData=n,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var r,i=this.globalData.defs,o=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(o),this.solidPath="";var a,s,u,l,c,h,p,f=this.masksProperties,d=0,m=[],g=randomString(10),y="clipPath",v="clip-path";for(r=0;r<o;r++)if(("a"!==f[r].mode&&"n"!==f[r].mode||f[r].inv||100!==f[r].o.k)&&(y="mask",v="mask"),"s"!=f[r].mode&&"i"!=f[r].mode||0!==d?l=null:((l=createNS("rect")).setAttribute("fill","#ffffff"),l.setAttribute("width",this.element.comp.data.w||0),l.setAttribute("height",this.element.comp.data.h||0),m.push(l)),a=createNS("path"),"n"!=f[r].mode){var b;if(d+=1,a.setAttribute("fill","s"===f[r].mode?"#000000":"#ffffff"),a.setAttribute("clip-rule","nonzero"),0!==f[r].x.k?(y="mask",v="mask",p=PropertyFactory.getProp(this.element,f[r].x,0,null,this.element),b="fi_"+randomString(10),(c=createNS("filter")).setAttribute("id",b),(h=createNS("feMorphology")).setAttribute("operator","dilate"),h.setAttribute("in","SourceGraphic"),h.setAttribute("radius","0"),c.appendChild(h),i.appendChild(c),a.setAttribute("stroke","s"===f[r].mode?"#000000":"#ffffff")):(h=null,p=null),this.storedData[r]={elem:a,x:p,expan:h,lastPath:"",lastOperator:"",filterId:b,lastRadius:0},"i"==f[r].mode){u=m.length;var _=createNS("g");for(s=0;s<u;s+=1)_.appendChild(m[s]);var w=createNS("mask");w.setAttribute("mask-type","alpha"),w.setAttribute("id",g+"_"+d),w.appendChild(a),i.appendChild(w),_.setAttribute("mask","url("+locationHref+"#"+g+"_"+d+")"),m.length=0,m.push(_)}else m.push(a);f[r].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[r]={elem:a,lastPath:"",op:PropertyFactory.getProp(this.element,f[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,f[r],3),invRect:l},this.viewData[r].prop.k||this.drawPath(f[r],this.viewData[r].prop.v,this.viewData[r])}else this.viewData[r]={op:PropertyFactory.getProp(this.element,f[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,f[r],3),elem:a,lastPath:""},i.appendChild(a);for(this.maskElement=createNS(y),o=m.length,r=0;r<o;r+=1)this.maskElement.appendChild(m[r]);d>0&&(this.maskElement.setAttribute("id",g),this.element.maskedElement.setAttribute(v,"url("+locationHref+"#"+g+")"),i.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}function HierarchyElement(){}function FrameElement(){}function TransformElement(){}function RenderableElement(){}function RenderableDOMElement(){}function ProcessedElement(t,e){this.elem=t,this.pos=e}function SVGStyleData(t,e){this.data=t,this.type=t.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=!0===t.hd,this.pElem=createNS("path"),this.msElem=null}function SVGShapeData(t,e,n){this.caches=[],this.styles=[],this.transformers=t,this.lStr="",this.sh=n,this.lvl=e,this._isAnimated=!!n.k;for(var r=0,i=t.length;r<i;){if(t[r].mProps.dynamicProperties.length){this._isAnimated=!0;break}r+=1}}function SVGTransformData(t,e,n){this.transform={mProps:t,op:e,container:n},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}function SVGStrokeStyleData(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=n,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=n}function SVGGradientFillStyleData(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.initGradientData(t,e,n)}function SVGGradientStrokeStyleData(t,e,n){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.initGradientData(t,e,n),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}BaseRenderer.prototype.checkLayers=function(t){var e,n,r=this.layers.length;for(this.completeLayers=!0,e=r-1;e>=0;e--)this.elements[e]||(n=this.layers[e]).ip-n.st<=t-this.layers[e].st&&n.op-n.st>t-this.layers[e].st&&this.buildItem(e),this.completeLayers=!!this.elements[e]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 3:return this.createNull(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 13:return this.createCamera(t)}return this.createNull(t)},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(t){this.completeLayers=!1;var e,n,r=t.length,i=this.layers.length;for(e=0;e<r;e+=1)for(n=0;n<i;){if(this.layers[n].id==t[e].id){this.layers[n]=t[e];break}n+=1}},BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(t,e,n){for(var r=this.elements,i=this.layers,o=0,a=i.length;o<a;)i[o].ind==e&&(r[o]&&!0!==r[o]?(n.push(r[o]),r[o].setAsParent(),void 0!==i[o].parent?this.buildElementParenting(t,i[o].parent,n):t.setHierarchy(n)):(this.buildItem(o),this.addPendingElement(t))),o+=1},BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)},BaseRenderer.prototype.searchExtraCompositions=function(t){var e,n=t.length;for(e=0;e<n;e+=1)if(t[e].xt){var r=this.createComp(t[e]);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},BaseRenderer.prototype.setupGlobalData=function(t,e){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.frameId=0,this.globalData.frameRate=t.fr,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h}},extendPrototype([BaseRenderer],SVGRenderer),SVGRenderer.prototype.createNull=function(t){return new NullElement(t,this.globalData,this)},SVGRenderer.prototype.createShape=function(t){return new SVGShapeElement(t,this.globalData,this)},SVGRenderer.prototype.createText=function(t){return new SVGTextElement(t,this.globalData,this)},SVGRenderer.prototype.createImage=function(t){return new IImageElement(t,this.globalData,this)},SVGRenderer.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)},SVGRenderer.prototype.createSolid=function(t){return new ISolidElement(t,this.globalData,this)},SVGRenderer.prototype.configAnimation=function(t){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize?this.renderConfig.viewBoxSize:"0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",t.w),this.svgElement.setAttribute("height",t.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)"),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(t,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=t;var n=createNS("clipPath"),r=createNS("rect");r.setAttribute("width",t.w),r.setAttribute("height",t.h),r.setAttribute("x",0),r.setAttribute("y",0);var i="animationMask_"+randomString(10);n.setAttribute("id",i),n.appendChild(r),this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+i+")"),e.appendChild(n),this.layers=t.layers,this.elements=createSizedArray(t.layers.length)},SVGRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.layerElement=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t++)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRenderer.prototype.updateContainerSize=function(){},SVGRenderer.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!=this.layers[t].ty){e[t]=!0;var n=this.createItem(this.layers[t]);e[t]=n,expressionsPlugin&&(0===this.layers[t].ty&&this.globalData.projectInterface.registerComposition(n),n.initExpressions()),this.appendElementInPos(n,t),this.layers[t].tt&&(this.elements[t-1]&&!0!==this.elements[t-1]?n.setMatte(e[t-1].layerId):(this.buildItem(t-1),this.addPendingElement(n)))}},SVGRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,n=this.elements.length;e<n;){if(this.elements[e]===t){t.setMatte(this.elements[e-1].layerId);break}e+=1}}},SVGRenderer.prototype.renderFrame=function(t){if(this.renderedFrame!==t&&!this.destroyed){null===t?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.globalData._mdf=!1;var e,n=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=n-1;e>=0;e--)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<n;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRenderer.prototype.appendElementInPos=function(t,e){var n=t.getBaseElement();if(n){for(var r,i=0;i<e;)this.elements[i]&&!0!==this.elements[i]&&this.elements[i].getBaseElement()&&(r=this.elements[i].getBaseElement()),i+=1;r?this.layerElement.insertBefore(n,r):this.layerElement.appendChild(n)}},SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"},SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"},MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop},MaskElement.prototype.renderFrame=function(t){var e,n=this.element.finalTransform.mat,r=this.masksProperties.length;for(e=0;e<r;e++)if((this.viewData[e].prop._mdf||t)&&this.drawPath(this.masksProperties[e],this.viewData[e].prop.v,this.viewData[e]),(this.viewData[e].op._mdf||t)&&this.viewData[e].elem.setAttribute("fill-opacity",this.viewData[e].op.v),"n"!==this.masksProperties[e].mode&&(this.viewData[e].invRect&&(this.element.finalTransform.mProp._mdf||t)&&(this.viewData[e].invRect.setAttribute("x",-n.props[12]),this.viewData[e].invRect.setAttribute("y",-n.props[13])),this.storedData[e].x&&(this.storedData[e].x._mdf||t))){var i=this.storedData[e].expan;this.storedData[e].x.v<0?("erode"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="erode",this.storedData[e].elem.setAttribute("filter","url("+locationHref+"#"+this.storedData[e].filterId+")")),i.setAttribute("radius",-this.storedData[e].x.v)):("dilate"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="dilate",this.storedData[e].elem.setAttribute("filter",null)),this.storedData[e].elem.setAttribute("stroke-width",2*this.storedData[e].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,(t+=" h-"+this.globalData.compSize.w)+" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(t,e,n){var r,i,o=" M"+e.v[0][0]+","+e.v[0][1];for(i=e._length,r=1;r<i;r+=1)o+=" C"+e.o[r-1][0]+","+e.o[r-1][1]+" "+e.i[r][0]+","+e.i[r][1]+" "+e.v[r][0]+","+e.v[r][1];if(e.c&&i>1&&(o+=" C"+e.o[r-1][0]+","+e.o[r-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),n.lastPath!==o){var a="";n.elem&&(e.c&&(a=t.inv?this.solidPath+o:o),n.elem.setAttribute("d",a)),n.lastPath=o}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(t){this.hierarchy=t},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(t,e){var n,r=this.dynamicProperties.length;for(n=0;n<r;n+=1)(e||this._isParent&&"transform"===this.dynamicProperties[n].propType)&&(this.dynamicProperties[n].getValue(),this.dynamicProperties[n]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&this.dynamicProperties.push(t)}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0)},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var t,e=this.finalTransform.mat,n=0,r=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;n<r;){if(this.hierarchy[n].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}n+=1}if(this.finalTransform._matMdf)for(e.cloneFromProps(t=this.finalTransform.mProp.v.props),n=0;n<r;n+=1)e.transform((t=this.hierarchy[n].finalTransform.mProp.v.props)[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}},globalToLocal:function(t){var e=[];e.push(this.finalTransform);for(var n=!0,r=this.comp;n;)r.finalTransform?(r.data.hasMask&&e.splice(0,0,r.finalTransform),r=r.comp):n=!1;var i,o,a=e.length;for(i=0;i<a;i+=1)o=e[i].mat.applyToPointArray(0,0,0),t=[t[0]-o[0],t[1]-o[1],0];return t},mHelper:new Matrix},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(t){-1===this.renderableComponents.indexOf(t)&&this.renderableComponents.push(t)},removeRenderableComponent:function(t){-1!==this.renderableComponents.indexOf(t)&&this.renderableComponents.splice(this.renderableComponents.indexOf(t),1)},prepareRenderableFrame:function(t){this.checkLayerLimits(t)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(t){this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var t,e=this.renderableComponents.length;for(t=0;t<e;t+=1)this.renderableComponents[t].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(t,e,n){this.initFrame(),this.initBaseData(t,e,n),this.initTransform(t,e,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),SVGGradientFillStyleData.prototype.initGradientData=function(t,e,n){this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.s=PropertyFactory.getProp(t,e.s,1,null,this),this.e=PropertyFactory.getProp(t,e.e,1,null,this),this.h=PropertyFactory.getProp(t,e.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(t,e.a||{k:0},0,degToRads,this),this.g=new GradientProperty(t,e.g,this),this.style=n,this.stops=[],this.setGradientData(n.pElem,e),this.setGradientOpacity(e,n),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(t,e){var n="gr_"+randomString(10),r=createNS(1===e.t?"linearGradient":"radialGradient");r.setAttribute("id",n),r.setAttribute("spreadMethod","pad"),r.setAttribute("gradientUnits","userSpaceOnUse");var i,o,a,s=[];for(a=4*e.g.p,o=0;o<a;o+=4)i=createNS("stop"),r.appendChild(i),s.push(i);t.setAttribute("gf"===e.ty?"fill":"stroke","url("+locationHref+"#"+n+")"),this.gf=r,this.cst=s},SVGGradientFillStyleData.prototype.setGradientOpacity=function(t,e){if(this.g._hasOpacity&&!this.g._collapsable){var n,r,i,o=createNS("mask"),a=createNS("path");o.appendChild(a);var s="op_"+randomString(10),u="mk_"+randomString(10);o.setAttribute("id",u);var l=createNS(1===t.t?"linearGradient":"radialGradient");l.setAttribute("id",s),l.setAttribute("spreadMethod","pad"),l.setAttribute("gradientUnits","userSpaceOnUse"),i=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var c=this.stops;for(r=4*t.g.p;r<i;r+=2)(n=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),l.appendChild(n),c.push(n);a.setAttribute("gf"===t.ty?"fill":"stroke","url("+locationHref+"#"+s+")"),this.of=l,this.ms=o,this.ost=c,this.maskId=u,e.msElem=a}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var SVGElementsRenderer=function(){var t=new Matrix,e=new Matrix;function n(t,e,n){(n||e.transform.op._mdf)&&e.transform.container.setAttribute("opacity",e.transform.op.v),(n||e.transform.mProps._mdf)&&e.transform.container.setAttribute("transform",e.transform.mProps.v.to2dCSS())}function r(n,r,i){var o,a,s,u,l,c,h,p,f,d,m,g=r.styles.length,y=r.lvl;for(c=0;c<g;c+=1){if(u=r.sh._mdf||i,r.styles[c].lvl<y){for(p=e.reset(),d=y-r.styles[c].lvl,m=r.transformers.length-1;!u&&d>0;)u=r.transformers[m].mProps._mdf||u,d--,m--;if(u)for(d=y-r.styles[c].lvl,m=r.transformers.length-1;d>0;)p.transform((f=r.transformers[m].mProps.v.props)[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]),d--,m--}else p=t;if(a=(h=r.sh.paths)._length,u){for(s="",o=0;o<a;o+=1)(l=h.shapes[o])&&l._length&&(s+=buildShapeString(l,l._length,l.c,p));r.caches[c]=s}else s=r.caches[c];r.styles[c].d+=!0===n.hd?"":s,r.styles[c]._mdf=u||r.styles[c]._mdf}}function i(t,e,n){var r=e.style;(e.c._mdf||n)&&r.pElem.setAttribute("fill","rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o._mdf||n)&&r.pElem.setAttribute("fill-opacity",e.o.v)}function o(t,e,n){a(t,e,n),s(0,e,n)}function a(t,e,n){var r,i,o,a,s,u=e.gf,l=e.g._hasOpacity,c=e.s.v,h=e.e.v;if((e.o._mdf||n)&&e.style.pElem.setAttribute("gf"===t.ty?"fill-opacity":"stroke-opacity",e.o.v),e.s._mdf||n){var p=1===t.t?"x1":"cx",f="x1"===p?"y1":"cy";u.setAttribute(p,c[0]),u.setAttribute(f,c[1]),l&&!e.g._collapsable&&(e.of.setAttribute(p,c[0]),e.of.setAttribute(f,c[1]))}if(e.g._cmdf||n){var d=e.g.c;for(o=(r=e.cst).length,i=0;i<o;i+=1)(a=r[i]).setAttribute("offset",d[4*i]+"%"),a.setAttribute("stop-color","rgb("+d[4*i+1]+","+d[4*i+2]+","+d[4*i+3]+")")}if(l&&(e.g._omdf||n)){var m=e.g.o;for(o=(r=e.g._collapsable?e.cst:e.ost).length,i=0;i<o;i+=1)a=r[i],e.g._collapsable||a.setAttribute("offset",m[2*i]+"%"),a.setAttribute("stop-opacity",m[2*i+1])}if(1===t.t)(e.e._mdf||n)&&(u.setAttribute("x2",h[0]),u.setAttribute("y2",h[1]),l&&!e.g._collapsable&&(e.of.setAttribute("x2",h[0]),e.of.setAttribute("y2",h[1])));else if((e.s._mdf||e.e._mdf||n)&&(s=Math.sqrt(Math.pow(c[0]-h[0],2)+Math.pow(c[1]-h[1],2)),u.setAttribute("r",s),l&&!e.g._collapsable&&e.of.setAttribute("r",s)),e.e._mdf||e.h._mdf||e.a._mdf||n){s||(s=Math.sqrt(Math.pow(c[0]-h[0],2)+Math.pow(c[1]-h[1],2)));var g=Math.atan2(h[1]-c[1],h[0]-c[0]),y=s*(e.h.v>=1?.99:e.h.v<=-1?-.99:e.h.v),v=Math.cos(g+e.a.v)*y+c[0],b=Math.sin(g+e.a.v)*y+c[1];u.setAttribute("fx",v),u.setAttribute("fy",b),l&&!e.g._collapsable&&(e.of.setAttribute("fx",v),e.of.setAttribute("fy",b))}}function s(t,e,n){var r=e.style,i=e.d;i&&(i._mdf||n)&&i.dashStr&&(r.pElem.setAttribute("stroke-dasharray",i.dashStr),r.pElem.setAttribute("stroke-dashoffset",i.dashoffset[0])),e.c&&(e.c._mdf||n)&&r.pElem.setAttribute("stroke","rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o._mdf||n)&&r.pElem.setAttribute("stroke-opacity",e.o.v),(e.w._mdf||n)&&(r.pElem.setAttribute("stroke-width",e.w.v),r.msElem&&r.msElem.setAttribute("stroke-width",e.w.v))}return{createRenderFunction:function(t){switch(t.ty){case"fl":return i;case"gf":return a;case"gs":return o;case"st":return s;case"sh":case"el":case"rc":case"sr":return r;case"tr":return n}}}}();function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}function BaseElement(){}function NullElement(t,e,n){this.initFrame(),this.initBaseData(t,e,n),this.initFrame(),this.initTransform(t,e,n),this.initHierarchy()}function SVGBaseElement(){}function IShapeElement(){}function ITextElement(){}function ICompElement(){}function IImageElement(t,e,n){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,n)}function ISolidElement(t,e,n){this.initElement(t,e,n)}function SVGCompElement(t,e,n){this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,n),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function SVGTextElement(t,e,n){this.textSpans=[],this.renderType="svg",this.initElement(t,e,n)}function SVGShapeElement(t,e,n){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(t,e,n),this.prevViewData=[]}function SVGTintFilter(t,e){this.filterManager=e;var n=createNS("feColorMatrix");if(n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","linearRGB"),n.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),n.setAttribute("result","f1"),t.appendChild(n),(n=createNS("feColorMatrix")).setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),n.setAttribute("result","f2"),t.appendChild(n),this.matrixFilter=n,100!==e.effectElements[2].p.v||e.effectElements[2].p.k){var r,i=createNS("feMerge");t.appendChild(i),(r=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),i.appendChild(r),(r=createNS("feMergeNode")).setAttribute("in","f2"),i.appendChild(r)}}function SVGFillFilter(t,e){this.filterManager=e;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),t.appendChild(n),this.matrixFilter=n}function SVGStrokeEffect(t,e){this.initialized=!1,this.filterManager=e,this.elem=t,this.paths=[]}function SVGTritoneFilter(t,e){this.filterManager=e;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","linearRGB"),n.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),n.setAttribute("result","f1"),t.appendChild(n);var r=createNS("feComponentTransfer");r.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(r),this.matrixFilter=r;var i=createNS("feFuncR");i.setAttribute("type","table"),r.appendChild(i),this.feFuncR=i;var o=createNS("feFuncG");o.setAttribute("type","table"),r.appendChild(o),this.feFuncG=o;var a=createNS("feFuncB");a.setAttribute("type","table"),r.appendChild(a),this.feFuncB=a}function SVGProLevelsFilter(t,e){this.filterManager=e;var n=this.filterManager.effectElements,r=createNS("feComponentTransfer");(n[10].p.k||0!==n[10].p.v||n[11].p.k||1!==n[11].p.v||n[12].p.k||1!==n[12].p.v||n[13].p.k||0!==n[13].p.v||n[14].p.k||1!==n[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",r)),(n[17].p.k||0!==n[17].p.v||n[18].p.k||1!==n[18].p.v||n[19].p.k||1!==n[19].p.v||n[20].p.k||0!==n[20].p.v||n[21].p.k||1!==n[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",r)),(n[24].p.k||0!==n[24].p.v||n[25].p.k||1!==n[25].p.v||n[26].p.k||1!==n[26].p.v||n[27].p.k||0!==n[27].p.v||n[28].p.k||1!==n[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",r)),(n[31].p.k||0!==n[31].p.v||n[32].p.k||1!==n[32].p.v||n[33].p.k||1!==n[33].p.v||n[34].p.k||0!==n[34].p.v||n[35].p.k||1!==n[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",r)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(r.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(r),r=createNS("feComponentTransfer")),(n[3].p.k||0!==n[3].p.v||n[4].p.k||1!==n[4].p.v||n[5].p.k||1!==n[5].p.v||n[6].p.k||0!==n[6].p.v||n[7].p.k||1!==n[7].p.v)&&(r.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(r),this.feFuncRComposed=this.createFeFunc("feFuncR",r),this.feFuncGComposed=this.createFeFunc("feFuncG",r),this.feFuncBComposed=this.createFeFunc("feFuncB",r))}function SVGDropShadowEffect(t,e){t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width","400%"),t.setAttribute("height","400%"),this.filterManager=e;var n=createNS("feGaussianBlur");n.setAttribute("in","SourceAlpha"),n.setAttribute("result","drop_shadow_1"),n.setAttribute("stdDeviation","0"),this.feGaussianBlur=n,t.appendChild(n);var r=createNS("feOffset");r.setAttribute("dx","25"),r.setAttribute("dy","0"),r.setAttribute("in","drop_shadow_1"),r.setAttribute("result","drop_shadow_2"),this.feOffset=r,t.appendChild(r);var i=createNS("feFlood");i.setAttribute("flood-color","#00ff00"),i.setAttribute("flood-opacity","1"),i.setAttribute("result","drop_shadow_3"),this.feFlood=i,t.appendChild(i);var o=createNS("feComposite");o.setAttribute("in","drop_shadow_3"),o.setAttribute("in2","drop_shadow_2"),o.setAttribute("operator","in"),o.setAttribute("result","drop_shadow_4"),t.appendChild(o);var a,s=createNS("feMerge");t.appendChild(s),a=createNS("feMergeNode"),s.appendChild(a),(a=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),this.feMergeNode=a,this.feMerge=s,this.originalNodeAdded=!1,s.appendChild(a)}ShapeTransformManager.prototype={addTransformSequence:function(t){var e,n=t.length,r="_";for(e=0;e<n;e+=1)r+=t[e].transform.key+"_";var i=this.sequences[r];return i||(i={transforms:[].concat(t),finalTransform:new Matrix,_mdf:!1},this.sequences[r]=i,this.sequenceList.push(i)),i},processSequence:function(t,e){for(var n,r=0,i=t.transforms.length,o=e;r<i&&!e;){if(t.transforms[r].transform.mProps._mdf){o=!0;break}r+=1}if(o)for(t.finalTransform.reset(),r=i-1;r>=0;r-=1)t.finalTransform.transform((n=t.transforms[r].transform.mProps.v.props)[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]);t._mdf=o},processSequences:function(t){var e,n=this.sequenceList.length;for(e=0;e<n;e+=1)this.processSequence(this.sequenceList[e],t)},getNewKey:function(){return"_"+this.transform_key_count++}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var t=0,e=this.data.masksProperties.length;t<e;){if("n"!==this.data.masksProperties[t].mode&&!1!==this.data.masksProperties[t].cl)return!0;t+=1}return!1},initExpressions:function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var t=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(t),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?(this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this),this.layerInterface.text=this.layerInterface.textInterface)},blendModeEnums:{1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},getBlendMode:function(){return this.blendModeEnums[this.data.bm]||""},setBlendMode:function(){var t=this.getBlendMode();(this.baseElement||this.layerElement).style["mix-blend-mode"]=t},initBaseData:function(t,e,n){this.globalData=e,this.comp=n,this.data=t,this.layerId="ly_"+randomString(10),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type}},NullElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var t,e,n,r=null;if(this.data.td){if(3==this.data.td||1==this.data.td){var i=createNS("mask");i.setAttribute("id",this.layerId),i.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),i.appendChild(this.layerElement),r=i,this.globalData.defs.appendChild(i),featureSupport.maskType||1!=this.data.td||(i.setAttribute("mask-type","luminance"),t=randomString(10),e=filtersFactory.createFilter(t),this.globalData.defs.appendChild(e),e.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(n=createNS("g")).appendChild(this.layerElement),r=n,i.appendChild(n),n.setAttribute("filter","url("+locationHref+"#"+t+")"))}else if(2==this.data.td){var o=createNS("mask");o.setAttribute("id",this.layerId),o.setAttribute("mask-type","alpha");var a=createNS("g");o.appendChild(a),t=randomString(10),e=filtersFactory.createFilter(t);var s=createNS("feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 -1 1"),e.appendChild(s),this.globalData.defs.appendChild(e);var u=createNS("rect");u.setAttribute("width",this.comp.data.w),u.setAttribute("height",this.comp.data.h),u.setAttribute("x","0"),u.setAttribute("y","0"),u.setAttribute("fill","#ffffff"),u.setAttribute("opacity","0"),a.setAttribute("filter","url("+locationHref+"#"+t+")"),a.appendChild(u),a.appendChild(this.layerElement),r=a,featureSupport.maskType||(o.setAttribute("mask-type","luminance"),e.appendChild(filtersFactory.createAlphaToLuminanceFilter()),n=createNS("g"),a.appendChild(u),n.appendChild(this.layerElement),r=n,a.appendChild(n)),this.globalData.defs.appendChild(o)}}else this.data.tt?(this.matteElement.appendChild(this.layerElement),r=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var l=createNS("clipPath"),c=createNS("path");c.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var h="cp_"+randomString(8);if(l.setAttribute("id",h),l.appendChild(c),this.globalData.defs.appendChild(l),this.checkMasks()){var p=createNS("g");p.setAttribute("clip-path","url("+locationHref+"#"+h+")"),p.appendChild(this.layerElement),this.transformedElement=p,r?r.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+h+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},setMatte:function(t){this.matteElement&&this.matteElement.setAttribute("mask","url("+locationHref+"#"+t+")")}},IShapeElement.prototype={addShapeToModifiers:function(t){var e,n=this.shapeModifiers.length;for(e=0;e<n;e+=1)this.shapeModifiers[e].addShape(t)},isShapeInAnimatedModifiers:function(t){for(var e=this.shapeModifiers.length;0<e;)if(this.shapeModifiers[0].isAnimatedWithShape(t))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var t,e=this.shapes.length;for(t=0;t<e;t+=1)this.shapes[t].sh.reset();for(t=(e=this.shapeModifiers.length)-1;t>=0;t-=1)this.shapeModifiers[t].processShapes(this._isFirstFrame)}},lcEnum:{1:"butt",2:"round",3:"square"},ljEnum:{1:"miter",2:"round",3:"bevel"},searchProcessedElement:function(t){for(var e=this.processedElements,n=0,r=e.length;n<r;){if(e[n].elem===t)return e[n].pos;n+=1}return 0},addProcessedElement:function(t,e){for(var n=this.processedElements,r=n.length;r;)if(n[r-=1].elem===t)return void(n[r].pos=e);n.push(new ProcessedElement(t,e))},prepareFrame:function(t){this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)}},ITextElement.prototype.initElement=function(t,e,n){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(t,e,n),this.textProperty=new TextProperty(this,t.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(t.t,this.renderType,this),this.initTransform(t,e,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(t,e){var n,r,i=e.length,o="";for(n=0;n<i;n+=1)o+=buildShapeString(r=e[n].ks.k,r.i.length,!0,t);return o},ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},ITextElement.prototype.canResizeFont=function(t){this.textProperty.canResizeFont(t)},ITextElement.prototype.setMinimumFontSize=function(t){this.textProperty.setMinimumFontSize(t)},ITextElement.prototype.applyTextPropertiesToMatrix=function(t,e,n,r,i){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[n]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[n])/2,0,0)}e.translate(r,i,0)},ITextElement.prototype.buildColor=function(t){return"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(t,e,n){this.initFrame(),this.initBaseData(t,e,n),this.initTransform(t,e,n),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&e.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(t){if(this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=t/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var n,r=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),n=r-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&(this.elements[n].prepareFrame(this.renderedFrame-this.layers[n].st),this.elements[n]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.innerElem)},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var t=createNS("rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t)},extendPrototype([SVGRenderer,ICompElement,SVGBaseElement],SVGCompElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextElement),SVGTextElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextElement.prototype.buildTextContents=function(t){for(var e=0,n=t.length,r=[],i="";e<n;)t[e]===String.fromCharCode(13)||t[e]===String.fromCharCode(3)?(r.push(i),i=""):i+=t[e],e+=1;return r.push(i),r},SVGTextElement.prototype.buildNewText=function(){var t,e,n=this.textProperty.currentData;this.renderedLetters=createSizedArray(n?n.l.length:0),this.layerElement.setAttribute("fill",n.fc?this.buildColor(n.fc):"rgba(0,0,0,0)"),n.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(n.sc)),this.layerElement.setAttribute("stroke-width",n.sw)),this.layerElement.setAttribute("font-size",n.finalSize);var r=this.globalData.fontManager.getFontByName(n.f);if(r.fClass)this.layerElement.setAttribute("class",r.fClass);else{this.layerElement.setAttribute("font-family",r.fFamily);var i=n.fWeight;this.layerElement.setAttribute("font-style",n.fStyle),this.layerElement.setAttribute("font-weight",i)}var o,a=n.l||[],s=!!this.globalData.fontManager.chars;e=a.length;var u,l=this.mHelper,c="",h=this.data.singleShape,p=0,f=0,d=!0,m=n.tr/1e3*n.finalSize;if(!h||s||n.sz){var g,y,v=this.textSpans.length;for(t=0;t<e;t+=1)s&&h&&0!==t||(o=v>t?this.textSpans[t]:createNS(s?"path":"text"),v<=t&&(o.setAttribute("stroke-linecap","butt"),o.setAttribute("stroke-linejoin","round"),o.setAttribute("stroke-miterlimit","4"),this.textSpans[t]=o,this.layerElement.appendChild(o)),o.style.display="inherit"),l.reset(),l.scale(n.finalSize/100,n.finalSize/100),h&&(a[t].n&&(p=-m,f+=n.yOffset,f+=d?1:0,d=!1),this.applyTextPropertiesToMatrix(n,l,a[t].line,p,f),p+=a[t].l||0,p+=m),s?(u=(g=(y=this.globalData.fontManager.getCharData(n.finalText[t],r.fStyle,this.globalData.fontManager.getFontByName(n.f).fFamily))&&y.data||{}).shapes?g.shapes[0].it:[],h?c+=this.createPathShape(l,u):o.setAttribute("d",this.createPathShape(l,u))):(h&&o.setAttribute("transform","translate("+l.props[12]+","+l.props[13]+")"),o.textContent=a[t].val,o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"));h&&o&&o.setAttribute("d",c)}else{var b=this.textContainer,_="start";switch(n.j){case 1:_="end";break;case 2:_="middle"}b.setAttribute("text-anchor",_),b.setAttribute("letter-spacing",m);var w=this.buildTextContents(n.finalText);for(e=w.length,f=n.ps?n.ps[1]+n.ascent:0,t=0;t<e;t+=1)(o=this.textSpans[t]||createNS("tspan")).textContent=w[t],o.setAttribute("x",0),o.setAttribute("y",f),o.style.display="inherit",b.appendChild(o),this.textSpans[t]=o,f+=n.finalLineHeight;this.layerElement.appendChild(b)}for(;t<this.textSpans.length;)this.textSpans[t].style.display="none",t+=1;this._sizeChanged=!0},SVGTextElement.prototype.sourceRectAtTime=function(t){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var e=this.layerElement.getBBox();this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}}return this.bbox},SVGTextElement.prototype.renderInnerContent=function(){if(!this.data.singleShape&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var t,e;this._sizeChanged=!0;var n,r,i=this.textAnimator.renderedLetters,o=this.textProperty.currentData.l;for(e=o.length,t=0;t<e;t+=1)o[t].n||(r=this.textSpans[t],(n=i[t])._mdf.m&&r.setAttribute("transform",n.m),n._mdf.o&&r.setAttribute("opacity",n.o),n._mdf.sw&&r.setAttribute("stroke-width",n.sw),n._mdf.sc&&r.setAttribute("stroke",n.sc),n._mdf.fc&&r.setAttribute("fill",n.fc))}},extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var t,e,n,r,i=this.shapes.length,o=this.stylesList.length,a=[],s=!1;for(n=0;n<o;n+=1){for(r=this.stylesList[n],s=!1,a.length=0,t=0;t<i;t+=1)-1!==(e=this.shapes[t]).styles.indexOf(r)&&(a.push(e),s=e._isAnimated||s);a.length>1&&s&&this.setShapesAsAnimated(a)}},SVGShapeElement.prototype.setShapesAsAnimated=function(t){var e,n=t.length;for(e=0;e<n;e+=1)t[e].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(t,e){var n,r=new SVGStyleData(t,e),i=r.pElem;return"st"===t.ty?n=new SVGStrokeStyleData(this,t,r):"fl"===t.ty?n=new SVGFillStyleData(this,t,r):"gf"!==t.ty&&"gs"!==t.ty||(n=new("gf"===t.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,t,r),this.globalData.defs.appendChild(n.gf),n.maskId&&(this.globalData.defs.appendChild(n.ms),this.globalData.defs.appendChild(n.of),i.setAttribute("mask","url("+locationHref+"#"+n.maskId+")"))),"st"!==t.ty&&"gs"!==t.ty||(i.setAttribute("stroke-linecap",this.lcEnum[t.lc]||"round"),i.setAttribute("stroke-linejoin",this.ljEnum[t.lj]||"round"),i.setAttribute("fill-opacity","0"),1===t.lj&&i.setAttribute("stroke-miterlimit",t.ml)),2===t.r&&i.setAttribute("fill-rule","evenodd"),t.ln&&i.setAttribute("id",t.ln),t.cl&&i.setAttribute("class",t.cl),this.stylesList.push(r),this.addToAnimatedContents(t,n),n},SVGShapeElement.prototype.createGroupElement=function(t){var e=new ShapeGroupData;return t.ln&&e.gr.setAttribute("id",t.ln),e},SVGShapeElement.prototype.createTransformElement=function(t,e){var n=TransformPropertyFactory.getTransformProperty(this,t,this),r=new SVGTransformData(n,n.o,e);return this.addToAnimatedContents(t,r),r},SVGShapeElement.prototype.createShapeElement=function(t,e,n){var r=4;"rc"===t.ty?r=5:"el"===t.ty?r=6:"sr"===t.ty&&(r=7);var i=new SVGShapeData(e,n,ShapePropertyFactory.getShapeProp(this,t,r,this));return this.shapes.push(i),this.addShapeToModifiers(i),this.addToAnimatedContents(t,i),i},SVGShapeElement.prototype.addToAnimatedContents=function(t,e){for(var n=0,r=this.animatedContents.length;n<r;){if(this.animatedContents[n].element===e)return;n+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(t),element:e,data:t})},SVGShapeElement.prototype.setElementStyles=function(t){var e,n=t.styles,r=this.stylesList.length;for(e=0;e<r;e+=1)this.stylesList[e].closed||n.push(this.stylesList[e])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(t,e,n,r,i,o,a){var s,u,l,c,h,p=[].concat(o),f=t.length-1,d=[],m=[];for(s=f;s>=0;s-=1){if((h=this.searchProcessedElement(t[s]))?e[s]=n[h-1]:t[s]._render=a,"fl"==t[s].ty||"st"==t[s].ty||"gf"==t[s].ty||"gs"==t[s].ty)h?e[s].style.closed=!1:e[s]=this.createStyleElement(t[s],i),t[s]._render&&r.appendChild(e[s].style.pElem),d.push(e[s].style);else if("gr"==t[s].ty){if(h)for(l=e[s].it.length,u=0;u<l;u+=1)e[s].prevViewData[u]=e[s].it[u];else e[s]=this.createGroupElement(t[s]);this.searchShapes(t[s].it,e[s].it,e[s].prevViewData,e[s].gr,i+1,p,a),t[s]._render&&r.appendChild(e[s].gr)}else"tr"==t[s].ty?(h||(e[s]=this.createTransformElement(t[s],r)),p.push(e[s].transform)):"sh"==t[s].ty||"rc"==t[s].ty||"el"==t[s].ty||"sr"==t[s].ty?(h||(e[s]=this.createShapeElement(t[s],p,i)),this.setElementStyles(e[s])):"tm"==t[s].ty||"rd"==t[s].ty||"ms"==t[s].ty?(h?(c=e[s]).closed=!1:((c=ShapeModifiers.getModifier(t[s].ty)).init(this,t[s]),e[s]=c,this.shapeModifiers.push(c)),m.push(c)):"rp"==t[s].ty&&(h?(c=e[s]).closed=!0:(c=ShapeModifiers.getModifier(t[s].ty),e[s]=c,c.init(this,t,s,e),this.shapeModifiers.push(c),a=!1),m.push(c));this.addProcessedElement(t[s],s+1)}for(f=d.length,s=0;s<f;s+=1)d[s].closed=!0;for(f=m.length,s=0;s<f;s+=1)m[s].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].reset();for(this.renderShape(),t=0;t<e;t+=1)(this.stylesList[t]._mdf||this._isFirstFrame)&&(this.stylesList[t].msElem&&(this.stylesList[t].msElem.setAttribute("d",this.stylesList[t].d),this.stylesList[t].d="M0 0"+this.stylesList[t].d),this.stylesList[t].pElem.setAttribute("d",this.stylesList[t].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var t,e,n=this.animatedContents.length;for(t=0;t<n;t+=1)e=this.animatedContents[t],(this._isFirstFrame||e.element._isAnimated)&&!0!==e.data&&e.fn(e.data,e.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},SVGTintFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v;this.matrixFilter.setAttribute("values",n[0]-e[0]+" 0 0 0 "+e[0]+" "+(n[1]-e[1])+" 0 0 0 "+e[1]+" "+(n[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 "+this.filterManager.effectElements[2].p.v/100+" 0")}},SVGFillFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[2].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+this.filterManager.effectElements[6].p.v+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var t,e,n,r,i=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(r=this.elem.maskManager.masksProperties.length,n=0):r=1+(n=this.filterManager.effectElements[0].p.v-1),(e=createNS("g")).setAttribute("fill","none"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-dashoffset",1);n<r;n+=1)t=createNS("path"),e.appendChild(t),this.paths.push({p:t,m:n});if(3===this.filterManager.effectElements[10].p.v){var o=createNS("mask"),a="stms_"+randomString(10);o.setAttribute("id",a),o.setAttribute("mask-type","alpha"),o.appendChild(e),this.elem.globalData.defs.appendChild(o);var s=createNS("g");for(s.setAttribute("mask","url("+locationHref+"#"+a+")");i[0];)s.appendChild(i[0]);this.elem.layerElement.appendChild(s),this.masker=o,e.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(i=this.elem.layerElement.children||this.elem.layerElement.childNodes;i.length;)this.elem.layerElement.removeChild(i[0]);this.elem.layerElement.appendChild(e),this.elem.layerElement.removeAttribute("mask"),e.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=e},SVGStrokeEffect.prototype.renderFrame=function(t){this.initialized||this.initialize();var e,n,r,i=this.paths.length;for(e=0;e<i;e+=1)if(-1!==this.paths[e].m&&(n=this.elem.maskManager.viewData[this.paths[e].m],r=this.paths[e].p,(t||this.filterManager._mdf||n.prop._mdf)&&r.setAttribute("d",n.lastPath),t||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||n.prop._mdf)){var o;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var a=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,s=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,u=r.getTotalLength();o="0 0 0 "+u*a+" ";var l,c=Math.floor(u*(s-a)/(1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100));for(l=0;l<c;l+=1)o+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100+" ";o+="0 "+10*u+" 0 0"}else o="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100;r.setAttribute("stroke-dasharray",o)}if((t||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(t||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(t||this.filterManager.effectElements[3].p._mdf)){var h=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bm_floor(255*h[0])+","+bm_floor(255*h[1])+","+bm_floor(255*h[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v,i=r[1]+" "+n[1]+" "+e[1],o=r[2]+" "+n[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",r[0]+" "+n[0]+" "+e[0]),this.feFuncG.setAttribute("tableValues",i),this.feFuncB.setAttribute("tableValues",o)}},SVGProLevelsFilter.prototype.createFeFunc=function(t,e){var n=createNS(t);return n.setAttribute("type","table"),e.appendChild(n),n},SVGProLevelsFilter.prototype.getTableValue=function(t,e,n,r,i){for(var o,a,s=0,u=Math.min(t,e),l=Math.max(t,e),c=Array.call(null,{length:256}),h=0,p=i-r,f=e-t;s<=256;)a=(o=s/256)<=u?f<0?i:r:o>=l?f<0?r:i:r+p*Math.pow((o-t)/f,1/n),c[h++]=a,s+=256/255;return c.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e,n=this.filterManager.effectElements;this.feFuncRComposed&&(t||n[3].p._mdf||n[4].p._mdf||n[5].p._mdf||n[6].p._mdf||n[7].p._mdf)&&(e=this.getTableValue(n[3].p.v,n[4].p.v,n[5].p.v,n[6].p.v,n[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||n[10].p._mdf||n[11].p._mdf||n[12].p._mdf||n[13].p._mdf||n[14].p._mdf)&&(e=this.getTableValue(n[10].p.v,n[11].p.v,n[12].p.v,n[13].p.v,n[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||n[17].p._mdf||n[18].p._mdf||n[19].p._mdf||n[20].p._mdf||n[21].p._mdf)&&(e=this.getTableValue(n[17].p.v,n[18].p.v,n[19].p.v,n[20].p.v,n[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||n[24].p._mdf||n[25].p._mdf||n[26].p._mdf||n[27].p._mdf||n[28].p._mdf)&&(e=this.getTableValue(n[24].p.v,n[25].p.v,n[26].p.v,n[27].p.v,n[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||n[31].p._mdf||n[32].p._mdf||n[33].p._mdf||n[34].p._mdf||n[35].p._mdf)&&(e=this.getTableValue(n[31].p.v,n[32].p.v,n[33].p.v,n[34].p.v,n[35].p.v),this.feFuncA.setAttribute("tableValues",e))}},SVGDropShadowEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){if((t||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),t||this.filterManager.effectElements[0].p._mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])))}if((t||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),t||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var n=this.filterManager.effectElements[3].p.v,r=(this.filterManager.effectElements[2].p.v-90)*degToRads,i=n*Math.cos(r),o=n*Math.sin(r);this.feOffset.setAttribute("dx",i),this.feOffset.setAttribute("dy",o)}}};var _svgMatteSymbols=[],_svgMatteMaskCounter=0;function SVGMatte3Effect(t,e,n){this.initialized=!1,this.filterManager=e,this.filterElem=t,this.elem=n,n.matteElement=createNS("g"),n.matteElement.appendChild(n.layerElement),n.matteElement.appendChild(n.transformedElement),n.baseElement=n.matteElement}function SVGEffects(t){var e,n,r=t.data.ef?t.data.ef.length:0,i=randomString(10),o=filtersFactory.createFilter(i),a=0;for(this.filters=[],e=0;e<r;e+=1)n=null,20===t.data.ef[e].ty?(a+=1,n=new SVGTintFilter(o,t.effectsManager.effectElements[e])):21===t.data.ef[e].ty?(a+=1,n=new SVGFillFilter(o,t.effectsManager.effectElements[e])):22===t.data.ef[e].ty?n=new SVGStrokeEffect(t,t.effectsManager.effectElements[e]):23===t.data.ef[e].ty?(a+=1,n=new SVGTritoneFilter(o,t.effectsManager.effectElements[e])):24===t.data.ef[e].ty?(a+=1,n=new SVGProLevelsFilter(o,t.effectsManager.effectElements[e])):25===t.data.ef[e].ty?(a+=1,n=new SVGDropShadowEffect(o,t.effectsManager.effectElements[e])):28===t.data.ef[e].ty&&(n=new SVGMatte3Effect(o,t.effectsManager.effectElements[e],t)),n&&this.filters.push(n);a&&(t.globalData.defs.appendChild(o),t.layerElement.setAttribute("filter","url("+locationHref+"#"+i+")")),this.filters.length&&t.addRenderableComponent(this)}SVGMatte3Effect.prototype.findSymbol=function(t){for(var e=0,n=_svgMatteSymbols.length;e<n;){if(_svgMatteSymbols[e]===t)return _svgMatteSymbols[e];e+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(t,e){var n=t.layerElement.parentNode;if(n){for(var r,i=n.children,o=0,a=i.length;o<a&&i[o]!==t.layerElement;)o+=1;o<=a-2&&(r=i[o+1]);var s=createNS("use");s.setAttribute("href","#"+e),r?n.insertBefore(s,r):n.appendChild(s)}},SVGMatte3Effect.prototype.setElementAsMask=function(t,e){if(!this.findSymbol(e)){var n="matte_"+randomString(5)+"_"+_svgMatteMaskCounter++,r=createNS("mask");r.setAttribute("id",e.layerId),r.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(e);var i=t.globalData.defs;i.appendChild(r);var o=createNS("symbol");o.setAttribute("id",n),this.replaceInParent(e,n),o.appendChild(e.layerElement),i.appendChild(o);var a=createNS("use");a.setAttribute("href","#"+n),r.appendChild(a),e.data.hd=!1,e.show()}t.setMatte(e.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var t=this.filterManager.effectElements[0].p.v,e=0,n=this.elem.comp.elements.length;e<n;)this.elem.comp.elements[e].data.ind===t&&this.setElementAsMask(this.elem,this.elem.comp.elements[e]),e+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGEffects.prototype.renderFrame=function(t){var e,n=this.filters.length;for(e=0;e<n;e+=1)this.filters[e].renderFrame(t)};var animationManager=function(){var t={},e=[],n=0,r=0,i=0,o=!0,a=!1;function s(t){for(var n=0,i=t.target;n<r;)e[n].animation===i&&(e.splice(n,1),n-=1,r-=1,i.isPaused||c()),n+=1}function u(t,n){if(!t)return null;for(var i=0;i<r;){if(e[i].elem==t&&null!==e[i].elem)return e[i].animation;i+=1}var o=new AnimationItem;return h(o,t),o.setData(t,n),o}function l(){i+=1,d()}function c(){i-=1}function h(t,n){t.addEventListener("destroy",s),t.addEventListener("_active",l),t.addEventListener("_idle",c),e.push({elem:n,animation:t}),r+=1}function p(t){var s,u=t-n;for(s=0;s<r;s+=1)e[s].animation.advanceTime(u);n=t,i&&!a?window.requestAnimationFrame(p):o=!0}function f(t){n=t,window.requestAnimationFrame(p)}function d(){!a&&i&&o&&(window.requestAnimationFrame(f),o=!1)}return t.registerAnimation=u,t.loadAnimation=function(t){var e=new AnimationItem;return h(e,null),e.setParams(t),e},t.setSpeed=function(t,n){var i;for(i=0;i<r;i+=1)e[i].animation.setSpeed(t,n)},t.setDirection=function(t,n){var i;for(i=0;i<r;i+=1)e[i].animation.setDirection(t,n)},t.play=function(t){var n;for(n=0;n<r;n+=1)e[n].animation.play(t)},t.pause=function(t){var n;for(n=0;n<r;n+=1)e[n].animation.pause(t)},t.stop=function(t){var n;for(n=0;n<r;n+=1)e[n].animation.stop(t)},t.togglePause=function(t){var n;for(n=0;n<r;n+=1)e[n].animation.togglePause(t)},t.searchAnimations=function(t,e,n){var r,i=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),o=i.length;for(r=0;r<o;r+=1)n&&i[r].setAttribute("data-bm-type",n),u(i[r],t);if(e&&0===o){n||(n="svg");var a=document.getElementsByTagName("body")[0];a.innerHTML="";var s=createTag("div");s.style.width="100%",s.style.height="100%",s.setAttribute("data-bm-type",n),a.appendChild(s),u(s,t)}},t.resize=function(){var t;for(t=0;t<r;t+=1)e[t].animation.resize()},t.goToAndStop=function(t,n,i){var o;for(o=0;o<r;o+=1)e[o].animation.goToAndStop(t,n,i)},t.destroy=function(t){var n;for(n=r-1;n>=0;n-=1)e[n].animation.destroy(t)},t.freeze=function(){a=!0},t.unfreeze=function(){a=!1,d()},t.getRegisteredAnimations=function(){var t,n=e.length,r=[];for(t=0;t<n;t+=1)r.push(e[t].animation);return r},t}(),AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=randomString(10),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.subframeEnabled=subframeEnabled,this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader};function EffectsManager(){}function CanvasRenderer(t,e){this.animationItem=t,this.renderConfig={clearCanvas:!e||void 0===e.clearCanvas||e.clearCanvas,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",className:e&&e.className||""},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HybridRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!e||!1!==e.hideOnTransparent},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function CVShapeData(t,e,n,r){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var i=4;"rc"==e.ty?i=5:"el"==e.ty?i=6:"sr"==e.ty&&(i=7),this.sh=ShapePropertyFactory.getShapeProp(t,e,i,t);var o,a,s=n.length;for(o=0;o<s;o+=1)n[o].closed||(a={transforms:r.addTransformSequence(n[o].transforms),trNodes:[]},this.styledShapes.push(a),n[o].elements.push(a))}function CVContextData(){var t;for(this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1,this.savedOp=createTypedArray("float32",15),t=0;t<15;t+=1)this.saved[t]=createTypedArray("float32",16);this._length=15}function CVBaseElement(){}function CVImageElement(t,e,n){this.failed=!1,this.assetData=e.getAssetData(t.refId),this.img=e.imageLoader.getImage(this.assetData),this.initElement(t,e,n)}function CVCompElement(t,e,n){this.completeLayers=!1,this.layers=t.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(t,e,n),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function CVMaskElement(t,e){this.data=t,this.element=e,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var n,r=this.masksProperties.length,i=!1;for(n=0;n<r;n++)"n"!==this.masksProperties[n].mode&&(i=!0),this.viewData[n]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[n],3);this.hasMasks=i,i&&this.element.addRenderableComponent(this)}function CVShapeElement(t,e,n){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(t,e,n)}function CVSolidElement(t,e,n){this.initElement(t,e,n)}function CVTextElement(t,e,n){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(t,e,n)}function CVEffects(){}function HBaseElement(t,e,n){}function HSolidElement(t,e,n){this.initElement(t,e,n)}function HCompElement(t,e,n){this.layers=t.layers,this.supports3d=!t.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,n),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function HShapeElement(t,e,n){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(t,e,n),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(t,e,n){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(t,e,n)}function HImageElement(t,e,n){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,n)}function HCameraElement(t,e,n){this.initFrame(),this.initBaseData(t,e,n),this.initHierarchy();var r=PropertyFactory.getProp;if(this.pe=r(this,t.pe,0,0,this),t.ks.p.s?(this.px=r(this,t.ks.p.x,1,0,this),this.py=r(this,t.ks.p.y,1,0,this),this.pz=r(this,t.ks.p.z,1,0,this)):this.p=r(this,t.ks.p,1,0,this),t.ks.a&&(this.a=r(this,t.ks.a,1,0,this)),t.ks.or.k.length&&t.ks.or.k[0].to){var i,o=t.ks.or.k.length;for(i=0;i<o;i+=1)t.ks.or.k[i].to=null,t.ks.or.k[i].ti=null}this.or=r(this,t.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=r(this,t.ks.rx,0,degToRads,this),this.ry=r(this,t.ks.ry,0,degToRads,this),this.rz=r(this,t.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0}function HEffects(){}extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(t){t.context&&(this.context=t.context),(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var e=t.animType?t.animType:t.renderer?t.renderer:"svg";switch(e){case"canvas":this.renderer=new CanvasRenderer(this,t.rendererSettings);break;case"svg":this.renderer=new SVGRenderer(this,t.rendererSettings);break;default:this.renderer=new HybridRenderer(this,t.rendererSettings)}this.renderer.setProjectInterface(this.projectInterface),this.animType=e,""===t.loop||null===t.loop||(this.loop=!1!==t.loop&&(!0===t.loop||parseInt(t.loop))),this.autoplay=!("autoplay"in t)||t.autoplay,this.name=t.name?t.name:"",this.autoloadSegments=!t.hasOwnProperty("autoloadSegments")||t.autoloadSegments,this.assetsPath=t.assetsPath,t.animationData?this.configAnimation(t.animationData):t.path&&("json"!=t.path.substr(-4)&&("/"!=t.path.substr(-1,1)&&(t.path+="/"),t.path+="data.json"),this.path=-1!=t.path.lastIndexOf("\\")?t.path.substr(0,t.path.lastIndexOf("\\")+1):t.path.substr(0,t.path.lastIndexOf("/")+1),this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),assetLoader.load(t.path,this.configAnimation.bind(this),(function(){this.trigger("data_failed")}).bind(this)))},AnimationItem.prototype.setData=function(t,e){var n={wrapper:t,animationData:e?"object"==typeof e?e:JSON.parse(e):null},r=t.attributes;n.path=r.getNamedItem("data-animation-path")?r.getNamedItem("data-animation-path").value:r.getNamedItem("data-bm-path")?r.getNamedItem("data-bm-path").value:r.getNamedItem("bm-path")?r.getNamedItem("bm-path").value:"",n.animType=r.getNamedItem("data-anim-type")?r.getNamedItem("data-anim-type").value:r.getNamedItem("data-bm-type")?r.getNamedItem("data-bm-type").value:r.getNamedItem("bm-type")?r.getNamedItem("bm-type").value:r.getNamedItem("data-bm-renderer")?r.getNamedItem("data-bm-renderer").value:r.getNamedItem("bm-renderer")?r.getNamedItem("bm-renderer").value:"canvas";var i=r.getNamedItem("data-anim-loop")?r.getNamedItem("data-anim-loop").value:r.getNamedItem("data-bm-loop")?r.getNamedItem("data-bm-loop").value:r.getNamedItem("bm-loop")?r.getNamedItem("bm-loop").value:"";""===i||(n.loop="false"!==i&&("true"===i||parseInt(i)));var o=r.getNamedItem("data-anim-autoplay")?r.getNamedItem("data-anim-autoplay").value:r.getNamedItem("data-bm-autoplay")?r.getNamedItem("data-bm-autoplay").value:!r.getNamedItem("bm-autoplay")||r.getNamedItem("bm-autoplay").value;n.autoplay="false"!==o,n.name=r.getNamedItem("data-name")?r.getNamedItem("data-name").value:r.getNamedItem("data-bm-name")?r.getNamedItem("data-bm-name").value:r.getNamedItem("bm-name")?r.getNamedItem("bm-name").value:"","false"===(r.getNamedItem("data-anim-prerender")?r.getNamedItem("data-anim-prerender").value:r.getNamedItem("data-bm-prerender")?r.getNamedItem("data-bm-prerender").value:r.getNamedItem("bm-prerender")?r.getNamedItem("bm-prerender").value:"")&&(n.prerender=!1),this.setParams(n)},AnimationItem.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip));var e,n,r=this.animationData.layers,i=r.length,o=t.layers,a=o.length;for(n=0;n<a;n+=1)for(e=0;e<i;){if(r[e].id==o[n].id){r[e]=o[n];break}e+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(i=t.assets.length,e=0;e<i;e+=1)this.animationData.assets.push(t.assets[e]);this.animationData.__complete=!1,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.renderer.includeLayers(t.layers),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||0===t.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var e=t.shift();this.timeCompleted=e.time*this.frameRate;var n=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,assetLoader.load(n,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(t){this.renderer&&(this.animationData=t,this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.renderer.configAnimation(t),t.assets||(t.assets=[]),this.renderer.searchExtraCompositions(t.assets),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.firstFrame=Math.round(this.animationData.ip),this.frameMult=this.animationData.fr/1e3,this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded())},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.loaded()?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){this.isLoaded||!this.renderer.globalData.fontManager.loaded()||!this.imagePreloader.loaded()&&"canvas"===this.renderer.rendererType||(this.isLoaded=!0,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play())},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(t){this.subframeEnabled=!!t},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.subframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame()},AnimationItem.prototype.renderFrame=function(){!1!==this.isLoaded&&this.renderer.renderFrame(this.currentFrame+this.firstFrame)},AnimationItem.prototype.play=function(t){t&&this.name!=t||!0===this.isPaused&&(this.isPaused=!1,this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(t){t&&this.name!=t||!1===this.isPaused&&(this.isPaused=!0,this._idle=!0,this.trigger("_idle"))},AnimationItem.prototype.togglePause=function(t){t&&this.name!=t||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(t){t&&this.name!=t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.goToAndStop=function(t,e,n){n&&this.name!=n||(this.setCurrentRawFrameValue(e?t:t*this.frameModifier),this.pause())},AnimationItem.prototype.goToAndPlay=function(t,e,n){this.goToAndStop(t,e,n),this.play()},AnimationItem.prototype.advanceTime=function(t){if(!0!==this.isPaused&&!1!==this.isLoaded){var e=this.currentRawFrame+t*this.frameModifier,n=!1;e>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(n=!0,e=this.totalFrames-1):e<0?this.checkSegments(e%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(n=!0,e=0):(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(e),n&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(t,e){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.timeCompleted=this.totalFrames=t[0]-t[1],this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.timeCompleted=this.totalFrames=t[1]-t[0],this.firstFrame=t[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(t,e){var n=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?n=t:this.currentRawFrame+this.firstFrame>e&&(n=e-t)),this.firstFrame=t,this.timeCompleted=this.totalFrames=e-t,-1!==n&&this.goToAndStop(n,!0)},AnimationItem.prototype.playSegments=function(t,e){if(e&&(this.segments.length=0),"object"==typeof t[0]){var n,r=t.length;for(n=0;n<r;n+=1)this.segments.push(t[n])}else this.segments.push(t);this.segments.length&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),t&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(t){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),t),!0)},AnimationItem.prototype.destroy=function(t){t&&this.name!=t||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=this.onLoopComplete=this.onComplete=this.onSegmentStart=this.onDestroy=null,this.renderer=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(t){var e="";if(t.e)e=t.p;else if(this.assetsPath){var n=t.p;-1!==n.indexOf("images/")&&(n=n.split("/")[1]),e=this.assetsPath+n}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e},AnimationItem.prototype.getAssetData=function(t){for(var e=0,n=this.assets.length;e<n;){if(t==this.assets[e].id)return this.assets[e];e+=1}},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(t){return t?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult));break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}"enterFrame"===t&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===t&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),"complete"===t&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult)),"segmentStart"===t&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),"destroy"===t&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))},extendPrototype([BaseRenderer],CanvasRenderer),CanvasRenderer.prototype.createShape=function(t){return new CVShapeElement(t,this.globalData,this)},CanvasRenderer.prototype.createText=function(t){return new CVTextElement(t,this.globalData,this)},CanvasRenderer.prototype.createImage=function(t){return new CVImageElement(t,this.globalData,this)},CanvasRenderer.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)},CanvasRenderer.prototype.createSolid=function(t){return new CVSolidElement(t,this.globalData,this)},CanvasRenderer.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRenderer.prototype.ctxTransform=function(t){if(1!==t[0]||0!==t[1]||0!==t[4]||1!==t[5]||0!==t[12]||0!==t[13])if(this.renderConfig.clearCanvas){this.transformMat.cloneFromProps(t);var e=this.contextData.cTr.props;this.transformMat.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var n=this.contextData.cTr.props;this.canvasContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13])}else this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13])},CanvasRenderer.prototype.ctxOpacity=function(t){if(!this.renderConfig.clearCanvas)return this.canvasContext.globalAlpha*=t<0?0:t,void(this.globalData.currentGlobalAlpha=this.contextData.cO);this.contextData.cO*=t<0?0:t,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)},CanvasRenderer.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRenderer.prototype.save=function(t){if(this.renderConfig.clearCanvas){t&&this.canvasContext.save();var e=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();var n,r=this.contextData.saved[this.contextData.cArrPos];for(n=0;n<16;n+=1)r[n]=e[n];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1}else this.canvasContext.save()},CanvasRenderer.prototype.restore=function(t){if(this.renderConfig.clearCanvas){t&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),this.contextData.cArrPos-=1;var e,n=this.contextData.saved[this.contextData.cArrPos],r=this.contextData.cTr.props;for(e=0;e<16;e+=1)r[e]=n[e];this.canvasContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13]),this.contextData.cO=n=this.contextData.savedOp[this.contextData.cArrPos],this.globalData.currentGlobalAlpha!==n&&(this.canvasContext.globalAlpha=n,this.globalData.currentGlobalAlpha=n)}else this.canvasContext.restore()},CanvasRenderer.prototype.configAnimation=function(t){this.animationItem.wrapper?(this.animationItem.container=createTag("canvas"),this.animationItem.container.style.width="100%",this.animationItem.container.style.height="100%",this.animationItem.container.style.transformOrigin=this.animationItem.container.style.mozTransformOrigin=this.animationItem.container.style.webkitTransformOrigin=this.animationItem.container.style["-webkit-transform"]="0px 0px 0px",this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className)):this.canvasContext=this.renderConfig.context,this.data=t,this.layers=t.layers,this.transformCanvas={w:t.w,h:t.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(t,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(t.layers.length),this.updateContainerSize()},CanvasRenderer.prototype.updateContainerSize=function(){var t,e,n,r;if(this.reset(),this.animationItem.wrapper&&this.animationItem.container?(e=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",(t=this.animationItem.wrapper.offsetWidth)*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",e*this.renderConfig.dpr)):(t=this.canvasContext.canvas.width*this.renderConfig.dpr,e=this.canvasContext.canvas.height*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var i=this.renderConfig.preserveAspectRatio.split(" "),o=i[1]||"meet",a=i[0]||"xMidYMid",s=a.substr(0,4),u=a.substr(4);(r=this.transformCanvas.w/this.transformCanvas.h)>(n=t/e)&&"meet"===o||r<n&&"slice"===o?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=e/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===s&&(r<n&&"meet"===o||r>n&&"slice"===o)?(t-this.transformCanvas.w*(e/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===s&&(r<n&&"meet"===o||r>n&&"slice"===o)?(t-this.transformCanvas.w*(e/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===u&&(r>n&&"meet"===o||r<n&&"slice"===o)?(e-this.transformCanvas.h*(t/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===u&&(r>n&&"meet"===o||r<n&&"slice"===o)?(e-this.transformCanvas.h*(t/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"==this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip()},CanvasRenderer.prototype.destroy=function(){var t;for(this.renderConfig.clearCanvas&&(this.animationItem.wrapper.innerHTML=""),t=(this.layers?this.layers.length:0)-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRenderer.prototype.renderFrame=function(t){if(!(this.renderedFrame==t&&!0===this.renderConfig.clearCanvas||this.destroyed||-1===t)){this.renderedFrame=t,this.globalData.frameNum=t-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas,this.globalData.projectInterface.currentFrame=t;var e,n=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=0;e<n;e++)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),e=n-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRenderer.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!=this.layers[t].ty){var n=this.createItem(this.layers[t],this,this.globalData);e[t]=n,n.initExpressions()}},CanvasRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([BaseRenderer],HybridRenderer),HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRenderer.prototype.appendElementInPos=function(t,e){var n=t.getBaseElement();if(n){var r=this.layers[e];if(r.ddd&&this.supports3d)this.addTo3dContainer(n,e);else if(this.threeDElements)this.addTo3dContainer(n,e);else{for(var i,o,a=0;a<e;)this.elements[a]&&!0!==this.elements[a]&&this.elements[a].getBaseElement&&(o=this.elements[a],i=(this.layers[a].ddd?this.getThreeDContainerByPos(a):o.getBaseElement())||i),a+=1;i?r.ddd&&this.supports3d||this.layerElement.insertBefore(n,i):r.ddd&&this.supports3d||this.layerElement.appendChild(n)}}},HybridRenderer.prototype.createShape=function(t){return this.supports3d?new HShapeElement(t,this.globalData,this):new SVGShapeElement(t,this.globalData,this)},HybridRenderer.prototype.createText=function(t){return this.supports3d?new HTextElement(t,this.globalData,this):new SVGTextElement(t,this.globalData,this)},HybridRenderer.prototype.createCamera=function(t){return this.camera=new HCameraElement(t,this.globalData,this),this.camera},HybridRenderer.prototype.createImage=function(t){return this.supports3d?new HImageElement(t,this.globalData,this):new IImageElement(t,this.globalData,this)},HybridRenderer.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)},HybridRenderer.prototype.createSolid=function(t){return this.supports3d?new HSolidElement(t,this.globalData,this):new ISolidElement(t,this.globalData,this)},HybridRenderer.prototype.createNull=SVGRenderer.prototype.createNull,HybridRenderer.prototype.getThreeDContainerByPos=function(t){for(var e=0,n=this.threeDElements.length;e<n;){if(this.threeDElements[e].startPos<=t&&this.threeDElements[e].endPos>=t)return this.threeDElements[e].perspectiveElem;e+=1}},HybridRenderer.prototype.createThreeDContainer=function(t,e){var n=createTag("div");styleDiv(n);var r=createTag("div");styleDiv(r),"3d"===e&&(n.style.width=this.globalData.compSize.w+"px",n.style.height=this.globalData.compSize.h+"px",n.style.transformOrigin=n.style.mozTransformOrigin=n.style.webkitTransformOrigin="50% 50%",r.style.transform=r.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)"),n.appendChild(r);var i={container:r,perspectiveElem:n,startPos:t,endPos:t,type:e};return this.threeDElements.push(i),i},HybridRenderer.prototype.build3dContainers=function(){var t,e,n=this.layers.length,r="";for(t=0;t<n;t+=1)this.layers[t].ddd&&3!==this.layers[t].ty?("3d"!==r&&(r="3d",e=this.createThreeDContainer(t,"3d")),e.endPos=Math.max(e.endPos,t)):("2d"!==r&&(r="2d",e=this.createThreeDContainer(t,"2d")),e.endPos=Math.max(e.endPos,t));for(t=(n=this.threeDElements.length)-1;t>=0;t--)this.resizerElem.appendChild(this.threeDElements[t].perspectiveElem)},HybridRenderer.prototype.addTo3dContainer=function(t,e){for(var n=0,r=this.threeDElements.length;n<r;){if(e<=this.threeDElements[n].endPos){for(var i,o=this.threeDElements[n].startPos;o<e;)this.elements[o]&&this.elements[o].getBaseElement&&(i=this.elements[o].getBaseElement()),o+=1;i?this.threeDElements[n].container.insertBefore(t,i):this.threeDElements[n].container.appendChild(t);break}n+=1}},HybridRenderer.prototype.configAnimation=function(t){var e=createTag("div"),n=this.animationItem.wrapper;e.style.width=t.w+"px",e.style.height=t.h+"px",this.resizerElem=e,styleDiv(e),e.style.transformStyle=e.style.webkitTransformStyle=e.style.mozTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),n.appendChild(e),e.style.overflow="hidden";var r=createNS("svg");r.setAttribute("width","1"),r.setAttribute("height","1"),styleDiv(r),this.resizerElem.appendChild(r);var i=createNS("defs");r.appendChild(i),this.data=t,this.setupGlobalData(t,r),this.globalData.defs=i,this.layers=t.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.animationItem.container=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t++)this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRenderer.prototype.updateContainerSize=function(){var t,e,n,r,i=this.animationItem.wrapper.offsetWidth,o=this.animationItem.wrapper.offsetHeight;this.globalData.compSize.w/this.globalData.compSize.h>i/o?(t=i/this.globalData.compSize.w,e=i/this.globalData.compSize.w,n=0,r=(o-this.globalData.compSize.h*(i/this.globalData.compSize.w))/2):(t=o/this.globalData.compSize.h,e=o/this.globalData.compSize.h,n=(i-this.globalData.compSize.w*(o/this.globalData.compSize.h))/2,r=0),this.resizerElem.style.transform=this.resizerElem.style.webkitTransform="matrix3d("+t+",0,0,0,0,"+e+",0,0,0,0,1,0,"+n+","+r+",0,1)"},HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"},HybridRenderer.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var t,e=this.globalData.compSize.w,n=this.globalData.compSize.h,r=this.threeDElements.length;for(t=0;t<r;t+=1)this.threeDElements[t].perspectiveElem.style.perspective=this.threeDElements[t].perspectiveElem.style.webkitPerspective=Math.sqrt(Math.pow(e,2)+Math.pow(n,2))+"px"}},HybridRenderer.prototype.searchExtraCompositions=function(t){var e,n=t.length,r=createTag("div");for(e=0;e<n;e+=1)if(t[e].xt){var i=this.createComp(t[e],r,this.globalData.comp,null);i.initExpressions(),this.globalData.projectInterface.registerComposition(i)}},CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,CVContextData.prototype.duplicate=function(){var t=2*this._length,e=this.savedOp;this.savedOp=createTypedArray("float32",t),this.savedOp.set(e);var n=0;for(n=this._length;n<t;n+=1)this.saved[n]=createTypedArray("float32",16);this._length=t},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var t=this.globalData;if(t.blendMode!==this.data.bm){t.blendMode=this.data.bm;var e=this.getBlendMode();t.canvasContext.globalCompositeOperation=e}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){this.hidden||this.data.hd||(this.renderTransform(),this.renderRenderable(),this.setBlendMode(),this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var t=createTag("canvas");t.width=this.assetData.w,t.height=this.assetData.h;var e,n,r=t.getContext("2d"),i=this.img.width,o=this.img.height,a=i/o,s=this.assetData.w/this.assetData.h,u=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;a>s&&"xMidYMid slice"===u||a<s&&"xMidYMid slice"!==u?e=(n=o)*s:n=(e=i)/s,r.drawImage(this.img,(i-e)/2,(o-n)/2,e,n,0,0,this.assetData.w,this.assetData.h),this.img=t}},CVImageElement.prototype.renderInnerContent=function(t){this.failed||this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([CanvasRenderer,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var t;for(t=this.layers.length-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},CVCompElement.prototype.destroy=function(){var t;for(t=this.layers.length-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.layers=null,this.elements=null},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var t,e,n,r,i=this.element.finalTransform.mat,o=this.element.canvasContext,a=this.masksProperties.length;for(o.beginPath(),t=0;t<a;t++)if("n"!==this.masksProperties[t].mode){this.masksProperties[t].inv&&(o.moveTo(0,0),o.lineTo(this.element.globalData.compSize.w,0),o.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),o.lineTo(0,this.element.globalData.compSize.h),o.lineTo(0,0)),e=i.applyToPointArray((r=this.viewData[t].v).v[0][0],r.v[0][1],0),o.moveTo(e[0],e[1]);var s,u=r._length;for(s=1;s<u;s++)n=i.applyToTriplePoints(r.o[s-1],r.i[s],r.v[s]),o.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);n=i.applyToTriplePoints(r.o[s-1],r.i[0],r.v[0]),o.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5])}this.element.globalData.renderer.save(!0),o.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(t,e){var n=this.transformsManager.addTransformSequence(e),r={data:t,type:t.ty,preTransforms:n,transforms:[],elements:[],closed:!0===t.hd},i={};if("fl"==t.ty||"st"==t.ty?(i.c=PropertyFactory.getProp(this,t.c,1,255,this),i.c.k||(r.co="rgb("+bm_floor(i.c.v[0])+","+bm_floor(i.c.v[1])+","+bm_floor(i.c.v[2])+")")):"gf"!==t.ty&&"gs"!==t.ty||(i.s=PropertyFactory.getProp(this,t.s,1,null,this),i.e=PropertyFactory.getProp(this,t.e,1,null,this),i.h=PropertyFactory.getProp(this,t.h||{k:0},0,.01,this),i.a=PropertyFactory.getProp(this,t.a||{k:0},0,degToRads,this),i.g=new GradientProperty(this,t.g,this)),i.o=PropertyFactory.getProp(this,t.o,0,.01,this),"st"==t.ty||"gs"==t.ty){if(r.lc=this.lcEnum[t.lc]||"round",r.lj=this.ljEnum[t.lj]||"round",1==t.lj&&(r.ml=t.ml),i.w=PropertyFactory.getProp(this,t.w,0,null,this),i.w.k||(r.wi=i.w.v),t.d){var o=new DashProperty(this,t.d,"canvas");i.d=o,i.d.k||(r.da=i.d.dashArray,r.do=i.d.dashoffset[0])}}else r.r=2===t.r?"evenodd":"nonzero";return this.stylesList.push(r),i.style=r,i},CVShapeElement.prototype.createGroupElement=function(t){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(t){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,t.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,t,this)}}},CVShapeElement.prototype.createShapeElement=function(t){var e=new CVShapeData(this,t,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(t){var e,n=this.stylesList.length;for(e=0;e<n;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.push(t)},CVShapeElement.prototype.closeStyles=function(t){var e,n=t.length;for(e=0;e<n;e+=1)t[e].closed=!0},CVShapeElement.prototype.searchShapes=function(t,e,n,r,i){var o,a,s,u,l,c,h=t.length-1,p=[],f=[],d=[].concat(i);for(o=h;o>=0;o-=1){if((u=this.searchProcessedElement(t[o]))?e[o]=n[u-1]:t[o]._shouldRender=r,"fl"==t[o].ty||"st"==t[o].ty||"gf"==t[o].ty||"gs"==t[o].ty)u?e[o].style.closed=!1:e[o]=this.createStyleElement(t[o],d),p.push(e[o].style);else if("gr"==t[o].ty){if(u)for(s=e[o].it.length,a=0;a<s;a+=1)e[o].prevViewData[a]=e[o].it[a];else e[o]=this.createGroupElement(t[o]);this.searchShapes(t[o].it,e[o].it,e[o].prevViewData,r,d)}else"tr"==t[o].ty?u||(c=this.createTransformElement(t[o]),e[o]=c,d.push(c),this.addTransformToStyleList(c)):"sh"==t[o].ty||"rc"==t[o].ty||"el"==t[o].ty||"sr"==t[o].ty?u||(e[o]=this.createShapeElement(t[o])):"tm"==t[o].ty||"rd"==t[o].ty?(u?(l=e[o]).closed=!1:((l=ShapeModifiers.getModifier(t[o].ty)).init(this,t[o]),e[o]=l,this.shapeModifiers.push(l)),f.push(l)):"rp"==t[o].ty&&(u?(l=e[o]).closed=!0:(l=ShapeModifiers.getModifier(t[o].ty),e[o]=l,l.init(this,t,o,e),this.shapeModifiers.push(l),r=!1),f.push(l));this.addProcessedElement(t[o],o+1)}for(this.closeStyles(p),h=f.length,o=0;o<h;o+=1)f[o].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(t,e){(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var t,e,n,r,i,o,a,s,u,l=this.stylesList.length,c=this.globalData.renderer,h=this.globalData.canvasContext;for(t=0;t<l;t+=1)if(("st"!==(s=(u=this.stylesList[t]).type)&&"gs"!==s||0!==u.wi)&&u.data._shouldRender&&0!==u.coOp&&0!==this.globalData.currentGlobalAlpha){for(c.save(),o=u.elements,"st"===s||"gs"===s?(h.strokeStyle="st"===s?u.co:u.grd,h.lineWidth=u.wi,h.lineCap=u.lc,h.lineJoin=u.lj,h.miterLimit=u.ml||0):h.fillStyle="fl"===s?u.co:u.grd,c.ctxOpacity(u.coOp),"st"!==s&&"gs"!==s&&h.beginPath(),c.ctxTransform(u.preTransforms.finalTransform.props),n=o.length,e=0;e<n;e+=1){for("st"!==s&&"gs"!==s||(h.beginPath(),u.da&&(h.setLineDash(u.da),h.lineDashOffset=u.do)),i=(a=o[e].trNodes).length,r=0;r<i;r+=1)"m"==a[r].t?h.moveTo(a[r].p[0],a[r].p[1]):"c"==a[r].t?h.bezierCurveTo(a[r].pts[0],a[r].pts[1],a[r].pts[2],a[r].pts[3],a[r].pts[4],a[r].pts[5]):h.closePath();"st"!==s&&"gs"!==s||(h.stroke(),u.da&&h.setLineDash(this.dashResetter))}"st"!==s&&"gs"!==s&&h.fill(u.r),c.restore()}},CVShapeElement.prototype.renderShape=function(t,e,n,r){var i,o;for(o=t,i=e.length-1;i>=0;i-=1)"tr"==e[i].ty?this.renderShapeTransform(t,o=n[i].transform):"sh"==e[i].ty||"el"==e[i].ty||"rc"==e[i].ty||"sr"==e[i].ty?this.renderPath(e[i],n[i],o):"fl"==e[i].ty?this.renderFill(e[i],n[i],o):"st"==e[i].ty?this.renderStroke(e[i],n[i],o):"gf"==e[i].ty||"gs"==e[i].ty?this.renderGradientFill(e[i],n[i],o):"gr"==e[i].ty&&this.renderShape(o,e[i].it,n[i].it);r&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){var n,r,i,o=t.trNodes,a=e.paths,s=a._length;o.length=0;var u=t.transforms.finalTransform;for(i=0;i<s;i+=1){var l=a.shapes[i];if(l&&l.v){for(r=l._length,n=1;n<r;n+=1)1===n&&o.push({t:"m",p:u.applyToPointArray(l.v[0][0],l.v[0][1],0)}),o.push({t:"c",pts:u.applyToTriplePoints(l.o[n-1],l.i[n],l.v[n])});1===r&&o.push({t:"m",p:u.applyToPointArray(l.v[0][0],l.v[0][1],0)}),l.c&&r&&(o.push({t:"c",pts:u.applyToTriplePoints(l.o[n-1],l.i[0],l.v[0])}),o.push({t:"z"}))}}t.trNodes=o}},CVShapeElement.prototype.renderPath=function(t,e,n){if(!0!==t.hd&&t._shouldRender){var r,i=e.styledShapes.length;for(r=0;r<i;r+=1)this.renderStyledShape(e.styledShapes[r],e.sh)}},CVShapeElement.prototype.renderFill=function(t,e,n){var r=e.style;(e.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o._mdf||n._opMdf||this._isFirstFrame)&&(r.coOp=e.o.v*n.opacity)},CVShapeElement.prototype.renderGradientFill=function(t,e,n){var r=e.style;if(!r.grd||e.g._mdf||e.s._mdf||e.e._mdf||1!==t.t&&(e.h._mdf||e.a._mdf)){var i=this.globalData.canvasContext,o=e.s.v,a=e.e.v;if(1===t.t)p=i.createLinearGradient(o[0],o[1],a[0],a[1]);else var s=Math.sqrt(Math.pow(o[0]-a[0],2)+Math.pow(o[1]-a[1],2)),u=Math.atan2(a[1]-o[1],a[0]-o[0]),l=s*(e.h.v>=1?.99:e.h.v<=-1?-.99:e.h.v),c=Math.cos(u+e.a.v)*l+o[0],h=Math.sin(u+e.a.v)*l+o[1],p=i.createRadialGradient(c,h,0,o[0],o[1],s);var f,d=t.g.p,m=e.g.c,g=1;for(f=0;f<d;f+=1)e.g._hasOpacity&&e.g._collapsable&&(g=e.g.o[2*f+1]),p.addColorStop(m[4*f]/100,"rgba("+m[4*f+1]+","+m[4*f+2]+","+m[4*f+3]+","+g+")");r.grd=p}r.coOp=e.o.v*n.opacity},CVShapeElement.prototype.renderStroke=function(t,e,n){var r=e.style,i=e.d;i&&(i._mdf||this._isFirstFrame)&&(r.da=i.dashArray,r.do=i.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o._mdf||n._opMdf||this._isFirstFrame)&&(r.coOp=e.o.v*n.opacity),(e.w._mdf||this._isFirstFrame)&&(r.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var t=this.canvasContext;t.fillStyle=this.data.sc,t.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=!1;t.fc?(e=!0,this.values.fill=this.buildColor(t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var n=!1;t.sc&&(n=!0,this.values.stroke=this.buildColor(t.sc),this.values.sWidth=t.sw);var r,i,o=this.globalData.fontManager.getFontByName(t.f),a=t.l,s=this.mHelper;this.stroke=n,this.values.fValue=t.finalSize+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily,i=t.finalText.length;var u,l,c,h,p,f,d,m,g,y,v=this.data.singleShape,b=t.tr/1e3*t.finalSize,_=0,w=0,x=!0,C=0;for(r=0;r<i;r+=1){for(l=(u=this.globalData.fontManager.getCharData(t.finalText[r],o.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily))&&u.data||{},s.reset(),v&&a[r].n&&(_=-b,w+=t.yOffset,w+=x?1:0,x=!1),d=(p=l.shapes?l.shapes[0].it:[]).length,s.scale(t.finalSize/100,t.finalSize/100),v&&this.applyTextPropertiesToMatrix(t,s,a[r].line,_,w),g=createSizedArray(d),f=0;f<d;f+=1){for(h=p[f].ks.k.i.length,m=p[f].ks.k,y=[],c=1;c<h;c+=1)1==c&&y.push(s.applyToX(m.v[0][0],m.v[0][1],0),s.applyToY(m.v[0][0],m.v[0][1],0)),y.push(s.applyToX(m.o[c-1][0],m.o[c-1][1],0),s.applyToY(m.o[c-1][0],m.o[c-1][1],0),s.applyToX(m.i[c][0],m.i[c][1],0),s.applyToY(m.i[c][0],m.i[c][1],0),s.applyToX(m.v[c][0],m.v[c][1],0),s.applyToY(m.v[c][0],m.v[c][1],0));y.push(s.applyToX(m.o[c-1][0],m.o[c-1][1],0),s.applyToY(m.o[c-1][0],m.o[c-1][1],0),s.applyToX(m.i[0][0],m.i[0][1],0),s.applyToY(m.i[0][0],m.i[0][1],0),s.applyToX(m.v[0][0],m.v[0][1],0),s.applyToY(m.v[0][0],m.v[0][1],0)),g[f]=y}v&&(_+=a[r].l,_+=b),this.textSpans[C]?this.textSpans[C].elem=g:this.textSpans[C]={elem:g},C+=1}},CVTextElement.prototype.renderInnerContent=function(){var t,e,n,r,i,o,a=this.canvasContext;a.font=this.values.fValue,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var s,u=this.textAnimator.renderedLetters,l=this.textProperty.currentData.l;e=l.length;var c,h,p=null,f=null,d=null;for(t=0;t<e;t+=1)if(!l[t].n){if((s=u[t])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(s.p),this.globalData.renderer.ctxOpacity(s.o)),this.fill){for(s&&s.fc?p!==s.fc&&(p=s.fc,a.fillStyle=s.fc):p!==this.values.fill&&(p=this.values.fill,a.fillStyle=this.values.fill),r=(c=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<r;n+=1)for(o=(h=c[n]).length,this.globalData.canvasContext.moveTo(h[0],h[1]),i=2;i<o;i+=6)this.globalData.canvasContext.bezierCurveTo(h[i],h[i+1],h[i+2],h[i+3],h[i+4],h[i+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(s&&s.sw?d!==s.sw&&(d=s.sw,a.lineWidth=s.sw):d!==this.values.sWidth&&(d=this.values.sWidth,a.lineWidth=this.values.sWidth),s&&s.sc?f!==s.sc&&(f=s.sc,a.strokeStyle=s.sc):f!==this.values.stroke&&(f=this.values.stroke,a.strokeStyle=this.values.stroke),r=(c=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<r;n+=1)for(o=(h=c[n]).length,this.globalData.canvasContext.moveTo(h[0],h[1]),i=2;i<o;i+=6)this.globalData.canvasContext.bezierCurveTo(h[i],h[i+1],h[i+2],h[i+3],h[i+4],h[i+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}s&&this.globalData.renderer.restore()}},CVEffects.prototype.renderFrame=function(){},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&(this.transformedElement.style.transform=this.transformedElement.style.webkitTransform=this.finalTransform.mat.toCSS()),this.finalTransform._opMdf&&(this.transformedElement.style.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var t;this.data.hasMask?((t=createNS("rect")).setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((t=createTag("div")).style.width=this.data.sw+"px",t.style.height=this.data.sh+"px",t.style.backgroundColor=this.data.sc),this.layerElement.appendChild(t)},extendPrototype([HybridRenderer,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(t,e){for(var n,r=0;r<e;)this.elements[r]&&this.elements[r].getBaseElement&&(n=this.elements[r].getBaseElement()),r+=1;n?this.layerElement.insertBefore(t,n):this.layerElement.appendChild(t)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var t;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),t=this.svgElement;else{t=createNS("svg");var e=this.comp.data?this.comp.data:this.globalData.compSize;t.setAttribute("width",e.w),t.setAttribute("height",e.h),t.appendChild(this.shapesContainer),this.layerElement.appendChild(t)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=t},HShapeElement.prototype.getTransformedPoint=function(t,e){var n,r=t.length;for(n=0;n<r;n+=1)e=t[n].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(t,e){var n,r,i,o,a,s=t.sh.v,u=t.transformers,l=s._length;if(!(l<=1)){for(n=0;n<l-1;n+=1)r=this.getTransformedPoint(u,s.v[n]),i=this.getTransformedPoint(u,s.o[n]),o=this.getTransformedPoint(u,s.i[n+1]),a=this.getTransformedPoint(u,s.v[n+1]),this.checkBounds(r,i,o,a,e);s.c&&(r=this.getTransformedPoint(u,s.v[n]),i=this.getTransformedPoint(u,s.o[n]),o=this.getTransformedPoint(u,s.i[0]),a=this.getTransformedPoint(u,s.v[0]),this.checkBounds(r,i,o,a,e))}},HShapeElement.prototype.checkBounds=function(t,e,n,r,i){this.getBoundsOfCurve(t,e,n,r);var o=this.shapeBoundingBox;i.x=bm_min(o.left,i.x),i.xMax=bm_max(o.right,i.xMax),i.y=bm_min(o.top,i.y),i.yMax=bm_max(o.bottom,i.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(t,e,n,r){for(var i,o,a,s,u,l,c,h=[[t[0],r[0]],[t[1],r[1]]],p=0;p<2;++p)if(o=6*t[p]-12*e[p]+6*n[p],i=-3*t[p]+9*e[p]-9*n[p]+3*r[p],a=3*e[p]-3*t[p],o|=0,a|=0,0!=(i|=0))(u=o*o-4*a*i)<0||(0<(l=(-o+bm_sqrt(u))/(2*i))&&l<1&&h[p].push(this.calculateF(l,t,e,n,r,p)),0<(c=(-o-bm_sqrt(u))/(2*i))&&c<1&&h[p].push(this.calculateF(c,t,e,n,r,p)));else{if(0===o)continue;0<(s=-a/o)&&s<1&&h[p].push(this.calculateF(s,t,e,n,r,p))}this.shapeBoundingBox.left=bm_min.apply(null,h[0]),this.shapeBoundingBox.top=bm_min.apply(null,h[1]),this.shapeBoundingBox.right=bm_max.apply(null,h[0]),this.shapeBoundingBox.bottom=bm_max.apply(null,h[1])},HShapeElement.prototype.calculateF=function(t,e,n,r,i,o){return bm_pow(1-t,3)*e[o]+3*bm_pow(1-t,2)*t*n[o]+3*(1-t)*bm_pow(t,2)*r[o]+bm_pow(t,3)*i[o]},HShapeElement.prototype.calculateBoundingBox=function(t,e){var n,r=t.length;for(n=0;n<r;n+=1)t[n]&&t[n].sh?this.calculateShapeBoundingBox(t[n],e):t[n]&&t[n].it&&this.calculateBoundingBox(t[n].it,e)},HShapeElement.prototype.currentBoxContains=function(t){return this.currentBBox.x<=t.x&&this.currentBBox.y<=t.y&&this.currentBBox.width+this.currentBBox.x>=t.x+t.width&&this.currentBBox.height+this.currentBBox.y>=t.y+t.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var t=this.tempBoundingBox,e=999999;if(t.x=e,t.xMax=-e,t.y=e,t.yMax=-e,this.calculateBoundingBox(this.itemsData,t),t.width=t.xMax<t.x?0:t.xMax-t.x,t.height=t.yMax<t.y?0:t.yMax-t.y,this.currentBoxContains(t))return;var n=!1;this.currentBBox.w!==t.width&&(this.currentBBox.w=t.width,this.shapeCont.setAttribute("width",t.width),n=!0),this.currentBBox.h!==t.height&&(this.currentBBox.h=t.height,this.shapeCont.setAttribute("height",t.height),n=!0),(n||this.currentBBox.x!==t.x||this.currentBBox.y!==t.y)&&(this.currentBBox.w=t.width,this.currentBBox.h=t.height,this.currentBBox.x=t.x,this.currentBBox.y=t.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.shapeCont.style.transform=this.shapeCont.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var t=createNS("g");this.maskedElement.appendChild(t),this.innerElem=t}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=this.innerElem.style;e.color=e.fill=t.fc?this.buildColor(t.fc):"rgba(0,0,0,0)",t.sc&&(e.stroke=this.buildColor(t.sc),e.strokeWidth=t.sw+"px");var n,r,i=this.globalData.fontManager.getFontByName(t.f);if(!this.globalData.fontManager.chars)if(e.fontSize=t.finalSize+"px",e.lineHeight=t.finalSize+"px",i.fClass)this.innerElem.className=i.fClass;else{e.fontFamily=i.fFamily;var o=t.fWeight;e.fontStyle=t.fStyle,e.fontWeight=o}var a,s,u,l=t.l;r=l.length;var c,h=this.mHelper,p="",f=0;for(n=0;n<r;n+=1){if(this.globalData.fontManager.chars?(this.textPaths[f]?a=this.textPaths[f]:((a=createNS("path")).setAttribute("stroke-linecap","butt"),a.setAttribute("stroke-linejoin","round"),a.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[f]?u=(s=this.textSpans[f]).children[0]:(s=createTag("div"),(u=createNS("svg")).appendChild(a),styleDiv(s)))):this.isMasked?a=this.textPaths[f]?this.textPaths[f]:createNS("text"):this.textSpans[f]?(s=this.textSpans[f],a=this.textPaths[f]):(styleDiv(s=createTag("span")),styleDiv(a=createTag("span")),s.appendChild(a)),this.globalData.fontManager.chars){var d,m=this.globalData.fontManager.getCharData(t.finalText[n],i.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily);if(d=m?m.data:null,h.reset(),d&&d.shapes&&(c=d.shapes[0].it,h.scale(t.finalSize/100,t.finalSize/100),p=this.createPathShape(h,c),a.setAttribute("d",p)),this.isMasked)this.innerElem.appendChild(a);else{if(this.innerElem.appendChild(s),d&&d.shapes){document.body.appendChild(u);var g=u.getBBox();u.setAttribute("width",g.width+2),u.setAttribute("height",g.height+2),u.setAttribute("viewBox",g.x-1+" "+(g.y-1)+" "+(g.width+2)+" "+(g.height+2)),u.style.transform=u.style.webkitTransform="translate("+(g.x-1)+"px,"+(g.y-1)+"px)",l[n].yOffset=g.y-1}else u.setAttribute("width",1),u.setAttribute("height",1);s.appendChild(u)}}else a.textContent=l[n].val,a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked?this.innerElem.appendChild(a):(this.innerElem.appendChild(s),a.style.transform=a.style.webkitTransform="translate3d(0,"+-t.finalSize/1.2+"px,0)");this.textSpans[f]=this.isMasked?a:s,this.textSpans[f].style.display="block",this.textPaths[f]=a,f+=1}for(;f<this.textSpans.length;)this.textSpans[f].style.display="none",f+=1},HTextElement.prototype.renderInnerContent=function(){if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;this.isMasked&&this.finalTransform._matMdf&&(this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),this.svgElement.style.transform=this.svgElement.style.webkitTransform="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)")}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var t,e,n,r,i,o=0,a=this.textAnimator.renderedLetters,s=this.textProperty.currentData.l;for(e=s.length,t=0;t<e;t+=1)s[t].n?o+=1:(r=this.textSpans[t],i=this.textPaths[t],n=a[o],o+=1,n._mdf.m&&(this.isMasked?r.setAttribute("transform",n.m):r.style.transform=r.style.webkitTransform=n.m),r.style.opacity=n.o,n.sw&&n._mdf.sw&&i.setAttribute("stroke-width",n.sw),n.sc&&n._mdf.sc&&i.setAttribute("stroke",n.sc),n.fc&&n._mdf.fc&&(i.setAttribute("fill",n.fc),i.style.color=n.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var u=this.innerElem.getBBox();this.currentBBox.w!==u.width&&(this.currentBBox.w=u.width,this.svgElement.setAttribute("width",u.width)),this.currentBBox.h!==u.height&&(this.currentBBox.h=u.height,this.svgElement.setAttribute("height",u.height)),this.currentBBox.w===u.width+2&&this.currentBBox.h===u.height+2&&this.currentBBox.x===u.x-1&&this.currentBBox.y===u.y-1||(this.currentBBox.w=u.width+2,this.currentBBox.h=u.height+2,this.currentBBox.x=u.x-1,this.currentBBox.y=u.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.svgElement.style.transform=this.svgElement.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData),e=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(e),e.src=t,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var t,e,n=this.comp.threeDElements.length;for(t=0;t<n;t+=1)"3d"===(e=this.comp.threeDElements[t]).type&&(e.perspectiveElem.style.perspective=e.perspectiveElem.style.webkitPerspective=this.pe.v+"px",e.container.style.transformOrigin=e.container.style.mozTransformOrigin=e.container.style.webkitTransformOrigin="0px 0px 0px",e.perspectiveElem.style.transform=e.perspectiveElem.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)")},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var t,e,n=this._isFirstFrame;if(this.hierarchy)for(e=this.hierarchy.length,t=0;t<e;t+=1)n=this.hierarchy[t].finalTransform.mProp._mdf||n;if(n||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(t=e=this.hierarchy.length-1;t>=0;t-=1){var r=this.hierarchy[t].finalTransform.mProp;this.mat.translate(-r.p.v[0],-r.p.v[1],r.p.v[2]),this.mat.rotateX(-r.or.v[0]).rotateY(-r.or.v[1]).rotateZ(r.or.v[2]),this.mat.rotateX(-r.rx.v).rotateY(-r.ry.v).rotateZ(r.rz.v),this.mat.scale(1/r.s.v[0],1/r.s.v[1],1/r.s.v[2]),this.mat.translate(r.a.v[0],r.a.v[1],r.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var i=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]],o=Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2)+Math.pow(i[2],2)),a=[i[0]/o,i[1]/o,i[2]/o],s=Math.sqrt(a[2]*a[2]+a[0]*a[0]),u=Math.atan2(a[1],s),l=Math.atan2(a[0],-a[2]);this.mat.rotateY(l).rotateX(-u)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var c=!this._prevMat.equals(this.mat);if((c||this.pe._mdf)&&this.comp.threeDElements){var h;for(e=this.comp.threeDElements.length,t=0;t<e;t+=1)"3d"===(h=this.comp.threeDElements[t]).type&&(c&&(h.container.style.transform=h.container.style.webkitTransform=this.mat.toCSS()),this.pe._mdf&&(h.perspectiveElem.style.perspective=h.perspectiveElem.style.webkitPerspective=this.pe.v+"px"));this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.initExpressions=function(){},HCameraElement.prototype.getBaseElement=function(){return null},HEffects.prototype.renderFrame=function(){};var Expressions={initExpressions:function(t){var e=0,n=[];t.renderer.compInterface=CompExpressionInterface(t.renderer),t.renderer.globalData.projectInterface.registerComposition(t.renderer),t.renderer.globalData.pushExpression=function(){e+=1},t.renderer.globalData.popExpression=function(){0==(e-=1)&&function(){var t,e=n.length;for(t=0;t<e;t+=1)n[t].release();n.length=0}()},t.renderer.globalData.registerExpressionProperty=function(t){-1===n.indexOf(t)&&n.push(t)}}};expressionsPlugin=Expressions;var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null;function $bm_isInstanceOfArray(t){return t.constructor===Array||t.constructor===Float32Array}function isNumerable(t,e){return"number"===t||"boolean"===t||"string"===t||e instanceof Number}function $bm_neg(t){var e=typeof t;if("number"===e||"boolean"===e||t instanceof Number)return-t;if($bm_isInstanceOfArray(t)){for(var n,r=t.length,i=[];n<r;n+=1)i[n]=-t[n];return i}}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(t,e){var n=typeof t,r=typeof e;if("string"===n||"string"===r)return t+e;if(isNumerable(n,t)&&isNumerable(r,e))return t+e;if($bm_isInstanceOfArray(t)&&isNumerable(r,e))return(t=t.slice(0))[0]=t[0]+e,t;if(isNumerable(n,t)&&$bm_isInstanceOfArray(e))return(e=e.slice(0))[0]=t+e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var i=0,o=t.length,a=e.length,s=[];i<o||i<a;)s[i]=("number"==typeof t[i]||t[i]instanceof Number)&&("number"==typeof e[i]||e[i]instanceof Number)?t[i]+e[i]:void 0===e[i]?t[i]:t[i]||e[i],i+=1;return s}return 0}var add=sum;function sub(t,e){var n=typeof t,r=typeof e;if(isNumerable(n,t)&&isNumerable(r,e))return"string"===n&&parseInt(t),"string"===r&&parseInt(e),t-e;if($bm_isInstanceOfArray(t)&&isNumerable(r,e))return t.slice(0)[0]=t[0]-e,t;if(isNumerable(n,t)&&$bm_isInstanceOfArray(e))return e.slice(0)[0]=t-e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var i=t.length,o=e.length,a=[];0<i||0<o;)a[0]=("number"==typeof t[0]||t[0]instanceof Number)&&("number"==typeof e[0]||e[0]instanceof Number)?t[0]-e[0]:void 0===e[0]?t[0]:t[0]||e[0];return a}return 0}function mul(t,e){var n,r,i=typeof t,o=typeof e;if(isNumerable(i,t)&&isNumerable(o,e))return t*e;if($bm_isInstanceOfArray(t)&&isNumerable(o,e)){for(createTypedArray("float32",t.length);r<void 0;r+=1)n[r]=t[r]*e;return n}if(isNumerable(i,t)&&$bm_isInstanceOfArray(e)){for(createTypedArray("float32",e.length);r<void 0;r+=1)n[r]=t*e[r];return n}return 0}function div(t,e){var n,r,i=typeof t,o=typeof e;if(isNumerable(i,t)&&isNumerable(o,e))return t/e;if($bm_isInstanceOfArray(t)&&isNumerable(o,e)){for(createTypedArray("float32",t.length);r<void 0;r+=1)n[r]=t[r]/e;return n}if(isNumerable(i,t)&&$bm_isInstanceOfArray(e)){for(createTypedArray("float32",e.length);r<void 0;r+=1)n[r]=t/e[r];return n}return 0}function mod(t,e){return"string"==typeof t&&parseInt(t),"string"==typeof e&&parseInt(e),t%e}function clamp(t,e,n){return Math.min(Math.max(t,e),n)}function radiansToDegrees(t){return t/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(t){return t*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(t,e){if("number"==typeof t||t instanceof Number)return Math.abs(t-(e||0));for(var n,r=Math.min(t.length,e.length);n<r;n+=1)Math.pow(e[n]-t[n],2);return Math.sqrt(0)}function normalize(t){return div(t,length(t))}function rgbToHsl(t){var e=t[0],n=t[1],r=t[2];return[void 0,void 0,(Math.max(e,n,r)+Math.min(e,n,r))/2,t[3]]}function hue2rgb(t,e,n){return n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function hslToRgb(t){var e=t[0],n=t[1],r=t[2];if(0===n);else{var i=r<.5?r*(1+n):r+n-r*n,o=2*r-i;hue2rgb(o,i,e+1/3),hue2rgb(o,i,e),hue2rgb(o,i,e-1/3)}return[void 0,void 0,void 0,t[3]]}function linear(t,e,n,r,i){if(t<=e)return r;if(t>=n)return i;var o=n===e?0:(t-e)/(n-e);if(!r.length)return r+(i-r)*o;for(var a,s=r.length,u=createTypedArray("float32",s);a<s;a+=1)u[a]=r[a]+(i[a]-r[a])*o;return u}function random(t,e){if(e.length){var n,r=e.length;t||createTypedArray("float32",r);for(var i=createTypedArray("float32",r),o=BMMath.random();n<r;n+=1)i[n]=t[n]+o*(e[n]-t[n]);return i}return t+BMMath.random()*(e-t)}function createPath(t,e,n,r){var i,o=t.length,a=shape_pool.newElement();a.setPathData(!!r,o);for(var s=[0,0];i<o;i+=1)a.setTripleAt(t[i][0],t[i][1],(n&&n[i]?n[i]:s)[0]+t[i][0],(void 0)[1]+t[i][1],(void 0)[0]+t[i][0],(void 0)[1]+t[i][1],i,!0);return a}function initiateExpression(elem,data,property){var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,elem.comp.frameDuration=1/elem.comp.globalData.frameRate;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,__expression_functions=[],scoped_bm_rt;if(data.xf){var i,len=data.xf.length;for(i=0;i<len;i+=1)__expression_functions[i]=eval("(function(){ return "+data.xf[i]+"}())")}var expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=(function(t,e){var n,r,i=this.pv.length?this.pv.length:1,o=createTypedArray("float32",i),a=Math.floor(5*time);for(n=0,r=0;n<a;){for(r=0;r<i;r+=1)o[r]+=-e+2*e*BMMath.random();n+=1}var s=5*time,u=s-Math.floor(s),l=createTypedArray("float32",i);if(i>1){for(r=0;r<i;r+=1)l[r]=this.pv[r]+o[r]+(-e+2*e*BMMath.random())*u;return l}return this.pv+o[0]+(-e+2*e*BMMath.random())*u}).bind(this);function loopInDuration(t,e){return loopIn(t,e,!0)}function loopOutDuration(t,e){return loopOut(t,e,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(t,e){var n=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],r=Math.atan2(n[0],Math.sqrt(n[1]*n[1]+n[2]*n[2]))/degToRads;return[-Math.atan2(n[1],n[2])/degToRads,r,0]}function easeOut(t,e,n,r,i){return applyEase(easeOutBez,t,e,n,r,i)}function easeIn(t,e,n,r,i){return applyEase(easeInBez,t,e,n,r,i)}function ease(t,e,n,r,i){return applyEase(easeInOutBez,t,e,n,r,i)}function applyEase(t,e,n,r,i,o){void 0===i?(i=n,o=r):e=(e-n)/(r-n);var a=t(e=e>1?1:e<0?0:e);if($bm_isInstanceOfArray(i)){var s,u=i.length,l=createTypedArray("float32",u);for(s=0;s<u;s+=1)l[s]=(o[s]-i[s])*a+i[s];return l}return(o-i)*a+i}function nearestKey(t){var e,n,r,i=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(n=-1,(t*=elem.comp.globalData.frameRate)<data.k[0].t)n=1,r=data.k[0].t;else{for(e=0;e<i-1;e+=1){if(t===data.k[e].t){n=e+1,r=data.k[e].t;break}if(t>data.k[e].t&&t<data.k[e+1].t){t-data.k[e].t>data.k[e+1].t-t?(n=e+2,r=data.k[e+1].t):(n=e+1,r=data.k[e].t);break}}-1===n&&(n=e+1,r=data.k[e].t)}else n=0,r=0;var o={};return o.index=n,o.time=r/elem.comp.globalData.frameRate,o}function key(t){var e,n,r,i;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+t);for(e={time:data.k[t-=1].t/elem.comp.globalData.frameRate},r=(i=t!==data.k.length-1||data.k[t].h?data.k[t].s:data.k[t-1].e).length,n=0;n<r;n+=1)e[n]=i[n];return e}function framesToTime(t,e){return e||(e=elem.comp.globalData.frameRate),t/e}function timeToFrames(t,e){return t||0===t||(t=time),e||(e=elem.comp.globalData.frameRate),t*e}function seedRandom(t){BMMath.seedrandom(randSeed+t)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(t,e){return"string"==typeof value?void 0===e?value.substring(t):value.substring(t,e):""}function substr(t,e){return"string"==typeof value?void 0===e?value.substr(t):value.substr(t,e):""}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(t){return value=t,_needsRandom&&seedRandom(randSeed),this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisComp=elem.comp.compInterface,toWorld=(thisLayer=elem.layerInterface).toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,"shape"===scoped_bm_rt.propType&&(scoped_bm_rt=scoped_bm_rt.v),scoped_bm_rt)}return executeExpression}return ob.initiateExpression=initiateExpression,ob}();(function(){function t(){return this.pv}function e(t,e,n){if(!this.k||!this.keyframes)return this.pv;t=t?t.toLowerCase():"";var r,i,o,a,s,u=this.comp.renderedFrame,l=this.keyframes,c=l[l.length-1].t;if(u<=c)return this.pv;if(n?i=c-(r=e?Math.abs(c-elem.comp.globalData.frameRate*e):Math.max(0,c-this.elem.data.ip)):((!e||e>l.length-1)&&(e=l.length-1),r=c-(i=l[l.length-1-e].t)),"pingpong"===t){if(Math.floor((u-i)/r)%2!=0)return this.getValueAtTime((r-(u-i)%r+i)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var h=this.getValueAtTime(i/this.comp.globalData.frameRate,0),p=this.getValueAtTime(c/this.comp.globalData.frameRate,0),f=this.getValueAtTime(((u-i)%r+i)/this.comp.globalData.frameRate,0),d=Math.floor((u-i)/r);if(this.pv.length){for(a=(s=new Array(h.length)).length,o=0;o<a;o+=1)s[o]=(p[o]-h[o])*d+f[o];return s}return(p-h)*d+f}if("continue"===t){var m=this.getValueAtTime(c/this.comp.globalData.frameRate,0),g=this.getValueAtTime((c-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(a=(s=new Array(m.length)).length,o=0;o<a;o+=1)s[o]=m[o]+(u-c)/this.comp.globalData.frameRate*(m[o]-g[o])/5e-4;return s}return m+(u-c)/.001*(m-g)}}return this.getValueAtTime(((u-i)%r+i)/this.comp.globalData.frameRate,0)}function n(t,e,n){if(!this.k)return this.pv;t=t?t.toLowerCase():"";var r,i,o,a,s,u=this.comp.renderedFrame,l=this.keyframes,c=l[0].t;if(u>=c)return this.pv;if(n?i=c+(r=e?Math.abs(elem.comp.globalData.frameRate*e):Math.max(0,this.elem.data.op-c)):((!e||e>l.length-1)&&(e=l.length-1),r=(i=l[e].t)-c),"pingpong"===t){if(Math.floor((c-u)/r)%2==0)return this.getValueAtTime(((c-u)%r+c)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var h=this.getValueAtTime(c/this.comp.globalData.frameRate,0),p=this.getValueAtTime(i/this.comp.globalData.frameRate,0),f=this.getValueAtTime((r-(c-u)%r+c)/this.comp.globalData.frameRate,0),d=Math.floor((c-u)/r)+1;if(this.pv.length){for(a=(s=new Array(h.length)).length,o=0;o<a;o+=1)s[o]=f[o]-(p[o]-h[o])*d;return s}return f-(p-h)*d}if("continue"===t){var m=this.getValueAtTime(c/this.comp.globalData.frameRate,0),g=this.getValueAtTime((c+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(a=(s=new Array(m.length)).length,o=0;o<a;o+=1)s[o]=m[o]+(m[o]-g[o])*(c-u)/.001;return s}return m+(m-g)*(c-u)/.001}}return this.getValueAtTime((r-(c-u)%r+c)/this.comp.globalData.frameRate,0)}function r(t){return t!==this._cachingAtTime.lastFrame&&(t*=this.elem.globalData.frameRate,this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<(t-=this.offsetTime)?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(t,this._cachingAtTime),this._cachingAtTime.lastFrame=t),this._cachingAtTime.value}function i(t){if(void 0!==this.vel)return this.vel;var e,n,r=this.getValueAtTime(t),i=this.getValueAtTime(t+-.001);if(r.length)for(e=createTypedArray("float32",r.length),n=0;n<r.length;n+=1)e[n]=(i[n]-r[n])/-.001;else e=(i-r)/-.001;return e}function o(t){this.propertyGroup=t}function a(t,e,n){e.x&&(n.k=!0,n.x=!0,n.initiateExpression=ExpressionManager.initiateExpression,n.effectsSequence.push(n.initiateExpression(t,e,n).bind(n)))}var s=function(){function e(t,e){return this.textIndex=t+1,this.textTotal=e,this.getValue(),this.v}return function(n,s){this.pv=1,this.comp=n.comp,this.elem=n,this.mult=.01,this.propType="textSelector",this.textTotal=s.totalChars,this.selectorValue=100,this.lastValue=[1,1,1],a.bind(this)(n,s,this),this.getMult=e,this.getVelocityAtTime=i,this.getValueAtTime=this.kf?r.bind(this):t.bind(this),this.setGroupProperty=o}}(),u=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(t,e,n){var r=u(t,e,n);return r.getValueAtTime=r.dynamicProperties.length?(function(t){console.warn("Transform at time not supported")}).bind(r):(function(t){}).bind(r),r.setGroupProperty=o,r};var l=PropertyFactory.getProp;PropertyFactory.getProp=function(s,u,c,h,p){var f=l(s,u,c,h,p);f.getValueAtTime=f.kf?r.bind(f):t.bind(f),f.setGroupProperty=o,f.loopOut=e,f.loopIn=n,f.getVelocityAtTime=i.bind(f),f.getSpeedAtTime=(function(t){var e=this.getValueAtTime(t),n=this.getValueAtTime(t+-.01),r=0;if(e.length){var i;for(i=0;i<e.length;i+=1)r+=Math.pow(n[i]-e[i],2);r=100*Math.sqrt(r)}else r=0;return r}).bind(f),f.numKeys=1===u.a?u.k.length:0,f.propertyIndex=u.ix;var d=0;return 0!==c&&(d=createTypedArray("float32",1===u.a?u.k[0].s.length:u.k.length)),f._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:d},a(s,u,f),f.k&&p.addDynamicProperty(f),f};var c=ShapePropertyFactory.getConstructorFunction(),h=ShapePropertyFactory.getKeyframedConstructorFunction();function p(){}p.prototype={vertices:function(t,e){this.k&&this.getValue();var n=this.v;void 0!==e&&(n=this.getValueAtTime(e,0));var r,i=n._length,o=n[t],a=n.v,s=createSizedArray(i);for(r=0;r<i;r+=1)s[r]="i"===t||"o"===t?[o[r][0]-a[r][0],o[r][1]-a[r][1]]:[o[r][0],o[r][1]];return s},points:function(t){return this.vertices("v",t)},inTangents:function(t){return this.vertices("i",t)},outTangents:function(t){return this.vertices("o",t)},isClosed:function(){return this.v.c},pointOnPath:function(t,e){var n=this.v;void 0!==e&&(n=this.getValueAtTime(e,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(n));for(var r,i=this._segmentsLength,o=i.lengths,a=i.totalLength*t,s=0,u=o.length,l=0;s<u;){if(l+o[s].addedLength>a){var c=n.c&&s===u-1?0:s+1;r=bez.getPointInSegment(n.v[s],n.v[c],n.o[s],n.i[c],(a-l)/o[s].addedLength,o[s]);break}l+=o[s].addedLength,s+=1}return r||(r=n.c?[n.v[0][0],n.v[0][1]]:[n.v[n._length-1][0],n.v[n._length-1][1]]),r},vectorOnPath:function(t,e,n){var r=this.pointOnPath(t=1==t?this.v.c?0:.999:t,e),i=this.pointOnPath(t+.001,e),o=i[0]-r[0],a=i[1]-r[1],s=Math.sqrt(Math.pow(o,2)+Math.pow(a,2));return"tangent"===n?[o/s,a/s]:[-a/s,o/s]},tangentOnPath:function(t,e){return this.vectorOnPath(t,e,"tangent")},normalOnPath:function(t,e){return this.vectorOnPath(t,e,"normal")},setGroupProperty:o,getValueAtTime:t},extendPrototype([p],c),extendPrototype([p],h),h.prototype.getValueAtTime=function(t){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shape_pool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),t!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<t?this._caching.lastIndex:0,this._cachingAtTime.lastTime=t,this.interpolateShape(t*=this.elem.globalData.frameRate,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},h.prototype.initiateExpression=ExpressionManager.initiateExpression;var f=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(t,e,n,r,i){var o=f(t,e,n,r,i);return o.propertyIndex=e.ix,o.lock=!1,3===n?a(t,e.pt,o):4===n&&a(t,e.ks,o),o.k&&t.addDynamicProperty(o),o};var d=TextSelectorProp.getTextSelectorProp;TextSelectorProp.getTextSelectorProp=function(t,e,n){return 1===e.t?new s(t,e,n):d(t,e,n)}})(),TextProperty.prototype.getExpressionValue=function(t,e){var n=this.calculateExpression(e);if(t.t!==n){var r={};return this.copyData(r,t),r.t=n.toString(),r.__complete=!1,r}return t},TextProperty.prototype.searchProperty=function(){var t=this.searchKeyframes(),e=this.searchExpressions();return this.kf=t||e,this.kf},TextProperty.prototype.searchExpressions=function(){if(this.data.d.x)return this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0};var ShapeExpressionInterface=function(){function t(t,h,p){var f,d=[],m=t?t.length:0;for(f=0;f<m;f+=1)"gr"==t[f].ty?d.push(e(t[f],h[f],p)):"fl"==t[f].ty?d.push(n(t[f],h[f],p)):"st"==t[f].ty?d.push(r(t[f],h[f],p)):"tm"==t[f].ty?d.push(i(t[f],h[f],p)):"tr"==t[f].ty||("el"==t[f].ty?d.push(o(t[f],h[f],p)):"sr"==t[f].ty?d.push(a(t[f],h[f],p)):"sh"==t[f].ty?d.push(c(t[f],h[f],p)):"rc"==t[f].ty?d.push(s(t[f],h[f],p)):"rd"==t[f].ty?d.push(u(t[f],h[f],p)):"rp"==t[f].ty&&d.push(l(t[f],h[f],p)));return d}function e(e,n,r){var i=function(t){switch(t){case"ADBE Vectors Group":case"Contents":case 2:return i.content;default:return i.transform}};i.propertyGroup=function(t){return 1===t?i:r(t-1)};var o=function(e,n,r){var i,o=function(t){for(var e=0,n=i.length;e<n;){if(i[e]._name===t||i[e].mn===t||i[e].propertyIndex===t||i[e].ix===t||i[e].ind===t)return i[e];e+=1}if("number"==typeof t)return i[t-1]};return i=t(e.it,n.it,o.propertyGroup=function(t){return 1===t?o:r(t-1)}),o.numProperties=i.length,o.propertyIndex=e.cix,o._name=e.nm,o}(e,n,i.propertyGroup),a=function(t,e,n){function r(t){return 1==t?i:n(--t)}function i(e){return t.a.ix===e||"Anchor Point"===e?i.anchorPoint:t.o.ix===e||"Opacity"===e?i.opacity:t.p.ix===e||"Position"===e?i.position:t.r.ix===e||"Rotation"===e||"ADBE Vector Rotation"===e?i.rotation:t.s.ix===e||"Scale"===e?i.scale:t.sk&&t.sk.ix===e||"Skew"===e?i.skew:t.sa&&t.sa.ix===e||"Skew Axis"===e?i.skewAxis:void 0}return e.transform.mProps.o.setGroupProperty(r),e.transform.mProps.p.setGroupProperty(r),e.transform.mProps.a.setGroupProperty(r),e.transform.mProps.s.setGroupProperty(r),e.transform.mProps.r.setGroupProperty(r),e.transform.mProps.sk&&(e.transform.mProps.sk.setGroupProperty(r),e.transform.mProps.sa.setGroupProperty(r)),e.transform.op.setGroupProperty(r),Object.defineProperties(i,{opacity:{get:ExpressionPropertyInterface(e.transform.mProps.o)},position:{get:ExpressionPropertyInterface(e.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(e.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(e.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(e.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(e.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(e.transform.mProps.sa)},_name:{value:t.nm}}),i.ty="tr",i.mn=t.mn,i}(e.it[e.it.length-1],n.it[n.it.length-1],i.propertyGroup);return i.content=o,i.transform=a,Object.defineProperty(i,"_name",{get:function(){return e.nm}}),i.numProperties=e.np,i.propertyIndex=e.ix,i.nm=e.nm,i.mn=e.mn,i}function n(t,e,n){function r(t){return"Color"===t||"color"===t?r.color:"Opacity"===t||"opacity"===t?r.opacity:void 0}return Object.defineProperties(r,{color:{get:ExpressionPropertyInterface(e.c)},opacity:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm},mn:{value:t.mn}}),e.c.setGroupProperty(n),e.o.setGroupProperty(n),r}function r(t,e,n){function r(t){return 1===t?ob:n(t-1)}function i(t){return 1===t?u:r(t-1)}function o(n){Object.defineProperty(u,t.d[n].nm,{get:ExpressionPropertyInterface(e.d.dataProps[n].p)})}var a,s=t.d?t.d.length:0,u={};for(a=0;a<s;a+=1)o(a),e.d.dataProps[a].p.setGroupProperty(i);function l(t){return"Color"===t||"color"===t?l.color:"Opacity"===t||"opacity"===t?l.opacity:"Stroke Width"===t||"stroke width"===t?l.strokeWidth:void 0}return Object.defineProperties(l,{color:{get:ExpressionPropertyInterface(e.c)},opacity:{get:ExpressionPropertyInterface(e.o)},strokeWidth:{get:ExpressionPropertyInterface(e.w)},dash:{get:function(){return u}},_name:{value:t.nm},mn:{value:t.mn}}),e.c.setGroupProperty(r),e.o.setGroupProperty(r),e.w.setGroupProperty(r),l}function i(t,e,n){function r(t){return 1==t?i:n(--t)}function i(e){return e===t.e.ix||"End"===e||"end"===e?i.end:e===t.s.ix?i.start:e===t.o.ix?i.offset:void 0}return i.propertyIndex=t.ix,e.s.setGroupProperty(r),e.e.setGroupProperty(r),e.o.setGroupProperty(r),i.propertyIndex=t.ix,Object.defineProperties(i,{start:{get:ExpressionPropertyInterface(e.s)},end:{get:ExpressionPropertyInterface(e.e)},offset:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm}}),i.mn=t.mn,i}function o(t,e,n){function r(t){return 1==t?o:n(--t)}o.propertyIndex=t.ix;var i="tm"===e.sh.ty?e.sh.prop:e.sh;function o(e){return t.p.ix===e?o.position:t.s.ix===e?o.size:void 0}return i.s.setGroupProperty(r),i.p.setGroupProperty(r),Object.defineProperties(o,{size:{get:ExpressionPropertyInterface(i.s)},position:{get:ExpressionPropertyInterface(i.p)},_name:{value:t.nm}}),o.mn=t.mn,o}function a(t,e,n){function r(t){return 1==t?o:n(--t)}var i="tm"===e.sh.ty?e.sh.prop:e.sh;function o(e){return t.p.ix===e?o.position:t.r.ix===e?o.rotation:t.pt.ix===e?o.points:t.or.ix===e||"ADBE Vector Star Outer Radius"===e?o.outerRadius:t.os.ix===e?o.outerRoundness:!t.ir||t.ir.ix!==e&&"ADBE Vector Star Inner Radius"!==e?t.is&&t.is.ix===e?o.innerRoundness:void 0:o.innerRadius}return o.propertyIndex=t.ix,i.or.setGroupProperty(r),i.os.setGroupProperty(r),i.pt.setGroupProperty(r),i.p.setGroupProperty(r),i.r.setGroupProperty(r),t.ir&&(i.ir.setGroupProperty(r),i.is.setGroupProperty(r)),Object.defineProperties(o,{position:{get:ExpressionPropertyInterface(i.p)},rotation:{get:ExpressionPropertyInterface(i.r)},points:{get:ExpressionPropertyInterface(i.pt)},outerRadius:{get:ExpressionPropertyInterface(i.or)},outerRoundness:{get:ExpressionPropertyInterface(i.os)},innerRadius:{get:ExpressionPropertyInterface(i.ir)},innerRoundness:{get:ExpressionPropertyInterface(i.is)},_name:{value:t.nm}}),o.mn=t.mn,o}function s(t,e,n){function r(t){return 1==t?o:n(--t)}var i="tm"===e.sh.ty?e.sh.prop:e.sh;function o(e){return t.p.ix===e?o.position:t.r.ix===e?o.roundness:t.s.ix===e||"Size"===e||"ADBE Vector Rect Size"===e?o.size:void 0}return o.propertyIndex=t.ix,i.p.setGroupProperty(r),i.s.setGroupProperty(r),i.r.setGroupProperty(r),Object.defineProperties(o,{position:{get:ExpressionPropertyInterface(i.p)},roundness:{get:ExpressionPropertyInterface(i.r)},size:{get:ExpressionPropertyInterface(i.s)},_name:{value:t.nm}}),o.mn=t.mn,o}function u(t,e,n){var r=e;function i(e){if(t.r.ix===e||"Round Corners 1"===e)return i.radius}return i.propertyIndex=t.ix,r.rd.setGroupProperty(function(t){return 1==t?i:n(--t)}),Object.defineProperties(i,{radius:{get:ExpressionPropertyInterface(r.rd)},_name:{value:t.nm}}),i.mn=t.mn,i}function l(t,e,n){function r(t){return 1==t?o:n(--t)}var i=e;function o(e){return t.c.ix===e||"Copies"===e?o.copies:t.o.ix===e||"Offset"===e?o.offset:void 0}return o.propertyIndex=t.ix,i.c.setGroupProperty(r),i.o.setGroupProperty(r),Object.defineProperties(o,{copies:{get:ExpressionPropertyInterface(i.c)},offset:{get:ExpressionPropertyInterface(i.o)},_name:{value:t.nm}}),o.mn=t.mn,o}function c(t,e,n){var r=e.sh;function i(t){if("Shape"===t||"shape"===t||"Path"===t||"path"===t||"ADBE Vector Shape"===t||2===t)return i.path}return r.setGroupProperty(function(t){return 1==t?i:n(--t)}),Object.defineProperties(i,{path:{get:function(){return r.k&&r.getValue(),r}},shape:{get:function(){return r.k&&r.getValue(),r}},_name:{value:t.nm},ix:{value:t.ix},mn:{value:t.mn}}),i}return function(e,n,r){var i;function o(t){if("number"==typeof t)return i[t-1];for(var e=0,n=i.length;e<n;){if(i[e]._name===t)return i[e];e+=1}}return o.propertyGroup=r,i=t(e,n,o),o}}(),TextExpressionInterface=function(t){var e;function n(){}return Object.defineProperty(n,"sourceText",{get:function(){var n=t.textProperty.currentData.t;return void 0!==n&&(t.textProperty.currentData.t=void 0,(e=new String(n)).value=n||new String(n)),e}}),n},LayerExpressionInterface=function(){function t(t,e){var n=new Matrix;if(n.reset(),this._elem.finalTransform.mProp.applyToMatrix(n),this._elem.hierarchy&&this._elem.hierarchy.length){var r,i=this._elem.hierarchy.length;for(r=0;r<i;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(n);return n.applyToPointArray(t[0],t[1],t[2]||0)}return n.applyToPointArray(t[0],t[1],t[2]||0)}function e(t,e){var n=new Matrix;if(n.reset(),this._elem.finalTransform.mProp.applyToMatrix(n),this._elem.hierarchy&&this._elem.hierarchy.length){var r,i=this._elem.hierarchy.length;for(r=0;r<i;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(n);return n.inversePoint(t)}return n.inversePoint(t)}function n(t){var e=new Matrix;if(e.reset(),this._elem.finalTransform.mProp.applyToMatrix(e),this._elem.hierarchy&&this._elem.hierarchy.length){var n,r=this._elem.hierarchy.length;for(n=0;n<r;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(e);return e.inversePoint(t)}return e.inversePoint(t)}function r(){return[1,1,1,1]}return function(i){var o;function a(t){switch(t){case"ADBE Root Vectors Group":case"Contents":case 2:return a.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return o;case 4:case"ADBE Effect Parade":return a.effect}}a.toWorld=t,a.fromWorld=e,a.toComp=t,a.fromComp=n,a.sampleImage=r,a.sourceRectAtTime=i.sourceRectAtTime.bind(i),a._elem=i;var s=getDescriptor(o=TransformExpressionInterface(i.finalTransform.mProp),"anchorPoint");return Object.defineProperties(a,{hasParent:{get:function(){return i.hierarchy.length}},parent:{get:function(){return i.hierarchy[0].layerInterface}},rotation:getDescriptor(o,"rotation"),scale:getDescriptor(o,"scale"),position:getDescriptor(o,"position"),opacity:getDescriptor(o,"opacity"),anchorPoint:s,anchor_point:s,transform:{get:function(){return o}},active:{get:function(){return i.isInRange}}}),a.startTime=i.data.st,a.index=i.data.ind,a.source=i.data.refId,a.height=0===i.data.ty?i.data.h:100,a.width=0===i.data.ty?i.data.w:100,a.inPoint=i.data.ip/i.comp.globalData.frameRate,a.outPoint=i.data.op/i.comp.globalData.frameRate,a._name=i.data.nm,a.registerMaskInterface=function(t){a.mask=new MaskManagerInterface(t,i)},a.registerEffectsInterface=function(t){a.effect=t},a}}(),CompExpressionInterface=function(t){function e(e){for(var n=0,r=t.layers.length;n<r;){if(t.layers[n].nm===e||t.layers[n].ind===e)return t.elements[n].layerInterface;n+=1}return null}return Object.defineProperty(e,"_name",{value:t.data.nm}),e.layer=e,e.pixelAspect=1,e.height=t.data.h||t.globalData.compSize.h,e.width=t.data.w||t.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/t.globalData.frameRate,e.numLayers=t.layers.length,e},TransformExpressionInterface=function(t){function e(t){switch(t){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity}}if(Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(t.r||t.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(t.rz||t.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(t.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(t.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(t.s)}),t.p)var n=ExpressionPropertyInterface(t.p);return Object.defineProperty(e,"position",{get:function(){return t.p?n():[t.px.v,t.py.v,t.pz?t.pz.v:0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(t.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(t.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(t.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(t.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(t.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(t.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(t.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(t.or)}),e},ProjectInterface=function(){function t(t){this.compositions.push(t)}return function(){function e(t){for(var e=0,n=this.compositions.length;e<n;){if(this.compositions[e].data&&this.compositions[e].data.nm===t)return this.compositions[e].prepareFrame&&this.compositions[e].data.xt&&this.compositions[e].prepareFrame(this.currentFrame),this.compositions[e].compInterface;e+=1}}return e.compositions=[],e.currentFrame=0,e.registerComposition=t,e}}(),EffectsExpressionInterface=function(){function t(n,r,i,o){var a,s=[],u=n.ef.length;for(a=0;a<u;a+=1)s.push(5===n.ef[a].ty?t(n.ef[a],r.effectElements[a],r.effectElements[a].propertyGroup,o):e(r.effectElements[a],n.ef[a].ty,o,l));function l(t){return 1===t?c:i(t-1)}var c=function(t){for(var e=n.ef,r=0,i=e.length;r<i;){if(t===e[r].nm||t===e[r].mn||t===e[r].ix)return 5===e[r].ty?s[r]:s[r]();r+=1}return s[0]()};return c.propertyGroup=l,"ADBE Color Control"===n.mn&&Object.defineProperty(c,"color",{get:function(){return s[0]()}}),Object.defineProperty(c,"numProperties",{get:function(){return n.np}}),c.active=0!==n.en,c}function e(t,e,n,r){var i=ExpressionPropertyInterface(t.p);return t.p.setGroupProperty&&t.p.setGroupProperty(r),function(){return 10===e?n.comp.compInterface(t.p.v):i()}}return{createEffectsInterface:function(e,n){if(e.effectsManager){var r,i=[],o=e.data.ef,a=e.effectsManager.effectElements.length;for(r=0;r<a;r+=1)i.push(t(o[r],e.effectsManager.effectElements[r],n,e));return function(t){for(var n=e.data.ef||[],r=0,o=n.length;r<o;){if(t===n[r].nm||t===n[r].mn||t===n[r].ix)return i[r];r+=1}}}}}}(),MaskManagerInterface=function(){function t(t,e){this._mask=t,this._data=e}return Object.defineProperty(t.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),function(e,n){var r,i=createSizedArray(e.viewData.length),o=e.viewData.length;for(r=0;r<o;r+=1)i[r]=new t(e.viewData[r],e.masksProperties[r]);return function(t){for(r=0;r<o;){if(e.masksProperties[r].nm===t)return i[r];r+=1}}}}(),ExpressionPropertyInterface=function(){var t={pv:0,v:0,mult:1},e={pv:[0,0,0],v:[0,0,0],mult:1};function n(t,e){Object.defineProperty(t,"velocity",{get:function(){return e.getVelocityAtTime(e.comp.currentFrame)}}),t.numKeys=e.keyframes?e.keyframes.length:0,t.key=function(n){return t.numKeys?e.keyframes[n-1].t:0},t.valueAtTime=e.getValueAtTime,t.speedAtTime=e.getSpeedAtTime,t.velocityAtTime=e.getVelocityAtTime,t.propertyGroup=e.propertyGroup}function r(){return t}return function(i){return i?"unidimensional"===i.propType?function(e){e&&"pv"in e||(e=t);var r=1/e.mult,i=e.pv*r,o=new Number(i);return o.value=i,n(o,e),function(){return e.k&&e.getValue(),o.value!==(i=e.v*r)&&((o=new Number(i)).value=i,n(o,e)),o}}(i):function(t){t&&"pv"in t||(t=e);var r=1/t.mult,i=t.pv.length,o=createTypedArray("float32",i),a=createTypedArray("float32",i);return o.value=a,n(o,t),function(){t.k&&t.getValue();for(var e=0;e<i;e+=1)o[e]=a[e]=t.v[e]*r;return o}}(i):r}}();function SliderEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function AngleEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function ColorEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,1,0,n)}function PointEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,1,0,n)}function LayerIndexEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function MaskIndexEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function CheckboxEffect(t,e,n){this.p=PropertyFactory.getProp(e,t.v,0,0,n)}function NoValueEffect(){this.p={}}function EffectsManager(t,e){var n=t.ef||[];this.effectElements=[];var r,i,o=n.length;for(r=0;r<o;r++)i=new GroupEffect(n[r],e),this.effectElements.push(i)}function GroupEffect(t,e){this.init(t,e)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(t,e){this.data=t,this.effectElements=[],this.initDynamicPropertyContainer(e);var n,r,i=this.data.ef.length,o=this.data.ef;for(n=0;n<i;n+=1){switch(r=null,o[n].ty){case 0:r=new SliderEffect(o[n],e,this);break;case 1:r=new AngleEffect(o[n],e,this);break;case 2:r=new ColorEffect(o[n],e,this);break;case 3:r=new PointEffect(o[n],e,this);break;case 4:case 7:r=new CheckboxEffect(o[n],e,this);break;case 10:r=new LayerIndexEffect(o[n],e,this);break;case 11:r=new MaskIndexEffect(o[n],e,this);break;case 5:r=new EffectsManager(o[n],e,this);break;default:r=new NoValueEffect(o[n],e,this)}r&&this.effectElements.push(r)}};var lottiejs={},_isFrozen=!1;function setLocationHref(t){locationHref=t}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(t){subframeEnabled=t}function loadAnimation(t){return!0===standalone&&(t.animationData=JSON.parse(animationData)),animationManager.loadAnimation(t)}function setQuality(t){if("string"==typeof t)switch(t){case"high":defaultCurveSegments=200;break;case"medium":defaultCurveSegments=50;break;case"low":defaultCurveSegments=10}else!isNaN(t)&&t>1&&(defaultCurveSegments=t);roundValues(!(defaultCurveSegments>=50))}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(t,e){"expressions"===t&&(expressionsPlugin=e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(t){for(var e=queryString.split("&"),n=0;n<e.length;n++){var r=e[n].split("=");if(decodeURIComponent(r[0])==t)return decodeURIComponent(r[1])}}lottiejs.play=animationManager.play,lottiejs.pause=animationManager.pause,lottiejs.setLocationHref=setLocationHref,lottiejs.togglePause=animationManager.togglePause,lottiejs.setSpeed=animationManager.setSpeed,lottiejs.setDirection=animationManager.setDirection,lottiejs.stop=animationManager.stop,lottiejs.searchAnimations=searchAnimations,lottiejs.registerAnimation=animationManager.registerAnimation,lottiejs.loadAnimation=loadAnimation,lottiejs.setSubframeRendering=setSubframeRendering,lottiejs.resize=animationManager.resize,lottiejs.goToAndStop=animationManager.goToAndStop,lottiejs.destroy=animationManager.destroy,lottiejs.setQuality=setQuality,lottiejs.inBrowser=inBrowser,lottiejs.installPlugin=installPlugin,lottiejs.freeze=animationManager.freeze,lottiejs.unfreeze=animationManager.unfreeze,lottiejs.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottiejs.__getFactory=getFactory,lottiejs.version="5.4.1";var standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""},queryString=myScript.src.replace(/^[^\?]+\??/,"");renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);return lottiejs}(root)}).call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},lYZG:function(t,e,n){"use strict";n.r(e),n.d(e,"defer",function(){return a});var r=n("6blF"),i=n("0/uQ"),o=n(null);function a(t){return new r.a(function(e){var n;try{n=t()}catch(t){return void e.error(t)}return(n?Object(i.a)(n):Object(o.a)()).subscribe(e)})}},lcbw:function(t,e,n){"use strict";n.r(e),n("Uv6z");var r=setTimeout;function i(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(t,this)}function a(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void u(e.promise,t)}s(e.promise,r)}else(1===t._state?s:u)(e.promise,t._value)})):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void l(t);if("function"==typeof n)return void c((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,l(t)}catch(e){u(t,e)}var r,i}function u(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function c(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,u(e,t))})}catch(t){if(n)return;n=!0,u(e,t)}}o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(i);return a(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,e,n)),n},o.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})},o.all=function(t){return new o(function(e,n){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){o(t,e)},n)}r[t]=a,0==--i&&e(r)}catch(t){n(t)}}for(var a=0;a<r.length;a++)o(a,r[a])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},o._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){r(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var h=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();function p(t,e){return t(e={exports:{}},e.exports),e.exports}h.Promise||(h.Promise=o);var f=p(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),d=p(function(t){var e=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=e)}),m=function(t){return"object"==typeof t?null!==t:"function"==typeof t},g=function(t){if(!m(t))throw TypeError(t+" is not an object!");return t},y=function(t){try{return!!t()}catch(t){return!0}},v=!y(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),b=f.document,_=m(b)&&m(b.createElement),w=function(t){return _?b.createElement(t):{}},x=!v&&!y(function(){return 7!=Object.defineProperty(w("div"),"a",{get:function(){return 7}}).a}),C=function(t,e){if(!m(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!m(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!m(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!m(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},E=Object.defineProperty,S={f:v?Object.defineProperty:function(t,e,n){if(g(t),e=C(e,!0),g(n),x)try{return E(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},T=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},A=v?function(t,e,n){return S.f(t,e,T(1,n))}:function(t,e,n){return t[e]=n,t},P={}.hasOwnProperty,I=function(t,e){return P.call(t,e)},O=0,D=Math.random(),k=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++O+D).toString(36))},M=p(function(t){var e=k("src"),n=Function.toString,r=(""+n).split("toString");d.inspectSource=function(t){return n.call(t)},(t.exports=function(t,n,i,o){var a="function"==typeof i;a&&(I(i,"name")||A(i,"name",n)),t[n]!==i&&(a&&(I(i,e)||A(i,e,t[n]?""+t[n]:r.join(String(n)))),t===f?t[n]=i:o?t[n]?t[n]=i:A(t,n,i):(delete t[n],A(t,n,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||n.call(this)})}),R=function(t,e,n){if(function(e){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},N=function(t,e,n){var r,i,o,a,s=t&N.F,u=t&N.G,l=t&N.P,c=t&N.B,h=u?f:t&N.S?f[e]||(f[e]={}):(f[e]||{}).prototype,p=u?d:d[e]||(d[e]={}),m=p.prototype||(p.prototype={});for(r in u&&(n=e),n)o=((i=!s&&h&&void 0!==h[r])?h:n)[r],a=c&&i?R(o,f):l&&"function"==typeof o?R(Function.call,o):o,h&&M(h,r,o,t&N.U),p[r]!=o&&A(p,r,a),l&&m[r]!=o&&(m[r]=o)};f.core=d,N.F=1,N.G=2,N.S=4,N.P=8,N.B=16,N.W=32,N.U=64,N.R=128;var L=N,F={}.toString,B=function(t){return F.call(t).slice(8,-1)},j=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==B(t)?t.split(""):Object(t)},z=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},V=function(t){return Object(z(t))},U=Math.ceil,q=Math.floor,G=function(t){return isNaN(t=+t)?0:(t>0?q:U)(t)},H=Math.min,W=function(t){return t>0?H(G(t),9007199254740991):0},K=Array.isArray||function(t){return"Array"==B(t)},X=f["__core-js_shared__"]||(f["__core-js_shared__"]={}),Q=function(t){return X[t]||(X[t]={})},Z=p(function(t){var e=Q("wks"),n=f.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:k)("Symbol."+t))}).store=e}),Y=Z("species"),J=function(t,e){return new(function(t){var e;return K(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!K(e.prototype)||(e=void 0),m(e)&&null===(e=e[Y])&&(e=void 0)),void 0===e?Array:e}(t))(e)},$=function(t,e){var n=1==t,r=2==t,i=3==t,o=4==t,a=6==t,s=5==t||a,u=e||J;return function(e,l,c){for(var h,p,f=V(e),d=j(f),m=R(l,c,3),g=W(d.length),y=0,v=n?u(e,g):r?u(e,0):void 0;g>y;y++)if((s||y in d)&&(p=m(h=d[y],y,f),t))if(n)v[y]=p;else if(p)switch(t){case 3:return!0;case 5:return h;case 6:return y;case 2:v.push(h)}else if(o)return!1;return a?-1:i||o?o:v}},tt=Z("unscopables"),et=Array.prototype;void 0==et[tt]&&A(et,tt,{});var nt=function(t){et[tt][t]=!0},rt=$(5),it=!0;"find"in[]&&Array(1).find(function(){it=!1}),L(L.P+L.F*it,"Array",{find:function(t){return rt(this,t,arguments.length>1?arguments[1]:void 0)}}),nt("find");var ot=$(6),at=!0;"findIndex"in[]&&Array(1).findIndex(function(){at=!1}),L(L.P+L.F*at,"Array",{findIndex:function(t){return ot(this,t,arguments.length>1?arguments[1]:void 0)}}),nt("findIndex");var st=function(t){return j(z(t))},ut=Math.max,lt=Math.min,ct=Q("keys"),ht=function(t){return ct[t]||(ct[t]=k(t))},pt=function(t,e,n){for(var r=st(t),i=W(r.length),o=function(t,e){return(t=G(t))<0?ut(t+e,0):lt(t,e)}(n,i);i>o;o++)if(o in r&&r[o]===e)return o||0;return-1},ft=ht("IE_PROTO"),dt=function(t,e){var n,r=st(t),i=0,o=[];for(n in r)n!=ft&&I(r,n)&&o.push(n);for(;e.length>i;)I(r,n=e[i++])&&(~pt(o,n)||o.push(n));return o},mt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),gt=Object.keys||function(t){return dt(t,mt)},yt={f:Object.getOwnPropertySymbols},vt={f:{}.propertyIsEnumerable},bt=Object.assign,_t=!bt||y(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=bt({},t)[n]||Object.keys(bt({},e)).join("")!=r})?function(t,e){for(var n=V(t),r=arguments.length,i=1,o=yt.f,a=vt.f;r>i;)for(var s,u=j(arguments[i++]),l=o?gt(u).concat(o(u)):gt(u),c=l.length,h=0;c>h;)a.call(u,s=l[h++])&&(n[s]=u[s]);return n}:bt;L(L.S+L.F,"Object",{assign:_t});var wt=Z("match"),xt=Z("match"),Ct="".startsWith;L(L.P+L.F*function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[xt]=!1,!"/./"[t](e)}catch(t){}}return!0}("startsWith"),"String",{startsWith:function(t){var e=function(t,e,n){if(m(r=e)&&(void 0!==(i=r[wt])?i:"RegExp"==B(r)))throw TypeError("String#startsWith doesn't accept regex!");var r,i;return String(z(t))}(this,t),n=W(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return Ct?Ct.call(e,r,n):e.slice(n,n+r.length)===r}}),L(L.P,"String",{repeat:function(t){var e=String(z(this)),n="",r=G(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});var Et=p(function(t){var e=k("meta"),n=S.f,r=0,i=Object.isExtensible||function(){return!0},o=!y(function(){return i(Object.preventExtensions({}))}),a=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},s=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!m(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!I(t,e)){if(!i(t))return"F";if(!n)return"E";a(t)}return t[e].i},getWeak:function(t,n){if(!I(t,e)){if(!i(t))return!0;if(!n)return!1;a(t)}return t[e].w},onFreeze:function(t){return o&&s.NEED&&i(t)&&!I(t,e)&&a(t),t}}}),St=S.f,Tt=Z("toStringTag"),At=function(t,e,n){t&&!I(t=n?t:t.prototype,Tt)&&St(t,Tt,{configurable:!0,value:e})},Pt={f:Z},It=S.f,Ot=function(t){var e=d.Symbol||(d.Symbol=f.Symbol||{});"_"==t.charAt(0)||t in e||It(e,t,{value:Pt.f(t)})},Dt=v?Object.defineProperties:function(t,e){g(t);for(var n,r=gt(e),i=r.length,o=0;i>o;)S.f(t,n=r[o++],e[n]);return t},kt=f.document,Mt=kt&&kt.documentElement,Rt=ht("IE_PROTO"),Nt=function(){},Lt=function(){var t,e=w("iframe"),n=mt.length;for(e.style.display="none",Mt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Lt=t.F;n--;)delete Lt.prototype[mt[n]];return Lt()},Ft=Object.create||function(t,e){var n;return null!==t?(Nt.prototype=g(t),n=new Nt,Nt.prototype=null,n[Rt]=t):n=Lt(),void 0===e?n:Dt(n,e)},Bt=mt.concat("length","prototype"),jt={f:Object.getOwnPropertyNames||function(t){return dt(t,Bt)}},zt=jt.f,Vt={}.toString,Ut="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],qt={f:function(t){return Ut&&"[object Window]"==Vt.call(t)?function(t){try{return zt(t)}catch(t){return Ut.slice()}}(t):zt(st(t))}},Gt=Object.getOwnPropertyDescriptor,Ht={f:v?Gt:function(t,e){if(t=st(t),e=C(e,!0),x)try{return Gt(t,e)}catch(t){}if(I(t,e))return T(!vt.f.call(t,e),t[e])}},Wt=Et.KEY,Kt=Ht.f,Xt=S.f,Qt=qt.f,Zt=f.Symbol,Yt=f.JSON,Jt=Yt&&Yt.stringify,$t=Z("_hidden"),te=Z("toPrimitive"),ee={}.propertyIsEnumerable,ne=Q("symbol-registry"),re=Q("symbols"),ie=Q("op-symbols"),oe=Object.prototype,ae="function"==typeof Zt,se=f.QObject,ue=!se||!se.prototype||!se.prototype.findChild,le=v&&y(function(){return 7!=Ft(Xt({},"a",{get:function(){return Xt(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Kt(oe,e);r&&delete oe[e],Xt(t,e,n),r&&t!==oe&&Xt(oe,e,r)}:Xt,ce=function(t){var e=re[t]=Ft(Zt.prototype);return e._k=t,e},he=ae&&"symbol"==typeof Zt.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Zt},pe=function(t,e,n){return t===oe&&pe(ie,e,n),g(t),e=C(e,!0),g(n),I(re,e)?(n.enumerable?(I(t,$t)&&t[$t][e]&&(t[$t][e]=!1),n=Ft(n,{enumerable:T(0,!1)})):(I(t,$t)||Xt(t,$t,T(1,{})),t[$t][e]=!0),le(t,e,n)):Xt(t,e,n)},fe=function(t,e){g(t);for(var n,r=function(t){var e=gt(t),n=yt.f;if(n)for(var r,i=n(t),o=vt.f,a=0;i.length>a;)o.call(t,r=i[a++])&&e.push(r);return e}(e=st(e)),i=0,o=r.length;o>i;)pe(t,n=r[i++],e[n]);return t},de=function(t){var e=ee.call(this,t=C(t,!0));return!(this===oe&&I(re,t)&&!I(ie,t))&&(!(e||!I(this,t)||!I(re,t)||I(this,$t)&&this[$t][t])||e)},me=function(t,e){if(t=st(t),e=C(e,!0),t!==oe||!I(re,e)||I(ie,e)){var n=Kt(t,e);return!n||!I(re,e)||I(t,$t)&&t[$t][e]||(n.enumerable=!0),n}},ge=function(t){for(var e,n=Qt(st(t)),r=[],i=0;n.length>i;)I(re,e=n[i++])||e==$t||e==Wt||r.push(e);return r},ye=function(t){for(var e,n=t===oe,r=Qt(n?ie:st(t)),i=[],o=0;r.length>o;)!I(re,e=r[o++])||n&&!I(oe,e)||i.push(re[e]);return i};ae||(M((Zt=function(){if(this instanceof Zt)throw TypeError("Symbol is not a constructor!");var t=k(arguments.length>0?arguments[0]:void 0),e=function(n){this===oe&&e.call(ie,n),I(this,$t)&&I(this[$t],t)&&(this[$t][t]=!1),le(this,t,T(1,n))};return v&&ue&&le(oe,t,{configurable:!0,set:e}),ce(t)}).prototype,"toString",function(){return this._k}),Ht.f=me,S.f=pe,jt.f=qt.f=ge,vt.f=de,yt.f=ye,v&&M(oe,"propertyIsEnumerable",de,!0),Pt.f=function(t){return ce(Z(t))}),L(L.G+L.W+L.F*!ae,{Symbol:Zt});for(var ve="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),be=0;ve.length>be;)Z(ve[be++]);for(var _e=gt(Z.store),we=0;_e.length>we;)Ot(_e[we++]);L(L.S+L.F*!ae,"Symbol",{for:function(t){return I(ne,t+="")?ne[t]:ne[t]=Zt(t)},keyFor:function(t){if(!he(t))throw TypeError(t+" is not a symbol!");for(var e in ne)if(ne[e]===t)return e},useSetter:function(){ue=!0},useSimple:function(){ue=!1}}),L(L.S+L.F*!ae,"Object",{create:function(t,e){return void 0===e?Ft(t):fe(Ft(t),e)},defineProperty:pe,defineProperties:fe,getOwnPropertyDescriptor:me,getOwnPropertyNames:ge,getOwnPropertySymbols:ye}),Yt&&L(L.S+L.F*(!ae||y(function(){var t=Zt();return"[null]"!=Jt([t])||"{}"!=Jt({a:t})||"{}"!=Jt(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(m(e)||void 0!==t)&&!he(t))return K(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!he(e))return e}),r[1]=e,Jt.apply(Yt,r)}}),Zt.prototype[te]||A(Zt.prototype,te,Zt.prototype.valueOf),At(Zt,"Symbol"),At(Math,"Math",!0),At(f.JSON,"JSON",!0);var xe=Z("toStringTag"),Ce="Arguments"==B(function(){return arguments}()),Ee={};Ee[Z("toStringTag")]="z",Ee+""!="[object z]"&&M(Object.prototype,"toString",function(){return"[object "+(void 0===this?"Undefined":null===this?"Null":"string"==typeof(e=function(t,e){try{return t[e]}catch(t){}}(t=Object(this),xe))?e:Ce?B(t):"Object"==(n=B(t))&&"function"==typeof t.callee?"Arguments":n)+"]";var t,e,n},!0),Ot("asyncIterator"),Ot("observable");var Se={},Te={};A(Te,Z("iterator"),function(){return this});var Ae=function(t,e,n){t.prototype=Ft(Te,{next:T(1,n)}),At(t,e+" Iterator")},Pe=ht("IE_PROTO"),Ie=Object.prototype,Oe=Object.getPrototypeOf||function(t){return t=V(t),I(t,Pe)?t[Pe]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ie:null},De=Z("iterator"),ke=!([].keys&&"next"in[].keys()),Me=function(){return this},Re=function(t,e,n,r,i,o,a){Ae(n,e,r);var s,u,l,c=function(t){if(!ke&&t in d)return d[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",p="values"==i,f=!1,d=t.prototype,m=d[De]||d["@@iterator"]||i&&d[i],g=m||c(i),y=i?p?c("entries"):g:void 0,v="Array"==e&&d.entries||m;if(v&&(l=Oe(v.call(new t)))!==Object.prototype&&l.next&&(At(l,h,!0),"function"!=typeof l[De]&&A(l,De,Me)),p&&m&&"values"!==m.name&&(f=!0,g=function(){return m.call(this)}),(ke||f||!d[De])&&A(d,De,g),Se[e]=g,Se[h]=Me,i)if(s={values:p?g:c("values"),keys:o?g:c("keys"),entries:y},a)for(u in s)u in d||M(d,u,s[u]);else L(L.P+L.F*(ke||f),e,s);return s},Ne=function(t,e){var n,r,i=String(z(t)),o=G(e),a=i.length;return o<0||o>=a?"":(n=i.charCodeAt(o))<55296||n>56319||o+1===a||(r=i.charCodeAt(o+1))<56320||r>57343?i.charAt(o):i.slice(o,o+2)};Re(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=Ne(e,n),this._i+=t.length,{value:t,done:!1})});var Le=function(t,e){return{value:e,done:!!t}},Fe=Re(Array,"Array",function(t,e){this._t=st(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Le(1)):Le(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");Se.Arguments=Se.Array,nt("keys"),nt("values"),nt("entries");for(var Be=Z("iterator"),je=Z("toStringTag"),ze=Se.Array,Ve={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Ue=gt(Ve),qe=0;qe<Ue.length;qe++){var Ge,He=Ue[qe],We=Ve[He],Ke=f[He],Xe=Ke&&Ke.prototype;if(Xe&&(Xe[Be]||A(Xe,Be,ze),Xe[je]||A(Xe,je,He),Se[He]=ze,We))for(Ge in Fe)Xe[Ge]||M(Xe,Ge,Fe[Ge],!0)}Pt.f("iterator")},mChF:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},mEZQ:function(t,e,n){"use strict";n.r(e),n.d(e,"iif",function(){return o});var r=n("lYZG"),i=n(null);function o(t,e,n){return void 0===e&&(e=i.b),void 0===n&&(n=i.b),Object(r.defer)(function(){return t()?e:n})}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a}),n.d(e,"d",function(){return s}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return l}),n.d(e,"f",function(){return c});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function s(t,e){return function(n,r){e(n,r,t)}}function u(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function l(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function c(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t}},nfO7:function(t,e,n){"use strict";t.exports=function(t,e){return e&&(t.skip=function(){return e}),t.wrap=function(e,n){return e(t,n)},t.chain=function(){return"undefined"!=typeof console&&console.log("rest.js: client.chain() is deprecated, use client.wrap() instead"),t.wrap.apply(this,arguments)},t}},nkY7:function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},ohSZ:function(t,e,n){"use strict";(function(t){"undefined"==typeof Promise&&n("E2g8").polyfill(),t.export=Promise}).call(this,n("YuTi")(t))},os0x:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return a}),n.d(e,"__decorate",function(){return s}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return l}),n.d(e,"__awaiter",function(){return c}),n.d(e,"__generator",function(){return h}),n.d(e,"__exportStar",function(){return p}),n.d(e,"__values",function(){return f}),n.d(e,"__read",function(){return d}),n.d(e,"__spread",function(){return m}),n.d(e,"__await",function(){return g}),n.d(e,"__asyncGenerator",function(){return y}),n.d(e,"__asyncDelegator",function(){return v}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return _}),n.d(e,"__importStar",function(){return w}),n.d(e,"__importDefault",function(){return x});var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function l(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function p(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function y(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||s(t,e)})})}function s(t,e){try{(n=i[t](e)).value instanceof g?Promise.resolve(n.value.v).then(u,l):c(o[0][2],n)}catch(t){c(o[0][3],t)}var n}function u(t){s("next",t)}function l(t){s("throw",t)}function c(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function v(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){t[r]&&(e[r]=function(e){return(n=!n)?{value:g(t[r](e)),done:"return"===r}:i?i(e):e})}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):f(t)}function _(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function x(t){return t&&t.__esModule?t:{default:t}}},p0ib:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("6blF"),i=n("nkY7"),o=n("Zn8D"),a=n("IUTb");function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,s=null,u=t[t.length-1];return Object(i.a)(u)?(s=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof u&&(n=t.pop()),null===s&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(n)(Object(a.a)(t,s))}},p1SU:function(t,e,n){"use strict";var r,i,o,a,s,u;r=n("r2d8"),i=n("trmM"),o=n("9F9j"),u=n("iYKk"),a={read:function(t){return t},write:function(t){return t}},s={read:function(){throw"No read method found on converter"},write:function(){throw"No write method found on converter"}},t.exports=r({init:function(t){return t.registry=t.registry||o,t},request:function(t,e){var n,r;return r=t.headers||(t.headers={}),n=i.parse(r["Content-Type"]||e.mime||"text/plain"),r.Accept=r.Accept||e.accept||n.raw+", application/json;q=0.8, text/plain;q=0.5, */*;q=0.2","entity"in t?(r["Content-Type"]=n.raw,e.registry.lookup(n).catch(function(){if(e.permissive)return a;throw"mime-unknown"}).then(function(r){return u((r.write||s.write).bind(void 0,t.entity,{client:e.client||t.originator,request:t,mime:n,registry:e.registry})).catch(function(){throw"mime-serialization"}).then(function(e){return t.entity=e,t})})):t},response:function(t,e){if(!(t.headers&&t.headers["Content-Type"]&&t.entity))return t;var n=i.parse(t.headers["Content-Type"]);return e.registry.lookup(n).catch(function(){return a}).then(function(r){return u((r.read||s.read).bind(void 0,t.entity,{client:e.client||t.request&&t.request.originator,response:t,mime:n,registry:e.registry})).catch(function(e){throw t.error="mime-deserialization",t.cause=e,t}).then(function(e){return t.entity=e,t})})}})},pbg4:function(t,e,n){"use strict";n.r(e),n.d(e,"bindCallback",function(){return u});var r=n("6blF"),i=n("svcd"),o=n("67Y/"),a=n("isby"),s=n("nkY7");function u(t,e,n){if(e){if(!Object(s.a)(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return u(t,n).apply(void 0,r).pipe(Object(o.a)(function(t){return Object(a.a)(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var a,s=this,u={context:s,subject:a,callbackFunc:t,scheduler:n};return new r.a(function(r){if(n)return n.schedule(l,0,{args:e,subscriber:r,params:u});if(!a){a=new i.AsyncSubject;try{t.apply(s,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.next(t.length<=1?t[0]:t),a.complete()}]))}catch(t){a.error(t)}}return a.subscribe(r)})}}function l(t){var e=this,n=t.args,r=t.subscriber,o=t.params,a=o.callbackFunc,s=o.context,u=o.scheduler,l=o.subject;if(!l){l=o.subject=new i.AsyncSubject;try{a.apply(s,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.add(u.schedule(c,0,{value:t.length<=1?t[0]:t,subject:l}))}]))}catch(t){l.error(t)}}this.add(l.subscribe(r))}function c(t){var e=t.subject;e.next(t.value),e.complete()}},psW0:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("mrSG"),i=n("zotm"),o=n("MGBS"),a=n("67Y/"),s=n("0/uQ");function u(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(r){return r.pipe(u(function(n,r){return Object(s.a)(t(n,r)).pipe(Object(a.a)(function(t,i){return e(n,t,r,i)}))},n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new l(t,n))})}var l=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.project,this.concurrent))},t}(),c=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r.c(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(Object(i.a)(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.a)},pugT:function(t,e,n){"use strict";var r,i=n("isby"),o=n("McSo"),a=n("2Bdj"),s={e:{}};function u(){try{return r.apply(this,arguments)}catch(t){return s.e=t,s}}function l(t){return r=t,u}var c=n("awvh");n.d(e,"a",function(){return h});var h=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,u=this._unsubscribe,h=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,d=r?r.length:0;n;)n.remove(this),n=++f<d&&r[f]||null;if(Object(a.a)(u)&&l(u).call(this)===s&&(e=!0,t=t||(s.e instanceof c.a?p(s.e.errors):[s.e])),Object(i.a)(h))for(f=-1,d=h.length;++f<d;){var m=h[f];if(Object(o.a)(m)&&l(m.unsubscribe).call(m)===s){e=!0,t=t||[];var g=s.e;g instanceof c.a?t=t.concat(p(g.errors)):t.push(g)}}if(e)throw new c.a(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function p(t){return t.reduce(function(t,e){return t.concat(e instanceof c.a?e.errors:e)},[])}},"q/0M":function(t,e,n){"use strict";n.r(e),n.d(e,"setLogLevel",function(){return u}),n.d(e,"Logger",function(){return s}),n.d(e,"LogLevel",function(){return i});var r=[],i=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),o=i.INFO,a=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var o=(new Date).toISOString();switch(e){case i.DEBUG:case i.VERBOSE:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.INFO:console.info.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.WARN:console.warn.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case i.ERROR:console.error.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},s=function(){function t(t){this.name=t,this._logLevel=o,this._logHandler=a,r.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,i.ERROR].concat(t))},t}();function u(t){r.forEach(function(e){e.logLevel=t})}},q8iK:function(t,e){},qe5e:function(t,e,n){"use strict";var r,i;function o(t,e){if(!t)throw"First parameter is required.";var n=this;function r(n){n&&(e.initCallback=function(){n(),n=e.initCallback=null});var r=new function(t,e){var n;return(g||f||d)&&(n=S),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!g&&(n=E),"video"===e.type&&(g||d)&&(n=A,"undefined"!=typeof ReadableStream&&(n=k)),"gif"===e.type&&(n=O),"canvas"===e.type&&(n=T),C()&&n!==T&&n!==O&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(_(t,"video").length||_(t,"audio").length)&&("audio"===e.type?"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(n=E):"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(n=E)),t instanceof Array&&t.length&&(n=D),e.recorderType&&(n=e.recorderType),!e.disableLogs&&n&&n.name&&console.log("Using recorderType:",n.name||n.constructor.name),!n&&y&&(n=E),n}(t,e);(h=new r(t,e)).record(),c("recording"),e.disableLogs||console.log("Initialized recorderType:",h.constructor.name,"for output-type:",e.type)}function i(t){if(t=t||function(){},h){if("paused"===n.state)return n.resumeRecording(),void setTimeout(function(){i(t)},1);"recording"===n.state||e.disableLogs||console.warn('Recording state should be: "recording", however current state is: ',n.state),e.disableLogs||console.log("Stopped recording "+e.type+" stream."),"gif"!==e.type?h.stop(r):(h.stop(),r()),c("stopped")}else v();function r(r){if(h){Object.keys(h).forEach(function(t){"function"!=typeof h[t]&&(n[t]=h[t])});var i=h.blob;if(!i){if(!r)throw"Recording failed.";h.blob=i=r}if(i&&!e.disableLogs&&console.log(i.type,"->",b(i.size)),t){var o;try{o=p.createObjectURL(i)}catch(t){}"function"==typeof t.call?t.call(n,o):t(o)}e.autoWriteToDisk&&u(function(t){var n={};n[e.type+"Blob"]=t,I.Store(n)})}else"function"==typeof t.call?t.call(n,""):t("")}}function s(t){postMessage((new FileReaderSync).readAsDataURL(t))}function u(t,n){if(!t)throw"Pass a callback function over getDataURL.";var r=n?n.blob:(h||{}).blob;if(!r)return e.disableLogs||console.warn("Blob encoder did not finish its job yet."),void setTimeout(function(){u(t,n)},1e3);if("undefined"==typeof Worker||navigator.mozGetUserMedia){var i=new FileReader;i.readAsDataURL(r),i.onload=function(e){t(e.target.result)}}else{var o=function(t){try{var e=p.createObjectURL(new Blob([t.toString(),"this.onmessage =  function (eee) {"+t.name+"(eee.data);}"],{type:"application/javascript"})),n=new Worker(e);return p.revokeObjectURL(e),n}catch(t){}}(s);o.onmessage=function(e){t(e.data)},o.postMessage(r)}}function l(t){t=t||0,"paused"!==n.state?"stopped"!==n.state&&(t>=n.recordingDuration?i(n.onRecordingStopped):(t+=1e3,setTimeout(function(){l(t)},1e3))):setTimeout(function(){l(t)},1e3)}function c(t){n&&(n.state=t,"function"==typeof n.onStateChanged.call?n.onStateChanged.call(n,t):n.onStateChanged(t))}var h,m='It seems that recorder is destroyed or "startRecording" is not invoked for '+(e=new a(t,e=e||{type:"video"})).type+" recorder.";function v(){!0!==e.disableLogs&&console.warn(m)}var w={startRecording:function(i){return i&&(e=new a(t,i)),e.disableLogs||console.log("started recording "+e.type+" stream."),h?(h.clearRecordedData(),h.record(),c("recording"),n.recordingDuration&&l(),n):(r(function(){n.recordingDuration&&l()}),n)},stopRecording:i,pauseRecording:function(){h?"recording"===n.state?(c("paused"),h.pause(),e.disableLogs||console.log("Paused recording.")):e.disableLogs||console.warn("Unable to pause the recording. Recording state: ",n.state):v()},resumeRecording:function(){h?"paused"===n.state?(c("recording"),h.resume(),e.disableLogs||console.log("Resumed recording.")):e.disableLogs||console.warn("Unable to resume the recording. Recording state: ",n.state):v()},initRecorder:r,setRecordingDuration:function(t,e){if(void 0===t)throw"recordingDuration is required.";if("number"!=typeof t)throw"recordingDuration must be a number.";return n.recordingDuration=t,n.onRecordingStopped=e||function(){},{onRecordingStopped:function(t){n.onRecordingStopped=t}}},clearRecordedData:function(){h?(h.clearRecordedData(),e.disableLogs||console.log("Cleared old recorded data.")):v()},getBlob:function(){if(h)return h.blob;v()},getDataURL:u,toURL:function(){if(h)return p.createObjectURL(h.blob);v()},getInternalRecorder:function(){return h},save:function(t){h?function(t,e){if(!t)throw"Blob object is required.";if(!t.type)try{t.type="video/webm"}catch(t){}var n=(t.type||"video/webm").split("/")[1];if(e&&-1!==e.indexOf(".")){var r=e.split(".");e=r[0],n=r[1]}var i=(e||Math.round(9999999999*Math.random())+888888888)+"."+n;if(void 0!==navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(t,i);if(void 0!==navigator.msSaveBlob)return navigator.msSaveBlob(t,i);var o=document.createElement("a");o.href=p.createObjectURL(t),o.download=i,o.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(o),"function"==typeof o.click?o.click():(o.target="_blank",o.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),p.revokeObjectURL(o.href)}(h.blob,t):v()},getFromDisk:function(t){h?o.getFromDisk(e.type,t):v()},setAdvertisementArray:function(t){e.advertisement=[];for(var n=t.length,r=0;r<n;r++)e.advertisement.push({duration:r,image:t[r]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){h&&"function"==typeof h.clearRecordedData&&h.clearRecordedData(),h=null,c("inactive"),n.blob=null},onStateChanged:function(t){e.disableLogs||console.log("Recorder state changed:",t)},state:"inactive",getState:function(){return n.state},destroy:function(){var t=e.disableLogs;e={disableLogs:!0},n.reset(),c("destroyed"),w=n=null,x.AudioContextConstructor&&(x.AudioContextConstructor.close(),x.AudioContextConstructor=null),e.disableLogs=t,e.disableLogs||console.warn("RecordRTC is destroyed.")},version:"5.5.2"};if(!this)return n=w,w;for(var P in w)this[P]=w[P];return n=this,w}function a(t,e){return e.recorderType||e.type||(e.audio&&e.video?e.type="video":e.audio&&!e.video&&(e.type="audio")),e.recorderType&&!e.type&&(e.recorderType===A||e.recorderType===T||e.recorderType===k?e.type="video":e.recorderType===O?e.type="gif":e.recorderType===S?e.type="audio":e.recorderType===E&&(_(t,"audio").length&&_(t,"video").length?e.type="video":!_(t,"audio").length&&_(t,"video").length?e.type="video":_(t,"audio").length&&!_(t,"video").length&&(e.type="audio"))),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(e.mimeType||(e.mimeType="video/webm"),e.type||(e.type=e.mimeType.split("/")[0])),e.type||(e.mimeType&&(e.type=e.mimeType.split("/")[0]),e.type||(e.type="audio")),e}function s(t){this.addStream=function(e){e&&(t=e)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var e,n=this.mediaType,r=this.mimeType||{audio:null,video:null,gif:null};if("function"!=typeof n.audio&&C()&&!_(t,"audio").length&&(n.audio=!1),"function"!=typeof n.video&&C()&&!_(t,"video").length&&(n.video=!1),"function"!=typeof n.gif&&C()&&!_(t,"video").length&&(n.gif=!1),!n.audio&&!n.video&&!n.gif)throw"MediaStream must have either audio or video tracks.";if(n.audio&&(e=null,"function"==typeof n.audio&&(e=n.audio),this.audioRecorder=new o(t,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:e,mimeType:r.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),n.video||this.audioRecorder.startRecording()),n.video){e=null,"function"==typeof n.video&&(e=n.video);var i=t;if(C()&&n.audio&&"function"==typeof n.audio){var a=_(t,"video")[0];navigator.mozGetUserMedia?((i=new v).addTrack(a),e&&e===A&&(e=E)):i=new v([a])}this.videoRecorder=new o(i,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:e,mimeType:r.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),n.audio||this.videoRecorder.startRecording()}if(n.audio&&n.video){var s=this;C()?(s.audioRecorder=null,s.videoRecorder.startRecording()):s.videoRecorder.initRecorder(function(){s.audioRecorder.initRecorder(function(){s.videoRecorder.startRecording(),s.audioRecorder.startRecording()})})}n.gif&&(e=null,"function"==typeof n.gif&&(e=n.gif),this.gifRecorder=new o(t,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:e,mimeType:r.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(t){t=t||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(e){t(e,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(e){t(e,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(e){t(e,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(t){var e={};return this.audioRecorder&&(e.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(e.video=this.videoRecorder.getBlob()),this.gifRecorder&&(e.gif=this.gifRecorder.getBlob()),t&&t(e),e},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(t){function e(t,e){if("undefined"!=typeof Worker){var n=function(t){var e,n=p.createObjectURL(new Blob([t.toString(),"this.onmessage =  function (eee) {"+t.name+"(eee.data);}"],{type:"application/javascript"})),r=new Worker(n);if(void 0!==p)e=p;else{if("undefined"==typeof webkitURL)throw"Neither URL nor webkitURL detected.";e=webkitURL}return e.revokeObjectURL(n),r}(function(t){postMessage((new FileReaderSync).readAsDataURL(t))});n.onmessage=function(t){e(t.data)},n.postMessage(t)}else{var r=new FileReader;r.readAsDataURL(t),r.onload=function(t){e(t.target.result)}}}this.getBlob(function(n){n.audio&&n.video?e(n.audio,function(r){e(n.video,function(e){t({audio:r,video:e})})}):n.audio?e(n.audio,function(e){t({audio:e})}):n.video&&e(n.video,function(e){t({video:e})})})},this.writeToDisk=function(){o.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(t){(t=t||{audio:!0,video:!0,gif:!0}).audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof t.audio?t.audio:""),t.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof t.video?t.video:""),t.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof t.gif?t.gif:"")}}o.version="5.5.2",t.exports=o,void 0===(r=(function(){return o}).apply(e,[]))||(t.exports=r),o.getFromDisk=function(t,e){if(!e)throw"callback is mandatory.";console.log("Getting recorded "+("all"===t?"blobs":t+" blob ")+" from disk!"),I.Fetch(function(n,r){"all"!==t&&r===t+"Blob"&&e&&e(n),"all"===t&&e&&e(n,r.replace("Blob",""))})},o.writeToDisk=function(t){console.log("Writing recorded blob(s) to disk!"),(t=t||{}).audio&&t.video&&t.gif?t.audio.getDataURL(function(e){t.video.getDataURL(function(n){t.gif.getDataURL(function(t){I.Store({audioBlob:e,videoBlob:n,gifBlob:t})})})}):t.audio&&t.video?t.audio.getDataURL(function(e){t.video.getDataURL(function(t){I.Store({audioBlob:e,videoBlob:t})})}):t.audio&&t.gif?t.audio.getDataURL(function(e){t.gif.getDataURL(function(t){I.Store({audioBlob:e,gifBlob:t})})}):t.video&&t.gif?t.video.getDataURL(function(e){t.gif.getDataURL(function(t){I.Store({videoBlob:e,gifBlob:t})})}):t.audio?t.audio.getDataURL(function(t){I.Store({audioBlob:t})}):t.video?t.video.getDataURL(function(t){I.Store({videoBlob:t})}):t.gif&&t.gif.getDataURL(function(t){I.Store({gifBlob:t})})},s.getFromDisk=o.getFromDisk,s.writeToDisk=o.writeToDisk,o.MRecordRTC=s,(i="undefined"!=typeof global?global:null)&&"undefined"==typeof window&&"undefined"!=typeof global&&(global.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},global.console||(global.console={}),void 0!==global.console.log&&void 0!==global.console.error||(global.console.error=global.console.log=global.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(i.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){var t={getContext:function(){return t},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""}};return t},i.HTMLVideoElement=function(){}),"undefined"==typeof location&&(i.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(i.screen={width:0,height:0}),void 0===p&&(i.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),i.window=global);var u=window.requestAnimationFrame;if(void 0===u)if("undefined"!=typeof webkitRequestAnimationFrame)u=webkitRequestAnimationFrame;else if("undefined"!=typeof mozRequestAnimationFrame)u=mozRequestAnimationFrame;else if("undefined"!=typeof msRequestAnimationFrame)u=msRequestAnimationFrame;else if(void 0===u){var l=0;u=function(t,e){var n=(new Date).getTime(),r=Math.max(0,16-(n-l)),i=setTimeout(function(){t(n+r)},r);return l=n+r,i}}var c=window.cancelAnimationFrame;void 0===c&&("undefined"!=typeof webkitCancelAnimationFrame?c=webkitCancelAnimationFrame:"undefined"!=typeof mozCancelAnimationFrame?c=mozCancelAnimationFrame:"undefined"!=typeof msCancelAnimationFrame?c=msCancelAnimationFrame:void 0===c&&(c=function(t){clearTimeout(t)}));var h=window.AudioContext;void 0===h&&("undefined"!=typeof webkitAudioContext&&(h=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(h=mozAudioContext));var p=window.URL;void 0===p&&"undefined"!=typeof webkitURL&&(p=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var f=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob),d=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),m=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),g=!d&&!f&&!!navigator.webkitGetUserMedia||"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||!("undefined"==typeof process||"object"!=typeof process.versions||!process.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/"),y=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);y&&!g&&-1!==navigator.userAgent.indexOf("CriOS")&&(y=!1,g=!0);var v=window.MediaStream;function b(t){if(0===t)return"0 Bytes";var e=parseInt(Math.floor(Math.log(t)/Math.log(1e3)),10);return(t/Math.pow(1e3,e)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][e]}function _(t,e){return t&&t.getTracks?t.getTracks().filter(function(t){return t.kind===(e||"audio")}):[]}function w(t,e){"srcObject"in e?e.srcObject=t:"mozSrcObject"in e?e.mozSrcObject=t:e.srcObject=t}void 0===v&&"undefined"!=typeof webkitMediaStream&&(v=webkitMediaStream),void 0!==v&&void 0===v.prototype.stop&&(v.prototype.stop=function(){this.getTracks().forEach(function(t){t.stop()})});var x={};function C(){if(m||y||f)return!0;navigator;var t,e,n=navigator.userAgent,r=""+parseFloat(navigator.appVersion),i=parseInt(navigator.appVersion,10);return(g||d)&&(t=n.indexOf("Chrome"),r=n.substring(t+7)),-1!==(e=r.indexOf(";"))&&(r=r.substring(0,e)),-1!==(e=r.indexOf(" "))&&(r=r.substring(0,e)),i=parseInt(""+r,10),isNaN(i)&&(r=""+parseFloat(navigator.appVersion),i=parseInt(navigator.appVersion,10)),i>=49}function E(t,e){var n,r=this;if(void 0===t)throw'First argument "MediaStream" is required.';if("undefined"==typeof MediaRecorder)throw"Your browser does not supports Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";"audio"===(e=e||{mimeType:"video/webm"}).type&&(_(t,"video").length&&_(t,"audio").length&&(navigator.mozGetUserMedia?(n=new v).addTrack(_(t,"audio")[0]):n=new v(_(t,"audio")),t=n),e.mimeType&&-1!==e.mimeType.toString().toLowerCase().indexOf("audio")||(e.mimeType=g?"audio/webm":"audio/ogg"),e.mimeType&&"audio/ogg"!==e.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(e.mimeType="audio/ogg"));var i,o=[];function a(){r.timestamps.push((new Date).getTime()),"function"==typeof e.onTimeStamp&&e.onTimeStamp(r.timestamps[r.timestamps.length-1],r.timestamps)}function s(t){return i&&i.mimeType?i.mimeType:t.mimeType||"video/webm"}function u(){o=[],i=null,r.timestamps=[]}this.getArrayOfBlobs=function(){return o},this.record=function(){r.blob=null,r.clearRecordedData(),r.timestamps=[],l=[],o=[];var n=e;e.disableLogs||console.log("Passing following config over MediaRecorder API.",n),i&&(i=null),g&&!C()&&(n="video/vp8"),"function"==typeof MediaRecorder.isTypeSupported&&n.mimeType&&(MediaRecorder.isTypeSupported(n.mimeType)||(e.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",n.mimeType),n.mimeType="audio"===e.type?"audio/webm":"video/webm"));try{i=new MediaRecorder(t,n),e.mimeType=n.mimeType}catch(e){i=new MediaRecorder(t)}n.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in i&&!1===i.canRecordMimeType(n.mimeType)&&(e.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",n.mimeType)),i.ondataavailable=function(t){if(t.data&&l.push("ondataavailable: "+b(t.data.size)),"number"!=typeof e.timeSlice)!t.data||!t.data.size||t.data.size<100||r.blob?r.recordingCallback&&(r.recordingCallback(new Blob([],{type:s(n)})),r.recordingCallback=null):(r.blob=e.getNativeBlob?t.data:new Blob([t.data],{type:s(n)}),r.recordingCallback&&(r.recordingCallback(r.blob),r.recordingCallback=null));else if(t.data&&t.data.size&&t.data.size>100&&(o.push(t.data),a(),"function"==typeof e.ondataavailable)){var i=e.getNativeBlob?t.data:new Blob([t.data],{type:s(n)});e.ondataavailable(i)}},i.onstart=function(){l.push("started")},i.onpause=function(){l.push("paused")},i.onresume=function(){l.push("resumed")},i.onstop=function(){l.push("stopped")},i.onerror=function(t){t&&(t.name||(t.name="UnknownError"),l.push("error: "+t),e.disableLogs||(-1!==t.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",t):-1!==t.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",n.mimeType,") is not supported.",t):-1!==t.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",t):"OutOfMemory"===t.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",t):"IllegalStreamModification"===t.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",t):"OtherRecordingError"===t.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",t):"GenericError"===t.name?console.error("The UA cannot provide the codec or recording option that has been requested.",t):console.error("MediaRecorder Error",t)),function(t){if(!r.manuallyStopped&&i&&"inactive"===i.state)return delete e.timeslice,void i.start(6e5);setTimeout(void 0,1e3)}(),"inactive"!==i.state&&"stopped"!==i.state&&i.stop())},"number"==typeof e.timeSlice?(a(),i.start(e.timeSlice)):i.start(36e5),e.initCallback&&e.initCallback()},this.timestamps=[],this.stop=function(t){t=t||function(){},r.manuallyStopped=!0,i&&(this.recordingCallback=t,"recording"===i.state&&i.stop(),"number"==typeof e.timeSlice&&setTimeout(function(){r.blob=new Blob(o,{type:s(e)}),r.recordingCallback(r.blob)},100))},this.pause=function(){i&&"recording"===i.state&&i.pause()},this.resume=function(){i&&"paused"===i.state&&i.resume()},this.clearRecordedData=function(){i&&"recording"===i.state&&r.stop(u),u()},this.getInternalRecorder=function(){return i},this.blob=null,this.getState=function(){return i&&i.state||"inactive"};var l=[];this.getAllStates=function(){return l},void 0===e.checkForInactiveTracks&&(e.checkForInactiveTracks=!1),r=this,function n(){if(i&&!1!==e.checkForInactiveTracks)return!1===function(){if("active"in t){if(!t.active)return!1}else if("ended"in t&&t.ended)return!1;return!0}()?(e.disableLogs||console.log("MediaStream seems stopped."),void r.stop()):void setTimeout(n,1e3)}(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}function S(t,e){if(!_(t,"audio").length)throw"Your stream has no audio tracks.";var n,r=this,i=[],o=[],a=!1,s=0,u=2,l=(e=e||{}).desiredSampRate;function c(){if(!1===e.checkForInactiveTracks)return!0;if("active"in t){if(!t.active)return!1}else if("ended"in t&&t.ended)return!1;return!0}function h(t,e){function n(t,e){var n,r=t.numberOfAudioChannels,i=t.leftBuffers.slice(0),o=t.rightBuffers.slice(0),a=t.sampleRate,s=t.internalInterleavedLength,u=t.desiredSampRate;function l(t,e,n){var r=Math.round(t.length*(e/n)),i=[],o=Number((t.length-1)/(r-1));i[0]=t[0];for(var a=1;a<r-1;a++){var s=a*o,u=Number(Math.floor(s)).toFixed(),l=Number(Math.ceil(s)).toFixed();i[a]=c(t[u],t[l],s-u)}return i[r-1]=t[t.length-1],i}function c(t,e,n){return t+(e-t)*n}function h(t,e){for(var n=new Float64Array(e),r=0,i=t.length,o=0;o<i;o++){var a=t[o];n.set(a,r),r+=a.length}return n}function p(t,e,n){for(var r=n.length,i=0;i<r;i++)t.setUint8(e+i,n.charCodeAt(i))}2===r&&(i=h(i,s),o=h(o,s),u&&(i=l(i,u,a),o=l(o,u,a))),1===r&&(i=h(i,s),u&&(i=l(i,u,a))),u&&(a=u),2===r&&(n=function(t,e){for(var n=t.length+e.length,r=new Float64Array(n),i=0,o=0;o<n;)r[o++]=t[i],r[o++]=e[i],i++;return r}(i,o)),1===r&&(n=i);var f=n.length,d=new ArrayBuffer(44+2*f),m=new DataView(d);p(m,0,"RIFF"),m.setUint32(4,36+2*f,!0),p(m,8,"WAVE"),p(m,12,"fmt "),m.setUint32(16,16,!0),m.setUint16(20,1,!0),m.setUint16(22,r,!0),m.setUint32(24,a,!0),m.setUint32(28,2*a,!0),m.setUint16(32,2*r,!0),m.setUint16(34,16,!0),p(m,36,"data"),m.setUint32(40,2*f,!0);for(var g=f,y=44,v=0;v<g;v++)m.setInt16(y,32767*n[v],!0),y+=2;if(e)return e({buffer:d,view:m});postMessage({buffer:d,view:m})}if(t.noWorker)n(t,function(t){e(t.buffer,t.view)});else{var r,i,o,a=(r=n,i=p.createObjectURL(new Blob([r.toString(),";this.onmessage =  function (eee) {"+r.name+"(eee.data);}"],{type:"application/javascript"})),(o=new Worker(i)).workerURL=i,o);a.onmessage=function(t){e(t.data.buffer,t.data.view),p.revokeObjectURL(a.workerURL),a.terminate()},a.postMessage(t)}}if(!0===e.leftChannel&&(u=1),1===e.numberOfAudioChannels&&(u=1),(!u||u<1)&&(u=2),e.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+u),void 0===e.checkForInactiveTracks&&(e.checkForInactiveTracks=!0),this.record=function(){if(!1===c())throw"Please make sure MediaStream is active.";w(),C=b=!1,a=!0,void 0!==e.timeSlice&&S()},this.stop=function(t){t=t||function(){},a=!1,h({desiredSampRate:l,sampleRate:v,numberOfAudioChannels:u,internalInterleavedLength:s,leftBuffers:i,rightBuffers:1===u?[]:o,noWorker:e.noWorker},function(e,n){r.blob=new Blob([n],{type:"audio/wav"}),r.buffer=new ArrayBuffer(n.buffer.byteLength),r.view=n,r.sampleRate=l||v,r.bufferSize=y,r.length=s,C=!1,t&&t(r.blob)})},void 0===f)var f={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext};f.AudioContextConstructor||(f.AudioContextConstructor=new f.AudioContext);var d=f.AudioContextConstructor,m=d.createMediaStreamSource(t),g=[0,256,512,1024,2048,4096,8192,16384],y=void 0===e.bufferSize?4096:e.bufferSize;if(-1===g.indexOf(y)&&(e.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(g,null,"\t"))),d.createJavaScriptNode)n=d.createJavaScriptNode(y,u,u);else{if(!d.createScriptProcessor)throw"WebAudio API has no support on this browser.";n=d.createScriptProcessor(y,u,u)}m.connect(n),e.bufferSize||(y=n.bufferSize);var v=void 0!==e.sampleRate?e.sampleRate:d.sampleRate||44100;(v<22050||v>96e3)&&(e.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),e.disableLogs||e.desiredSampRate&&console.log("Desired sample-rate: "+e.desiredSampRate);var b=!1;function w(){o=[],s=0,C=!1,a=!1,b=!1,d=null,r.leftchannel=i=[],r.rightchannel=o,r.numberOfAudioChannels=u,r.desiredSampRate=l,r.sampleRate=v,r.recordingLength=s,E={left:[],right:[],recordingLength:0}}function x(){n&&(n.onaudioprocess=null,n.disconnect(),n=null),m&&(m.disconnect(),m=null),w()}this.pause=function(){b=!0},this.resume=function(){if(!1===c())throw"Please make sure MediaStream is active.";if(!a)return e.disableLogs||console.log("Seems recording has been restarted."),void this.record();b=!1},this.clearRecordedData=function(){e.checkForInactiveTracks=!1,a&&this.stop(x),x()},this.name="StereoAudioRecorder",this.toString=function(){return this.name};var C=!1;n.onaudioprocess=function(t){if(!b)if(!1===c()&&(e.disableLogs||console.log("MediaStream seems stopped."),n.disconnect(),a=!1),a){C||(C=!0,e.onAudioProcessStarted&&e.onAudioProcessStarted(),e.initCallback&&e.initCallback());var l=t.inputBuffer.getChannelData(0),h=new Float32Array(l);if(i.push(h),2===u){var p=t.inputBuffer.getChannelData(1),f=new Float32Array(p);o.push(f)}r.recordingLength=s+=y,void 0!==e.timeSlice&&(E.recordingLength+=y,E.left.push(h),2===u&&E.right.push(f))}else m&&(m.disconnect(),m=null)},n.connect(d.createMediaStreamDestination?d.createMediaStreamDestination():d.destination),this.leftchannel=i,this.rightchannel=o,this.numberOfAudioChannels=u,this.desiredSampRate=l,this.sampleRate=v,r.recordingLength=s;var E={left:[],right:[],recordingLength:0};function S(){a&&"function"==typeof e.ondataavailable&&void 0!==e.timeSlice&&(E.left.length?(h({desiredSampRate:l,sampleRate:v,numberOfAudioChannels:u,internalInterleavedLength:E.recordingLength,leftBuffers:E.left,rightBuffers:1===u?[]:E.right},function(t,n){var r=new Blob([n],{type:"audio/wav"});e.ondataavailable(r),setTimeout(S,e.timeSlice)}),E={left:[],right:[],recordingLength:0}):setTimeout(S,e.timeSlice))}}function T(t,e){if("undefined"==typeof html2canvas)throw"Please link: https://cdn.webrtc-experiment.com/screenshot.js";(e=e||{}).frameInterval||(e.frameInterval=10);var n=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(t){t in document.createElement("canvas")&&(n=!0)});var r,i,o,a=!(!window.webkitRTCPeerConnection&&!window.webkitGetUserMedia||!window.chrome),s=50,u=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(a&&u&&u[2]&&(s=parseInt(u[2],10)),a&&s<52&&(n=!1),e.useWhammyRecorder&&(n=!1),n)if(e.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),t instanceof HTMLCanvasElement)r=t;else{if(!(t instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";r=t.canvas}else navigator.mozGetUserMedia&&(e.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));this.record=function(){if(o=!0,n&&!e.useWhammyRecorder){var t;"captureStream"in r?t=r.captureStream(25):"mozCaptureStream"in r?t=r.mozCaptureStream(25):"webkitCaptureStream"in r&&(t=r.webkitCaptureStream(25));try{var a=new v;a.addTrack(_(t,"video")[0]),t=a}catch(t){}if(!t)throw"captureStream API are NOT available.";(i=new E(t,{mimeType:e.mimeType||"video/webm"})).record()}else f.frames=[],p=(new Date).getTime(),h();e.initCallback&&e.initCallback()},this.getWebPImages=function(n){if("canvas"===t.nodeName.toLowerCase()){var r=f.frames.length;f.frames.forEach(function(t,n){var i=r-n;e.disableLogs||console.log(i+"/"+r+" frames remaining"),e.onEncodingCallback&&e.onEncodingCallback(i,r);var o=t.image.toDataURL("image/webp",1);f.frames[n].image=o}),e.disableLogs||console.log("Generating WebM"),n()}else n()},this.stop=function(t){o=!1;var r=this;n&&i?i.stop(t):this.getWebPImages(function(){f.compile(function(n){e.disableLogs||console.log("Recording finished!"),r.blob=n,r.blob.forEach&&(r.blob=new Blob([],{type:"video/webm"})),t&&t(r.blob),f.frames=[]})})};var l=!1;function c(){f.frames=[],o=!1,l=!1}function h(){if(l)return p=(new Date).getTime(),setTimeout(h,500);if("canvas"===t.nodeName.toLowerCase()){var n=(new Date).getTime()-p;return p=(new Date).getTime(),f.frames.push({image:(r=document.createElement("canvas"),i=r.getContext("2d"),r.width=t.width,r.height=t.height,i.drawImage(t,0,0),r),duration:n}),void(o&&setTimeout(h,e.frameInterval))}var r,i;html2canvas(t,{grabMouse:void 0===e.showMousePointer||e.showMousePointer,onrendered:function(t){var n=(new Date).getTime()-p;if(!n)return setTimeout(h,e.frameInterval);p=(new Date).getTime(),f.frames.push({image:t.toDataURL("image/webp",1),duration:n}),o&&setTimeout(h,e.frameInterval)}})}this.pause=function(){l=!0,i instanceof E&&i.pause()},this.resume=function(){l=!1,i instanceof E?i.resume():o||this.record()},this.clearRecordedData=function(){o&&this.stop(c),c()},this.name="CanvasRecorder",this.toString=function(){return this.name};var p=(new Date).getTime(),f=new P.Video(100)}function A(t,e){function n(t){t=void 0!==t?t:10;var e=(new Date).getTime()-s;return e?i?(s=(new Date).getTime(),setTimeout(n,100)):(s=(new Date).getTime(),a.paused&&a.play(),c.drawImage(a,0,0,l.width,l.height),u.frames.push({duration:e,image:l.toDataURL("image/webp")}),void(r||setTimeout(n,t,t))):setTimeout(n,t,t)}(e=e||{}).frameInterval||(e.frameInterval=10),e.disableLogs||console.log("Using frames-interval:",e.frameInterval),this.record=function(){e.width||(e.width=320),e.height||(e.height=240),e.video||(e.video={width:e.width,height:e.height}),e.canvas||(e.canvas={width:e.width,height:e.height}),l.width=e.canvas.width||320,l.height=e.canvas.height||240,c=l.getContext("2d"),e.video&&e.video instanceof HTMLVideoElement?(a=e.video.cloneNode(),e.initCallback&&e.initCallback()):(a=document.createElement("video"),w(t,a),a.onloadedmetadata=function(){e.initCallback&&e.initCallback()},a.width=e.video.width,a.height=e.video.height),a.muted=!0,a.play(),s=(new Date).getTime(),u=new P.Video,e.disableLogs||(console.log("canvas resolutions",l.width,"*",l.height),console.log("video width/height",a.width||l.width,"*",a.height||l.height)),n(e.frameInterval)};var r=!1;this.stop=function(t){t=t||function(){},r=!0;var n=this;setTimeout(function(){!function(t,e,n,r,i){var o=document.createElement("canvas");o.width=l.width,o.height=l.height;var a,s,u,c=o.getContext("2d"),h=[],p=t.length,f=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),d=!1;s=-1,u=(a={length:p,functionToLoop:function(e,n){var r,i,o,a=function(){!d&&o-r<=0*o||(d=!0,h.push(t[n])),e()};if(d)a();else{var s=new Image;s.onload=function(){c.drawImage(s,0,0,l.width,l.height);var t=c.getImageData(0,0,l.width,l.height);r=0,i=t.data.length,o=t.data.length/4;for(var e=0;e<i;e+=4){var n={r:t.data[e],g:t.data[e+1],b:t.data[e+2]};Math.sqrt(Math.pow(n.r-0,2)+Math.pow(n.g-0,2)+Math.pow(n.b-0,2))<=0*f&&r++}a()},s.src=t[n].image}},callback:function(){(h=h.concat(t.slice(p))).length<=0&&h.push(t[t.length-1]),i(h)}}).length,function t(){++s!==u?setTimeout(function(){a.functionToLoop(t,s)},1):a.callback()}()}(u.frames,0,0,0,function(r){u.frames=r,e.advertisement&&e.advertisement.length&&(u.frames=e.advertisement.concat(u.frames)),u.compile(function(e){n.blob=e,n.blob.forEach&&(n.blob=new Blob([],{type:"video/webm"})),t&&t(n.blob)})})},10)};var i=!1;function o(){u.frames=[],r=!0,i=!1}this.pause=function(){i=!0},this.resume=function(){i=!1,r&&this.record()},this.clearRecordedData=function(){r||this.stop(o),o()},this.name="WhammyRecorder",this.toString=function(){return this.name};var a,s,u,l=document.createElement("canvas"),c=l.getContext("2d")}void 0!==h?x.AudioContext=h:"undefined"!=typeof webkitAudioContext&&(x.AudioContext=webkitAudioContext),o.Storage=x,o.MediaStreamRecorder=E,o.StereoAudioRecorder=S,o.CanvasRecorder=T,o.WhammyRecorder=A;var P=function(){function t(t){this.frames=[],this.duration=t||1,this.quality=.8}function e(t){function e(t,e,n){return[{data:t,id:231}].concat(n.map(function(t){var n=function(t){var e=0;if(t.keyframe&&(e|=128),t.invisible&&(e|=8),t.lacing&&(e|=t.lacing<<1),t.discardable&&(e|=1),t.trackNum>127)throw"TrackNumber > 127 not supported";return[128|t.trackNum,t.timecode>>8,255&t.timecode,e].map(function(t){return String.fromCharCode(t)}).join("")+t.frame}({discardable:0,frame:t.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(e)});return e+=t.duration,{data:n,id:163}}))}function n(t){for(var e=[];t>0;)e.push(255&t),t>>=8;return new Uint8Array(e.reverse())}function r(t){var e=[];t=(t.length%8?new Array(9-t.length%8).join("0"):"")+t;for(var n=0;n<t.length;n+=8)e.push(parseInt(t.substr(n,8),2));return new Uint8Array(e)}function i(t,e){return parseInt(t.substr(e+4,4).split("").map(function(t){var e=t.charCodeAt(0).toString(2);return new Array(8-e.length+1).join("0")+e}).join(""),2)}var o=new function(t){var i=function(t){if(t[0]){for(var e=t[0].width,n=t[0].height,r=t[0].duration,i=1;i<t.length;i++)r+=t[i].duration;return{duration:r,width:e,height:n}}postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."})}(t);if(!i)return[];for(var o,a=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:(o=i.duration,[].slice.call(new Uint8Array(new Float64Array([o]).buffer),0).map(function(t){return String.fromCharCode(t)}).reverse().join("")),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:i.width,id:176},{data:i.height,id:186}]}]}]}]}],s=0,u=0;s<t.length;){var l=[],c=0;do{l.push(t[s]),c+=t[s].duration,s++}while(s<t.length&&c<3e4);var h={id:524531317,data:e(u,0,l)};a[1].data.push(h),u+=c}return function t(e){for(var i=[],o=0;o<e.length;o++){var a=e[o].data;"object"==typeof a&&(a=t(a)),"number"==typeof a&&(a=r(a.toString(2))),"string"==typeof a&&(a=new Uint8Array(a.split("").map(function(t){return t.charCodeAt(0)})));var s=a.size||a.byteLength||a.length,u=Math.ceil(Math.ceil(Math.log(s)/Math.log(2))/8),l=s.toString(2),c=new Array(7*u+7+1-l.length).join("0")+l,h=new Array(u).join("0")+"1"+c;i.push(n(e[o].id)),i.push(r(h)),i.push(a)}return new Blob(i,{type:"video/webm"})}(a)}(t.map(function(t){var e=function(t){for(var e=t.RIFF[0].WEBP[0],n=e.indexOf("\x9d\x01*"),r=0,i=[];r<4;r++)i[r]=e.charCodeAt(n+3+r);return{width:16383&(i[1]<<8|i[0]),height:16383&(i[3]<<8|i[2]),data:e,riff:t}}(function t(e){for(var n=0,r={};n<e.length;){var o=e.substr(n,4),a=i(e,n),s=e.substr(n+4+4,a);n+=8+a,r[o]=r[o]||[],r[o].push("RIFF"===o||"LIST"===o?t(s):s)}return r}(atob(t.image.slice(23))));return e.duration=t.duration,e}));postMessage(o)}return t.prototype.add=function(t,e){if("canvas"in t&&(t=t.canvas),"toDataURL"in t&&(t=t.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(t))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:t,duration:e||this.duration})},t.prototype.compile=function(t){var n,r,i,o=(n=e,r=p.createObjectURL(new Blob([n.toString(),"this.onmessage =  function (eee) {"+n.name+"(eee.data);}"],{type:"application/javascript"})),i=new Worker(r),p.revokeObjectURL(r),i);o.onmessage=function(e){e.data.error?console.error(e.data.error):t(e.data)},o.postMessage(this.frames)},{Video:t}}();o.Whammy=P;var I={init:function(){var t=this;if("undefined"!=typeof indexedDB&&void 0!==indexedDB.open){var e,n=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),r=indexedDB.open(n,1);r.onerror=t.onError,r.onsuccess=function(){(e=r.result).onerror=t.onError,e.setVersion&&1!==e.version?e.setVersion(1).onsuccess=function(){i(e),o()}:o()},r.onupgradeneeded=function(t){i(t.target.result)}}else console.error("IndexedDB API are not available in this browser.");function i(e){e.createObjectStore(t.dataStoreName)}function o(){var n=e.transaction([t.dataStoreName],"readwrite");function r(e){n.objectStore(t.dataStoreName).get(e).onsuccess=function(n){t.callback&&t.callback(n.target.result,e)}}t.videoBlob&&n.objectStore(t.dataStoreName).put(t.videoBlob,"videoBlob"),t.gifBlob&&n.objectStore(t.dataStoreName).put(t.gifBlob,"gifBlob"),t.audioBlob&&n.objectStore(t.dataStoreName).put(t.audioBlob,"audioBlob"),r("audioBlob"),r("videoBlob"),r("gifBlob")}},Fetch:function(t){return this.callback=t,this.init(),this},Store:function(t){return this.audioBlob=t.audioBlob,this.videoBlob=t.videoBlob,this.gifBlob=t.gifBlob,this.init(),this},onError:function(t){console.error(JSON.stringify(t,null,"\t"))},dataStoreName:"recordRTC",dbName:null};function O(t,e){if("undefined"==typeof GIFEncoder){var n=document.createElement("script");n.src="https://cdn.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(n)}e=e||{};var r=t instanceof CanvasRenderingContext2D||t instanceof HTMLCanvasElement;this.record=function(){"undefined"!=typeof GIFEncoder&&s?(r||(e.width||(e.width=l.offsetWidth||320),e.height||(e.height=l.offsetHeight||240),e.video||(e.video={width:e.width,height:e.height}),e.canvas||(e.canvas={width:e.width,height:e.height}),o.width=e.canvas.width||320,o.height=e.canvas.height||240,l.width=e.video.width||320,l.height=e.video.height||240),(p=new GIFEncoder).setRepeat(0),p.setDelay(e.frameRate||200),p.setQuality(e.quality||10),p.start(),"function"==typeof e.onGifRecordingStarted&&e.onGifRecordingStarted(),Date.now(),f=u(function t(n){if(!0!==d.clearedRecordedData){if(i)return setTimeout(function(){t(n)},100);f=u(t),void 0===typeof h&&(h=n),n-h<90||(!r&&l.paused&&l.play(),r||a.drawImage(l,0,0,o.width,o.height),e.onGifPreview&&e.onGifPreview(o.toDataURL("image/png")),p.addFrame(a),h=n)}}),e.initCallback&&e.initCallback()):setTimeout(d.record,1e3)},this.stop=function(t){t=t||function(){},f&&c(f),Date.now(),this.blob=new Blob([new Uint8Array(p.stream().bin)],{type:"image/gif"}),t(this.blob),p.stream().bin=[]};var i=!1;this.pause=function(){i=!0},this.resume=function(){i=!1},this.clearRecordedData=function(){d.clearedRecordedData=!0,p&&(p.stream().bin=[])},this.name="GifRecorder",this.toString=function(){return this.name};var o=document.createElement("canvas"),a=o.getContext("2d");r&&(t instanceof CanvasRenderingContext2D?o=(a=t).canvas:t instanceof HTMLCanvasElement&&(a=t.getContext("2d"),o=t));var s=!0;if(!r){var l=document.createElement("video");l.muted=!0,l.autoplay=!0,s=!1,l.onloadedmetadata=function(){s=!0},w(t,l),l.play()}var h,p,f=null,d=this}function D(t,e){t=t||[];var n,r,i=this;(e=e||{mimeType:"video/webm",video:{width:360,height:240}}).frameInterval||(e.frameInterval=10),e.video||(e.video={}),e.video.width||(e.video.width=360),e.video.height||(e.video.height=240),this.record=function(){var i;n=new function(t){var e=[],n=!1,r=document.createElement("canvas"),i=r.getContext("2d");r.style="opacity:0;position:absolute;z-index:-1;top: -100000000;left:-1000000000; margin-top:-1000000000;margin-left:-1000000000;",(document.body||document.documentElement).appendChild(r),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var o=this,a=window.AudioContext;void 0===a&&("undefined"!=typeof webkitAudioContext&&(a=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(a=mozAudioContext));var s=window.URL;void 0===s&&"undefined"!=typeof webkitURL&&(s=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var u=window.MediaStream;void 0===u&&"undefined"!=typeof webkitMediaStream&&(u=webkitMediaStream),void 0!==u&&void 0===u.prototype.stop&&(u.prototype.stop=function(){this.getTracks().forEach(function(t){t.stop()})});var l={};function c(){if(!n){var t=e.length,i=!1,a=[];if(e.forEach(function(t){t.stream||(t.stream={}),t.stream.fullcanvas?i=t:a.push(t)}),i)r.width=i.stream.width,r.height=i.stream.height;else if(a.length){r.width=t>1?2*a[0].width:a[0].width;var s=1;3!==t&&4!==t||(s=2),5!==t&&6!==t||(s=3),7!==t&&8!==t||(s=4),9!==t&&10!==t||(s=5),r.height=a[0].height*s}else r.width=o.width||360,r.height=o.height||240;i&&i instanceof HTMLVideoElement&&h(i),a.forEach(function(t,e){h(t,e)}),setTimeout(c,o.frameInterval)}}function h(t,e){if(!n){var r=0,o=0,a=t.width,s=t.height;1===e&&(r=t.width),2===e&&(o=t.height),3===e&&(r=t.width,o=t.height),4===e&&(o=2*t.height),5===e&&(r=t.width,o=2*t.height),6===e&&(o=3*t.height),7===e&&(r=t.width,o=3*t.height),void 0!==t.stream.left&&(r=t.stream.left),void 0!==t.stream.top&&(o=t.stream.top),void 0!==t.stream.width&&(a=t.stream.width),void 0!==t.stream.height&&(s=t.stream.height),i.drawImage(t,r,o,a,s),"function"==typeof t.stream.onRender&&t.stream.onRender(i,r,o,a,s,e)}}function p(t){var e=document.createElement("video");return function(t,e){"srcObject"in e?e.srcObject=t:"mozSrcObject"in e?e.mozSrcObject=t:e.srcObject=t}(t,e),e.muted=!0,e.volume=0,e.width=t.width||o.width||360,e.height=t.height||o.height||240,e.play(),e}function f(n){e=[],(n=n||t).forEach(function(t){if(t.getTracks().filter(function(t){return"video"===t.kind}).length){var n=p(t);n.stream=t,e.push(n)}})}void 0!==a?l.AudioContext=a:"undefined"!=typeof webkitAudioContext&&(l.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){c()},this.appendStreams=function(n){if(!n)throw"First parameter is required.";n instanceof Array||(n=[n]),t.concat(n),n.forEach(function(t){if(t.getTracks().filter(function(t){return"video"===t.kind}).length){var n=p(t);n.stream=t,e.push(n)}if(t.getTracks().filter(function(t){return"audio"===t.kind}).length&&o.audioContext){var r=o.audioContext.createMediaStreamSource(t);r.connect(o.audioDestination),o.audioSources.push(r)}})},this.releaseStreams=function(){e=[],n=!0,o.gainNode&&(o.gainNode.disconnect(),o.gainNode=null),o.audioSources.length&&(o.audioSources.forEach(function(t){t.disconnect()}),o.audioSources=[]),o.audioDestination&&(o.audioDestination.disconnect(),o.audioDestination=null),o.audioContext&&o.audioContext.close(),o.audioContext=null,i.clearRect(0,0,r.width,r.height),r.stream&&(r.stream.stop(),r.stream=null)},this.resetVideoStreams=function(t){!t||t instanceof Array||(t=[t]),f(t)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function(){n=!1;var e=function(){var t;f(),"captureStream"in r?t=r.captureStream():"mozCaptureStream"in r?t=r.mozCaptureStream():o.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var e=new u;return t.getTracks().filter(function(t){return"video"===t.kind}).forEach(function(t){e.addTrack(t)}),r.stream=e,e}(),i=function(){l.AudioContextConstructor||(l.AudioContextConstructor=new l.AudioContext),o.audioContext=l.AudioContextConstructor,o.audioSources=[],!0===o.useGainNode&&(o.gainNode=o.audioContext.createGain(),o.gainNode.connect(o.audioContext.destination),o.gainNode.gain.value=0);var e=0;if(t.forEach(function(t){if(t.getTracks().filter(function(t){return"audio"===t.kind}).length){e++;var n=o.audioContext.createMediaStreamSource(t);!0===o.useGainNode&&n.connect(o.gainNode),o.audioSources.push(n)}}),e)return o.audioDestination=o.audioContext.createMediaStreamDestination(),o.audioSources.forEach(function(t){t.connect(o.audioDestination)}),o.audioDestination.stream}();return i&&i.getTracks().filter(function(t){return"audio"===t.kind}).forEach(function(t){e.addTrack(t)}),t.forEach(function(t){}),e}}(t),(i=[],t.forEach(function(t){_(t,"video").forEach(function(t){i.push(t)})}),i).length&&(n.frameInterval=e.frameInterval||10,n.width=e.video.width||360,n.height=e.video.height||240,n.startDrawingFrames()),e.previewStream&&"function"==typeof e.previewStream&&e.previewStream(n.getMixedStream()),(r=new E(n.getMixedStream(),e)).record()},this.stop=function(t){r&&r.stop(function(e){i.blob=e,t(e),i.clearRecordedData()})},this.pause=function(){r&&r.pause()},this.resume=function(){r&&r.resume()},this.clearRecordedData=function(){r&&(r.clearRecordedData(),r=null),n&&(n.releaseStreams(),n=null)},this.addStreams=function(e){if(!e)throw"First parameter is required.";e instanceof Array||(e=[e]),t.concat(e),r&&n&&n.appendStreams(e)},this.resetVideoStreams=function(t){n&&(!t||t instanceof Array||(t=[t]),n.resetVideoStreams(t))},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}function k(t,e){function n(){return new ReadableStream({start:function(n){var r=document.createElement("canvas"),i=document.createElement("video");i.srcObject=t,i.onplaying=function(){r.width=e.width,r.height=e.height;var t=r.getContext("2d"),o=1e3/e.frameRate;setTimeout(function r(){t.drawImage(i,0,0),n.enqueue(t.getImageData(0,0,e.width,e.height)),setTimeout(r,o)},o)},i.play()}})}var r,i;"undefined"!=typeof ReadableStream&&"undefined"!=typeof WritableStream||console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),(e=e||{}).width=e.width||640,e.height=e.height||480,e.frameRate=e.frameRate||30,e.bitrate=e.bitrate||1200,this.record=function(){o=[],i=!1,this.blob=null,function t(a,s){if(e.workerPath||s){if(!e.workerPath&&s instanceof ArrayBuffer){var u=new Blob([s],{type:"text/javascript"});e.workerPath=p.createObjectURL(u)}e.workerPath||console.error("workerPath parameter is missing."),(r=new Worker(e.workerPath)).postMessage(e.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),r.addEventListener("message",function(t){"READY"===t.data?(r.postMessage({width:e.width,height:e.height,bitrate:e.bitrate||1200,timebaseDen:e.frameRate||30,realtime:!0}),n().pipeTo(new WritableStream({write:function(t){r&&r.postMessage(t.data.buffer,[t.data.buffer])}}))):t.data&&(i||o.push(t.data))})}else fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then(function(e){e.arrayBuffer().then(function(e){t(a,e)})})}(t)},this.pause=function(){i=!0},this.resume=function(){i=!1};var o=[];this.stop=function(t){r&&(r.postMessage(null),r.terminate(),r=null),this.blob=new Blob(o,{type:"video/webm"}),t(this.blob)},this.blob=null}o.DiskStorage=I,o.GifRecorder=O,o.MultiStreamRecorder=D,o.RecordRTCPromisesHandler=function(t,e){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(void 0===t)throw'First argument "MediaStream" is required.';var n=this;n.recordRTC=new o(t,e),this.startRecording=function(){return new Promise(function(t,e){try{n.recordRTC.startRecording(),t()}catch(t){e(t)}})},this.stopRecording=function(){return new Promise(function(t,e){try{n.recordRTC.stopRecording(function(r){n.blob=n.recordRTC.getBlob(),n.blob&&n.blob.size?t(r):e("Empty blob.",n.blob)})}catch(t){e(t)}})},this.getDataURL=function(t){return new Promise(function(t,e){try{n.recordRTC.getDataURL(function(e){t(e)})}catch(t){e(t)}})},this.getBlob=function(){return new Promise(function(t,e){try{t(n.recordRTC.getBlob())}catch(t){e(t)}})},this.blob=null},o.WebAssemblyRecorder=k},r2d8:function(t,e,n){"use strict";var r,i,o,a;function s(t){return t}function u(t){return t}function l(t){return t}function c(t){if(!(this instanceof c))return new c(t);i(this,t)}function h(t){var e,n,i,h;return e=(t=t||{}).init||s,n=t.request||u,i=t.success||t.response||l,h=t.error||function(){return Promise.resolve((t.response||l).apply(this,arguments)).then(Promise.reject.bind(Promise))},function(s,u){return"object"==typeof s&&(u=s),"function"!=typeof s&&(s=t.client||r),u=e(u||{}),a(function t(e){var r,a;return r={},a={arguments:Array.prototype.slice.call(arguments),client:t},(e="string"==typeof e?{path:e}:e||{}).originator=e.originator||t,o(n.call(r,e,u,a),function(t){var e,n,o;return o=s,t instanceof c&&(n=t.abort,o=t.client||o,e=t.response,t=t.request),e=e||Promise.resolve(t).then(function(t){return Promise.resolve(o(t)).then(function(t){return i.call(r,t,u,a)},function(t){return h.call(r,t,u,a)})}),n?Promise.race([e,n]):e},function(t){return Promise.reject({request:e,error:t})})},s)}}r=n("S9rb"),i=n("LyWy"),o=n("Zamv"),a=n("nfO7"),h.ComplexRequest=c,t.exports=h},r8II:function(t,e,n){"use strict";e.decode=e.parse=n("YcCt"),e.encode=e.stringify=n("6MUB")},rJxV:function(t,e,n){"use strict";var r=n("1fwK");t.exports=function(t){var e=t.split(".")[1];if(!e)return null;var n=(e=e.replace(/-/g,"+").replace(/_/g,"/")).length%4;if(2===n&&(e+="=="),3===n&&(e+="="),1===n||n>3)return null;try{return JSON.parse(r.decode(e)).u}catch(t){return null}}},rWzI:function(t,e,n){(function(t){var r;!function(i){"object"==typeof global&&global;var o,a=2147483647,s=36,u=1,l=26,c=38,h=700,p=72,f=128,d="-",m=/^xn--/,g=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=s-u,_=Math.floor,w=String.fromCharCode;function x(t){throw RangeError(v[t])}function C(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function E(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+C((t=t.replace(y,".")).split("."),e).join(".")}function S(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function T(t){return C(t,function(t){var e="";return t>65535&&(e+=w((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+w(t)}).join("")}function A(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function P(t,e,n){var r=0;for(t=n?_(t/h):t>>1,t+=_(t/e);t>b*l>>1;r+=s)t=_(t/b);return _(r+(b+1)*t/(t+c))}function I(t){var e,n,r,i,o,c,h,m,g,y,v,b=[],w=t.length,C=0,E=f,S=p;for((n=t.lastIndexOf(d))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&x("not-basic"),b.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<w;){for(o=C,c=1,h=s;i>=w&&x("invalid-input"),((m=(v=t.charCodeAt(i++))-48<10?v-22:v-65<26?v-65:v-97<26?v-97:s)>=s||m>_((a-C)/c))&&x("overflow"),C+=m*c,!(m<(g=h<=S?u:h>=S+l?l:h-S));h+=s)c>_(a/(y=s-g))&&x("overflow"),c*=y;S=P(C-o,e=b.length+1,0==o),_(C/e)>a-E&&x("overflow"),E+=_(C/e),C%=e,b.splice(C++,0,E)}return T(b)}function O(t){var e,n,r,i,o,c,h,m,g,y,v,b,C,E,T,I=[];for(b=(t=S(t)).length,e=f,n=0,o=p,c=0;c<b;++c)(v=t[c])<128&&I.push(w(v));for(r=i=I.length,i&&I.push(d);r<b;){for(h=a,c=0;c<b;++c)(v=t[c])>=e&&v<h&&(h=v);for(h-e>_((a-n)/(C=r+1))&&x("overflow"),n+=(h-e)*C,e=h,c=0;c<b;++c)if((v=t[c])<e&&++n>a&&x("overflow"),v==e){for(m=n,g=s;!(m<(y=g<=o?u:g>=o+l?l:g-o));g+=s)I.push(w(A(y+(T=m-y)%(E=s-y),0))),m=_(T/E);I.push(w(A(m,0))),o=P(n,C,r==i),n=0,++r}++n,++e}return I.join("")}o={version:"1.3.2",ucs2:{decode:S,encode:T},decode:I,encode:O,toASCII:function(t){return E(t,function(t){return g.test(t)?"xn--"+O(t):t})},toUnicode:function(t){return E(t,function(t){return m.test(t)?I(t.slice(4).toLowerCase()):t})}},void 0===(r=(function(){return o}).call(e,n,e,t))||(t.exports=r)}()}).call(this,n("YuTi")(t))},sWiY:function(t,e,n){"use strict";t.exports={write:function(t){if("undefined"==typeof FormData)throw new Error("The multipart/form-data mime serializer requires FormData support");if(t instanceof FormData)return t;if(function(t){return t&&1===t.nodeType&&"FORM"===t.tagName}(t))return new FormData(t);if("object"==typeof t&&null!==t)return function(t){var e,n=new FormData;for(var r in t)t.hasOwnProperty(r)&&((e=t[r])instanceof File?n.append(r,e,e.name):e instanceof Blob?n.append(r,e):n.append(r,String(e)));return n}(t);throw new Error("Unable to create FormData from object "+t)}}},svcd:function(t,e,n){"use strict";n.r(e),n.d(e,"AsyncSubject",function(){return a});var r=n("mrSG"),i=n("K9Ia"),o=n("pugT"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return r.c(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),o.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),o.a.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(i.a)},tHPV:function(t,e,n){"use strict";var r=n("mrSG"),i=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.c(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},e}(n(null).a),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.c(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(n(null).a);n.d(e,"animationFrame",function(){return a});var a=new o(i)},trmM:function(t,e,n){"use strict";t.exports={parse:function(t){var e,n;return{raw:t,type:(n=(e=t.split(";"))[0].trim().split("+"))[0],suffix:n[1]?"+"+n[1]:"",params:e.slice(1).reduce(function(t,e){return t[(e=e.split("="))[0].trim()]=e[1]?e[1].trim():void 0,t},{})}}}},u67D:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("En8+"),i=function(t){return function(e){for(var n=t[r.a]();;){var i=n.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}}},vAyL:function(t,e,n){"use strict";n.r(e),n.d(e,"range",function(){return i}),n.d(e,"dispatch",function(){return o});var r=n("6blF");function i(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),new r.a(function(r){var i=0,a=t;if(n)return n.schedule(o,0,{index:i,count:e,start:t,subscriber:r});for(;;){if(i++>=e){r.complete();break}if(r.next(a++),r.closed)break}})}function o(t){var e=t.start,n=t.index,r=t.subscriber;n>=t.count?r.complete():(r.next(e),r.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}},vcPP:function(t,e,n){"use strict";var r,i,o,a;function s(t,e){return Object.keys(e||{}).forEach(function(n){if(e.hasOwnProperty(n)&&n in t)try{t[n]=e[n]}catch(t){}}),t}r=n("fkpV"),i=n("Zamv"),o=n("nfO7"),a=/[\r|\n]+/,t.exports=o(function(t){return i.promise(function(e,n){var i,o,u,l,c,h,p,f;if(p={request:t="string"==typeof t?{path:t}:t||{}},t.canceled)return p.error="precanceled",void n(p);if(f=t.engine||XMLHttpRequest){c=t.entity,t.method=t.method||(c?"POST":"GET"),o=t.method,u=p.url=t.path||"";try{for(h in s(i=p.raw=new f,t.mixin),i.open(o,u,!0),s(i,t.mixin),l=t.headers)"Content-Type"===h&&"multipart/form-data"===l[h]||i.setRequestHeader(h,l[h]);t.canceled=!1,t.cancel=function(){t.canceled=!0,i.abort(),n(p)},i.onreadystatechange=function(){var n,o;t.canceled||i.readyState===(f.DONE||4)&&(p.status={code:i.status,text:i.statusText},p.headers=(n=i.getAllResponseHeaders(),o={},n?(n.trim().split(a).forEach(function(t){var e,n,i;e=t.indexOf(":"),n=r(t.substring(0,e).trim()),i=t.substring(e+1).trim(),o[n]?Array.isArray(o[n])?o[n].push(i):o[n]=[o[n],i]:o[n]=i}),o):o),p.entity=i.responseText,1223===p.status.code&&(p.status.code=204),p.status.code>0?e(p):setTimeout(function(){e(p)},0))};try{i.onerror=function(){p.error="loaderror",n(p)}}catch(t){}i.send(c)}catch(t){p.error="loaderror",n(p)}}else n({request:t,error:"xhr-not-available"})})})},vlXQ:function(t,e){t.exports.DEFAULT_ENDPOINT="https://api.mapbox.com"},wj3C:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("zVF4"),i=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o="[DEFAULT]",a=[],s=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=r.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){a.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){a=a.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(n){Object.keys(t.services_[n]).forEach(function(r){e.push(t.services_[n][r])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=o),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==o?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;r.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(a.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),a=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&u("app-deleted",{name:this.name_})},t}();function u(t,e){throw l.create(t,e)}s.prototype.name&&s.prototype.options||s.prototype.delete||console.log("dc");var l=new r.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."}),c=function t(){var e={},n={},a={},l={__esModule:!0,initializeApp:function(t,n){void 0===n&&(n={}),("object"!=typeof n||null===n)&&(n={name:n});var r=n;void 0===r.name&&(r.name=o);var a=r.name;"string"==typeof a&&a||u("bad-app-name",{name:a+""}),i(e,a)&&u("duplicate-app",{name:a});var c=new s(t,r,l);return e[a]=c,p(c,"create"),c},app:c,apps:null,Promise:Promise,SDK_VERSION:"5.5.9",INTERNAL:{registerService:function(t,e,i,o,p){n[t]&&u("duplicate-service",{name:t}),n[t]=e,o&&(a[t]=o,h().forEach(function(t){o("create",t)}));var f=function(e){return void 0===e&&(e=c()),"function"!=typeof e[t]&&u("invalid-app-argument",{name:t}),e[t]()};return void 0!==i&&r.deepExtend(f,i),l[t]=f,s.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,p?e:[])},f},createFirebaseNamespace:t,extendNamespace:function(t){r.deepExtend(l,t)},createSubscribe:r.createSubscribe,ErrorFactory:r.ErrorFactory,removeApp:function(t){p(e[t],"delete"),delete e[t]},factories:n,useAsService:f,Promise:Promise,deepExtend:r.deepExtend}};function c(t){return i(e,t=t||o)||u("no-app",{name:t}),e[t]}function h(){return Object.keys(e).map(function(t){return e[t]})}function p(t,e){Object.keys(n).forEach(function(n){var r=f(0,n);null!==r&&a[r]&&a[r](e,t)})}function f(t,e){return"serverAuth"===e?null:e}return r.patchProperty(l,"default",l),Object.defineProperty(l,"apps",{get:h}),r.patchProperty(c,"App",s),l}();e.firebase=c,e.default=c},x7I3:function(t,e,n){"use strict";n.r(e),n.d(e,"createWebChannelTransport",function(){return On}),n.d(e,"ErrorCode",function(){return Dn}),n.d(e,"EventType",function(){return kn}),n.d(e,"WebChannel",function(){return Mn}),n.d(e,"XhrIoPool",function(){return Rn});var r,i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=o||{},a=i;function s(t){return"string"==typeof t}function u(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function l(){}function c(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function h(t){return"array"==c(t)}function p(t){var e=c(t);return"array"==e||"object"==e&&"number"==typeof t.length}function f(t){return"function"==c(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:v).apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var w=Date.now||function(){return+new Date};function x(t,e){function n(){}n.prototype=e.prototype,t.L=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.mh=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function C(t){if(Error.captureStackTrace)Error.captureStackTrace(this,C);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function E(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");C.call(this,n+t[r])}function S(){0!=T&&(A[this[m]||(this[m]=++g)]=this),this.Ka=this.Ka,this.Qa=this.Qa}x(C,Error),C.prototype.name="CustomError",x(E,C),E.prototype.name="AssertionError";var T=0,A={};S.prototype.Ka=!1,S.prototype.bb=function(){if(!this.Ka&&(this.Ka=!0,this.F(),0!=T)){var t=this[m]||(this[m]=++g);if(0!=T&&this.Qa&&0<this.Qa.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete A[t]}},S.prototype.F=function(){if(this.Qa)for(;this.Qa.length;)this.Qa.shift()()};var P=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(s(t))return s(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},I=Array.prototype.lastIndexOf?function(t,e){return Array.prototype.lastIndexOf.call(t,e,t.length-1)}:function(t,e){var n=t.length-1;if(0>n&&(n=Math.max(0,t.length+n)),s(t))return s(e)&&1==e.length?t.lastIndexOf(e,n):-1;for(;0<=n;n--)if(n in t&&t[n]===e)return n;return-1},O=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=s(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},D=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=s(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function k(t){if(!h(t))for(var e=t.length-1;0<=e;e--)delete t[e];t.length=0}function M(t,e){var n;return(n=0<=(e=P(t,e)))&&Array.prototype.splice.call(t,e,1),n}function R(t){return Array.prototype.concat.apply([],arguments)}function N(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function L(t){return/^[\s\xa0]*$/.test(t)}var F,B=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function j(t,e){return t<e?-1:t>e?1:0}t:{var z=a.navigator;if(z){var V=z.userAgent;if(V){F=V;break t}}F=""}function U(t){return-1!=F.indexOf(t)}function q(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function G(t){var e,n=[],r=0;for(e in t)n[r++]=t[e];return n}function H(t){var e,n=[],r=0;for(e in t)n[r++]=e;return n}function W(t){var e,n={};for(e in t)n[e]=t[e];return n}var K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<K.length;o++)n=K[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Q(t){return Q[" "](t),t}Q[" "]=l;var Z,Y,J=U("Opera"),$=U("Trident")||U("MSIE"),tt=U("Edge"),et=tt||$,nt=U("Gecko")&&!(-1!=F.toLowerCase().indexOf("webkit")&&!U("Edge"))&&!(U("Trident")||U("MSIE"))&&!U("Edge"),rt=-1!=F.toLowerCase().indexOf("webkit")&&!U("Edge");function it(){var t=a.document;return t?t.documentMode:void 0}t:{var ot="",at=(Y=F,nt?/rv:([^\);]+)(\)|;)/.exec(Y):tt?/Edge\/([\d\.]+)/.exec(Y):$?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Y):rt?/WebKit\/(\S+)/.exec(Y):J?/(?:Version)[ \/]?(\S+)/.exec(Y):void 0);if(at&&(ot=at?at[1]:""),$){var st=it();if(null!=st&&st>parseFloat(ot)){Z=String(st);break t}}Z=ot}var ut,lt={};function ct(t){return function(t,e){var n=lt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=B(String(Z)).split("."),r=B(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=j(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||j(0==a[2].length,0==s[2].length)||j(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var ht=a.document;ut=ht&&$?it()||("CSS1Compat"==ht.compatMode?parseInt(Z,10):5):void 0;var pt=Object.freeze||function(t){return t},ft=!$||9<=Number(ut),dt=$&&!ct("9"),mt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",l,e),a.removeEventListener("test",l,e)}catch(t){}return t}();function gt(t,e){this.type=t,this.currentTarget=this.target=e,this.defaultPrevented=this.Ea=!1,this.Be=!0}function yt(t,e){gt.call(this,t?t.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.key="",this.charCode=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.fb=null,t&&this.Kf(t,e)}gt.prototype.stopPropagation=function(){this.Ea=!0},gt.prototype.preventDefault=function(){this.defaultPrevented=!0,this.Be=!1},x(yt,gt);var vt=pt({2:"touch",3:"pen",4:"mouse"});yt.prototype.Kf=function(t,e){var n=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.currentTarget=e,e=t.relatedTarget){if(nt){t:{try{Q(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===r?(this.offsetX=rt||void 0!==t.offsetX?t.offsetX:t.layerX,this.offsetY=rt||void 0!==t.offsetY?t.offsetY:t.layerY,this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=t.button,this.keyCode=t.keyCode||0,this.key=t.key||"",this.charCode=t.charCode||("keypress"==n?t.keyCode:0),this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=s(t.pointerType)?t.pointerType:vt[t.pointerType]||"",this.state=t.state,this.fb=t,t.defaultPrevented&&this.preventDefault()},yt.prototype.stopPropagation=function(){yt.L.stopPropagation.call(this),this.fb.stopPropagation?this.fb.stopPropagation():this.fb.cancelBubble=!0},yt.prototype.preventDefault=function(){yt.L.preventDefault.call(this);var t=this.fb;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,dt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var bt="closure_listenable_"+(1e6*Math.random()|0);function _t(t){return!(!t||!t[bt])}var wt=0;function xt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ob=i,this.key=++wt,this.Sa=this.Eb=!1}function Ct(t){this.src=t,this.J={},this.xb=0}function Et(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Sa&&o.listener==e&&o.capture==!!n&&o.Ob==r)return i}return-1}xt.prototype.Vb=function(){this.Sa=!0,this.Ob=this.src=this.proxy=this.listener=null},(r=Ct.prototype).add=function(t,e,n,r,i){var o=t.toString();(t=this.J[o])||(t=this.J[o]=[],this.xb++);var a=Et(t,e,r,i);return-1<a?(e=t[a],n||(e.Eb=!1)):((e=new xt(e,this.src,o,!!r,i)).Eb=n,t.push(e)),e},r.remove=function(t,e,n,r){if(!((t=t.toString())in this.J))return!1;var i=this.J[t];return-1<(e=Et(i,e,n,r))&&(i[e].Vb(),Array.prototype.splice.call(i,e,1),0==i.length&&(delete this.J[t],this.xb--),!0)},r.ye=function(t){var e=t.type;e in this.J&&M(this.J[e],t)&&(t.Vb(),0==this.J[e].length&&(delete this.J[e],this.xb--))},r.pb=function(t){var e;for(e in t=t&&t.toString(),this.J)if(!t||e==t){for(var n=this.J[e],r=0;r<n.length;r++)n[r].Vb();delete this.J[e],this.xb--}},r.jb=function(t,e,n,r){var i=-1;return(t=this.J[t.toString()])&&(i=Et(t,e,n,r)),-1<i?t[i]:null};var St="closure_lm_"+(1e6*Math.random()|0),Tt={};function At(t,e,n,r,i){if(r&&r.once)return It(t,e,n,r,i);if(h(e)){for(var o=0;o<e.length;o++)At(t,e[o],n,r,i);return null}return n=Ft(n),_t(t)?t.nb(e,n,d(r)?!!r.capture:!!r,i):Pt(t,e,n,!1,r,i)}function Pt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=d(i)?!!i.capture:!!i,s=Nt(t);if(s||(t[St]=s=new Ct(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=Rt,e=ft?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)mt||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Dt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function It(t,e,n,r,i){if(h(e)){for(var o=0;o<e.length;o++)It(t,e[o],n,r,i);return null}return n=Ft(n),_t(t)?t.Oc(e,n,d(r)?!!r.capture:!!r,i):Pt(t,e,n,!0,r,i)}function Ot(t){if("number"!=typeof t&&t&&!t.Sa){var e=t.src;if(_t(e))e.Le(t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Dt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Nt(e))?(n.ye(t),0==n.xb&&(n.src=null,e[St]=null)):t.Vb()}}}function Dt(t){return t in Tt?Tt[t]:Tt[t]="on"+t}function kt(t,e,n,r){var i=!0;if((t=Nt(t))&&(e=t.J[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.Sa&&(o=Mt(o,r),i=i&&!1!==o)}return i}function Mt(t,e){var n=t.listener,r=t.Ob||t.src;return t.Eb&&Ot(t),n.call(r,e)}function Rt(t,e){if(t.Sa)return!0;if(!ft){var n=e||u("window.event");e=new yt(n,this);var r=!0;if(!(0>n.keyCode||void 0!=n.returnValue)){t:{var i=!1;if(0==n.keyCode)try{n.keyCode=-1;break t}catch(t){i=!0}(i||void 0==n.returnValue)&&(n.returnValue=!0)}for(n=[],i=e.currentTarget;i;i=i.parentNode)n.push(i);for(t=t.type,i=n.length-1;!e.Ea&&0<=i;i--){e.currentTarget=n[i];var o=kt(n[i],t,!0,e);r=r&&o}for(i=0;!e.Ea&&i<n.length;i++)e.currentTarget=n[i],o=kt(n[i],t,!1,e),r=r&&o}return r}return Mt(t,new yt(e,this))}function Nt(t){return(t=t[St])instanceof Ct?t:null}var Lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ft(t){return f(t)?t:(t[Lt]||(t[Lt]=function(e){return t.handleEvent(e)}),t[Lt])}function Bt(){S.call(this),this.ka=new Ct(this),this.Pe=this,this.Uc=null}x(Bt,S),Bt.prototype[bt]=!0,(r=Bt.prototype).addEventListener=function(t,e,n,r){At(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(h(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=d(i)?!!i.capture:!!i,r=Ft(r),_t(e)?e.ed(n,r,i,o):e&&(e=Nt(e))&&(n=e.jb(n,r,i,o))&&Ot(n)}(this,t,e,n,r)},r.dispatchEvent=function(t){var e,n=this.Uc;if(n)for(e=[];n;n=n.Uc)e.push(n);n=this.Pe;var r=t.type||t;if(s(t))t=new gt(t,n);else if(t instanceof gt)t.target=t.target||n;else{var i=t;X(t=new gt(r,n),i)}if(i=!0,e)for(var o=e.length-1;!t.Ea&&0<=o;o--){var a=t.currentTarget=e[o];i=a.Lb(r,!0,t)&&i}if(t.Ea||(i=(a=t.currentTarget=n).Lb(r,!0,t)&&i,t.Ea||(i=a.Lb(r,!1,t)&&i)),e)for(o=0;!t.Ea&&o<e.length;o++)i=(a=t.currentTarget=e[o]).Lb(r,!1,t)&&i;return i},r.F=function(){Bt.L.F.call(this),this.pg(),this.Uc=null},r.nb=function(t,e,n,r){return this.ka.add(String(t),e,!1,n,r)},r.Oc=function(t,e,n,r){return this.ka.add(String(t),e,!0,n,r)},r.ed=function(t,e,n,r){this.ka.remove(String(t),e,n,r)},r.Le=function(t){this.ka.ye(t)},r.pg=function(){this.ka&&this.ka.pb(void 0)},r.Lb=function(t,e,n){if(!(t=this.ka.J[String(t)]))return!0;t=t.concat();for(var r=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.Sa&&o.capture==e){var a=o.listener,s=o.Ob||o.src;o.Eb&&this.Le(o),r=!1!==a.call(s,n)&&r}}return r&&0!=n.Be},r.jb=function(t,e,n,r){return this.ka.jb(String(t),e,n,r)};var jt=a.JSON.stringify;function zt(t,e){this.Sf=100,this.ef=t,this.ug=e,this.Zb=0,this.Pb=null}function Vt(){this.lc=this.Va=null}zt.prototype.get=function(){if(0<this.Zb){this.Zb--;var t=this.Pb;this.Pb=t.next,t.next=null}else t=this.ef();return t},zt.prototype.put=function(t){this.ug(t),this.Zb<this.Sf&&(this.Zb++,t.next=this.Pb,this.Pb=t)};var Ut,qt,Gt=new zt(function(){return new Ht},function(t){t.reset()});function Ht(){this.next=this.scope=this.Gc=null}function Wt(t){a.setTimeout(function(){throw t},0)}Vt.prototype.add=function(t,e){var n=this.Af();n.set(t,e),this.lc?this.lc.next=n:this.Va=n,this.lc=n},Vt.prototype.remove=function(){var t=null;return this.Va&&(t=this.Va,this.Va=this.Va.next,this.Va||(this.lc=null),t.next=null),t},Vt.prototype.wg=function(t){Gt.put(t)},Vt.prototype.Af=function(){return Gt.get()},Ht.prototype.set=function(t,e){this.Gc=t,this.scope=e,this.next=null},Ht.prototype.reset=function(){this.next=this.scope=this.Gc=null};var Kt=!1,Xt=new Vt;function Qt(){for(var t;t=Xt.remove();){try{t.Gc.call(t.scope)}catch(t){Wt(t)}Xt.wg(t)}Kt=!1}function Zt(t,e){Bt.call(this),this.Na=t||1,this.wb=e||a,this.nd=b(this.Rg,this),this.ie=w()}function Yt(t,e,n){if(f(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Jt(t,e,n){S.call(this),this.Uf=null!=n?b(t,n):t,this.Na=e,this.Xe=b(this.fg,this),this.qc=[]}function $t(t){S.call(this),this.i=t,this.o={}}x(Zt,Bt),(r=Zt.prototype).enabled=!1,r.B=null,r.setInterval=function(t){this.Na=t,this.B&&this.enabled?(this.stop(),this.start()):this.B&&this.stop()},r.Rg=function(){if(this.enabled){var t=w()-this.ie;0<t&&t<.8*this.Na?this.B=this.wb.setTimeout(this.nd,this.Na-t):(this.B&&(this.wb.clearTimeout(this.B),this.B=null),this.ff(),this.enabled&&(this.stop(),this.start()))}},r.ff=function(){this.dispatchEvent("tick")},r.start=function(){this.enabled=!0,this.B||(this.B=this.wb.setTimeout(this.nd,this.Na),this.ie=w())},r.stop=function(){this.enabled=!1,this.B&&(this.wb.clearTimeout(this.B),this.B=null)},r.F=function(){Zt.L.F.call(this),this.stop(),delete this.wb},x(Jt,S),(r=Jt.prototype).Ta=!1,r.ob=0,r.B=null,r.mf=function(t){this.qc=arguments,this.B||this.ob?this.Ta=!0:this.Cc()},r.stop=function(){this.B&&(a.clearTimeout(this.B),this.B=null,this.Ta=!1,this.qc=[])},r.pause=function(){this.ob++},r.resume=function(){this.ob--,this.ob||!this.Ta||this.B||(this.Ta=!1,this.Cc())},r.F=function(){Jt.L.F.call(this),this.stop()},r.fg=function(){this.B=null,this.Ta&&!this.ob&&(this.Ta=!1,this.Cc())},r.Cc=function(){this.B=Yt(this.Xe,this.Na),this.Uf.apply(null,this.qc)},x($t,S);var te=[];function ee(t,e,n){this.reset(t,e,n,void 0,void 0)}function ne(t){this.pe=t,this.Zd=this.uc=this.mb=this.$b=null}function re(t,e){this.name=t,this.value=e}(r=$t.prototype).nb=function(t,e,n,r){return this.Tf(t,e,n,r)},r.Tf=function(t,e,n,r){h(e)||(e&&(te[0]=e.toString()),e=te);for(var i=0;i<e.length;i++){var o=At(t,e[i],n||this.handleEvent,r||!1,this.i||this);if(!o)break;this.o[o.key]=o}return this},r.Oc=function(t,e,n,r){return this.je(t,e,n,r)},r.je=function(t,e,n,r,i){if(h(e))for(var o=0;o<e.length;o++)this.je(t,e[o],n,r,i);else{if(!(t=It(t,e,n||this.handleEvent,r,i||this.i||this)))return this;this.o[t.key]=t}return this},r.ed=function(t,e,n,r,i){if(h(e))for(var o=0;o<e.length;o++)this.ed(t,e[o],n,r,i);else n=n||this.handleEvent,r=d(r)?!!r.capture:!!r,i=i||this.i||this,n=Ft(n),r=!!r,(e=_t(t)?t.jb(e,n,r,i):t&&(t=Nt(t))?t.jb(e,n,r,i):null)&&(Ot(e),delete this.o[e.key])},r.pb=function(){q(this.o,function(t,e){this.o.hasOwnProperty(e)&&Ot(t)},this),this.o={}},r.F=function(){$t.L.F.call(this),this.pb()},r.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ee.prototype.Md=null,ee.prototype.reset=function(t,e,n,r,i){this.mb=t,delete this.Md},ee.prototype.Bg=function(t){this.Md=t},ee.prototype.Ge=function(t){this.mb=t},re.prototype.toString=function(){return this.name};var ie=new re("SEVERE",1e3),oe=new re("WARNING",900),ae=new re("INFO",800),se=new re("CONFIG",700),ue=new re("FINE",500);(r=ne.prototype).getName=function(){return this.pe},r.getParent=function(){return this.$b},r.pf=function(){return this.uc||(this.uc={}),this.uc},r.Ge=function(t){this.mb=t},r.Qd=function(){return this.mb?this.mb:this.$b?this.$b.Qd():(function(t,e){throw new E("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}("Root logger has no level set."),null)},r.Pf=function(t){return t.value>=this.Qd().value},r.log=function(t,e,n){this.Pf(t)&&(f(e)&&(e=e()),this.gf(this.uf(t,e,n)))},r.uf=function(t,e,n){return t=new ee(t,String(e),this.pe),n&&t.Bg(n),t},r.ca=function(t,e){this.log(ie,t,e)},r.T=function(t,e){this.log(oe,t,e)},r.info=function(t,e){this.log(ae,t,e)},r.lf=function(t){this.log(ue,t,void 0)},r.gf=function(t){for(var e=this;e;)e.We(t),e=e.getParent()},r.We=function(t){if(this.Zd)for(var e,n=0;e=this.Zd[n];n++)e(t)},r.Fg=function(t){this.$b=t},r.Qe=function(t,e){this.pf()[t]=e};var le={},ce=null;function he(t){var e;if(ce||(ce=new ne(""),le[""]=ce,ce.Ge(se)),!(e=le[t])){e=new ne(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=he(t.substr(0,n))).Qe(r,e),e.Fg(n),le[t]=e}return e}function pe(t,e){t&&t.info(e,void 0)}function fe(t,e){t&&t.lf(e)}function de(){this.s=he("goog.labs.net.webChannel.WebChannelDebug"),this.Wc=!0}(r=de.prototype).Id=function(){this.Wc=!1},r.Tg=function(t,e,n,r,i){var o=this;this.info(function(){return"XMLHTTP REQ ("+n+") [attempt "+r+"]: "+t+"\n"+e+"\n"+o.Xf(i)})},r.Ug=function(t,e,n,r,i,o){this.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+i+" "+o})},r.Wa=function(t,e,n){var r=this;this.info(function(){return"XMLHTTP TEXT ("+t+"): "+r.ng(e)+(n?" "+n:"")})},r.Sg=function(t){this.info(function(){return"TIMEOUT: "+t})},r.debug=function(t){fe(this.s,t)},r.cb=function(t,e){var n=this.s;n&&n.ca(e||"Exception",t)},r.info=function(t){pe(this.s,t)},r.T=function(t){var e=this.s;e&&e.T(t,void 0)},r.ca=function(t){var e=this.s;e&&e.ca(t,void 0)},r.ng=function(t){if(!this.Wc)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(var n=0;n<e.length;n++)h(e[n])&&this.Wf(e[n]);return jt(e)}catch(e){return this.debug("Exception parsing expected JS array - probably was not JS"),t}},r.Wf=function(t){if(!(2>t.length||(t=t[1],!h(t)||1>t.length))){var e=t[0];if("noop"!=e&&"stop"!=e&&"close"!=e)for(e=1;e<t.length;e++)t[e]=""}},r.Xf=function(t){if(!this.Wc)return t;if(!t)return null;var e="";t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].split("=");if(1<r.length){var i=r[0];r=r[1];var o=i.split("_");e=2<=o.length&&"type"==o[1]?e+(i+"=")+r+"&":e+(i+"=redacted&")}}return e};var me=new Bt;function ge(t){gt.call(this,"serverreachability",t)}function ye(t){me.dispatchEvent(new ge(me,t))}function ve(t,e){gt.call(this,"statevent",t),this.stat=e}function be(t){me.dispatchEvent(new ve(me,t))}function _e(t,e,n){gt.call(this,"timingevent",t),this.size=e,this.rtt=n}function we(t,e){if(!f(t))throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){t()},e)}x(ge,gt),x(ve,gt),x(_e,gt);var xe={NO_ERROR:0,Vg:1,bh:2,ah:3,Yg:4,$g:5,dh:6,Ne:7,TIMEOUT:8,gh:9},Ce={Xg:"complete",kh:"success",Oe:"error",Ne:"abort",ih:"ready",jh:"readystatechange",TIMEOUT:"timeout",eh:"incrementaldata",hh:"progress",Zg:"downloadprogress",lh:"uploadprogress"};function Ee(){}function Se(){}Ee.prototype.pd=null,Ee.prototype.Vd=function(){return this.pd||(this.pd=this.Mf())};var Te,Ae={OPEN:"a",Wg:"b",Oe:"c",fh:"d"};function Pe(){gt.call(this,"d")}function Ie(){gt.call(this,"c")}function Oe(){}function De(t,e,n,r,i){this.b=t,this.a=e,this.ra=n,this.R=r,this.Xc=i||1,this.Fc=new $t(this),this.Ua=ke,this.Vc=new Zt(t=et?125:void 0),this.A=null,this.S=!1,this.Da=this.pa=this.ua=this.ic=this.qb=this.hd=this.Ga=null,this.ba=[],this.h=null,this.Bb=0,this.I=this.Fa=null,this.w=-1,this.Za=!1,this.Ra=0,this.ac=null,this.lb=this.Ed=this.yc=!1}x(Pe,gt),x(Ie,gt),x(Oe,Ee),Oe.prototype.Dd=function(){var t=this.Wd();return t?new ActiveXObject(t):new XMLHttpRequest},Oe.prototype.Mf=function(){var t={};return this.Wd()&&(t[0]=!0,t[1]=!0),t},Oe.prototype.Wd=function(){if(!this.be&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e=0;e<t.length;e++){var n=t[e];try{return new ActiveXObject(n),this.be=n}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return this.be},Te=new Oe;var ke=45e3,Me={},Re={};function Ne(t){if(t.H&&"function"==typeof t.H)return t.H();if(s(t))return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}return G(t)}function Le(t,e,n){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,n);else if(p(t)||s(t))O(t,e,n);else{if(t.W&&"function"==typeof t.W)var r=t.W();else if(t.H&&"function"==typeof t.H)r=void 0;else if(p(t)||s(t)){r=[];for(var i=t.length,o=0;o<i;o++)r.push(o)}else r=H(t);o=(i=Ne(t)).length;for(var a=0;a<o;a++)e.call(n,i[a],r&&r[a],t)}}function Fe(t,e){this.D={},this.o=[],this.j=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else t&&this.addAll(t)}function Be(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(r=De.prototype).ga=function(t){this.A=t},r.setTimeout=function(t){this.Ua=t},r.He=function(t){this.Ra=t},r.Gg=function(t){this.ba=t},r.la=function(){return this.ba},r.kd=function(t,e){this.ic=1,this.ua=t.clone().Ub(),this.Da=e,this.yc=!0,this.Ce(null)},r.jd=function(t,e,n){this.ic=1,this.ua=t.clone().Ub(),this.Da=null,this.yc=e,this.Ce(n)},r.Ce=function(t){this.qb=w(),this.eb(),this.pa=this.ua.clone(),this.pa.dc("t",this.Xc),this.Bb=0,this.h=this.b.Jb(this.b.fc()?t:null),0<this.Ra&&(this.ac=new Jt(b(this.Me,this,this.h),this.Ra)),this.Fc.nb(this.h,"readystatechange",this.mg),t=this.A?W(this.A):{},this.Da?(this.Fa||(this.Fa="POST"),t["Content-Type"]="application/x-www-form-urlencoded",this.h.send(this.pa,this.Fa,this.Da,t)):(this.Fa="GET",this.h.send(this.pa,this.Fa,null,t)),ye(1),this.a.Tg(this.Fa,this.pa,this.R,this.Xc,this.Da)},r.mg=function(t){t=t.target;var e=this.ac;e&&3==t.ma()?(this.a.debug("Throttling readystatechange."),e.mf()):this.Me(t)},r.Me=function(t){try{t==this.h?this.hg():this.a.T("Called back with an unexpected xmlhttp")}catch(t){if(this.a.debug("Failed call to OnXmlHttpReadyStateChanged_"),this.h&&this.h.ya()){var e=this;this.a.cb(t,function(){return"ResponseText: "+e.h.ya()})}else this.a.cb(t,"No response text")}},r.hg=function(){var t=this.h.ma(),e=this.h.Ud(),n=this.h.za();if(!(3>t||3==t&&!et&&!this.h.ya())){this.Za||4!=t||7==e||ye(8==e||0>=n?3:2),this.Fb();var r=this.h.za();if(this.w=r,!(e=this.h.ya())){var i=this;this.a.debug(function(){return"No response text for uri "+i.pa+" status "+r})}if(this.S=200==r,this.a.Ug(this.Fa,this.pa,this.R,this.Xc,t,r),this.S){if(this.Ig()){if(!(n=this.sf()))return this.S=!1,this.I=3,be(12),this.a.T("XMLHTTP Missing X_HTTP_INITIAL_RESPONSE ("+this.R+")"),this.Ia(),void this.Kb();this.a.Wa(this.R,n,"Initial handshake response via X-HTTP-Initial-Response"),this.lb=!0,this.Yc(n)}this.yc?(this.Fd(t,e),et&&this.S&&3==t&&this.Ng()):(this.a.Wa(this.R,e,null),this.Yc(e)),4==t&&this.Ia(),this.S&&!this.Za&&(4==t?this.b.Tc(this):(this.S=!1,this.eb()))}else 400==r&&0<e.indexOf("Unknown SID")?(this.I=3,be(12),this.a.T("XMLHTTP Unknown SID ("+this.R+")")):(this.I=0,be(13),this.a.T("XMLHTTP Bad status "+r+" ("+this.R+")")),this.Ia(),this.Kb()}},r.Ig=function(){return this.Ed&&!this.lb},r.sf=function(){if(this.h){var t=this.h.kb("X-HTTP-Initial-Response");if(t&&!L(t))return t}return null},r.Ag=function(){this.Ed=!0},r.Fd=function(t,e){for(var n=!0;!this.Za&&this.Bb<e.length;){var r=this.vf(e);if(r==Re){4==t&&(this.I=4,be(14),n=!1),this.a.Wa(this.R,null,"[Incomplete Response]");break}if(r==Me){this.I=4,be(15),this.a.Wa(this.R,e,"[Invalid Chunk]"),n=!1;break}this.a.Wa(this.R,r,null),this.Yc(r)}4==t&&0==e.length&&(this.I=1,be(16),n=!1),this.S=this.S&&n,n||(this.a.Wa(this.R,e,"[Invalid Chunked Response]"),this.Ia(),this.Kb())},r.kg=function(){if(this.h){var t=this.h.ma(),e=this.h.ya();this.Bb<e.length&&(this.Fb(),this.Fd(t,e),this.S&&4!=t&&this.eb())}},r.Ng=function(){this.Fc.nb(this.Vc,"tick",this.kg),this.Vc.start()},r.vf=function(t){var e=this.Bb,n=t.indexOf("\n",e);return-1==n?Re:(e=Number(t.substring(e,n)),isNaN(e)?Me:(n+=1)+e>t.length?Re:(t=t.substr(n,e),this.Bb=n+e,t))},r.yg=function(t){this.ic=2,this.ua=t.clone().Ub(),t=!1,a.navigator&&a.navigator.sendBeacon&&(t=a.navigator.sendBeacon(this.ua.toString(),"")),!t&&a.Image&&((new Image).src=this.ua,t=!0),t||(this.h=this.b.Jb(null),this.h.send(this.ua)),this.qb=w(),this.eb()},r.cancel=function(){this.Za=!0,this.Ia()},r.tg=function(t){t&&this.setTimeout(t),this.Ga&&(this.Fb(),this.eb())},r.eb=function(){this.hd=w()+this.Ua,this.Ke(this.Ua)},r.Ke=function(t){if(null!=this.Ga)throw Error("WatchDog timer not null");this.Ga=we(b(this.gg,this),t)},r.Fb=function(){this.Ga&&(a.clearTimeout(this.Ga),this.Ga=null)},r.gg=function(){this.Ga=null;var t=w();0<=t-this.hd?this.Df():(this.a.T("WatchDog timer called too early"),this.Ke(this.hd-t))},r.Df=function(){this.S&&this.a.ca("Received watchdog timeout even though request loaded successfully"),this.a.Sg(this.pa),2!=this.ic&&(ye(3),be(17)),this.Ia(),this.I=2,this.Kb()},r.Kb=function(){this.b.de()||this.Za||this.b.Tc(this)},r.Ia=function(){this.Fb();var t=this.ac;t&&"function"==typeof t.bb&&t.bb(),this.ac=null,this.Vc.stop(),this.Fc.pb(),this.h&&(t=this.h,this.h=null,t.abort(),t.bb())},r.Hc=function(){return this.I},r.Yc=function(t){try{this.b.ue(this,t),ye(4)}catch(t){this.a.cb(t,"Error in httprequest callback")}},(r=Fe.prototype).C=function(){return this.j},r.H=function(){this.wc();for(var t=[],e=0;e<this.o.length;e++)t.push(this.D[this.o[e]]);return t},r.W=function(){return this.wc(),this.o.concat()},r.va=function(t){return Be(this.D,t)},r.X=function(){return 0==this.j},r.clear=function(){this.D={},this.j=this.o.length=0},r.remove=function(t){return!!Be(this.D,t)&&(delete this.D[t],this.j--,this.o.length>2*this.j&&this.wc(),!0)},r.wc=function(){if(this.j!=this.o.length){for(var t=0,e=0;t<this.o.length;){var n=this.o[t];Be(this.D,n)&&(this.o[e++]=n),t++}this.o.length=e}if(this.j!=this.o.length){var r={};for(e=t=0;t<this.o.length;)Be(r,n=this.o[t])||(this.o[e++]=n,r[n]=1),t++;this.o.length=e}},r.get=function(t,e){return Be(this.D,t)?this.D[t]:e},r.set=function(t,e){Be(this.D,t)||(this.j++,this.o.push(t)),this.D[t]=e},r.addAll=function(t){if(t instanceof Fe)for(var e=t.W(),n=0;n<e.length;n++)this.set(e[n],t.get(e[n]));else for(e in t)this.set(e,t[e])},r.forEach=function(t,e){for(var n=this.W(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}},r.clone=function(){return new Fe(this)};var je=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ze(t,e){var n;this.xa=this.zb=this.qa="",this.Ca=null,this.ib=this.K="",this.O=this.Qf=!1,t instanceof ze?(this.O=void 0!==e?e:t.O,this.tb(t.qa),this.cd(t.zb),this.rb(t.xa),this.sb(t.Ca),this.ec(t.K),this.bd(t.P.clone()),this.$c(t.ib)):t&&(n=String(t).match(je))?(this.O=!!e,this.tb(n[1]||"",!0),this.cd(n[2]||"",!0),this.rb(n[3]||"",!0),this.sb(n[4]),this.ec(n[5]||"",!0),this.bd(n[6]||"",!0),this.$c(n[7]||"",!0)):(this.O=!!e,this.P=new Qe(null,this.O))}function Ve(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ue(t,e,n){return s(t)?(t=encodeURI(t).replace(e,qe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}(r=ze.prototype).toString=function(){var t=[],e=this.qa;e&&t.push(Ue(e,Ge,!0),":");var n=this.xa;return(n||"file"==e)&&(t.push("//"),(e=this.zb)&&t.push(Ue(e,Ge,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.Ca)&&t.push(":",String(n))),(n=this.K)&&(this.Ic()&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ue(n,"/"==n.charAt(0)?We:He,!0))),(n=this.Rd())&&t.push("?",n),(n=this.ib)&&t.push("#",Ue(n,Xe)),t.join("")},r.resolve=function(t){var e=this.clone(),n=t.Hf();n?e.tb(t.qa):n=t.If(),n?e.cd(t.zb):n=t.Ic(),n?e.rb(t.xa):n=t.Ff();var r=t.K;if(n)e.sb(t.Ca);else if(n=t.ae()){if("/"!=r.charAt(0))if(this.Ic()&&!this.ae())r="/"+r;else{var i=e.K.lastIndexOf("/");-1!=i&&(r=e.K.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.ec(r):n=t.Gf(),n?e.bd(t.P.clone()):n=t.Ef(),n&&e.$c(t.ib),e},r.clone=function(){return new ze(this)},r.tb=function(t,e){this.U(),(this.qa=e?Ve(t,!0):t)&&(this.qa=this.qa.replace(/:$/,""))},r.Hf=function(){return!!this.qa},r.cd=function(t,e){this.U(),this.zb=e?Ve(t):t},r.If=function(){return!!this.zb},r.rb=function(t,e){this.U(),this.xa=e?Ve(t,!0):t},r.Ic=function(){return!!this.xa},r.sb=function(t){if(this.U(),t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);this.Ca=t}else this.Ca=null},r.Ff=function(){return null!=this.Ca},r.ec=function(t,e){this.U(),this.K=e?Ve(t,!0):t},r.ae=function(){return!!this.K},r.Gf=function(){return""!==this.P.toString()},r.bd=function(t,e){this.U(),t instanceof Qe?(this.P=t,this.P.ad(this.O)):(e||(t=Ue(t,Ke)),this.P=new Qe(t,this.O))},r.Rd=function(){return this.P.toString()},r.getQuery=function(){return this.Rd()},r.l=function(t,e){this.U(),this.P.set(t,e)},r.dc=function(t,e){this.U(),h(e)||(e=[String(e)]),this.P.Ie(t,e)},r.$c=function(t,e){this.U(),this.ib=e?Ve(t):t},r.Ef=function(){return!!this.ib},r.Ub=function(){return this.U(),this.l("zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^w()).toString(36)),this},r.removeParameter=function(t){return this.U(),this.P.remove(t),this},r.U=function(){if(this.Qf)throw Error("Tried to modify a read-only Uri")},r.ad=function(t){this.O=t,this.P&&this.P.ad(t)};var Ge=/[#\/\?@]/g,He=/[#\?:]/g,We=/[#\?]/g,Ke=/[#\?@]/g,Xe=/#/g;function Qe(t,e){this.j=this.m=null,this.ja=t||null,this.O=!!e}function Ze(t,e){this.b=t,this.a=e,this.f=this.A=null,this.bc=!1,this.K=null,this.w=-1,this.Ad=this.na=null}function Ye(t){this.D=new Fe,t&&this.addAll(t)}function Je(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[m]||(t[m]=++g)):e.substr(0,1)+t}function $e(t){this.me=t||tn,t=a.PerformanceNavigationTiming?0<(t=a.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(a.vc&&a.vc.ke&&a.vc.ke()&&a.vc.ke().nh),this.Xb=t?this.me:1,this.v=null,1<this.Xb&&(this.v=new Ye),this.f=null,this.ba=[]}(r=Qe.prototype).$=function(){if(!this.m&&(this.m=new Fe,this.j=0,this.ja)){var t=this;!function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(this.ja,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})}},r.C=function(){return this.$(),this.j},r.add=function(t,e){this.$(),this.Oa(),t=this.Ma(t);var n=this.m.get(t);return n||this.m.set(t,n=[]),n.push(e),this.j+=1,this},r.remove=function(t){return this.$(),t=this.Ma(t),!!this.m.va(t)&&(this.Oa(),this.j-=this.m.get(t).length,this.m.remove(t))},r.clear=function(){this.Oa(),this.m=null,this.j=0},r.X=function(){return this.$(),0==this.j},r.va=function(t){return this.$(),t=this.Ma(t),this.m.va(t)},r.forEach=function(t,e){this.$(),this.m.forEach(function(n,r){O(n,function(n){t.call(e,n,r,this)},this)},this)},r.W=function(){this.$();for(var t=this.m.H(),e=this.m.W(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},r.H=function(t){this.$();var e=[];if(s(t))this.va(t)&&(e=R(e,this.m.get(this.Ma(t))));else{t=this.m.H();for(var n=0;n<t.length;n++)e=R(e,t[n])}return e},r.set=function(t,e){return this.$(),this.Oa(),t=this.Ma(t),this.va(t)&&(this.j-=this.m.get(t).length),this.m.set(t,[e]),this.j+=1,this},r.get=function(t,e){return t&&0<(t=this.H(t)).length?String(t[0]):e},r.Ie=function(t,e){this.remove(t),0<e.length&&(this.Oa(),this.m.set(this.Ma(t),N(e)),this.j+=e.length)},r.toString=function(){if(this.ja)return this.ja;if(!this.m)return"";for(var t=[],e=this.m.W(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.H(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.ja=t.join("&")},r.Oa=function(){this.ja=null},r.clone=function(){var t=new Qe;return t.ja=this.ja,this.m&&(t.m=this.m.clone(),t.j=this.j),t},r.Ma=function(t){return t=String(t),this.O&&(t=t.toLowerCase()),t},r.ad=function(t){t&&!this.O&&(this.$(),this.Oa(),this.m.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(this.remove(e),this.Ie(n,t))},this)),this.O=t},r.extend=function(t){for(var e=0;e<arguments.length;e++)Le(arguments[e],function(t,e){this.add(e,t)},this)},x(function(){},function(){}),(r=Ze.prototype).g=null,r.ga=function(t){this.A=t},r.connect=function(t){this.K=t,t=this.b.Sd(this.K),be(3);var e=this.b.Ib.$d;null!=e?(this.na=this.b.$a(e[0]),this.g=1,this.xd()):(t.dc("MODE","init"),!this.b.ta&&this.b.aa&&t.dc("X-HTTP-Session-Id",this.b.aa),this.f=new De(this,this.a,void 0,void 0,void 0),this.f.ga(this.A),this.f.jd(t,!1,null),this.g=0)},r.xd=function(){this.a.debug("TestConnection: starting stage 2");var t=this.b.Ib.od;if(null!=t)this.a.debug(function(){return"Buffered"}),be(4),t?(be(10),this.b.ub(this,!1)):(be(11),this.b.ub(this,!0));else{this.f=new De(this,this.a,void 0,void 0,void 0),this.f.ga(this.A);var e=this.b.Pd(this.na,this.K);be(4),e.dc("TYPE","xmlhttp");var n=this.b.aa,r=this.b.Kc;n&&r&&e.l(n,r),this.f.jd(e,!1,this.na)}},r.Jb=function(t){return this.b.Jb(t)},r.abort=function(){this.f&&(this.f.cancel(),this.f=null),this.w=-1},r.de=function(){return!1},r.ue=function(t,e){if(this.w=t.w,0==this.g)if(this.a.debug("TestConnection: Got data for stage 1"),this.pc(t),e){try{var n=this.b.kc.zc(e)}catch(t){return this.a.cb(t),void this.b.dd(this)}this.na=this.b.$a(n[0])}else this.a.debug("TestConnection: Null responseText"),this.b.dd(this);else 1==this.g&&(this.bc?be(6):"11111"==e?(be(5),this.bc=!0,this.Ze()&&(this.w=200,this.f.cancel(),this.a.debug("Test connection succeeded; using streaming connection"),be(11),this.b.ub(this,!0))):(be(7),this.bc=!1))},r.Tc=function(){this.w=this.f.w,this.f.S?0==this.g?(this.g=1,this.a.debug("TestConnection: request complete for initial check"),this.xd()):1==this.g&&(this.a.debug("TestConnection: request complete for stage 2"),this.bc?(this.a.debug("Test connection succeeded; using streaming connection"),be(11),this.b.ub(this,!0)):(this.a.debug("Test connection failed; not using streaming"),be(10),this.b.ub(this,!1))):(this.a.debug("TestConnection: request failed, in state "+this.g),0==this.g?be(8):1==this.g&&be(9),this.b.dd(this))},r.pc=function(t){if(!this.b.ta&&(t=t.h)){var e=t.kb("X-Client-Wire-Protocol");this.Ad=e||null,this.b.aa&&((t=t.kb("X-HTTP-Session-Id"))?this.b.Fe(t):this.a.T("Missing X_HTTP_SESSION_ID in the handshake response"))}},r.fc=function(){return this.b.fc()},r.Ba=function(){return this.b.Ba()},r.Ze=function(){return!$||10<=Number(ut)},(r=Ye.prototype).C=function(){return this.D.C()},r.add=function(t){this.D.set(Je(t),t)},r.addAll=function(t){for(var e=(t=Ne(t)).length,n=0;n<e;n++)this.add(t[n])},r.pb=function(t){for(var e=(t=Ne(t)).length,n=0;n<e;n++)this.remove(t[n])},r.remove=function(t){return this.D.remove(Je(t))},r.clear=function(){this.D.clear()},r.X=function(){return this.D.X()},r.contains=function(t){return this.D.va(Je(t))},r.H=function(){return this.D.H()},r.clone=function(){return new Ye(this)};var tn=10;function en(){this.xg=this.rg=void 0}function nn(){this.jg=new en}function rn(t,e,n,r,i){try{t.debug(n),e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(e){t.cb(e)}}(r=$e.prototype).ld=function(t){this.v||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(this.Xb=this.me,this.v=new Ye,this.f&&(this.oc(this.f),this.f=null))},r.ee=function(){return!!this.f||!!this.v&&this.v.C()>=this.Xb},r.xf=function(){return this.f?1:this.v?this.v.C():0},r.Jc=function(t){return this.f?this.f==t:!!this.v&&this.v.contains(t)},r.oc=function(t){this.v?this.v.add(t):this.f=t},r.ze=function(t){this.f&&this.f==t?this.f=null:this.v&&this.v.contains(t)&&this.v.remove(t)},r.cancel=function(){this.ba=this.la(),this.f?(this.f.cancel(),this.f=null):this.v&&!this.v.X()&&(O(this.v.H(),function(t){t.cancel()}),this.v.clear())},r.la=function(){if(null!=this.f)return this.ba.concat(this.f.la());if(null!=this.v&&!this.v.X()){var t=this.ba;return O(this.v.H(),function(e){t=t.concat(e.la())}),t}return N(this.ba)},r.Re=function(t){this.ba=this.ba.concat(t)},r.$e=function(){this.ba.length=0},en.prototype.stringify=function(t){return a.JSON.stringify(t,this.rg)},en.prototype.parse=function(t){return a.JSON.parse(t,this.xg)},nn.prototype.hf=function(t,e,n){var r=n||"";try{Le(t,function(t,n){var i=t;d(t)&&(i=jt(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}},nn.prototype.jf=function(t,e,n){for(var r=-1;;){var i=["count="+e];-1==r?0<e?i.push("ofs="+(r=t[0].Pc)):r=0:i.push("ofs="+r);for(var o=!0,a=0;a<e;a++){var s=t[a].Pc,u=t[a].map;if(0>(s-=r))r=Math.max(0,t[a].Pc-100),o=!1;else try{this.hf(u,i,"req"+s+"_")}catch(t){n&&n(u)}}if(o)return i.join("&")}},nn.prototype.zc=function(t){return this.jg.parse(t)};var on=a.JSON.parse;function an(t){Bt.call(this),this.headers=new Fe,this.Xa=t||null,this.ha=!1,this.mc=this.c=null,this.ge=this.Tb="",this.Pa=0,this.I="",this.Aa=this.Lc=this.Qb=this.Ec=!1,this.vb=0,this.hc=null,this.Ae=sn,this.jc=this.lg=this.Ab=!1}x(an,Bt);var sn="";an.prototype.s=he("goog.net.XhrIo");var un=/^https?$/i,ln=["POST","PUT"];function cn(t){return"content-type"==t.toLowerCase()}function hn(t,e){return{type:e,lengthComputable:t.lengthComputable,loaded:t.loaded,total:t.total}}function pn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return q(n,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(),s(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return t.l(e,n),t}function fn(t){this.Bd=22,this.De=0,this.M=[],this.a=new de,this.Ib=new function(){this.od=this.$d=null},this.na=this.md=this.hb=this.K=this.u=this.Kc=this.aa=this.gb=this.N=this.Rb=this.A=null,this.Te=!0,this.ag=this.Yb=0,this.kf=!!u("internalChannelParams.failFast",t),this.fd=this.Ja=this.wa=this.ia=this.ea=this.i=null,this.Se=!0,this.w=this.he=this.Sb=-1,this.rc=this.Ha=this.La=0,this.Ve=u("internalChannelParams.baseRetryDelayMs",t)||5e3,this.vg=u("internalChannelParams.retryDelaySeedMs",t)||1e4,this.nf=u("internalChannelParams.forwardChannelMaxRetries",t)||2,this.Od=u("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Xa=t&&t.oh||void 0,this.Db=void 0,this.Ra=0,this.gc=t&&t.supportsCrossDomainXhr||!1,this.ra="",this.G=new $e(t&&t.concurrentRequestLimit),this.kc=new nn,this.ta=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.Nd=t&&t.fastHandshake||!1)&&!this.ta&&(this.a.T("Force backgroundChannelTest when fastHandshake is enabled."),this.ta=!0),t&&t.Id&&this.a.Id()}function dn(){}function mn(){if($&&!(10<=Number(ut)))throw Error("Environmental error: no available transport.")}function gn(t,e){Bt.call(this),this.b=new fn(e),this.yb=t,this.Qg=e&&e.testUrl?e.testUrl:function(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e=r?e+i:e+"/"+i)}return e}(this.yb,"test"),this.s=he("goog.labs.net.webChannel.WebChannelBaseTransport"),this.Rc=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.b.ga(t),t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.zd&&(t?t["X-WebChannel-Client-Profile"]=e.zd:t={"X-WebChannel-Client-Profile":e.zd}),this.b.Eg(t),(t=e&&e.httpHeadersOverwriteParam)&&!L(t)&&this.b.Cg(t),this.Og=e&&e.supportsCrossDomainXhr||!1,this.zg=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!L(e)&&(this.b.Dg(e),null!==(t=this.Rc)&&e in t&&(e in(t=this.Rc)&&delete t[e],(t=this.s)&&t.T("Ignore httpSessionIdParam also specified with messageUrlParams: "+e,void 0))),this.vd=new bn(this)}function yn(t){Pe.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.ne=t)&&(t=this.ne,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function vn(t){Ie.call(this),this.status=1,this.errorCode=t}function bn(t){this.b=t}(r=an.prototype).Je=function(t){this.Ab=t},r.send=function(t,e,n,r){if(this.c)throw Error("[goog.net.XhrIo] Object is active with another request="+this.Tb+"; newUri="+t);e=e?e.toUpperCase():"GET",this.Tb=t,this.I="",this.Pa=0,this.ge=e,this.Ec=!1,this.ha=!0,this.c=this.df(),this.mc=this.Xa?this.Xa.Vd():Te.Vd(),this.c.onreadystatechange=b(this.te,this),this.lg&&"onprogress"in this.c&&(this.c.onprogress=b(function(t){this.re(t,!0)},this),this.c.upload&&(this.c.upload.onprogress=b(this.re,this)));try{fe(this.s,this.da("Opening Xhr")),this.Lc=!0,this.c.open(e,String(t),!0),this.Lc=!1}catch(t){return fe(this.s,this.da("Error opening Xhr: "+t.message)),void this.Ld(t)}t=n||"";var i=this.headers.clone();r&&Le(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=cn,n=t.length,r=s(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:s(t)?t.charAt(e):t[e]}(i.W()),n=a.FormData&&t instanceof a.FormData,!(0<=P(ln,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.c.setRequestHeader(e,t)},this),this.Ae&&(this.c.responseType=this.Ae),"withCredentials"in this.c&&this.c.withCredentials!==this.Ab&&(this.c.withCredentials=this.Ab);try{this.yd(),0<this.vb&&(this.jc=function(t){return $&&ct(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.c),fe(this.s,this.da("Will abort after "+this.vb+"ms if incomplete, xhr2 "+this.jc)),this.jc?(this.c.timeout=this.vb,this.c.ontimeout=b(this.Ua,this)):this.hc=Yt(this.Ua,this.vb,this)),fe(this.s,this.da("Sending request")),this.Qb=!0,this.c.send(t),this.Qb=!1}catch(t){fe(this.s,this.da("Send error: "+t.message)),this.Ld(t)}},r.df=function(){return this.Xa?this.Xa.Dd():Te.Dd()},r.Ua=function(){void 0!==o&&this.c&&(this.I="Timed out after "+this.vb+"ms, aborting",this.Pa=8,fe(this.s,this.da(this.I)),this.dispatchEvent("timeout"),this.abort(8))},r.Ld=function(t){this.ha=!1,this.c&&(this.Aa=!0,this.c.abort(),this.Aa=!1),this.I=t,this.Pa=5,this.Jd(),this.Gb()},r.Jd=function(){this.Ec||(this.Ec=!0,this.dispatchEvent("complete"),this.dispatchEvent("error"))},r.abort=function(t){this.c&&this.ha&&(fe(this.s,this.da("Aborting")),this.ha=!1,this.Aa=!0,this.c.abort(),this.Aa=!1,this.Pa=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),this.Gb())},r.F=function(){this.c&&(this.ha&&(this.ha=!1,this.Aa=!0,this.c.abort(),this.Aa=!1),this.Gb(!0)),an.L.F.call(this)},r.te=function(){this.Ka||(this.Lc||this.Qb||this.Aa?this.se():this.eg())},r.eg=function(){this.se()},r.se=function(){if(this.ha&&void 0!==o)if(this.mc[1]&&4==this.ma()&&2==this.za())fe(this.s,this.da("Local request error detected and ignored"));else if(this.Qb&&4==this.ma())Yt(this.te,0,this);else if(this.dispatchEvent("readystatechange"),this.Mc()){fe(this.s,this.da("Request complete")),this.ha=!1;try{this.Rf()?(this.dispatchEvent("complete"),this.dispatchEvent("success")):(this.Pa=6,this.I=this.Yd()+" ["+this.za()+"]",this.Jd())}finally{this.Gb()}}},r.re=function(t,e){this.dispatchEvent(hn(t,"progress")),this.dispatchEvent(hn(t,e?"downloadprogress":"uploadprogress"))},r.Gb=function(t){if(this.c){this.yd();var e=this.c,n=this.mc[0]?l:null;this.mc=this.c=null,t||this.dispatchEvent("ready");try{e.onreadystatechange=n}catch(e){(t=this.s)&&t.ca("Problem encountered resetting onreadystatechange: "+e.message,void 0)}}},r.yd=function(){this.c&&this.jc&&(this.c.ontimeout=null),this.hc&&(a.clearTimeout(this.hc),this.hc=null)},r.Ba=function(){return!!this.c},r.Mc=function(){return 4==this.ma()},r.Rf=function(){var t=this.za();t:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}return e||0===t&&!this.Of()},r.Of=function(){var t=String(this.Tb).match(je)[1]||null;return!t&&a.self&&a.self.location&&(t=(t=a.self.location.protocol).substr(0,t.length-1)),un.test(t?t.toLowerCase():"")},r.ma=function(){return this.c?this.c.readyState:0},r.za=function(){try{return 2<this.ma()?this.c.status:-1}catch(t){return-1}},r.Yd=function(){try{return 2<this.ma()?this.c.statusText:""}catch(t){return fe(this.s,"Can not get status: "+t.message),""}},r.ya=function(){try{return this.c?this.c.responseText:""}catch(t){return fe(this.s,"Can not get responseText: "+t.message),""}},r.yf=function(t){if(this.c){var e=this.c.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),on(e)}},r.getResponseHeader=function(t){if(this.c&&this.Mc())return null===(t=this.c.getResponseHeader(t))?void 0:t},r.getAllResponseHeaders=function(){return this.c&&this.Mc()&&this.c.getAllResponseHeaders()||""},r.kb=function(t){return this.c?this.c.getResponseHeader(t):null},r.Ud=function(){return this.Pa},r.Hc=function(){return s(this.I)?this.I:String(this.I)},r.da=function(t){return t+" ["+this.ge+" "+this.Tb+" "+this.za()+"]"},(r=fn.prototype).tc=8,r.g=1,r.connect=function(t,e,n,r,i){this.a.debug("connect()"),be(0),this.K=e,this.gb=n||{},r&&void 0!==i&&(this.gb.OSID=r,this.gb.OAID=i),this.ta&&(this.a.debug("connect() bypassed channel-test."),this.Ib.$d=[],this.Ib.od=!1),this.bf(t)},r.disconnect=function(){if(this.a.debug("disconnect()"),this.qd(),3==this.g){var t=this.Yb++,e=this.hb.clone();e.l("SID",this.ra),e.l("RID",t),e.l("TYPE","terminate"),this.Ya(e),new De(this,this.a,this.ra,t,void 0).yg(e)}this.qe()},r.bf=function(t){this.a.debug("connectTest_()"),this.Ja=new Ze(this,this.a),null===this.N&&this.Ja.ga(this.A);var e=t;this.N&&this.A&&(e=pn(t,this.N,this.A)),this.Ja.connect(e)},r.af=function(){this.a.debug("connectChannel_()"),this.hb=this.Sd(this.K),this.Dc()},r.qd=function(){this.Ja&&(this.Ja.abort(),this.Ja=null),this.u&&(this.u.cancel(),this.u=null),this.ia&&(a.clearTimeout(this.ia),this.ia=null),this.Hb(),this.G.cancel(),this.ea&&(a.clearTimeout(this.ea),this.ea=null)},r.ga=function(t){this.A=t},r.Eg=function(t){this.Rb=t},r.Cg=function(t){this.N=t},r.Dg=function(t){this.aa=t},r.Fe=function(t){this.Kc=t},r.He=function(t){this.Ra=t},r.Hg=function(){this.gc=!0},r.Ee=function(t){this.i=t},r.Nf=function(){return!this.fd},r.Zc=function(t){1e3==this.M.length&&this.a.ca(function(){return"Already have 1000 queued maps upon queueing "+jt(t)}),this.M.push(new function(t,e){this.Pc=t,this.map=e,this.context=null}(this.ag++,t)),3==this.g&&this.Dc()},r.qf=function(){return this.kf?0:this.nf},r.de=function(){return 0==this.g},r.getState=function(){return this.g},r.Dc=function(){this.G.ee()||this.ea||(this.ea=we(b(this.we,this),0),this.La=0)},r.Yf=function(t){return this.G.xf()>=this.G.Xb-(this.ea?1:0)?(this.a.ca("Unexpected retry request is scheduled."),!1):this.ea?(this.a.debug("Use the retry request that is already scheduled."),this.M=t.la().concat(this.M),!0):!(1==this.g||2==this.g||this.La>=this.qf()||(this.a.debug("Going to retry POST"),this.ea=we(b(this.we,this,t),this.Xd(this.La)),this.La++,0))},r.we=function(t){this.ea=null,this.Mg(t)},r.Mg=function(t){this.a.debug("startForwardChannel_"),1==this.g?t?this.a.ca("Not supposed to retry the open"):(this.ig(),this.g=2):3==this.g&&(t?this.le(t):0==this.M.length?this.a.debug("startForwardChannel_ returned: nothing to send"):this.G.ee()?this.a.ca("startForwardChannel_ returned: connection already in progress"):(this.le(),this.a.debug("startForwardChannel_ finished, sent request")))},r.ig=function(){this.a.debug("open_()"),this.Yb=Math.floor(1e5*Math.random());var t=this.Yb++,e=new De(this,this.a,"",t,void 0),n=this.A;this.Rb&&(n?X(n=W(n),this.Rb):n=this.Rb),null===this.N&&e.ga(n);var r=this.Hd(e),i=this.hb.clone();i.l("RID",t),0<this.Bd&&i.l("CVER",this.Bd),this.ta&&this.aa&&i.l("X-HTTP-Session-Id",this.aa),this.Ya(i),this.N&&n&&pn(i,this.N,n),this.G.oc(e),this.Nd?(i.l("$req",r),i.l("SID","null"),e.Ag(),e.kd(i,null)):e.kd(i,r)},r.le=function(t){var e=t?t.R:this.Yb++,n=this.hb.clone();n.l("SID",this.ra),n.l("RID",e),n.l("AID",this.Sb),this.Ya(n),this.N&&this.A&&pn(n,this.N,this.A),e=new De(this,this.a,this.ra,e,this.La+1),null===this.N&&e.ga(this.A),t&&this.sg(t),t=this.Hd(e),e.setTimeout(Math.round(.5*this.Od)+Math.round(.5*this.Od*Math.random())),this.G.oc(e),e.kd(n,t)},r.Ya=function(t){this.i&&Le({},function(e,n){t.l(n,e)})},r.Hd=function(t){var e=Math.min(this.M.length,1e3),n=this.i?b(this.i.Ue,this.i,this):null;return n=this.kc.jf(this.M,e,n),t.Gg(this.M.splice(0,e)),n},r.sg=function(t){this.M=t.la().concat(this.M)},r.Kd=function(){if(!this.u&&!this.ia){this.rc=1;var t=this.ve;qt||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);qt=function(){t.then(Qt)}}else qt=function(){var t=Qt;!f(a.setImmediate)||a.Window&&a.Window.prototype&&!U("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(Ut||(Ut=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!U("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!U("Trident")&&!U("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).rd;n.rd=null,t()}},function(t){r.next={rd:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){a.setTimeout(t,0)}}()),Ut(t)):a.setImmediate(t)}}(),Kt||(qt(),Kt=!0),Xt.add(t,this),this.Ha=0}},r.Qc=function(){return this.u||this.ia?(this.a.ca("Request already in progress"),!1):!(3<=this.Ha||(this.a.debug("Going to retry GET"),this.rc++,this.ia=we(b(this.ve,this),this.Xd(this.Ha)),this.Ha++,0))},r.ve=function(){this.ia=null,this.Kg()},r.Kg=function(){this.a.debug("Creating new HttpRequest"),this.u=new De(this,this.a,this.ra,"rpc",this.rc),null===this.N&&this.u.ga(this.A),this.u.He(this.Ra);var t=this.md.clone();t.l("RID","rpc"),t.l("SID",this.ra),t.l("CI",this.fd?"0":"1"),t.l("AID",this.Sb),this.Ya(t),t.l("TYPE","xmlhttp"),this.N&&this.A&&pn(t,this.N,this.A),this.Db&&this.u.setTimeout(this.Db),this.u.jd(t,!0,this.na),this.a.debug("New Request created")},r.ub=function(t,e){this.a.debug("Test Connection Finished");var n=t.Ad;n&&this.G.ld(n),this.fd=this.Se&&e,this.w=t.w,this.af()},r.dd=function(t){this.a.debug("Test Connection Failed"),this.w=t.w,this.sa(2)},r.ue=function(t,e){if(0!=this.g&&(this.u==t||this.G.Jc(t)))if(this.w=t.w,!t.lb&&this.G.Jc(t)&&3==this.g){try{var n=this.kc.zc(e)}catch(t){n=null}h(n)&&3==n.length?this.Cf(n,t):(this.a.debug("Bad POST response data returned"),this.sa(11))}else(t.lb||this.u==t)&&this.Hb(),L(e)||(n=this.kc.zc(e),this.dg(n,t))},r.Cf=function(t,e){0==t[0]?this.Bf(e):(this.he=t[1],0<(e=this.he-this.Sb)&&(this.a.debug((t=t[2])+" bytes (in "+e+" arrays) are outstanding on the BackChannel"),this.Jg(t)&&!this.wa&&(this.wa=we(b(this.bg,this),6e3))))},r.Bf=function(t){if(this.a.debug("Server claims our backchannel is missing."),this.ia)this.a.debug("But we are currently starting the request.");else{if(this.u){if(!(this.u.qb+3e3<t.qb))return;this.Hb(),this.u.cancel(),this.u=null}else this.a.T("We do not have a BackChannel established");this.Qc(),be(18)}},r.Jg=function(t){return 37500>t&&!this.Nf()&&0==this.Ha},r.$a=function(t){return this.Te?this.i?this.i.$a(t):t:null},r.bg=function(){null!=this.wa&&(this.wa=null,this.u.cancel(),this.u=null,this.Qc(),be(19))},r.Hb=function(){null!=this.wa&&(a.clearTimeout(this.wa),this.wa=null)},r.Tc=function(t){this.a.debug("Request complete");var e=null;if(this.u==t){this.Hb(),this.u=null;var n=2}else{if(!this.G.Jc(t))return;e=t.la(),this.G.ze(t),n=1}if(this.w=t.w,0!=this.g)if(t.S)1==n?(function(t,e,n){me.dispatchEvent(new _e(me,t,e,n))}(t.Da?t.Da.length:0,w()-t.qb,this.La),this.Dc()):this.Kd();else{var r=t.Hc();if(3==r||0==r&&0<this.w)this.a.debug("Not retrying due to error type");else{var i=this;if(this.a.debug(function(){return"Maybe retrying, last error: "+function(t,e){switch(r){case 0:return"Non-200 return code ("+e+")";case 1:return"XMLHTTP failure (no data)";case 2:return"HttpConnection timeout";default:return"Unknown error"}}(0,i.w)}),1==n&&this.Yf(t)||2==n&&this.Qc())return;this.a.debug("Exceeded max number of retries")}switch(e&&0<e.length&&this.G.Re(e),this.a.debug("Error: HTTP request failed"),r){case 1:this.sa(5);break;case 4:this.sa(10);break;case 3:this.sa(6);break;default:this.sa(2)}}},r.Xd=function(t){var e=this.Ve+Math.floor(Math.random()*this.vg);return this.Ba()||(this.a.debug("Inactive channel"),e*=2),e*t},r.pc=function(t){if(this.ta&&(t=t.h)){var e=t.kb("X-Client-Wire-Protocol");e&&this.G.ld(e),this.aa&&((t=t.kb("X-HTTP-Session-Id"))?(this.Fe(t),this.hb.l(this.aa,t)):this.a.T("Missing X_HTTP_SESSION_ID in the handshake response"))}},r.dg=function(t,e){for(var n=this.i&&this.i.sc?[]:null,r=0;r<t.length;r++){var i=t[r];if(this.Sb=i[0],i=i[1],2==this.g)if("c"==i[0]){this.ra=i[1],this.na=this.$a(i[2]);var o=i[3];null!=o&&(this.tc=o,this.a.info("VER="+this.tc)),null!=(o=i[4])&&(this.De=o,this.a.info("SVER="+this.De)),null!=(i=i[5])&&"number"==typeof i&&0<i&&(this.Db=i*=1.5,this.a.info("backChannelRequestTimeoutMs_="+i)),this.pc(e),this.g=3,this.i&&this.i.wd(),this.Lg(e)}else"stop"!=i[0]&&"close"!=i[0]||this.sa(7);else 3==this.g&&("stop"==i[0]||"close"==i[0]?(n&&0!=n.length&&(this.i.sc(this,n),n.length=0),"stop"==i[0]?this.sa(7):this.disconnect()):"noop"!=i[0]&&(n?n.push(i):this.i&&this.i.ud(i)),this.Ha=0)}n&&0!=n.length&&this.i.sc(this,n)},r.Lg=function(t){this.md=this.Pd(this.na,this.K),t.lb?(this.a.debug("Upgrade the handshake request to a backchannel."),this.G.ze(t),t.tg(this.Db),this.u=t):this.Kd()},r.sa=function(t){if(this.a.info("Error code "+t),2==t){var e=null;this.i&&(e=null);var n=b(this.Pg,this);e||(e=new ze("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||e.tb("https"),e.Ub()),function(t,e){var n=new de;n.debug("TestLoadImage: loading "+t);var r=new Image;r.onload=_(rn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=_(rn,n,r,"TestLoadImage: error",!1,e),r.onabort=_(rn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=_(rn,n,r,"TestLoadImage: timeout",!1,e),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}(e.toString(),n)}else be(2);this.cg(t)},r.Pg=function(t){t?(this.a.info("Successfully pinged google.com"),be(2)):(this.a.info("Failed to ping google.com"),be(1))},r.cg=function(t){this.a.debug("HttpChannel: error - "+t),this.g=0,this.i&&this.i.td(t),this.qe(),this.qd()},r.qe=function(){if(this.g=0,this.w=-1,this.i){var t=this.G.la();if(0!=t.length||0!=this.M.length){var e=this;this.a.debug(function(){return"Number of undelivered maps, pending: "+t.length+", outgoing: "+e.M.length}),this.G.$e(),N(this.M),this.M.length=0}this.i.sd()}},r.Sd=function(t){return t=this.Cd(null,t),this.a.debug("GetForwardChannelUri: "+t),t},r.Pd=function(t,e){return t=this.Cd(this.fc()?t:null,e),this.a.debug("GetBackChannelUri: "+t),t},r.Cd=function(t,e){var n=function(t){return t instanceof ze?t.clone():new ze(t,void 0)}(e);if(""!=n.xa)t&&n.rb(t+"."+n.xa),n.sb(n.Ca);else{var r=a.location;n=function(t,e,n,r){var i=new ze(null,void 0);return t&&i.tb(t),e&&i.rb(e),n&&i.sb(n),r&&i.ec(r),i}(r.protocol,t?t+"."+r.hostname:r.hostname,+r.port,e)}return this.gb&&q(this.gb,function(t,e){n.l(e,t)}),e=this.Kc,(t=this.aa)&&e&&n.l(t,e),n.l("VER",this.tc),this.Ya(n),n},r.Jb=function(t){if(t&&!this.gc)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new an(this.Xa)).Je(this.gc),t},r.Ba=function(){return!!this.i&&this.i.Ba()},r.fc=function(){return this.gc},(r=dn.prototype).sc=null,r.wd=function(){},r.ud=function(){},r.td=function(){},r.sd=function(){},r.Ba=function(){return!0},r.Ue=function(){},r.$a=function(t){return t},mn.prototype.cf=function(t,e){return new gn(t,e)},x(gn,Bt),(r=gn.prototype).addEventListener=function(t,e,n,r){gn.L.addEventListener.call(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){gn.L.removeEventListener.call(this,t,e,n,r)},r.open=function(){this.b.Ee(this.vd),this.Og&&this.b.Hg(),this.b.connect(this.Qg,this.yb,this.Rc||void 0)},r.close=function(){this.b.disconnect()},r.send=function(t){if(s(t)){var e={};e.__data__=t,this.b.Zc(e)}else this.zg?((e={}).__data__=jt(t),this.b.Zc(e)):this.b.Zc(t)},r.F=function(){this.b.Ee(null),delete this.vd,this.b.disconnect(),delete this.b,gn.L.F.call(this)},x(yn,Pe),x(vn,Ie),x(bn,dn),bn.prototype.wd=function(){pe(this.b.s,"WebChannel opened on "+this.b.yb),this.b.dispatchEvent("a")},bn.prototype.ud=function(t){this.b.dispatchEvent(new yn(t))},bn.prototype.td=function(t){pe(this.b.s,"WebChannel aborted on "+this.b.yb+" due to channel error: "+t),this.b.dispatchEvent(new vn(t))},bn.prototype.sd=function(){pe(this.b.s,"WebChannel closed on "+this.b.yb),this.b.dispatchEvent("b")};var _n=_(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},mn);function wn(){this.V=[],this.Z=[]}function xn(t,e){if(S.call(this),this.oe=t||0,this.Wb=e||10,this.oe>this.Wb)throw Error(Cn);this.fa=new wn,this.oa=new Ye,this.Ac=0,this.Nc=null,this.Cb()}(r=wn.prototype).Vf=function(){0==this.V.length&&(this.V=this.Z,this.V.reverse(),this.Z=[])},r.enqueue=function(t){this.Z.push(t)},r.ab=function(){return this.Vf(),this.V.pop()},r.C=function(){return this.V.length+this.Z.length},r.X=function(){return 0==this.V.length&&0==this.Z.length},r.clear=function(){this.V=[],this.Z=[]},r.contains=function(t){return 0<=P(this.V,t)||0<=P(this.Z,t)},r.remove=function(t){var e=this.V,n=I(e,t);return 0<=n?(Array.prototype.splice.call(e,n,1),e=!0):e=!1,e||M(this.Z,t)},r.H=function(){for(var t=[],e=this.V.length-1;0<=e;--e)t.push(this.V[e]);var n=this.Z.length;for(e=0;e<n;++e)t.push(this.Z[e]);return t},x(xn,S);var Cn="[goog.structs.Pool] Min can not be greater than max";function En(t,e){this.fe=t,this.gd=e}function Sn(t){this.Y=[],t&&this.Lf(t)}function Tn(){Sn.call(this)}function An(t,e){this.Gd=void 0,this.cc=new Tn,xn.call(this,t,e)}function Pn(t,e,n,r){this.Jf=t,this.Ab=!!r,An.call(this,e,n)}(r=xn.prototype).Mb=function(){var t=w();if(!(null!=this.Nc&&t-this.Nc<this.Ac)){var e=this.qg();return e&&(this.Nc=t,this.oa.add(e)),e}},r.og=function(t){return!!this.oa.remove(t)&&(this.nc(t),!0)},r.qg=function(){for(var t;0<this.Td()&&(t=this.fa.ab(),!this.Sc(t));)this.Cb();return!t&&this.C()<this.Wb&&(t=this.xc()),t},r.nc=function(t){this.oa.remove(t),this.Sc(t)&&this.C()<this.Wb?this.fa.enqueue(t):this.Bc(t)},r.Cb=function(){for(var t=this.fa;this.C()<this.oe;)t.enqueue(this.xc());for(;this.C()>this.Wb&&0<this.Td();)this.Bc(t.ab())},r.xc=function(){return{}},r.Bc=function(t){if("function"==typeof t.bb)t.bb();else for(var e in t)t[e]=null},r.Sc=function(t){return"function"!=typeof t.Ye||t.Ye()},r.contains=function(t){return this.fa.contains(t)||this.oa.contains(t)},r.C=function(){return this.fa.C()+this.oa.C()},r.rf=function(){return this.oa.C()},r.Td=function(){return this.fa.C()},r.X=function(){return this.fa.X()&&this.oa.X()},r.F=function(){if(xn.L.F.call(this),0<this.rf())throw Error("[goog.structs.Pool] Objects not released");delete this.oa;for(var t=this.fa;!t.X();)this.Bc(t.ab());delete this.fa},En.prototype.getKey=function(){return this.fe},En.prototype.clone=function(){return new En(this.fe,this.gd)},(r=Sn.prototype).ce=function(t,e){var n=this.Y;n.push(new En(t,e)),this.$f(n.length-1)},r.Lf=function(t){if(t instanceof Sn){var e=t.W();if(t=t.H(),0>=this.C()){for(var n=this.Y,r=0;r<e.length;r++)n.push(new En(e[r],t[r]));return}}else e=H(t),t=G(t);for(r=0;r<e.length;r++)this.ce(e[r],t[r])},r.remove=function(){var t=this.Y,e=t.length,n=t[0];if(!(0>=e))return 1==e?k(t):(t[0]=t.pop(),this.Zf()),n.gd},r.Zf=function(){for(var t=0,e=this.Y,n=e.length,r=e[t];t<n>>1;){var i=this.tf(t),o=this.zf(t);if(e[i=o<n&&e[o].getKey()<e[i].getKey()?o:i].getKey()>r.getKey())break;e[t]=e[i],t=i}e[t]=r},r.$f=function(t){for(var e=this.Y,n=e[t];0<t;){var r=this.wf(t);if(!(e[r].getKey()>n.getKey()))break;e[t]=e[r],t=r}e[t]=n},r.tf=function(t){return 2*t+1},r.zf=function(t){return 2*t+2},r.wf=function(t){return t-1>>1},r.H=function(){for(var t=this.Y,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].gd);return e},r.W=function(){for(var t=this.Y,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].getKey());return e},r.va=function(t){return D(this.Y,function(e){return e.getKey()==t})},r.clone=function(){return new Sn(this)},r.C=function(){return this.Y.length},r.X=function(){return 0==this.Y.length},r.clear=function(){k(this.Y)},x(Tn,Sn),Tn.prototype.enqueue=function(t,e){this.ce(t,e)},Tn.prototype.ab=function(){return this.remove()},x(An,xn),(r=An.prototype).Mb=function(t,e){if(!t)return(t=An.L.Mb.call(this))&&this.Ac&&(this.Gd=a.setTimeout(b(this.Nb,this),this.Ac)),t;this.cc.enqueue(void 0!==e?e:100,t),this.Nb()},r.Nb=function(){for(var t=this.cc;0<t.C();){var e=this.Mb();if(!e)break;t.ab().apply(this,[e])}},r.nc=function(t){An.L.nc.call(this,t),this.Nb()},r.Cb=function(){An.L.Cb.call(this),this.Nb()},r.F=function(){An.L.F.call(this),a.clearTimeout(this.Gd),this.cc.clear(),this.cc=null},x(Pn,An),Pn.prototype.xc=function(){var t=new an,e=this.Jf;return e&&e.forEach(function(e,n){t.headers.set(n,e)}),this.Ab&&t.Je(!0),t},Pn.prototype.Sc=function(t){return!t.Ka&&!t.Ba()},mn.prototype.createWebChannel=mn.prototype.cf,gn.prototype.send=gn.prototype.send,gn.prototype.open=gn.prototype.open,gn.prototype.close=gn.prototype.close,xe.NO_ERROR=0,xe.TIMEOUT=8,xe.HTTP_ERROR=6,Ce.COMPLETE="complete",Se.EventType=Ae,Ae.OPEN="a",Ae.CLOSE="b",Ae.ERROR="c",Ae.MESSAGE="d",Bt.prototype.listen=Bt.prototype.nb,Pn.prototype.getObject=Pn.prototype.Mb,Pn.prototype.releaseObject=Pn.prototype.og,an.prototype.listenOnce=an.prototype.Oc,an.prototype.getLastError=an.prototype.Hc,an.prototype.getLastErrorCode=an.prototype.Ud,an.prototype.getStatus=an.prototype.za,an.prototype.getStatusText=an.prototype.Yd,an.prototype.getResponseJson=an.prototype.yf,an.prototype.getResponseText=an.prototype.ya,an.prototype.getResponseText=an.prototype.ya,an.prototype.send=an.prototype.send;var In={createWebChannelTransport:_n,ErrorCode:xe,EventType:Ce,WebChannel:Se,XhrIoPool:Pn},On=In.createWebChannelTransport,Dn=In.ErrorCode,kn=In.EventType,Mn=In.WebChannel,Rn=In.XhrIoPool;e.default=In},x8BK:function(t,e,n){"use strict";t.exports={findProperties:function t(e,n,r){"object"==typeof e&&null!==e&&(n in e&&r(e[n],e,n),Object.keys(e).forEach(function(i){t(e[i],n,r)}))}}},xTla:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},xXU7:function(t,e,n){"use strict";var r=n("6blF"),i=n(null),o=n("isby");function a(t,e){var n;return void 0===t&&(t=0),void 0===e&&(e=i.a),n=t,(Object(o.a)(n)||!(n-parseFloat(n)+1>=0)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=i.a),new r.a(function(n){return n.add(e.schedule(s,t,{subscriber:n,counter:0,period:t})),n})}function s(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}n.d(e,"interval",function(){return a})},y3By:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("+umK");function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(t)}function o(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:r.a}},yGWI:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("mrSG"),i=n("FFOo");function o(){return function(t){return t.lift(new a(t))}}var a=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),s=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.c(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(i.a)},"yQ/h":function(t,e,n){"use strict";var r=n("S9rb"),i=n("vcPP");r.setPlatformDefaultClient(i),t.exports=r},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("CcnG"),i={production:!0,mapbox:{accessToken:"pk.eyJ1IjoicmVtYnJhbmR0c3giLCJhIjoiY2prOHl5dW8xMW9jbDNwbWt6M2FuYmt1YiJ9.yc99SPceV7DU2hCH3Uc1sQ"},firebase:{apiKey:"AIzaSyAyLJnt_FCiyFQ3ztPTdYBDzqlNsj56F_Y",authDomain:"semillasdiasporavenezuela.firebaseapp.com",databaseURL:"https://semillasdiasporavenezuela.firebaseio.com",projectId:"semillasdiasporavenezuela",storageBucket:"semillasdiasporavenezuela.appspot.com",messagingSenderId:"997349370911"}},o=n("mrSG"),a=n("nkY7"),s=n("IUTb"),u=n("6blF"),l=new u.a(function(t){return t.complete()});function c(t){return t?function(t){return new u.a(function(e){return t.schedule(function(){return e.complete()})})}(t):l}function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r,i=t[t.length-1];switch(Object(a.a)(i)?t.pop():i=void 0,t.length){case 0:return c(i);case 1:return i?Object(s.a)(t,i):(n=t[0],(r=new u.a(function(t){t.next(n),t.complete()}))._isScalar=!0,r.value=n,r);default:return Object(s.a)(t,i)}}var p=n("0/uQ"),f=n("S1nX"),d=n("67Y/");function m(t){return function(t){return new u.a(function(e){return{unsubscribe:t.onSnapshot(e)}})}(t).pipe(Object(f.a)())}function g(t){return m(t).pipe(Object(d.a)(function(t){return{payload:t,type:"query"}}))}var y=n("FFOo");function v(t,e){return function(n){return n.lift(new b(t,e))}}var b=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new _(t,this.predicate,this.thisArg))},t}(),_=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return o.c(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(y.a);function w(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new x(t,e,n))}}var x=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new C(t,this.accumulator,this.seed,this.hasSeed))},t}(),C=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return o.c(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(y.a);function E(t){return g(t).pipe(Object(d.a)(function(t){return t.payload.docChanges().map(function(t){return{type:t.type,payload:t}})}))}var S=n("Ip0R"),T=n("pugT"),A=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return o.c(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return o.c(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(T.a)),P=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return o.c(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(A),I=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}(),O=function(t){function e(n,r){void 0===r&&(r=I.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return o.c(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(I),D=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.c(e,t),e}(O))(P),k=(new r.InjectionToken("angularfire2.realtimeDatabaseURL"),function(){function t(t,e){this.zone=t,this.platformId=e}return t.prototype.schedule=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.zone.runGuarded(function(){return D.schedule.apply(D,t)})},t.prototype.keepUnstableUntilFirst=function(t){return Object(S.isPlatformServer)(this.platformId)?new u.a(function(e){var n=function(){},r=Zone.current.scheduleMacroTask("firebaseZoneBlock",n,{},n,n);t.subscribe(function(t){"scheduled"===r.state&&r.invoke(),e.next(t)},function(t){"scheduled"===r.state&&r.invoke(),e.error(t)},function(){"scheduled"===r.state&&r.invoke(),e.complete()})}):t},t.prototype.runOutsideAngular=function(t){var e=this;return new u.a(function(n){return e.zone.runOutsideAngular(function(){return t.subscribe(function(t){return e.zone.run(function(){return n.next(t)})},function(t){return e.zone.run(function(){return n.error(t)})},function(){return e.zone.run(function(){return n.complete()})})})})},t}()),M=function(t){return function(e){return new u.a(function(n){return e.subscribe(function(e){return t.run(function(){return n.next(e)})},function(e){return t.run(function(){return n.error(e)})},function(){return t.run(function(){return n.complete()})})})}},R=n("Wcq6"),N=n.n(R),L=new r.InjectionToken("angularfire2.app.options"),F=new r.InjectionToken("angularfire2.app.nameOrConfig"),B=function(){};function j(t,e){var n="object"==typeof e&&e||{};return n.name=n.name||"string"==typeof e&&e||"[DEFAULT]",N.a.apps.filter(function(t){return t&&t.name===n.name})[0]||N.a.initializeApp(t,n)}new r.Optional;var z=function(){function t(){}var e;return e=t,t.initializeApp=function(t,n){return{ngModule:e,providers:[{provide:L,useValue:t},{provide:F,useValue:n}]}},t}(),V=function(){function t(t,e,n){this.ref=t,this.query=e,this.afs=n}return t.prototype.stateChanges=function(t){return t&&0!==t.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(E(this.query))).pipe(Object(d.a)(function(e){return e.filter(function(e){return t.indexOf(e.type)>-1})}),v(function(t){return t.length>0})):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(E(this.query)))},t.prototype.auditTrail=function(t){return this.stateChanges(t).pipe(w(function(t,e){return t.concat(e)},[]))},t.prototype.snapshotChanges=function(t){var e=function(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(t),n=function(t,e){return g(t).pipe(Object(d.a)(function(t){return t.payload.docChanges()}),w(function(t,n){return function(t,e,n){return e.forEach(function(e){n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.id==e.doc.id||t.splice(e.newIndex,0,e);break;case"modified":null!=t[e.oldIndex]&&t[e.oldIndex].doc.id!=e.doc.id||(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.id==e.doc.id&&t.splice(e.oldIndex,1)}return t}(t,e))}),t}(t,n,e)},[]),Object(d.a)(function(t){return t.map(function(t){return{type:t.type,payload:t}})}))}(this.query,e),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)},t.prototype.valueChanges=function(){var t=g(this.query),e=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(e).pipe(Object(d.a)(function(t){return t.payload.docs.map(function(t){return t.data()})}))},t.prototype.get=function(t){return Object(p.a)(this.query.get(t)).pipe(M(this.afs.scheduler.zone))},t.prototype.add=function(t){return this.ref.add(t)},t.prototype.doc=function(t){return new U(this.ref.doc(t),this.afs)},t}(),U=function(){function t(t,e){this.ref=t,this.afs=e}return t.prototype.set=function(t,e){return this.ref.set(t,e)},t.prototype.update=function(t){return this.ref.update(t)},t.prototype.delete=function(){return this.ref.delete()},t.prototype.collection=function(t,e){var n=K(this.ref.collection(t),e);return new V(n.ref,n.query,this.afs)},t.prototype.snapshotChanges=function(){var t=m(this.ref).pipe(Object(d.a)(function(t){return{payload:t,type:"value"}})),e=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(e)},t.prototype.valueChanges=function(){return this.snapshotChanges().pipe(Object(d.a)(function(t){return t.payload.data()}))},t.prototype.get=function(t){return Object(p.a)(this.ref.get(t)).pipe(M(this.afs.scheduler.zone))},t}(),q=new r.InjectionToken("angularfire2.enableFirestorePersistence"),G=new r.InjectionToken("angularfire2.firestore.persistenceSettings"),H=new r.InjectionToken("angularfire2.firestore.settings"),W={timestampsInSnapshots:!0};function K(t,e){return void 0===e&&(e=function(t){return t}),{query:e(t),ref:t}}var X=function(){function t(t,e,n,r,i,o,a){var s=this;this.scheduler=new k(o,i),this.firestore=o.runOutsideAngular(function(){var n=j(t,e).firestore();return n.settings(r||W),n}),this.persistenceEnabled$=n&&Object(S.isPlatformBrowser)(i)?o.runOutsideAngular(function(){try{return Object(p.a)(s.firestore.enablePersistence(a||void 0).then(function(){return!0},function(){return!1}))}catch(t){return h(!1)}}):h(!1)}return t.prototype.collection=function(t,e){var n=K("string"==typeof t?this.firestore.collection(t):t,e);return new V(n.ref,n.query,this)},t.prototype.doc=function(t){var e;return e="string"==typeof t?this.firestore.doc(t):t,new U(e,this)},t.prototype.createId=function(){return this.firestore.collection("_").doc().id},Object(o.b)([Object(o.d)(0,Object(r.Inject)(L)),Object(o.d)(1,Object(r.Optional)()),Object(o.d)(1,Object(r.Inject)(F)),Object(o.d)(2,Object(r.Optional)()),Object(o.d)(2,Object(r.Inject)(q)),Object(o.d)(3,Object(r.Optional)()),Object(o.d)(3,Object(r.Inject)(H)),Object(o.d)(4,Object(r.Inject)(r.PLATFORM_ID)),Object(o.d)(6,Object(r.Optional)()),Object(o.d)(6,Object(r.Inject)(G))],t)}(),Q=(n("6Joi"),function(){function t(){}var e;return e=t,t.enablePersistence=function(t){return{ngModule:e,providers:[{provide:q,useValue:!0},{provide:G,useValue:t}]}},t}()),Z=function(t){this.afs=t,t.firestore.settings({timestampsInSnapshots:!0})},Y=function(){function t(){}return t.prototype.ngOnInit=function(){document.getElementById("fixed").addEventListener("touchmove",function(t){t.preventDefault()},!1)},t}(),J=n("K9Ia"),$=n("8g8A"),tt=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return o.c(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new $.a;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(J.a),et=function(t){function e(){var n=t.call(this,"no elements in sequence")||this;return n.name="EmptyError",Object.setPrototypeOf(n,e.prototype),n}return o.c(e,t),e}(Error),nt=n("psW0"),rt=function(t){function e(){var n=t.call(this,"argument out of range")||this;return n.name="ArgumentOutOfRangeError",Object.setPrototypeOf(n,e.prototype),n}return o.c(e,t),e}(Error);function it(t){return function(e){return 0===t?c():e.lift(new ot(t))}}var ot=function(){function t(t){if(this.total=t,this.total<0)throw new rt}return t.prototype.call=function(t,e){return e.subscribe(new at(t,this.total))},t}(),at=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return o.c(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(y.a);function st(t){return void 0===t&&(t=null),function(e){return e.lift(new ut(t))}}var ut=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new lt(t,this.defaultValue))},t}(),lt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return o.c(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(y.a),ct=n("+umK"),ht=n("2Bdj");function pt(t,e,n){return function(r){return r.lift(new ft(t,e,n))}}var ft=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new dt(t,this.nextOrObserver,this.error,this.complete))},t}(),dt=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._tapNext=ct.a,o._tapError=ct.a,o._tapComplete=ct.a,o._tapError=r||ct.a,o._tapComplete=i||ct.a,Object(ht.a)(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||ct.a,o._tapError=n.error||ct.a,o._tapComplete=n.complete||ct.a),o}return o.c(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(y.a),mt=function(t){return void 0===t&&(t=gt),pt({hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw t()}})};function gt(){return new et}var yt=n("mChF");function vt(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?v(function(e,n){return t(e,n,r)}):yt.a,it(1),n?st(e):mt(function(){return new et}))}}function bt(t,e){return function(n){return n.lift(new _t(t,e,n))}}var _t=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new wt(t,this.predicate,this.thisArg,this.source))},t}(),wt=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||o,o}return o.c(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(y.a);function xt(t,e){return Object(nt.a)(t,e,1)}function Ct(t){return function(e){return 0===t?c():e.lift(new Et(t))}}var Et=function(){function t(t){if(this.total=t,this.total<0)throw new rt}return t.prototype.call=function(t,e){return e.subscribe(new St(t,this.total))},t}(),St=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return o.c(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()},e}(y.a),Tt=n("y3By"),At=n("MGBS"),Pt=n("zotm");function It(t){return function(e){var n=new Ot(t),r=e.lift(n);return n.caught=r}}var Ot=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new Dt(t,this.selector,this.caught))},t}(),Dt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.selector=n,i.caught=r,i}return o.c(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle(),this.add(Object(Pt.a)(this,n))}},e}(At.a),kt=n("Zn8D");function Mt(){return Object(kt.a)(1)}function Rt(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?v(function(e,n){return t(e,n,r)}):yt.a,Ct(1),n?st(e):mt(function(){return new et}))}}var Nt=null;function Lt(){return Nt}var Ft,Bt={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},jt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};r["\u0275global"].Node&&(Ft=r["\u0275global"].Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))});var Vt,Ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.parse=function(t){throw new Error("parse not implemented")},e.makeCurrent=function(){var t;t=new e,Nt||(Nt=t)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,n){t[e]=n},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,n){var r;(r=t)[e].apply(r,Object(o.f)(n))},e.prototype.logError=function(t){window.console&&(console.error?console.error(t):console.log(t))},e.prototype.log=function(t){window.console&&window.console.log&&window.console.log(t)},e.prototype.logGroup=function(t){window.console&&window.console.group&&window.console.group(t)},e.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return Bt},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){return Ft.call(t,e)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.onAndCancel=function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,"content")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r];return n},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,n){t.replaceChild(e,n)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e,n){t.insertBefore(n,e)},e.prototype.insertAllBefore=function(t,e,n){n.forEach(function(n){return t.insertBefore(n,e)})},e.prototype.insertAfter=function(t,e,n){t.insertBefore(n,e.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return this.getDefaultDocument().createComment(t)},e.prototype.createTemplate=function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)},e.prototype.createElementNS=function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)},e.prototype.createScriptTag=function(t,e,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r},e.prototype.createStyleElement=function(t,e){var n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,n){t.style[e]=n},e.prototype.removeStyle=function(t,e){t.style[e]=""},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,n){var r=this.getStyle(t,e)||"";return n?r==n:r.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,n=t.attributes,r=0;r<n.length;r++){var i=n.item(r);e.set(i.name,i.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,n){return t.hasAttributeNS(e,n)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)},e.prototype.setAttribute=function(t,e,n){t.setAttribute(e,n)},e.prototype.setAttributeNS=function(t,e,n,r){t.setAttributeNS(e,n,r)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,n){t.removeAttributeNS(e,n)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},e.prototype.getDefaultDocument=function(){return document},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(t){return t.title},e.prototype.setTitle=function(t,e){t.title=e||""},e.prototype.elementMatches=function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))},e.prototype.isTemplateElement=function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return null!=t.shadowRoot&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){return document.importNode(this.templateAwareRoot(t),!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.getAttribute("href")},e.prototype.getEventKey=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&zt.hasOwnProperty(e)&&(e=zt[e]))}return jt[e]||e},e.prototype.getGlobalEventTarget=function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(t){var e,n=qt||(qt=document.querySelector("base"))?qt.getAttribute("href"):null;return null==n?null:(e=n,Vt||(Vt=document.createElement("a")),Vt.setAttribute("href",e),"/"===Vt.pathname.charAt(0)?Vt.pathname:"/"+Vt.pathname)},e.prototype.resetBaseElement=function(){qt=null},e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,n){this.setAttribute(t,"data-"+e,n)},e.prototype.getData=function(t,e){return this.getAttribute(t,"data-"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},e.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return Object(S["\u0275parseCookieValue"])(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)},e}(function(t){function e(){var e=t.call(this)||this;e._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement("div",document);if(null!=e.getStyle(n,"animationName"))e._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],i=0;i<r.length;i++)if(null!=e.getStyle(n,r[i]+"AnimationName")){e._animationPrefix="-"+r[i].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=o[t])})}catch(t){e._animationPrefix=null,e._transitionEnd=null}return e}return Object(o.c)(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,n){t.href=null==n?e:e+"/../"+n},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},e.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},e.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},e.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},e}(function(){function t(){this.resourceLoaderType=null}return Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t}())),qt=null,Gt=S.DOCUMENT;function Ht(){return!!window.history.pushState}var Wt=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._init(),n}return Object(o.c)(e,t),e.prototype._init=function(){this.location=Lt().getLocation(),this._history=Lt().getHistory()},e.prototype.getBaseHrefFromDOM=function(){return Lt().getBaseHref(this._doc)},e.prototype.onPopState=function(t){Lt().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)},e.prototype.onHashChange=function(t){Lt().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)},Object.defineProperty(e.prototype,"pathname",{get:function(){return this.location.pathname},set:function(t){this.location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,n){Ht()?this._history.pushState(t,e,n):this.location.hash=n},e.prototype.replaceState=function(t,e,n){Ht()?this._history.replaceState(t,e,n):this.location.hash=n},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.Inject,args:[Gt]}]}]},e}(S.PlatformLocation),Kt=new r.InjectionToken("TRANSITION_ID");function Xt(t,e,n){return function(){n.get(r.ApplicationInitStatus).donePromise.then(function(){var n=Lt();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(function(e){return n.getAttribute(e,"ng-transition")===t}).forEach(function(t){return n.remove(t)})})}}var Qt=[{provide:r.APP_INITIALIZER,useFactory:Xt,deps:[Kt,Gt,r.Injector],multi:!0}],Zt=function(){function t(){}return t.init=function(){Object(r.setTestabilityGetter)(new t)},t.prototype.addToWindow=function(t){r["\u0275global"].getAngularTestability=function(e,n){void 0===n&&(n=!0);var r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r["\u0275global"].getAllAngularTestabilities=function(){return t.getAllTestabilities()},r["\u0275global"].getAllAngularRootElements=function(){return t.getAllRootElements()},r["\u0275global"].frameworkStabilizers||(r["\u0275global"].frameworkStabilizers=[]),r["\u0275global"].frameworkStabilizers.push(function(t){var e=r["\u0275global"].getAllAngularTestabilities(),n=e.length,i=!1,o=function(e){i=i||e,0==--n&&t(i)};e.forEach(function(t){t.whenStable(o)})})},t.prototype.findTestabilityInTree=function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?Lt().isShadowRoot(e)?this.findTestabilityInTree(t,Lt().getHost(e),!0):this.findTestabilityInTree(t,Lt().parentElement(e),!0):null},t}();function Yt(t,e){"undefined"!=typeof COMPILED&&COMPILED||((r["\u0275global"].ng=r["\u0275global"].ng||{})[t]=e)}var Jt={ApplicationRef:r.ApplicationRef,NgZone:r.NgZone};function $t(t){return Object(r.getDebugNode)(t)}var te=new r.InjectionToken("EventManagerPlugins"),ee=function(){function t(t,e){var n=this;this._zone=e,this._eventNameToPlugin=new Map,t.forEach(function(t){return t.manager=n}),this._plugins=t.slice().reverse()}return t.prototype.addEventListener=function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)},t.prototype.addGlobalEventListener=function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event "+t)},t}(),ne=function(){function t(t){this._doc=t}return t.prototype.addGlobalEventListener=function(t,e,n){var r=Lt().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target "+r+" for event "+e);return this.addEventListener(r,e,n)},t}(),re=function(){function t(){this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},t}(),ie=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return Object(o.c)(e,t),e.prototype._addStylesToHost=function(t,e){var n=this;t.forEach(function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))})},e.prototype.addHost=function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})},e.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(t){return Lt().remove(t)})},e}(re),oe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ae=/%COMP%/g,se="_nghost-%COMP%",ue="_ngcontent-%COMP%";function le(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?le(t,i,n):(i=i.replace(ae,t),n.push(i))}return n}function ce(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var he=function(){function t(t,e){this.eventManager=t,this.sharedStylesHost=e,this.rendererByCompId=new Map,this.defaultRenderer=new pe(t)}return t.prototype.createRenderer=function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ViewEncapsulation.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new ge(this.eventManager,this.sharedStylesHost,e),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case r.ViewEncapsulation.Native:case r.ViewEncapsulation.ShadowDom:return new ye(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var i=le(e.id,e.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}},t.prototype.begin=function(){},t.prototype.end=function(){},t}(),pe=function(){function t(t){this.eventManager=t,this.data=Object.create(null)}return t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){return e?document.createElementNS(oe[e],t):document.createElement(t)},t.prototype.createComment=function(t){return document.createComment(t)},t.prototype.createText=function(t){return document.createTextNode(t)},t.prototype.appendChild=function(t,e){t.appendChild(e)},t.prototype.insertBefore=function(t,e,n){t&&t.insertBefore(e,n)},t.prototype.removeChild=function(t,e){t&&t.removeChild(e)},t.prototype.selectRootElement=function(t){var e="string"==typeof t?document.querySelector(t):t;if(!e)throw new Error('The selector "'+t+'" did not match any elements');return e.textContent="",e},t.prototype.parentNode=function(t){return t.parentNode},t.prototype.nextSibling=function(t){return t.nextSibling},t.prototype.setAttribute=function(t,e,n,r){if(r){e=r+":"+e;var i=oe[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)},t.prototype.removeAttribute=function(t,e,n){if(n){var r=oe[n];r?t.removeAttributeNS(r,e):t.removeAttribute(n+":"+e)}else t.removeAttribute(e)},t.prototype.addClass=function(t,e){t.classList.add(e)},t.prototype.removeClass=function(t,e){t.classList.remove(e)},t.prototype.setStyle=function(t,e,n,i){i&r.RendererStyleFlags2.DashCase?t.style.setProperty(e,n,i&r.RendererStyleFlags2.Important?"important":""):t.style[e]=n},t.prototype.removeStyle=function(t,e,n){n&r.RendererStyleFlags2.DashCase?t.style.removeProperty(e):t.style[e]=""},t.prototype.setProperty=function(t,e,n){de(e,"property"),t[e]=n},t.prototype.setValue=function(t,e){t.nodeValue=e},t.prototype.listen=function(t,e,n){return de(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ce(n)):this.eventManager.addEventListener(t,e,ce(n))},t}(),fe="@".charCodeAt(0);function de(t,e){if(t.charCodeAt(0)===fe)throw new Error("Found the synthetic "+e+" "+t+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var me,ge=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.component=r;var o=le(r.id,r.styles,[]);return n.addStyles(o),i.contentAttr=ue.replace(ae,r.id),i.hostAttr=se.replace(ae,r.id),i}return Object(o.c)(e,t),e.prototype.applyToHost=function(e){t.prototype.setAttribute.call(this,e,this.hostAttr,"")},e.prototype.createElement=function(e,n){var r=t.prototype.createElement.call(this,e,n);return t.prototype.setAttribute.call(this,r,this.contentAttr,""),r},e}(pe),ye=function(t){function e(e,n,i,o){var a=t.call(this,e)||this;a.sharedStylesHost=n,a.hostEl=i,a.component=o,a.shadowRoot=o.encapsulation===r.ViewEncapsulation.ShadowDom?i.attachShadow({mode:"open"}):i.createShadowRoot(),a.sharedStylesHost.addHost(a.shadowRoot);for(var s=le(o.id,o.styles,[]),u=0;u<s.length;u++){var l=document.createElement("style");l.textContent=s[u],a.shadowRoot.appendChild(l)}return a}return Object(o.c)(e,t),e.prototype.nodeOrShadowRoot=function(t){return t===this.hostEl?this.shadowRoot:t},e.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},e.prototype.appendChild=function(e,n){return t.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.insertBefore=function(e,n,r){return t.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),n,r)},e.prototype.removeChild=function(e,n){return t.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.parentNode=function(e){return this.nodeOrShadowRoot(t.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},e}(pe),ve="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},be=ve("addEventListener"),_e=ve("removeEventListener"),we={},xe="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[ve("BLACK_LISTED_EVENTS")]&&(me={});var Ce=function(t){return!!me&&me.hasOwnProperty(t)},Ee=function(t){var e=we[t.type];if(e){var n=this[e];if(n){var r=[t];if(1===n.length)return(a=n[0]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r);for(var i=n.slice(),o=0;o<i.length&&!0!==t[xe];o++){var a;(a=i[o]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r)}}}},Se=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.ngZone=n,r&&Object(S.isPlatformServer)(r)||i.patchEvent(),i}return Object(o.c)(e,t),e.prototype.patchEvent=function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[xe]=!0),t&&t.apply(this,arguments)}}},e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,n){var i=this,o=n;if(!t[be]||r.NgZone.isInAngularZone()&&!Ce(e))t.addEventListener(e,o,!1);else{var a=we[e];a||(a=we[e]=ve("ANGULAR"+e+"FALSE"));var s=t[a],u=s&&s.length>0;s||(s=t[a]=[]);var l=Ce(e)?Zone.root:Zone.current;if(0===s.length)s.push({zone:l,handler:o});else{for(var c=!1,h=0;h<s.length;h++)if(s[h].handler===o){c=!0;break}c||s.push({zone:l,handler:o})}u||t[be](e,Ee,!1)}return function(){return i.removeEventListener(t,e,o)}},e.prototype.removeEventListener=function(t,e,n){var r=t[_e];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);var i=we[e],o=i&&t[i];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);for(var a=!1,s=0;s<o.length;s++)if(o[s].handler===n){a=!0,o.splice(s,1);break}a?0===o.length&&r.apply(t,[e,Ee,!1]):t.removeEventListener.apply(t,[e,n,!1])},e}(ne),Te={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Ae=new r.InjectionToken("HammerGestureConfig"),Pe=new r.InjectionToken("HammerLoader"),Ie=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t,this.options);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e},t}(),Oe=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._config=n,o.console=r,o.loader=i,o}return Object(o.c)(e,t),e.prototype.supports=function(t){return!(!Te.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn('The "'+t+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},e.prototype.addEventListener=function(t,e,n){var r=this,i=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){var o=!1,a=function(){o=!0};return this.loader().then(function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(a=function(){});o||(a=r.addEventListener(t,e,n))}).catch(function(){r.console.warn('The "'+e+'" event cannot be bound because the custom Hammer.JS loader failed.'),a=function(){}}),function(){a()}}return i.runOutsideAngular(function(){var o=r._config.buildHammer(t),a=function(t){i.runGuarded(function(){n(t)})};return o.on(e,a),function(){return o.off(e,a)}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},e}(ne),De=["alt","control","meta","shift"],ke={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},Me=function(t){function e(e){return t.call(this,e)||this}return Object(o.c)(e,t),e.prototype.supports=function(t){return null!=e.parseEventName(t)},e.prototype.addEventListener=function(t,n,r){var i=e.parseEventName(n),o=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return Lt().onAndCancel(t,i.domEventName,o)})},e.parseEventName=function(t){var n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;var i=e._normalizeKey(n.pop()),o="";if(De.forEach(function(t){var e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a},e.getEventFullKey=function(t){var e="",n=Lt().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),De.forEach(function(r){r!=n&&(0,ke[r])(t)&&(e+=r+".")}),e+=n},e.eventCallback=function(t,n,r){return function(i){e.getEventFullKey(i)===t&&r.runGuarded(function(){return n(i)})}},e._normalizeKey=function(t){switch(t){case"esc":return"escape";default:return t}},e}(ne),Re=function(){},Ne=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n}return Object(o.c)(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case r.SecurityContext.NONE:return e;case r.SecurityContext.HTML:return e instanceof Fe?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),Object(r["\u0275_sanitizeHtml"])(this._doc,String(e)));case r.SecurityContext.STYLE:return e instanceof Be?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),Object(r["\u0275_sanitizeStyle"])(e));case r.SecurityContext.SCRIPT:if(e instanceof je)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case r.SecurityContext.URL:return e instanceof Ve||e instanceof ze?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),Object(r["\u0275_sanitizeUrl"])(String(e)));case r.SecurityContext.RESOURCE_URL:if(e instanceof Ve)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+t+" (see http://g.co/ng/security#xss)")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof Le)throw new Error("Required a safe "+e+", got a "+t.getTypeName()+" (see http://g.co/ng/security#xss)")},e.prototype.bypassSecurityTrustHtml=function(t){return new Fe(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new Be(t)},e.prototype.bypassSecurityTrustScript=function(t){return new je(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new ze(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new Ve(t)},e}(Re),Le=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},t}(),Fe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.getTypeName=function(){return"HTML"},e}(Le),Be=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.getTypeName=function(){return"Style"},e}(Le),je=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.getTypeName=function(){return"Script"},e}(Le),ze=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.getTypeName=function(){return"URL"},e}(Le),Ve=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.getTypeName=function(){return"ResourceURL"},e}(Le),Ue=[{provide:r.PLATFORM_ID,useValue:S["\u0275PLATFORM_BROWSER_ID"]},{provide:r.PLATFORM_INITIALIZER,useValue:function(){Ut.makeCurrent(),Zt.init()},multi:!0},{provide:S.PlatformLocation,useClass:Wt,deps:[Gt]},{provide:Gt,useFactory:function(){return document},deps:[]}],qe=Object(r.createPlatformFactory)(r.platformCore,"browser",Ue);function Ge(){return new r.ErrorHandler}var He=function(){function t(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return t.withServerTransition=function(e){return{ngModule:t,providers:[{provide:r.APP_ID,useValue:e.appId},{provide:Kt,useExisting:r.APP_ID},Qt]}},t}();function We(){return new Ke(Object(r.inject)(Gt))}var Ke=function(){function t(t){this._doc=t,this._dom=Lt()}return t.prototype.addTag=function(t,e){return void 0===e&&(e=!1),t?this._getOrCreateElement(t,e):null},t.prototype.addTags=function(t,e){var n=this;return void 0===e&&(e=!1),t?t.reduce(function(t,r){return r&&t.push(n._getOrCreateElement(r,e)),t},[]):[]},t.prototype.getTag=function(t){return t&&this._dom.querySelector(this._doc,"meta["+t+"]")||null},t.prototype.getTags=function(t){if(!t)return[];var e=this._dom.querySelectorAll(this._doc,"meta["+t+"]");return e?[].slice.call(e):[]},t.prototype.updateTag=function(t,e){if(!t)return null;e=e||this._parseSelector(t);var n=this.getTag(e);return n?this._setMetaElementAttributes(t,n):this._getOrCreateElement(t,!0)},t.prototype.removeTag=function(t){this.removeTagElement(this.getTag(t))},t.prototype.removeTagElement=function(t){t&&this._dom.remove(t)},t.prototype._getOrCreateElement=function(t,e){if(void 0===e&&(e=!1),!e){var n=this._parseSelector(t),r=this.getTag(n);if(r&&this._containsAttributes(t,r))return r}var i=this._dom.createElement("meta");this._setMetaElementAttributes(t,i);var o=this._dom.getElementsByTagName(this._doc,"head")[0];return this._dom.appendChild(o,i),i},t.prototype._setMetaElementAttributes=function(t,e){var n=this;return Object.keys(t).forEach(function(r){return n._dom.setAttribute(e,r,t[r])}),e},t.prototype._parseSelector=function(t){var e=t.name?"name":"property";return e+'="'+t[e]+'"'},t.prototype._containsAttributes=function(t,e){var n=this;return Object.keys(t).every(function(r){return n._dom.getAttribute(e,r)===t[r]})},t.ngInjectableDef=Object(r.defineInjectable)({factory:We,token:t,providedIn:"root"}),t}();function Xe(t){return t}"undefined"!=typeof window&&window;var Qe=function(){function t(){this.store={},this.onSerializeCallbacks={}}return t.init=function(e){var n=new t;return n.store=e,n},t.prototype.get=function(t,e){return void 0!==this.store[t]?this.store[t]:e},t.prototype.set=function(t,e){this.store[t]=e},t.prototype.remove=function(t){delete this.store[t]},t.prototype.hasKey=function(t){return this.store.hasOwnProperty(t)},t.prototype.onSerialize=function(t,e){this.onSerializeCallbacks[t]=e},t.prototype.toJson=function(){for(var t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(t){console.warn("Exception in onSerialize callback: ",t)}return JSON.stringify(this.store)},t}();function Ze(t,e){var n,r=t.getElementById(e+"-state"),i={};if(r&&r.textContent)try{i=JSON.parse((n={"&a;":"&","&q;":'"',"&s;":"'","&l;":"<","&g;":">"},r.textContent.replace(/&[^;]+;/g,function(t){return n[t]})))}catch(t){console.warn("Exception while restoring TransferState for app "+e,t)}return Qe.init(i)}var Ye=function(){},Je=function(t,e){this.id=t,this.url=e},$e=function(t){function e(e,n,r,i){void 0===r&&(r="imperative"),void 0===i&&(i=null);var o=t.call(this,e,n)||this;return o.navigationTrigger=r,o.restoredState=i,o}return Object(o.c)(e,t),e.prototype.toString=function(){return"NavigationStart(id: "+this.id+", url: '"+this.url+"')"},e}(Je),tn=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.urlAfterRedirects=r,i}return Object(o.c)(e,t),e.prototype.toString=function(){return"NavigationEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"')"},e}(Je),en=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.reason=r,i}return Object(o.c)(e,t),e.prototype.toString=function(){return"NavigationCancel(id: "+this.id+", url: '"+this.url+"')"},e}(Je),nn=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.error=r,i}return Object(o.c)(e,t),e.prototype.toString=function(){return"NavigationError(id: "+this.id+", url: '"+this.url+"', error: "+this.error+")"},e}(Je),rn=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(o.c)(e,t),e.prototype.toString=function(){return"RoutesRecognized(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(Je),on=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(o.c)(e,t),e.prototype.toString=function(){return"GuardsCheckStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(Je),an=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n)||this;return a.urlAfterRedirects=r,a.state=i,a.shouldActivate=o,a}return Object(o.c)(e,t),e.prototype.toString=function(){return"GuardsCheckEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+", shouldActivate: "+this.shouldActivate+")"},e}(Je),sn=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(o.c)(e,t),e.prototype.toString=function(){return"ResolveStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(Je),un=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(o.c)(e,t),e.prototype.toString=function(){return"ResolveEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(Je),ln=function(){function t(t){this.route=t}return t.prototype.toString=function(){return"RouteConfigLoadStart(path: "+this.route.path+")"},t}(),cn=function(){function t(t){this.route=t}return t.prototype.toString=function(){return"RouteConfigLoadEnd(path: "+this.route.path+")"},t}(),hn=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ChildActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),pn=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ChildActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),fn=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),dn=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),mn=function(){function t(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}return t.prototype.toString=function(){return"Scroll(anchor: '"+this.anchor+"', position: '"+(this.position?this.position[0]+", "+this.position[1]:null)+"')"},t}(),gn=function(){},yn="primary",vn=function(){function t(t){this.params=t||{}}return t.prototype.has=function(t){return this.params.hasOwnProperty(t)},t.prototype.get=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null},t.prototype.getAll=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]},Object.defineProperty(t.prototype,"keys",{get:function(){return Object.keys(this.params)},enumerable:!0,configurable:!0}),t}();function bn(t){return new vn(t)}function _n(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],s=t[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}var wn=function(t,e){this.routes=t,this.module=e};function xn(t,e){void 0===e&&(e="");for(var n=0;n<t.length;n++){var r=t[n];Cn(r,En(e,r))}}function Cn(t,e){if(!t)throw new Error("\n      Invalid configuration of route '"+e+"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    ");if(Array.isArray(t))throw new Error("Invalid configuration of route '"+e+"': Array cannot be specified");if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==yn)throw new Error("Invalid configuration of route '"+e+"': a componentless route without children or loadChildren cannot have a named outlet set");if(t.redirectTo&&t.children)throw new Error("Invalid configuration of route '"+e+"': redirectTo and children cannot be used together");if(t.redirectTo&&t.loadChildren)throw new Error("Invalid configuration of route '"+e+"': redirectTo and loadChildren cannot be used together");if(t.children&&t.loadChildren)throw new Error("Invalid configuration of route '"+e+"': children and loadChildren cannot be used together");if(t.redirectTo&&t.component)throw new Error("Invalid configuration of route '"+e+"': redirectTo and component cannot be used together");if(t.path&&t.matcher)throw new Error("Invalid configuration of route '"+e+"': path and matcher cannot be used together");if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error("Invalid configuration of route '"+e+"'. One of the following must be provided: component, redirectTo, children or loadChildren");if(void 0===t.path&&void 0===t.matcher)throw new Error("Invalid configuration of route '"+e+"': routes must have either a path or a matcher specified");if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error("Invalid configuration of route '"+e+"': path cannot start with a slash");if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error("Invalid configuration of route '{path: \""+e+'", redirectTo: "'+t.redirectTo+"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.");if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error("Invalid configuration of route '"+e+"': pathMatch can only be set to 'prefix' or 'full'");t.children&&xn(t.children,e)}function En(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:t+"/"+e.path:"":t}function Sn(t){var e=t.children&&t.children.map(Sn),n=e?Object(o.a)({},t,{children:e}):Object(o.a)({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==yn&&(n.component=gn),n}function Tn(t,e){var n,r=Object.keys(t),i=Object.keys(e);if(r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(t[n=r[o]]!==e[n])return!1;return!0}function An(t){return Array.prototype.concat.apply([],t)}function Pn(t){return t.length>0?t[t.length-1]:null}function In(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function On(t){return t.pipe(Object(kt.a)(),bt(function(t){return!0===t}))}function Dn(t){return Object(r["\u0275isObservable"])(t)?t:Object(r["\u0275isPromise"])(t)?Object(p.a)(Promise.resolve(t)):h(t)}function kn(t,e,n){return n?function(t,e){return Tn(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Ln(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(function(n){return e[n]===t[n]})}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!Ln(a=n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Ln(n.segments,i))return!1;for(var o in r.children){if(!n.children[o])return!1;if(!t(n.children[o],r.children[o]))return!1}return!0}var a=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!Ln(n.segments,a)&&!!n.children[yn]&&e(n.children[yn],r,s)}(e,n,n.segments)}(t.root,e.root)}var Mn=function(){function t(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}return Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=bn(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return zn.serialize(this)},t}(),Rn=function(){function t(t,e){var n=this;this.segments=t,this.children=e,this.parent=null,In(e,function(t,e){return t.parent=n})}return t.prototype.hasChildren=function(){return this.numberOfChildren>0},Object.defineProperty(t.prototype,"numberOfChildren",{get:function(){return Object.keys(this.children).length},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return Vn(this)},t}(),Nn=function(){function t(t,e){this.path=t,this.parameters=e}return Object.defineProperty(t.prototype,"parameterMap",{get:function(){return this._parameterMap||(this._parameterMap=bn(this.parameters)),this._parameterMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return Kn(this)},t}();function Ln(t,e){return t.length===e.length&&t.every(function(t,n){return t.path===e[n].path})}function Fn(t,e){var n=[];return In(t.children,function(t,r){r===yn&&(n=n.concat(e(t,r)))}),In(t.children,function(t,r){r!==yn&&(n=n.concat(e(t,r)))}),n}var Bn=function(){},jn=function(){function t(){}return t.prototype.parse=function(t){var e=new Jn(t);return new Mn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())},t.prototype.serialize=function(t){var e,n;return"/"+function t(e,n){if(!e.hasChildren())return Vn(e);if(n){var r=e.children[yn]?t(e.children[yn],!1):"",i=[];return In(e.children,function(e,n){n!==yn&&i.push(n+":"+t(e,!1))}),i.length>0?r+"("+i.join("//")+")":r}var o=Fn(e,function(n,r){return r===yn?[t(e.children[yn],!1)]:[r+":"+t(n,!1)]});return Vn(e)+"/("+o.join("//")+")"}(t.root,!0)+(e=t.queryParams,(n=Object.keys(e).map(function(t){var n=e[t];return Array.isArray(n)?n.map(function(e){return qn(t)+"="+qn(e)}).join("&"):qn(t)+"="+qn(n)})).length?"?"+n.join("&"):"")+("string"==typeof t.fragment?"#"+encodeURI(t.fragment):"")},t}(),zn=new jn;function Vn(t){return t.segments.map(function(t){return Kn(t)}).join("/")}function Un(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qn(t){return Un(t).replace(/%3B/gi,";")}function Gn(t){return Un(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hn(t){return decodeURIComponent(t)}function Wn(t){return Hn(t.replace(/\+/g,"%20"))}function Kn(t){return""+Gn(t.path)+(e=t.parameters,Object.keys(e).map(function(t){return";"+Gn(t)+"="+Gn(e[t])}).join(""));var e}var Xn=/^[^\/()?;=#]+/;function Qn(t){var e=t.match(Xn);return e?e[0]:""}var Zn=/^[^=?&#]+/,Yn=/^[^?&#]+/,Jn=function(){function t(t){this.url=t,this.remaining=t}return t.prototype.parseRootSegment=function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Rn([],{}):new Rn([],this.parseChildren())},t.prototype.parseQueryParams=function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t},t.prototype.parseFragment=function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null},t.prototype.parseChildren=function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[yn]=new Rn(t,e)),n},t.prototype.parseSegment=function(){var t=Qn(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");return this.capture(t),new Nn(Hn(t),this.parseMatrixParams())},t.prototype.parseMatrixParams=function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t},t.prototype.parseParam=function(t){var e=Qn(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=Qn(this.remaining);r&&this.capture(n=r)}t[Hn(e)]=Hn(n)}},t.prototype.parseQueryParam=function(t){var e,n=(e=this.remaining.match(Zn))?e[0]:"";if(n){this.capture(n);var r="";if(this.consumeOptional("=")){var i=function(t){var e=t.match(Yn);return e?e[0]:""}(this.remaining);i&&this.capture(r=i)}var o=Wn(n),a=Wn(r);if(t.hasOwnProperty(o)){var s=t[o];Array.isArray(s)||(t[o]=s=[s]),s.push(a)}else t[o]=a}},t.prototype.parseParens=function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Qn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '"+this.url+"'");var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=yn);var o=this.parseChildren();e[i]=1===Object.keys(o).length?o[yn]:new Rn([],o),this.consumeOptional("//")}return e},t.prototype.peekStartsWith=function(t){return this.remaining.startsWith(t)},t.prototype.consumeOptional=function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)},t.prototype.capture=function(t){if(!this.consumeOptional(t))throw new Error('Expected "'+t+'".')},t}(),$n=function(t){this.segmentGroup=t||null},tr=function(t){this.urlTree=t};function er(t){return new u.a(function(e){return e.error(new $n(t))})}function nr(t){return new u.a(function(e){return e.error(new tr(t))})}function rr(t){return new u.a(function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '"+t+"'"))})}var ir=function(){function t(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.NgModuleRef)}return t.prototype.apply=function(){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,yn).pipe(Object(d.a)(function(e){return t.createUrlTree(e,t.urlTree.queryParams,t.urlTree.fragment)})).pipe(It(function(e){if(e instanceof tr)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof $n)throw t.noMatchError(e);throw e}))},t.prototype.match=function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,yn).pipe(Object(d.a)(function(n){return e.createUrlTree(n,t.queryParams,t.fragment)})).pipe(It(function(t){if(t instanceof $n)throw e.noMatchError(t);throw t}))},t.prototype.noMatchError=function(t){return new Error("Cannot match any routes. URL Segment: '"+t.segmentGroup+"'")},t.prototype.createUrlTree=function(t,e,n){var r,i=t.segments.length>0?new Rn([],((r={})[yn]=t,r)):t;return new Mn(i,e,n)},t.prototype.expandSegmentGroup=function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(d.a)(function(t){return new Rn([],t)})):this.expandSegment(t,n,e,n.segments,r,!0)},t.prototype.expandChildren=function(t,e,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return h({});var o=[],a=[],s={};return In(n,function(n,i){var u,l,c=(u=i,l=n,r.expandSegmentGroup(t,e,l,u)).pipe(Object(d.a)(function(t){return s[i]=t}));i===yn?o.push(c):a.push(c)}),h.apply(null,o.concat(a)).pipe(Mt(),Rt(),Object(d.a)(function(){return s}))}(n.children)},t.prototype.expandSegment=function(t,e,n,r,i,a){var s=this;return h.apply(void 0,Object(o.f)(n)).pipe(Object(d.a)(function(o){return s.expandSegmentAgainstRoute(t,e,n,o,r,i,a).pipe(It(function(t){if(t instanceof $n)return h(null);throw t}))}),Mt(),vt(function(t){return!!t}),It(function(t,n){if(t instanceof et||"EmptyError"===t.name){if(s.noLeftoversInUrl(e,r,i))return h(new Rn([],{}));throw new $n(e)}throw t}))},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.expandSegmentAgainstRoute=function(t,e,n,r,i,o,a){return ur(r)!==o?er(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):er(e)},t.prototype.expandSegmentAgainstRouteUsingRedirect=function(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)},t.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect=function(t,e,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?nr(o):this.lineralizeSegments(n,o).pipe(Object(nt.a)(function(n){var o=new Rn(n,{});return i.expandSegment(t,o,e,n,r,!1)}))},t.prototype.expandRegularSegmentAgainstRouteUsingRedirect=function(t,e,n,r,i,o){var a=this,s=or(e,r,i),u=s.consumedSegments,l=s.lastChild,c=s.positionalParamSegments;if(!s.matched)return er(e);var h=this.applyRedirectCommands(u,r.redirectTo,c);return r.redirectTo.startsWith("/")?nr(h):this.lineralizeSegments(r,h).pipe(Object(nt.a)(function(r){return a.expandSegment(t,e,n,r.concat(i.slice(l)),o,!1)}))},t.prototype.matchSegmentAgainstRoute=function(t,e,n,r){var i=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(d.a)(function(t){return n._loadedConfig=t,new Rn(r,{})})):h(new Rn(r,{}));var a=or(e,n,r),s=a.consumedSegments,u=a.lastChild;if(!a.matched)return er(e);var l=r.slice(u);return this.getChildConfig(t,n).pipe(Object(nt.a)(function(t){var n=t.module,r=t.routes,a=function(t,e,n,r){return n.length>0&&function(t,e,n){return r.some(function(n){return sr(t,e,n)&&ur(n)!==yn})}(t,n)?{segmentGroup:ar(new Rn(e,function(t,e){var n,r,i={};i[yn]=e;try{for(var a=Object(o.g)(t),s=a.next();!s.done;s=a.next()){var u=s.value;""===u.path&&ur(u)!==yn&&(i[ur(u)]=new Rn([],{}))}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i}(r,new Rn(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return r.some(function(n){return sr(t,e,n)})}(t,n)?{segmentGroup:ar(new Rn(t.segments,function(t,e,n,r){var i,a,s={};try{for(var u=Object(o.g)(n),l=u.next();!l.done;l=u.next()){var c=l.value;sr(t,e,c)&&!r[ur(c)]&&(s[ur(c)]=new Rn([],{}))}}catch(t){i={error:t}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}return Object(o.a)({},r,s)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,s,l,r),u=a.segmentGroup,c=a.slicedSegments;return 0===c.length&&u.hasChildren()?i.expandChildren(n,r,u).pipe(Object(d.a)(function(t){return new Rn(s,t)})):0===r.length&&0===c.length?h(new Rn(s,{})):i.expandSegment(n,u,r,c,yn,!0).pipe(Object(d.a)(function(t){return new Rn(s.concat(t.segments),t.children)}))}))},t.prototype.getChildConfig=function(t,e){var n=this;return e.children?h(new wn(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?h(e._loadedConfig):function(t,e){var n=e.canLoad;return n&&0!==n.length?On(Object(p.a)(n).pipe(Object(d.a)(function(n){var r=t.get(n);return Dn(r.canLoad?r.canLoad(e):r(e))}))):h(!0)}(t.injector,e).pipe(Object(nt.a)(function(r){return r?n.configLoader.load(t.injector,e).pipe(Object(d.a)(function(t){return e._loadedConfig=t,t})):function(t){return new u.a(function(e){return e.error(((n=Error("NavigationCancelingError: Cannot load children because the guard of the route \"path: '"+t.path+"'\" returned false")).ngNavigationCancelingError=!0,n));var n})}(e)})):h(new wn([],t))},t.prototype.lineralizeSegments=function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return h(n);if(r.numberOfChildren>1||!r.children[yn])return rr(t.redirectTo);r=r.children[yn]}},t.prototype.applyRedirectCommands=function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)},t.prototype.applyRedirectCreatreUrlTree=function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new Mn(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)},t.prototype.createQueryParams=function(t,e){var n={};return In(t,function(t,r){if("string"==typeof t&&t.startsWith(":")){var i=t.substring(1);n[r]=e[i]}else n[r]=t}),n},t.prototype.createSegmentGroup=function(t,e,n,r){var i=this,o=this.createSegments(t,e.segments,n,r),a={};return In(e.children,function(e,o){a[o]=i.createSegmentGroup(t,e,n,r)}),new Rn(o,a)},t.prototype.createSegments=function(t,e,n,r){var i=this;return e.map(function(e){return e.path.startsWith(":")?i.findPosParam(t,e,r):i.findOrReturn(e,n)})},t.prototype.findPosParam=function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '"+t+"'. Cannot find '"+e.path+"'.");return r},t.prototype.findOrReturn=function(t,e){var n,r,i=0;try{for(var a=Object(o.g)(e),s=a.next();!s.done;s=a.next()){var u=s.value;if(u.path===t.path)return e.splice(i),u;i++}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return t},t}();function or(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(e.matcher||_n)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function ar(t){if(1===t.numberOfChildren&&t.children[yn]){var e=t.children[yn];return new Rn(t.segments.concat(e.segments),e.children)}return t}function sr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function ur(t){return t.outlet||yn}var lr=function(){function t(t){this._root=t}return Object.defineProperty(t.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),t.prototype.parent=function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null},t.prototype.children=function(t){var e=cr(t,this._root);return e?e.children.map(function(t){return t.value}):[]},t.prototype.firstChild=function(t){var e=cr(t,this._root);return e&&e.children.length>0?e.children[0].value:null},t.prototype.siblings=function(t){var e=hr(t,this._root);return e.length<2?[]:e[e.length-2].children.map(function(t){return t.value}).filter(function(e){return e!==t})},t.prototype.pathFromRoot=function(t){return hr(t,this._root).map(function(t){return t.value})},t}();function cr(t,e){var n,r;if(t===e.value)return e;try{for(var i=Object(o.g)(e.children),a=i.next();!a.done;a=i.next()){var s=cr(t,a.value);if(s)return s}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return null}function hr(t,e){var n,r;if(t===e.value)return[e];try{for(var i=Object(o.g)(e.children),a=i.next();!a.done;a=i.next()){var s=hr(t,a.value);if(s.length)return s.unshift(e),s}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return[]}var pr=function(){function t(t,e){this.value=t,this.children=e}return t.prototype.toString=function(){return"TreeNode("+this.value+")"},t}();function fr(t){var e={};return t&&t.children.forEach(function(t){return e[t.value.outlet]=t}),e}var dr=function(t){function e(e,n){var r=t.call(this,e)||this;return r.snapshot=n,_r(r,e),r}return Object(o.c)(e,t),e.prototype.toString=function(){return this.snapshot.toString()},e}(lr);function mr(t,e){var n=function(t,e){var n=new vr([],{},{},"",{},yn,e,null,t.root,-1,{});return new br("",new pr(n,[]))}(t,e),r=new tt([new Nn("",{})]),i=new tt({}),o=new tt({}),a=new tt({}),s=new tt(""),u=new gr(r,i,a,s,o,yn,e,n.root);return u.snapshot=n.root,new dr(new pr(u,[]),n)}var gr=function(){function t(t,e,n,r,i,o,a,s){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=a,this._futureSnapshot=s}return Object.defineProperty(t.prototype,"routeConfig",{get:function(){return this._futureSnapshot.routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=this.params.pipe(Object(d.a)(function(t){return bn(t)}))),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(d.a)(function(t){return bn(t)}))),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.snapshot?this.snapshot.toString():"Future("+this._futureSnapshot+")"},t}();function yr(t,e){void 0===e&&(e="emptyOnly");var n=t.pathFromRoot,r=0;if("always"!==e)for(r=n.length-1;r>=1;){var i=n[r],a=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function(t){return t.reduce(function(t,e){return{params:Object(o.a)({},t.params,e.params),data:Object(o.a)({},t.data,e.data),resolve:Object(o.a)({},t.resolve,e._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(r))}var vr=function(){function t(t,e,n,r,i,o,a,s,u,l,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=a,this.routeConfig=s,this._urlSegment=u,this._lastPathIndex=l,this._resolve=c}return Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=bn(this.params)),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=bn(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"Route(url:'"+this.url.map(function(t){return t.toString()}).join("/")+"', path:'"+(this.routeConfig?this.routeConfig.path:"")+"')"},t}(),br=function(t){function e(e,n){var r=t.call(this,n)||this;return r.url=e,_r(r,n),r}return Object(o.c)(e,t),e.prototype.toString=function(){return wr(this._root)},e}(lr);function _r(t,e){e.value._routerState=t,e.children.forEach(function(e){return _r(t,e)})}function wr(t){var e=t.children.length>0?" { "+t.children.map(wr).join(", ")+" } ":"";return""+t.value+e}function xr(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Tn(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Tn(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!Tn(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Tn(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Cr(t,e){var n,r;return Tn(t.params,e.params)&&Ln(n=t.url,r=e.url)&&n.every(function(t,e){return Tn(t.parameters,r[e].parameters)})&&!(!t.parent!=!e.parent)&&(!t.parent||Cr(t.parent,e.parent))}function Er(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Sr(t,e,n,r,i){var o={};return r&&In(r,function(t,e){o[e]=Array.isArray(t)?t.map(function(t){return""+t}):""+t}),new Mn(n.root===t?e:function t(e,n,r){var i={};return In(e.children,function(e,o){i[o]=e===n?r:t(e,n,r)}),new Rn(e.segments,i)}(n.root,t,e),o,i)}var Tr=function(){function t(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Er(n[0]))throw new Error("Root segment cannot have matrix parameters");var r=n.find(function(t){return"object"==typeof t&&null!=t&&t.outlets});if(r&&r!==Pn(n))throw new Error("{outlets:{}} has to be the last command")}return t.prototype.toRoot=function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]},t}(),Ar=function(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n};function Pr(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets[yn]:""+t}function Ir(t,e,n){if(t||(t=new Rn([],{})),0===t.segments.length&&t.hasChildren())return Or(t,e,n);var r=function(t,e,n){for(var r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return o;var a=t.segments[i],s=Pr(n[r]),u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!Rr(s,u,a))return o;r+=2}else{if(!Rr(s,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var o=new Rn(t.segments.slice(0,r.pathIndex),{});return o.children[yn]=new Rn(t.segments.slice(r.pathIndex),t.children),Or(o,0,i)}return r.match&&0===i.length?new Rn(t.segments,{}):r.match&&!t.hasChildren()?Dr(t,e,n):r.match?Or(t,0,i):Dr(t,e,n)}function Or(t,e,n){if(0===n.length)return new Rn(t.segments,{});var r=function(t){var e,n;return"object"!=typeof t[0]?((e={})[yn]=t,e):void 0===t[0].outlets?((n={})[yn]=t,n):t[0].outlets}(n),i={};return In(r,function(n,r){null!==n&&(i[r]=Ir(t.children[r],e,n))}),In(t.children,function(t,e){void 0===r[e]&&(i[e]=t)}),new Rn(t.segments,i)}function Dr(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){var o=kr(n[i].outlets);return new Rn(r,o)}if(0===i&&Er(n[0]))r.push(new Nn(t.segments[e].path,n[0])),i++;else{var a=Pr(n[i]),s=i<n.length-1?n[i+1]:null;a&&s&&Er(s)?(r.push(new Nn(a,Mr(s))),i+=2):(r.push(new Nn(a,{})),i++)}}return new Rn(r,{})}function kr(t){var e={};return In(t,function(t,n){null!==t&&(e[n]=Dr(new Rn([],{}),0,t))}),e}function Mr(t){var e={};return In(t,function(t,n){return e[n]=""+t}),e}function Rr(t,e,n){return t==n.path&&Tn(e,n.parameters)}var Nr=function(t){this.path=t,this.route=this.path[this.path.length-1]},Lr=function(t,e){this.component=t,this.route=e},Fr=function(){function t(t,e,n,r){this.future=t,this.curr=e,this.moduleInjector=n,this.forwardEvent=r,this.canActivateChecks=[],this.canDeactivateChecks=[]}return t.prototype.initialize=function(t){var e=this.future._root;this.setupChildRouteGuards(e,this.curr?this.curr._root:null,t,[e.value])},t.prototype.checkGuards=function(){var t=this;return this.isDeactivating()||this.isActivating()?this.runCanDeactivateChecks().pipe(Object(nt.a)(function(e){return e?t.runCanActivateChecks():h(!1)})):h(!0)},t.prototype.resolveData=function(t){var e=this;return this.isActivating()?Object(p.a)(this.canActivateChecks).pipe(xt(function(n){return e.runResolve(n.route,t)}),function(t,e){return arguments.length>=2?function(n){return Object(Tt.a)(w(t,e),Ct(1),st(e))(n)}:function(e){return Object(Tt.a)(w(function(e,n,r){return t(e,n,r+1)}),Ct(1))(e)}}(function(t,e){return t})):h(null)},t.prototype.isDeactivating=function(){return 0!==this.canDeactivateChecks.length},t.prototype.isActivating=function(){return 0!==this.canActivateChecks.length},t.prototype.setupChildRouteGuards=function(t,e,n,r){var i=this,o=fr(e);t.children.forEach(function(t){i.setupRouteGuards(t,o[t.value.outlet],n,r.concat([t.value])),delete o[t.value.outlet]}),In(o,function(t,e){return i.deactivateRouteAndItsChildren(t,n.getContext(e))})},t.prototype.setupRouteGuards=function(t,e,n,r){var i=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){var s=this.shouldRunGuardsAndResolvers(o,i,i.routeConfig.runGuardsAndResolvers);s?this.canActivateChecks.push(new Nr(r)):(i.data=o.data,i._resolvedData=o._resolvedData),this.setupChildRouteGuards(t,e,i.component?a?a.children:null:n,r),s&&this.canDeactivateChecks.push(new Lr(a.outlet.component,o))}else o&&this.deactivateRouteAndItsChildren(e,a),this.canActivateChecks.push(new Nr(r)),this.setupChildRouteGuards(t,null,i.component?a?a.children:null:n,r)},t.prototype.shouldRunGuardsAndResolvers=function(t,e,n){switch(n){case"always":return!0;case"paramsOrQueryParamsChange":return!Cr(t,e)||!Tn(t.queryParams,e.queryParams);case"paramsChange":default:return!Cr(t,e)}},t.prototype.deactivateRouteAndItsChildren=function(t,e){var n=this,r=fr(t),i=t.value;In(r,function(t,r){n.deactivateRouteAndItsChildren(t,i.component?e?e.children.getContext(r):null:e)}),this.canDeactivateChecks.push(new Lr(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))},t.prototype.runCanDeactivateChecks=function(){var t=this;return Object(p.a)(this.canDeactivateChecks).pipe(Object(nt.a)(function(e){return t.runCanDeactivate(e.component,e.route)}),bt(function(t){return!0===t}))},t.prototype.runCanActivateChecks=function(){var t=this;return Object(p.a)(this.canActivateChecks).pipe(xt(function(e){return On(Object(p.a)([t.fireChildActivationStart(e.route.parent),t.fireActivationStart(e.route),t.runCanActivateChild(e.path),t.runCanActivate(e.route)]))}),bt(function(t){return!0===t}))},t.prototype.fireActivationStart=function(t){return null!==t&&this.forwardEvent&&this.forwardEvent(new fn(t)),h(!0)},t.prototype.fireChildActivationStart=function(t){return null!==t&&this.forwardEvent&&this.forwardEvent(new hn(t)),h(!0)},t.prototype.runCanActivate=function(t){var e=this,n=t.routeConfig?t.routeConfig.canActivate:null;return n&&0!==n.length?On(Object(p.a)(n).pipe(Object(d.a)(function(n){var r=e.getToken(n,t);return Dn(r.canActivate?r.canActivate(t,e.future):r(t,e.future)).pipe(vt())}))):h(!0)},t.prototype.runCanActivateChild=function(t){var e=this,n=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(function(t){return e.extractCanActivateChild(t)}).filter(function(t){return null!==t});return On(Object(p.a)(r).pipe(Object(d.a)(function(t){return On(Object(p.a)(t.guards).pipe(Object(d.a)(function(r){var i=e.getToken(r,t.node);return Dn(i.canActivateChild?i.canActivateChild(n,e.future):i(n,e.future)).pipe(vt())})))})))},t.prototype.extractCanActivateChild=function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null},t.prototype.runCanDeactivate=function(t,e){var n=this,r=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return r&&0!==r.length?Object(p.a)(r).pipe(Object(nt.a)(function(r){var i=n.getToken(r,e);return Dn(i.canDeactivate?i.canDeactivate(t,e,n.curr,n.future):i(t,e,n.curr,n.future)).pipe(vt())})).pipe(bt(function(t){return!0===t})):h(!0)},t.prototype.runResolve=function(t,e){return this.resolveNode(t._resolve,t).pipe(Object(d.a)(function(n){return t._resolvedData=n,t.data=Object(o.a)({},t.data,yr(t,e).resolve),null}))},t.prototype.resolveNode=function(t,e){var n=this,r=Object.keys(t);if(0===r.length)return h({});if(1===r.length){var i=r[0];return this.getResolver(t[i],e).pipe(Object(d.a)(function(t){var e;return(e={})[i]=t,e}))}var o={};return Object(p.a)(r).pipe(Object(nt.a)(function(r){return n.getResolver(t[r],e).pipe(Object(d.a)(function(t){return o[r]=t,t}))})).pipe(Rt(),Object(d.a)(function(){return o}))},t.prototype.getResolver=function(t,e){var n=this.getToken(t,e);return Dn(n.resolve?n.resolve(e,this.future):n(e,this.future))},t.prototype.getToken=function(t,e){var n=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(n?n.module.injector:this.moduleInjector).get(t)},t}(),Br=function(){},jr=function(){function t(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}return t.prototype.recognize=function(){try{var t=Ur(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,yn),n=new vr([],Object.freeze({}),Object.freeze(Object(o.a)({},this.urlTree.queryParams)),this.urlTree.fragment,{},yn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new pr(n,e),i=new br(this.url,r);return this.inheritParamsAndData(i._root),h(i)}catch(t){return new u.a(function(e){return e.error(t)})}},t.prototype.inheritParamsAndData=function(t){var e=this,n=t.value,r=yr(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(function(t){return e.inheritParamsAndData(t)})},t.prototype.processSegmentGroup=function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)},t.prototype.processChildren=function(t,e){var n,r=this,i=Fn(e,function(e,n){return r.processSegmentGroup(t,e,n)});return n={},i.forEach(function(t){var e=n[t.value.outlet];if(e){var r=e.url.map(function(t){return t.toString()}).join("/"),i=t.value.url.map(function(t){return t.toString()}).join("/");throw new Error("Two segments cannot have the same outlet name: '"+r+"' and '"+i+"'.")}n[t.value.outlet]=t.value}),i.sort(function(t,e){return t.value.outlet===yn?-1:e.value.outlet===yn?1:t.value.outlet.localeCompare(e.value.outlet)}),i},t.prototype.processSegment=function(t,e,n,r){var i,a;try{for(var s=Object(o.g)(t),u=s.next();!u.done;u=s.next()){var l=u.value;try{return this.processSegmentAgainstRoute(l,e,n,r)}catch(t){if(!(t instanceof Br))throw t}}}catch(t){i={error:t}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}if(this.noLeftoversInUrl(e,n,r))return[];throw new Br},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.processSegmentAgainstRoute=function(t,e,n,r){if(t.redirectTo)throw new Br;if((t.outlet||yn)!==r)throw new Br;var i,a=[],s=[];if("**"===t.path){var u=n.length>0?Pn(n).parameters:{};i=new vr(n,u,Object.freeze(Object(o.a)({},this.urlTree.queryParams)),this.urlTree.fragment,Hr(t),r,t.component,t,zr(e),Vr(e)+n.length,Wr(t))}else{var l=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Br;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(e.matcher||_n)(n,t,e);if(!r)throw new Br;var i={};In(r.posParams,function(t,e){i[e]=t.path});var a=r.consumed.length>0?Object(o.a)({},i,r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:a}}(e,t,n);a=l.consumedSegments,s=n.slice(l.lastChild),i=new vr(a,l.parameters,Object.freeze(Object(o.a)({},this.urlTree.queryParams)),this.urlTree.fragment,Hr(t),r,t.component,t,zr(e),Vr(e)+a.length,Wr(t))}var c=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),h=Ur(e,a,s,c,this.relativeLinkResolution),p=h.segmentGroup,f=h.slicedSegments;if(0===f.length&&p.hasChildren()){var d=this.processChildren(c,p);return[new pr(i,d)]}if(0===c.length&&0===f.length)return[new pr(i,[])];var m=this.processSegment(c,p,f,yn);return[new pr(i,m)]},t}();function zr(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function Vr(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Ur(t,e,n,r,i){if(n.length>0&&function(t,e,n){return r.some(function(n){return qr(t,e,n)&&Gr(n)!==yn})}(t,n)){var a=new Rn(e,function(t,e,n,r){var i,a,s={};s[yn]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;try{for(var u=Object(o.g)(n),l=u.next();!l.done;l=u.next()){var c=l.value;if(""===c.path&&Gr(c)!==yn){var h=new Rn([],{});h._sourceSegment=t,h._segmentIndexShift=e.length,s[Gr(c)]=h}}}catch(t){i={error:t}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}return s}(t,e,r,new Rn(n,t.children)));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return r.some(function(n){return qr(t,e,n)})}(t,n)){var s=new Rn(t.segments,function(t,e,n,r,i,a){var s,u,l={};try{for(var c=Object(o.g)(r),h=c.next();!h.done;h=c.next()){var p=h.value;if(qr(t,n,p)&&!i[Gr(p)]){var f=new Rn([],{});f._sourceSegment=t,f._segmentIndexShift="legacy"===a?t.segments.length:e.length,l[Gr(p)]=f}}}catch(t){s={error:t}}finally{try{h&&!h.done&&(u=c.return)&&u.call(c)}finally{if(s)throw s.error}}return Object(o.a)({},i,l)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}var u=new Rn(t.segments,t.children);return u._sourceSegment=t,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:n}}function qr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Gr(t){return t.outlet||yn}function Hr(t){return t.data||{}}function Wr(t){return t.resolve||{}}var Kr=function(){},Xr=function(){function t(){}return t.prototype.shouldDetach=function(t){return!1},t.prototype.store=function(t,e){},t.prototype.shouldAttach=function(t){return!1},t.prototype.retrieve=function(t){return null},t.prototype.shouldReuseRoute=function(t,e){return t.routeConfig===e.routeConfig},t}(),Qr=new r.InjectionToken("ROUTES"),Zr=function(){function t(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}return t.prototype.load=function(t,e){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(d.a)(function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i=r.create(t);return new wn(An(i.injector.get(Qr)).map(Sn),i)}))},t.prototype.loadModuleFactory=function(t){var e=this;return"string"==typeof t?Object(p.a)(this.loader.load(t)):Dn(t()).pipe(Object(nt.a)(function(t){return t instanceof r.NgModuleFactory?h(t):Object(p.a)(e.compiler.compileModuleAsync(t))}))},t}(),Yr=function(){},Jr=function(){function t(){}return t.prototype.shouldProcessUrl=function(t){return!0},t.prototype.extract=function(t){return t},t.prototype.merge=function(t,e){return t},t}();function $r(t){throw t}function ti(t,e,n){return e.parse("/")}function ei(t,e){return h(null)}var ni=function(){function t(t,e,n,i,o,a,s,u){var l=this;this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.navigations=new tt(null),this.navigationId=0,this.events=new J.a,this.errorHandler=$r,this.malformedUriErrorHandler=ti,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ei,afterPreactivation:ei},this.urlHandlingStrategy=new Jr,this.routeReuseStrategy=new Xr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(r.NgModuleRef),this.resetConfig(u),this.currentUrlTree=new Mn(new Rn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.configLoader=new Zr(a,s,function(t){return l.triggerEvent(new ln(t))},function(t){return l.triggerEvent(new cn(t))}),this.routerState=mr(this.currentUrlTree,this.rootComponentType),this.processNavigations()}return t.prototype.resetRootComponentType=function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType},t.prototype.initialNavigation=function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})},t.prototype.setUpLocationChangeListener=function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(e){var n=t.parseUrl(e.url),r="popstate"===e.type?"popstate":"hashchange",i=e.state&&e.state.navigationId?{navigationId:e.state.navigationId}:null;setTimeout(function(){t.scheduleNavigation(n,r,i,{replaceUrl:!0})},0)}))},Object.defineProperty(t.prototype,"url",{get:function(){return this.serializeUrl(this.currentUrlTree)},enumerable:!0,configurable:!0}),t.prototype.triggerEvent=function(t){this.events.next(t)},t.prototype.resetConfig=function(t){xn(t),this.config=t.map(Sn),this.navigated=!1,this.lastSuccessfulId=-1},t.prototype.ngOnDestroy=function(){this.dispose()},t.prototype.dispose=function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)},t.prototype.createUrlTree=function(t,e){void 0===e&&(e={});var n=e.relativeTo,i=e.queryParams,a=e.fragment,s=e.preserveQueryParams,u=e.queryParamsHandling,l=e.preserveFragment;Object(r.isDevMode)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var c=n||this.routerState.root,h=l?this.currentUrlTree.fragment:a,p=null;if(u)switch(u){case"merge":p=Object(o.a)({},this.currentUrlTree.queryParams,i);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=i||null}else p=s?this.currentUrlTree.queryParams:i||null;return null!==p&&(p=this.removeEmptyProps(p)),function(t,e,n,r,i){if(0===n.length)return Sr(e.root,e.root,e,r,i);var a=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Tr(!0,0,t);var e=0,n=!1,r=t.reduce(function(t,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var a={};return In(r.outlets,function(t,e){a[e]="string"==typeof t?t.split("/"):t}),Object(o.f)(t,[{outlets:a}])}if(r.segmentPath)return Object(o.f)(t,[r.segmentPath])}return"string"!=typeof r?Object(o.f)(t,[r]):0===i?(r.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):Object(o.f)(t,[r])},[]);return new Tr(n,e,r)}(n);if(a.toRoot())return Sr(e.root,new Rn([],{}),e,r,i);var s=function(t,n,r){if(t.isAbsolute)return new Ar(e.root,!0,0);if(-1===r.snapshot._lastPathIndex)return new Ar(r.snapshot._urlSegment,!0,0);var i=Er(t.commands[0])?0:1;return function(e,n,o){for(var a=r.snapshot._urlSegment,s=r.snapshot._lastPathIndex+i,u=t.numberOfDoubleDots;u>s;){if(u-=s,!(a=a.parent))throw new Error("Invalid number of '../'");s=a.segments.length}return new Ar(a,!1,s-u)}()}(a,0,t),u=s.processChildren?Or(s.segmentGroup,s.index,a.commands):Ir(s.segmentGroup,s.index,a.commands);return Sr(s.segmentGroup,u,e,r,i)}(c,this.currentUrlTree,t,p,h)},t.prototype.navigateByUrl=function(t,e){void 0===e&&(e={skipLocationChange:!1});var n=t instanceof Mn?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)},t.prototype.navigate=function(t,e){return void 0===e&&(e={skipLocationChange:!1}),function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains "+n+" segment at index "+e)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)},t.prototype.serializeUrl=function(t){return this.urlSerializer.serialize(t)},t.prototype.parseUrl=function(t){var e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e},t.prototype.isActive=function(t,e){if(t instanceof Mn)return kn(this.currentUrlTree,t,e);var n=this.parseUrl(t);return kn(this.currentUrlTree,n,e)},t.prototype.removeEmptyProps=function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return null!==r&&void 0!==r&&(e[n]=r),e},{})},t.prototype.processNavigations=function(){var t=this;this.navigations.pipe(xt(function(e){return e?(t.executeScheduledNavigation(e),e.promise.catch(function(){})):h(null)})).subscribe(function(){})},t.prototype.scheduleNavigation=function(t,e,n,r){var i=this.navigations.value;if(i&&"imperative"!==e&&"imperative"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"hashchange"==e&&"popstate"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"popstate"==e&&"hashchange"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);var o=null,a=null,s=new Promise(function(t,e){o=t,a=e}),u=++this.navigationId;return this.navigations.next({id:u,source:e,state:n,rawUrl:t,extras:r,resolve:o,reject:a,promise:s}),s.catch(function(t){return Promise.reject(t)})},t.prototype.executeScheduledNavigation=function(t){var e=this,n=t.id,r=t.rawUrl,i=t.extras,o=t.resolve,a=t.reject,s=t.source,u=t.state,l=this.urlHandlingStrategy.extract(r),c=!this.navigated||l.toString()!==this.currentUrlTree.toString();("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(r)?("eager"!==this.urlUpdateStrategy||i.skipLocationChange||this.setBrowserUrl(r,!!i.replaceUrl,n),this.events.next(new $e(n,this.serializeUrl(l),s,u)),Promise.resolve().then(function(t){return e.runNavigate(l,r,!!i.skipLocationChange,!!i.replaceUrl,n,null)}).then(o,a)):c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)?(this.events.next(new $e(n,this.serializeUrl(l),s,u)),Promise.resolve().then(function(t){return e.runNavigate(l,r,!1,!1,n,mr(l,e.rootComponentType).snapshot)}).then(o,a)):(this.rawUrlTree=r,o(null))},t.prototype.runNavigate=function(t,e,n,r,i,a){var s=this;return i!==this.navigationId?(this.events.next(new en(i,this.serializeUrl(t),"Navigation ID "+i+" is not equal to the current navigation id "+this.navigationId)),Promise.resolve(!1)):new Promise(function(u,l){var c,p=(a?h({appliedUrl:t,snapshot:a}):new ir(s.ngModule.injector,s.configLoader,s.urlSerializer,t,s.config).apply().pipe(Object(nt.a)(function(e){return function(t,e,n,r,i,o){return void 0===i&&(i="emptyOnly"),void 0===o&&(o="legacy"),new jr(t,e,n,r,i,o).recognize()}(s.rootComponentType,s.config,e,s.serializeUrl(e),s.paramsInheritanceStrategy,s.relativeLinkResolution).pipe(Object(d.a)(function(n){return s.events.next(new rn(i,s.serializeUrl(t),s.serializeUrl(e),n)),{appliedUrl:e,snapshot:n}}))}))).pipe(Object(nt.a)(function(o){return"boolean"==typeof o?h(o):s.hooks.beforePreactivation(o.snapshot,{navigationId:i,appliedUrlTree:t,rawUrlTree:e,skipLocationChange:n,replaceUrl:r}).pipe(Object(d.a)(function(){return o}))})).pipe(Object(d.a)(function(t){if("boolean"==typeof t)return t;var e=t.appliedUrl,n=t.snapshot;return(c=new Fr(n,s.routerState.snapshot,s.ngModule.injector,function(t){return s.triggerEvent(t)})).initialize(s.rootContexts),{appliedUrl:e,snapshot:n}})).pipe(Object(nt.a)(function(e){if("boolean"==typeof e||s.navigationId!==i)return h(!1);var n=e.appliedUrl,r=e.snapshot;return s.triggerEvent(new on(i,s.serializeUrl(t),s.serializeUrl(n),r)),c.checkGuards().pipe(Object(d.a)(function(e){return s.triggerEvent(new an(i,s.serializeUrl(t),s.serializeUrl(n),r,e)),{appliedUrl:n,snapshot:r,shouldActivate:e}}))})).pipe(Object(nt.a)(function(e){return"boolean"==typeof e||s.navigationId!==i?h(!1):e.shouldActivate&&c.isActivating()?(s.triggerEvent(new sn(i,s.serializeUrl(t),s.serializeUrl(e.appliedUrl),e.snapshot)),c.resolveData(s.paramsInheritanceStrategy).pipe(Object(d.a)(function(){return s.triggerEvent(new un(i,s.serializeUrl(t),s.serializeUrl(e.appliedUrl),e.snapshot)),e}))):h(e)})).pipe(Object(nt.a)(function(o){return"boolean"==typeof o||s.navigationId!==i?h(!1):s.hooks.afterPreactivation(o.snapshot,{navigationId:i,appliedUrlTree:t,rawUrlTree:e,skipLocationChange:n,replaceUrl:r}).pipe(Object(d.a)(function(){return o}))})).pipe(Object(d.a)(function(t){if("boolean"==typeof t||s.navigationId!==i)return!1;var e,n,r,a=t.appliedUrl,u=t.shouldActivate;return u?{appliedUrl:a,state:(r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){(l=r.value)._futureSnapshot=n.value;var i=function(e,n,r){return n.children.map(function(n){var i,a;try{for(var s=Object(o.g)(r.children),u=s.next();!u.done;u=s.next()){var l=u.value;if(e.shouldReuseRoute(l.value.snapshot,n.value))return t(e,n,l)}}catch(t){i={error:t}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return t(e,n)})}(e,n,r);return new pr(l,i)}var a=e.retrieve(n.value);if(a){var s=a.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(var r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,s),s}var u,l=new gr(new tt((u=n.value).url),new tt(u.params),new tt(u.queryParams),new tt(u.fragment),new tt(u.data),u.outlet,u.component,u);return i=n.children.map(function(n){return t(e,n)}),new pr(l,i)}(s.routeReuseStrategy,(e=t.snapshot)._root,(n=s.routerState)?n._root:void 0),new dr(r,e)),shouldActivate:u}:{appliedUrl:a,state:null,shouldActivate:u}}));s.activateRoutes(p,s.routerState,s.currentUrlTree,i,t,e,n,r,u,l)})},t.prototype.activateRoutes=function(t,e,n,r,i,o,a,s,u,l){var c,h=this;t.forEach(function(t){if("boolean"!=typeof t&&t.shouldActivate&&r===h.navigationId&&t.state){var n=t.state;h.currentUrlTree=t.appliedUrl,h.rawUrlTree=h.urlHandlingStrategy.merge(h.currentUrlTree,o),h.routerState=n,"deferred"!==h.urlUpdateStrategy||a||h.setBrowserUrl(h.rawUrlTree,s,r),new ri(h.routeReuseStrategy,n,e,function(t){return h.triggerEvent(t)}).activate(h.rootContexts),c=!0}else c=!1}).then(function(){c?(h.navigated=!0,h.lastSuccessfulId=r,h.events.next(new tn(r,h.serializeUrl(i),h.serializeUrl(h.currentUrlTree))),u(!0)):(h.resetUrlToCurrentUrlTree(),h.events.next(new en(r,h.serializeUrl(i),"")),u(!1))},function(t){if((a=t)&&a.ngNavigationCancelingError)h.navigated=!0,h.resetStateAndUrl(e,n,o),h.events.next(new en(r,h.serializeUrl(i),t.message)),u(!1);else{h.resetStateAndUrl(e,n,o),h.events.next(new nn(r,h.serializeUrl(i),t));try{u(h.errorHandler(t))}catch(t){l(t)}}var a})},t.prototype.setBrowserUrl=function(t,e,n){var r=this.urlSerializer.serialize(t);this.location.isCurrentPathEqualTo(r)||e?this.location.replaceState(r,"",{navigationId:n}):this.location.go(r,"",{navigationId:n})},t.prototype.resetStateAndUrl=function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()},t.prototype.resetUrlToCurrentUrlTree=function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})},t}(),ri=function(){function t(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}return t.prototype.activate=function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),xr(this.futureState.root),this.activateChildRoutes(e,n,t)},t.prototype.deactivateChildRoutes=function(t,e,n){var r=this,i=fr(e);t.children.forEach(function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]}),In(i,function(t,e){r.deactivateRouteAndItsChildren(t,n)})},t.prototype.deactivateRoutes=function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)},t.prototype.deactivateRouteAndItsChildren=function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)},t.prototype.detachAndStoreRouteSubtree=function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}},t.prototype.deactivateRouteAndOutlet=function(t,e){var n=this,r=e.getContext(t.value.outlet);if(r){var i=fr(t),o=t.value.component?r.children:e;In(i,function(t,e){return n.deactivateRouteAndItsChildren(t,o)}),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}},t.prototype.activateChildRoutes=function(t,e,n){var r=this,i=fr(e);t.children.forEach(function(t){r.activateRoutes(t,i[t.value.outlet],n),r.forwardEvent(new dn(t.value.snapshot))}),t.children.length&&this.forwardEvent(new pn(t.value.snapshot))},t.prototype.activateRoutes=function(t,e,n){var r=t.value,i=e?e.value:null;if(xr(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component)if(o=n.getOrCreateContext(r.outlet),this.routeReuseStrategy.shouldAttach(r.snapshot)){var a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),ii(a.route)}else{var s=function(t){for(var e=r.snapshot.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(),u=s?s.module.componentFactoryResolver:null;o.route=r,o.resolver=u,o.outlet&&o.outlet.activateWith(r,u),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,n)},t}();function ii(t){xr(t.value),t.children.forEach(ii)}var oi=function(){function t(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}return Object.defineProperty(t.prototype,"routerLink",{set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preserveQueryParams",{set:function(t){Object(r.isDevMode)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t},enumerable:!0,configurable:!0}),t.prototype.onClick=function(){var t={skipLocationChange:si(this.skipLocationChange),replaceUrl:si(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,t),!0},Object.defineProperty(t.prototype,"urlTree",{get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:si(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:si(this.preserveFragment)})},enumerable:!0,configurable:!0}),t}(),ai=function(){function t(t,e,n){var r=this;this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.subscription=t.events.subscribe(function(t){t instanceof tn&&r.updateTargetUrlAndHref()})}return Object.defineProperty(t.prototype,"routerLink",{set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preserveQueryParams",{set:function(t){Object(r.isDevMode)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){this.updateTargetUrlAndHref()},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.onClick=function(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var i={skipLocationChange:si(this.skipLocationChange),replaceUrl:si(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,i),!1},t.prototype.updateTargetUrlAndHref=function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))},Object.defineProperty(t.prototype,"urlTree",{get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:si(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:si(this.preserveFragment)})},enumerable:!0,configurable:!0}),t}();function si(t){return""===t||!!t}var ui=function(){return function(){this.outlet=null,this.route=null,this.resolver=null,this.children=new li,this.attachRef=null}}(),li=function(){function t(){this.contexts=new Map}return t.prototype.onChildOutletCreated=function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)},t.prototype.onChildOutletDestroyed=function(t){var e=this.getContext(t);e&&(e.outlet=null)},t.prototype.onOutletDeactivated=function(){var t=this.contexts;return this.contexts=new Map,t},t.prototype.onOutletReAttached=function(t){this.contexts=t},t.prototype.getOrCreateContext=function(t){var e=this.getContext(t);return e||(e=new ui,this.contexts.set(t,e)),e},t.prototype.getContext=function(t){return this.contexts.get(t)||null},t}(),ci=function(){function t(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.EventEmitter,this.deactivateEvents=new r.EventEmitter,this.name=i||yn,t.onChildOutletCreated(this.name,this)}return t.prototype.ngOnDestroy=function(){this.parentContexts.onChildOutletDestroyed(this.name)},t.prototype.ngOnInit=function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}},Object.defineProperty(t.prototype,"isActivated",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRoute",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRouteData",{get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}},enumerable:!0,configurable:!0}),t.prototype.detach=function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t},t.prototype.attach=function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)},t.prototype.deactivate=function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}},t.prototype.activateWith=function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new hi(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)},t}(),hi=function(){function t(t,e,n){this.route=t,this.childContexts=e,this.parent=n}return t.prototype.get=function(t,e){return t===gr?this.route:t===li?this.childContexts:this.parent.get(t,e)},t}(),pi=function(){},fi=function(){function t(){}return t.prototype.preload=function(t,e){return e().pipe(It(function(){return h(null)}))},t}(),di=function(){function t(){}return t.prototype.preload=function(t,e){return h(null)},t}(),mi=function(){function t(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Zr(e,n,function(e){return t.triggerEvent(new ln(e))},function(e){return t.triggerEvent(new cn(e))})}return t.prototype.setUpPreloading=function(){var t=this;this.subscription=this.router.events.pipe(v(function(t){return t instanceof tn}),xt(function(){return t.preload()})).subscribe(function(){})},t.prototype.preload=function(){var t=this.injector.get(r.NgModuleRef);return this.processRoutes(t,this.router.config)},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.processRoutes=function(t,e){var n,r,i=[];try{for(var a=Object(o.g)(e),s=a.next();!s.done;s=a.next()){var u=s.value;if(u.loadChildren&&!u.canLoad&&u._loadedConfig){var l=u._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children))}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return Object(p.a)(i).pipe(Object(kt.a)(),Object(d.a)(function(t){}))},t.prototype.preloadConfig=function(t,e){var n=this;return this.preloadingStrategy.preload(e,function(){return n.loader.load(t.injector,e).pipe(Object(nt.a)(function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)}))})},t}(),gi=function(){function t(t,e,n){void 0===n&&(n={}),this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={}}return t.prototype.init=function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()},t.prototype.createScrollEvents=function(){var t=this;return this.router.events.subscribe(function(e){e instanceof $e?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof tn&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))})},t.prototype.consumeScrollEvents=function(){var t=this;return this.router.events.subscribe(function(e){e instanceof mn&&(e.position?"top"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):"enabled"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))})},t.prototype.scheduleScrollEvent=function(t,e){this.router.triggerEvent(new mn(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))},t.prototype.ngOnDestroy=function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()},t}(),yi=new r.InjectionToken("ROUTER_CONFIGURATION"),vi=new r.InjectionToken("ROUTER_FORROOT_GUARD"),bi=[S.Location,{provide:Bn,useClass:jn},{provide:ni,useFactory:Ti,deps:[r.ApplicationRef,Bn,li,S.Location,r.Injector,r.NgModuleFactoryLoader,r.Compiler,Qr,yi,[Yr,new r.Optional],[Kr,new r.Optional]]},li,{provide:gr,useFactory:Ai,deps:[ni]},{provide:r.NgModuleFactoryLoader,useClass:r.SystemJsNgModuleLoader},mi,di,fi,{provide:yi,useValue:{enableTracing:!1}}];function _i(){return new r.NgProbeToken("Router",ni)}var wi=function(){function t(t,e){}return t.forRoot=function(e,n){return{ngModule:t,providers:[bi,Si(e),{provide:vi,useFactory:Ei,deps:[[ni,new r.Optional,new r.SkipSelf]]},{provide:yi,useValue:n||{}},{provide:S.LocationStrategy,useFactory:Ci,deps:[S.PlatformLocation,[new r.Inject(S.APP_BASE_HREF),new r.Optional],yi]},{provide:gi,useFactory:xi,deps:[ni,S.ViewportScroller,yi]},{provide:pi,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:di},{provide:r.NgProbeToken,multi:!0,useFactory:_i},[Pi,{provide:r.APP_INITIALIZER,multi:!0,useFactory:Ii,deps:[Pi]},{provide:Di,useFactory:Oi,deps:[Pi]},{provide:r.APP_BOOTSTRAP_LISTENER,multi:!0,useExisting:Di}]]}},t.forChild=function(e){return{ngModule:t,providers:[Si(e)]}},t}();function xi(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new gi(t,e,n)}function Ci(t,e,n){return void 0===n&&(n={}),n.useHash?new S.HashLocationStrategy(t,e):new S.PathLocationStrategy(t,e)}function Ei(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Si(t){return[{provide:r.ANALYZE_FOR_ENTRY_COMPONENTS,multi:!0,useValue:t},{provide:Qr,multi:!0,useValue:t}]}function Ti(t,e,n,r,i,o,a,s,u,l,c){void 0===u&&(u={});var h=new ni(null,e,n,r,i,o,a,An(s));if(l&&(h.urlHandlingStrategy=l),c&&(h.routeReuseStrategy=c),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){var p=Lt();h.events.subscribe(function(t){p.logGroup("Router Event: "+t.constructor.name),p.log(t.toString()),p.log(t),p.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h}function Ai(t){return t.routerState.root}var Pi=function(){function t(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new J.a}return t.prototype.appInitializer=function(){var t=this;return this.injector.get(S.LOCATION_INITIALIZED,Promise.resolve(null)).then(function(){var e=null,n=new Promise(function(t){return e=t}),r=t.injector.get(ni),i=t.injector.get(yi);if(t.isLegacyDisabled(i)||t.isLegacyEnabled(i))e(!0);else if("disabled"===i.initialNavigation)r.setUpLocationChangeListener(),e(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '"+i.initialNavigation+"'");r.hooks.afterPreactivation=function(){return t.initNavigation?h(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()}return n})},t.prototype.bootstrapListener=function(t){var e=this.injector.get(yi),n=this.injector.get(mi),i=this.injector.get(gi),o=this.injector.get(ni),a=this.injector.get(r.ApplicationRef);t===a.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())},t.prototype.isLegacyEnabled=function(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation},t.prototype.isLegacyDisabled=function(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation},t}();function Ii(t){return t.appInitializer.bind(t)}function Oi(t){return t.bootstrapListener.bind(t)}var Di=new r.InjectionToken("Router Initializer"),ki=r["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Mi(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),r["\u0275did"](1,212992,null,0,ci,[li,r.ViewContainerRef,r.ComponentFactoryResolver,[8,null],r.ChangeDetectorRef],null,null)],function(t,e){t(e,1,0)},null)}var Ri=r["\u0275ccf"]("ng-component",gn,function(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Mi,ki)),r["\u0275did"](1,49152,null,0,gn,[],null,null)],null,null)},{},{},[]),Ni=n("lPHp"),Li=function(){function t(t){this.platformId=t,this.animCreated=new r.EventEmitter}return t.prototype.ngOnInit=function(){if(!Object(S.isPlatformServer)(this.platformId)){this._options={container:this.lavContainer.nativeElement,renderer:this.options.renderer||"svg",loop:!1!==this.options.loop,autoplay:!1!==this.options.autoplay,autoloadSegments:!1!==this.options.autoloadSegments,animationData:this.options.animationData,path:this.options.path||"",rendererSettings:this.options.rendererSettings||{}},this.viewWidth=this.width||"100%",this.viewHeight=this.height||"100%";var t=Ni.loadAnimation(this._options);this.animCreated.emit(t)}},t}(),Fi=r["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Bi(t){return r["\u0275vid"](0,[r["\u0275qud"](402653184,1,{lavContainer:0}),(t()(),r["\u0275eld"](1,0,[[1,0],["lavContainer",1]],null,2,"div",[["class","flor-anim"]],null,null,null,null,null)),r["\u0275did"](2,278528,null,0,S.NgStyle,[r.KeyValueDiffers,r.ElementRef,r.Renderer2],{ngStyle:[0,"ngStyle"]},null),r["\u0275pod"](3,{width:0,height:1,overflow:2,margin:3})],function(t,e){var n=e.component;t(e,2,0,t(e,3,0,n.viewWidth,n.viewHeight,"hidden","0 auto"))},null)}var ji=function(){function t(t){this.router=t,this.numeros=[1,2,3,4,5,6,7,8,9,10],this.animationSpeed=1,this.lottieConfig={path:"assets/dataAnim.json",renderer:"svg",autoplay:!0,loop:!1,rendererSettings:{scaleMode:"scale"}}}return t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){},t.prototype.redirectMap=function(){this.router.navigate(["/map"])},t.prototype.handleAnimation=function(t){var e=this;this.anim=t,this.anim.addEventListener("complete",function(t){e.anim.goToAndStop(0,!1)})},t.prototype.stop=function(){this.anim.stop()},t.prototype.play=function(){this.anim.play()},t.prototype.pause=function(){this.anim.pause()},t.prototype.setSpeed=function(t){this.animationSpeed=t,this.anim.setSpeed(t)},t}(),zi=r["\u0275crt"]({encapsulation:0,styles:[["lottie-animation-view[_ngcontent-%COMP%]{position:absolute;max-height:50vh;transition:5ms ease-in-out}lottie-animation-view[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{max-height:50vh;position:relative;height:50vh;transition:5ms ease-in-out}.home[_ngcontent-%COMP%]{min-height:80vh;width:100vw;font-size:2em;background-image:url(background.7618a7490fe91b13a96d.png);background-size:cover;color:var(--color-negro);padding:3vh 0;display:flex;flex-direction:column;justify-content:center}.home2[_ngcontent-%COMP%]{width:100vw;font-size:2em;color:var(--color-negro);padding:3vh 0 0}h1[_ngcontent-%COMP%]{margin-bottom:1.5vh;text-align:center;font-size:1em}a[_ngcontent-%COMP%]{cursor:pointer}p.centrado[_ngcontent-%COMP%]{font-size:.56em;text-align:center;padding:10vw;font-weight:0}.texto[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end;align-items:center;word-wrap:break-word}.display-true[_ngcontent-%COMP%]{display:block}.flor[_ngcontent-%COMP%]{position:relative;transition:5ms ease-in-out}"]],data:{}});function Vi(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,24,"main",[],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,11,"section",[["class","home2"]],null,null,null,null,null)),(t()(),r["\u0275eld"](2,0,null,null,10,"div",[],null,null,null,null,null)),(t()(),r["\u0275eld"](3,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["SEMILLAS DI\xc1SPORA VENEZUELA"])),(t()(),r["\u0275eld"](5,0,null,null,7,"p",[["style","font-size: 0.7em; text-align: center; line-height: 1em;"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" Porque creemos que las historias de todos deben ser contadas, escuchadas y dignificadas."])),(t()(),r["\u0275eld"](7,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r["\u0275eld"](8,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" Porque ayer salimos, hoy "])),(t()(),r["\u0275eld"](10,0,null,null,1,"a",[["href","https://twitter.com/hashtag/SomosSemillas"],["style","text-decoration: none; color:var(--color-naranja)"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["#SomosSemillas"])),(t()(),r["\u0275ted"](-1,null,[". "])),(t()(),r["\u0275eld"](13,0,null,null,2,"section",[["class","flor"],["style","overflow:hidden"]],null,null,null,null,null)),(t()(),r["\u0275eld"](14,0,null,null,1,"animacion-lottie",[],null,[[null,"animCreated"]],function(t,e,n){var r=!0;return"animCreated"===e&&(r=!1!==t.component.handleAnimation(n)&&r),r},Bi,Fi)),r["\u0275did"](15,114688,null,0,Li,[r.PLATFORM_ID],{options:[0,"options"],height:[1,"height"]},{animCreated:"animCreated"}),(t()(),r["\u0275eld"](16,0,null,null,8,"section",[["class","home"]],null,null,null,null,null)),(t()(),r["\u0275eld"](17,0,null,null,7,"div",[["class","texto"]],null,null,null,null,null)),(t()(),r["\u0275eld"](18,0,null,null,6,"p",[["class","centrado"]],null,null,null,null,null)),(t()(),r["\u0275eld"](19,0,null,null,1,"span",[["style","font-weight: bold;"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Semillas Di\xe1spora Venezuela"])),(t()(),r["\u0275ted"](-1,null,[" es un proyecto dedicado a los miles de venezolanos y venezolanas que han tenido que salir de su tierra y ahora se encuentran esparcidos, como semillas, por el mundo. Este espacio busca recopilar y unir esas voces, esas historias que necesitan ser contadas y compartidas."])),(t()(),r["\u0275eld"](22,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r["\u0275eld"](23,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" Queremos que los venezolanos emigrantes no solo sean un n\xfamero o una estad\xedstica. A trav\xe9s de esta plataforma te invitamos a contar tus experiencia de migraci\xf3n o la de tus queridos por medio de testimonios orales o escritos. "]))],function(t,e){t(e,15,0,e.component.lottieConfig,"50vh")},null)}var Ui=r["\u0275ccf"]("app-home",ji,function(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"app-home",[],null,null,null,Vi,zi)),r["\u0275did"](1,4308992,null,0,ji,[ni],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),qi=n("4ZJM");function Gi(t){var e=function(t){return new u.a(function(e){return t.on("state_changed",function(t){return e.next(t)},function(t){return e.error(t)},function(){return e.complete()}),function(){return t.cancel()}})}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:function(){return e},percentageChanges:function(){return e.pipe(Object(d.a)(function(t){return t.bytesTransferred/t.totalBytes*100}))}}}function Hi(t,e){return{getDownloadURL:function(){return e.keepUnstableUntilFirst(e.runOutsideAngular(Object(p.a)(e.zone.runOutsideAngular(function(){return t.getDownloadURL()}))))},getMetadata:function(){return e.keepUnstableUntilFirst(e.runOutsideAngular(Object(p.a)(e.zone.runOutsideAngular(function(){return t.getMetadata()}))))},delete:function(){return Object(p.a)(t.delete())},child:function(n){return Hi(t.child(n),e)},updateMetatdata:function(e){return Object(p.a)(t.updateMetadata(e))},put:function(e,n){return Gi(t.put(e,n))},putString:function(e,n,r){return Gi(t.putString(e,n,r))}}}u.a.prototype.map=function(t,e){return Object(d.a)(t,e)(this)},n("q8iK");var Wi=new r.InjectionToken("angularfire2.storageBucket"),Ki=function(){function t(t,e,n,r,i){this.scheduler=new k(i,r),this.storage=i.runOutsideAngular(function(){return j(t,e).storage(n||void 0)})}return t.prototype.ref=function(t){return Hi(this.storage.ref(t),this.scheduler)},t.prototype.upload=function(t,e,n){return Hi(this.storage.ref(t),this.scheduler).put(e,n)},Object(o.b)([Object(o.d)(0,Object(r.Inject)(L)),Object(o.d)(1,Object(r.Optional)()),Object(o.d)(1,Object(r.Inject)(F)),Object(o.d)(2,Object(r.Optional)()),Object(o.d)(2,Object(r.Inject)(Wi)),Object(o.d)(3,Object(r.Inject)(r.PLATFORM_ID))],t)}(),Xi=n("wj3C"),Qi=n.n(Xi),Zi="https://firebasestorage.googleapis.com",Yi="https://firebasestorage.googleapis.com",Ji="/v0",$i="/v0",to=12e4,eo=6e4,no=-9007199254740991,ro=function(){function t(t,e){this.code_=oo(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return oo(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),io={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function oo(t){return"storage/"+t}function ao(){return new ro(io.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function so(){return new ro(io.CANCELED,"User canceled the upload/download.")}function uo(){return new ro(io.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function lo(t,e,n){return new ro(io.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function co(){return new ro(io.APP_DELETED,"The Firebase app was deleted.")}function ho(t,e){return new ro(io.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function po(t){throw new ro(io.INTERNAL_ERROR,"Internal error: "+t)}var fo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function mo(t){switch(t){case fo.RAW:case fo.BASE64:case fo.BASE64URL:case fo.DATA_URL:return;default:throw"Expected one of the event types: ["+fo.RAW+", "+fo.BASE64+", "+fo.BASE64URL+", "+fo.DATA_URL+"]."}}var go=function(t,e){this.data=t,this.contentType=e||null};function yo(t,e){switch(t){case fo.RAW:return new go(vo(e));case fo.BASE64:case fo.BASE64URL:return new go(bo(t,e));case fo.DATA_URL:return new go(function(t){var e=new _o(t);return e.base64?bo(fo.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw ho(fo.DATA_URL,"Malformed data URL.")}return vo(e)}(e.rest)}(e),function(t){return new _o(t).contentType}(e))}throw ao()}function vo(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function bo(t,e){switch(t){case fo.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw ho(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case fo.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw ho(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(e){throw ho(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var _o=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw ho(fo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),wo={STATE_CHANGED:"state_changed"},xo={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},Co={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Eo(t){switch(t){case xo.RUNNING:case xo.PAUSING:case xo.CANCELING:return Co.RUNNING;case xo.PAUSED:return Co.PAUSED;case xo.SUCCESS:return Co.SUCCESS;case xo.CANCELED:return Co.CANCELED;case xo.ERROR:default:return Co.ERROR}}function So(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function To(t,e){for(var n in t)So(t,n)&&e(n,t[n])}function Ao(t){if(null==t)return{};var e={};return To(t,function(t,n){e[t]=n}),e}function Po(t){return new Promise(t)}function Io(t){return Promise.resolve(t)}function Oo(t){return null!=t}function Do(t){return void 0!==t}function ko(t){return"function"==typeof t}function Mo(t){return"object"==typeof t}function Ro(t){return Mo(t)&&null!==t}function No(t){return"string"==typeof t||t instanceof String}function Lo(t){return Fo()&&t instanceof Blob}function Fo(){return"undefined"!=typeof Blob}var Bo=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),jo=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Bo.NO_ERROR,this.sendPromise_=Po(function(e,n){t.xhr_.addEventListener("abort",function(n){t.errorCode_=Bo.ABORT,e(t)}),t.xhr_.addEventListener("error",function(n){t.errorCode_=Bo.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(n){e(t)})})}return t.prototype.send=function(t,e,n,r){var i=this;if(this.sent_)throw po("cannot .send() more than once");return this.sent_=!0,this.xhr_.open(e,t,!0),Oo(r)&&To(r,function(t,e){i.xhr_.setRequestHeader(t,e.toString())}),Oo(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw po("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw po("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw po("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){Oo(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){Oo(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),zo=function(){function t(){}return t.prototype.createXhrIo=function(){return new jo},t}();function Vo(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return Mo(n=e)&&!Array.isArray(n)?e:null}var Uo=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw new ro(io.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){for(var n=null,r=[{regex:new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i"),indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://firebasestorage\\.googleapis\\.com/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(t){t.path_=decodeURIComponent(t.path)}}],i=0;i<r.length;i++){var o=r[i],a=o.regex.exec(e);if(a){var s=a[o.indices.path];s||(s=""),n=new t(a[o.indices.bucket],s),o.postModify(n);break}}if(null==n)throw function(t){return new ro(io.INVALID_URL,"Invalid URL '"+t+"'.")}(e);return n},t}();function qo(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Go(t){return Zi+Ji+t}function Ho(t){return Zi+$i+t}function Wo(t){var e=encodeURIComponent,n="?";return To(t,function(t,r){var i=e(t)+"="+e(r);n=n+i+"&"}),n=n.slice(0,-1)}function Ko(t,e){return e}var Xo=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Ko}}(),Qo=null;function Zo(t,e,n){var r=Vo(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Uo(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function Yo(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function Jo(t){if(!t||!Mo(t))throw"Expected Metadata object.";for(var e in t){var n=t[e];if("customMetadata"===e){if(!Mo(n))throw"Expected object for 'customMetadata' mapping."}else if(Ro(n))throw"Mapping for '"+e+"' cannot be an object."}}function $o(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}var a,s,u,l;if(!(r<=n.length&&n.length<=i))throw(a=r)===(s=i)?(u=a,l=1===a?"argument":"arguments"):(u="between "+a+" and "+s,l="arguments"),new ro(io.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+t+"`: Expected "+u+" "+l+", received "+n.length+".");for(o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(e){throw e instanceof Error?lo(o,t,e.message):lo(o,t,e)}}var ta=function(){return function(t,e){var n=this;this.validator=function(e){n.optional&&!Do(e)||t(e)},this.optional=!!e}}();function ea(t,e){function n(t){if(!No(t))throw"Expected string."}var r,i,o;return t?(i=n,o=t,r=function(t){i(t),o(t)}):r=n,new ta(r,e)}function na(t){return new ta(Jo,t)}function ra(){return new ta(function(t){if(!(function(t){return"number"==typeof t||t instanceof Number}(t)&&t>=0))throw"Expected a number 0 or greater."})}function ia(t,e){return new ta(function(e){if(!(null===e||Oo(e)&&e instanceof Object))throw"Expected an Object.";void 0!==t&&null!==t&&t(e)},e)}function oa(t){return new ta(function(t){if(null!==t&&!ko(t))throw"Expected a Function."},t)}function aa(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}var sa=function(){function t(t,e){var n=0,r="";Lo(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Lo(this.data_)){var r=(o=e,a=n,(i=this.data_).webkitSlice?i.webkitSlice(o,a):i.mozSlice?i.mozSlice(o,a):i.slice?i.slice(o,a):null);return null===r?null:new t(r)}var i,o,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Fo()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=aa();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Fo())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}).apply(null,r))}var i=e.map(function(t){return No(t)?yo(fo.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var a=new Uint8Array(o),s=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]}),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function ua(t,e){return-1!==t.indexOf(e)}var la=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function ca(t){if(!t)throw ao()}function ha(t,e){return function(n,r){var i=Zo(t,r,e);return ca(null!==i),i}}function pa(t){return function(e,n){var r;return(r=401===e.getStatus()?new ro(io.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new ro(io.QUOTA_EXCEEDED,"Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new ro(io.UNAUTHORIZED,"User does not have permission to access '"+t.path+"'."):n).setServerResponseProp(n.serverResponseProp()),r}}function fa(t){var e=pa(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new ro(io.OBJECT_NOT_FOUND,"Object '"+t.path+"' does not exist.")),i.setServerResponseProp(r.serverResponseProp()),i}}function da(t,e,n){var r=Go(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new la(r,"GET",ha(t,n),i);return o.errorHandler=fa(e),o}function ma(t,e,n){var r=Ao(n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var ga=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function ya(t,e){var n;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){ca(!1)}return ca(ua(e||["active"],n)),n}var va=function(){return function(t,e,n){if(ko(t)||Oo(e)||Oo(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}}();function ba(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Io(!0).then(function(){t.apply(null,e)})}}var _a=function(){function t(t,e,n,r,i,o){void 0===o&&(o=null);var a=this;this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=xo.RUNNING,this.errorHandler_=function(t){a.request_=null,a.chunkMultiplier_=1,t.codeEquals(io.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=t,a.transition_(xo.ERROR))},this.metadataErrorHandler_=function(t){a.request_=null,t.codeEquals(io.CANCELED)?a.completeTransitions_():(a.error_=t,a.transition_(xo.ERROR))},this.promise_=Po(function(t,e){a.resolve_=t,a.reject_=e,a.start_()}),this.promise_.then(null,function(){})}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n,r){t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){this.state_===xo.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then(function(n){switch(e.state_){case xo.RUNNING:t(n);break;case xo.CANCELING:e.transition_(xo.CANCELED);break;case xo.PAUSING:e.transition_(xo.PAUSED)}})},t.prototype.createResumable_=function(){var t=this;this.resolveToken_(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=ma(e,r,i),s={name:a.fullPath},u=Ho(o),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},c=Yo(a,n),h=t.maxUploadRetryTime(),p=new la(u,"POST",function(t,e){var n;ya(t);try{n=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){ca(!1)}return ca(No(n)),n},h);return p.urlParams=s,p.headers=l,p.body=c,p.errorHandler=pa(e),p}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()},t.errorHandler_)})},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_(function(n){var r=function(e,n,r,i){var o=t.authWrapper_.maxUploadRetryTime(),a=new la(r,"POST",function(t,e){var n,r=ya(t,["active","final"]);try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){ca(!1)}var o=parseInt(n,10);return ca(!isNaN(o)),new ga(o,i.size(),"final"===r)},o);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=pa(n),a}(0,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);t.request_=i,i.getPromise().then(function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()},t.errorHandler_)})},t.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new ga(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_(function(i){var o;try{o=function(t,e,n,r,i,o,a,s){var u=new ga(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new ro(io.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var l=u.total-u.current,c=l;i>0&&(c=Math.min(c,i));var h=u.current,p={"X-Goog-Upload-Command":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},f=r.slice(h,h+c);if(null===f)throw uo();var d=e.maxUploadRetryTime(),m=new la(n,"POST",function(t,n){var i,a=ya(t,["active","final"]),s=u.current+c,l=r.size();return i="final"===a?ha(e,o)(t,n):null,new ga(s,l,"final"===a,i)},d);return m.headers=p,m.body=f.uploadData(),m.progressCallback=s||null,m.errorHandler=pa(t),m}(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(e){return t.error_=e,void t.transition_(xo.ERROR)}var a=t.authWrapper_.makeRequest(o,i);t.request_=a,a.getPromise().then(function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(xo.SUCCESS)):t.completeTransitions_()},t.errorHandler_)})},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_(function(e){var n=da(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.transition_(xo.SUCCESS)},t.metadataErrorHandler_)})},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=ma(e,r,i),l=Yo(u,n),c=sa.getBlob("--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+s+"--");if(null===c)throw uo();var h={name:u.fullPath},p=Ho(o),f=t.maxUploadRetryTime(),d=new la(p,"POST",ha(t,n),f);return d.urlParams=h,d.headers=a,d.body=c.uploadData(),d.errorHandler=pa(e),d}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(xo.SUCCESS)},t.errorHandler_)})},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case xo.CANCELING:case xo.PAUSING:this.state_=t,null!==this.request_&&this.request_.cancel();break;case xo.RUNNING:var e=this.state_===xo.PAUSED;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case xo.PAUSED:this.state_=t,this.notifyObservers_();break;case xo.CANCELED:this.error_=so(),this.state_=t,this.notifyObservers_();break;case xo.ERROR:case xo.SUCCESS:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case xo.PAUSING:this.transition_(xo.PAUSED);break;case xo.CANCELING:this.transition_(xo.CANCELED);break;case xo.RUNNING:this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Eo(this.state_);return new function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){void 0===e&&(e=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0);var i="Expected a function or an Object with one of `next`, `error`, `complete` properties.",o=oa(!0).validator,a=ia(null,!0).validator;function s(t){try{return void o(t)}catch(t){}try{if(a(t),!(Do(t.next)||Do(t.error)||Do(t.complete)))throw"";return}catch(t){throw i}}$o("on",[ea(function(e){if(t!==wo.STATE_CHANGED)throw"Expected one of the event types: ["+wo.STATE_CHANGED+"]."}),ia(s,!0),oa(!0),oa(!0)],arguments);var u=this;function l(t){return function(e,n,i){null!==t&&$o("on",t,arguments);var o=new va(e,n,r);return u.addObserver_(o),function(){u.removeObserver_(o)}}}var c=[ia(function(t){if(null===t)throw i;s(t)}),oa(!0),oa(!0)];return Do(e)||Do(n)||Do(r)?l(null)(e,n,r):l(c)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e,n;-1!==(n=(e=this.observers_).indexOf(t))&&e.splice(n,1)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),Array.prototype.slice.call(this.observers_).forEach(function(e){t.notifyObserver_(e)})},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(Eo(this.state_)){case Co.SUCCESS:ba(this.resolve_.bind(null,this.snapshot))();break;case Co.CANCELED:case Co.ERROR:ba(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(Eo(this.state_)){case Co.RUNNING:case Co.PAUSED:null!==t.next&&ba(t.next.bind(t,this.snapshot))();break;case Co.SUCCESS:null!==t.complete&&ba(t.complete.bind(t))();break;case Co.CANCELED:case Co.ERROR:null!==t.error&&ba(t.error.bind(t,this.error_))();break;default:null!==t.error&&ba(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){$o("resume",[],arguments);var t=this.state_===xo.PAUSED||this.state_===xo.PAUSING;return t&&this.transition_(xo.RUNNING),t},t.prototype.pause=function(){$o("pause",[],arguments);var t=this.state_===xo.RUNNING;return t&&this.transition_(xo.PAUSING),t},t.prototype.cancel=function(){$o("cancel",[],arguments);var t=this.state_===xo.RUNNING||this.state_===xo.PAUSING;return t&&this.transition_(xo.CANCELING),t},t}(),wa=function(){function t(t,e){this.authWrapper=t,this.location=e instanceof Uo?e:Uo.makeFromUrl(e)}return t.prototype.toString=function(){return $o("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return function(){if(Qo)return Qo;var t=[];t.push(new Xo("bucket")),t.push(new Xo("generation")),t.push(new Xo("metageneration")),t.push(new Xo("name","fullPath",!0));var e=new Xo("name");e.xform=function(t,e){return function(t){return!No(t)||t.length<2?t:qo(t=t)}(e)},t.push(e);var n=new Xo("size");return n.xform=function(t,e){return Oo(e)?+e:e},t.push(n),t.push(new Xo("timeCreated")),t.push(new Xo("updated")),t.push(new Xo("md5Hash",null,!0)),t.push(new Xo("cacheControl",null,!0)),t.push(new Xo("contentDisposition",null,!0)),t.push(new Xo("contentEncoding",null,!0)),t.push(new Xo("contentLanguage",null,!0)),t.push(new Xo("contentType",null,!0)),t.push(new Xo("metadata","customMetadata",!0)),Qo=t}()},t.prototype.child=function(t){$o("child",[ea()],arguments);var e=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(this.location.path,t),n=new Uo(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0==t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new Uo(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new Uo(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return qo(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),$o("put",[new ta(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||Fo()&&t instanceof Blob))throw"Expected Blob or File."}),na(!0)],arguments),this.throwIfRoot_("put"),new _a(this,this.authWrapper,this.location,this.mappings(),new sa(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=fo.RAW),$o("putString",[ea(),ea(mo,!0),na(!0)],arguments),this.throwIfRoot_("putString");var r=yo(e,t),i=Ao(n);return!Oo(i.contentType)&&Oo(r.contentType)&&(i.contentType=r.contentType),new _a(this,this.authWrapper,this.location,this.mappings(),new sa(r.data,!0),i)},t.prototype.delete=function(){$o("delete",[],arguments),this.throwIfRoot_("delete");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=function(t,e){var n=Go(e.fullServerUrl()),r=t.maxOperationRetryTime(),i=new la(n,"DELETE",function(t,e){},r);return i.successCodes=[200,204],i.errorHandler=fa(e),i}(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.getMetadata=function(){$o("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=da(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.updateMetadata=function(t){$o("updateMetadata",[na()],arguments),this.throwIfRoot_("updateMetadata");var e=this;return this.authWrapper.getAuthToken().then(function(n){var r=function(t,e,n,r){var i=Go(e.fullServerUrl()),o=Yo(n,r),a=t.maxOperationRetryTime(),s=new la(i,"PATCH",ha(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=fa(e),s}(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()})},t.prototype.getDownloadURL=function(){$o("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=function(t,e,n){var r=Go(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new la(r,"GET",function(t,e){return function(n,r){var i=Zo(t,r,e);return ca(null!==i),function(t,e){var n=Vo(r);if(null===n)return null;if(!No(n.downloadTokens))return null;var i=n.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var n,r=t.fullPath;return n="/b/"+o(t.bucket)+"/o/"+o(r),Yi+Ji+n+Wo({alt:"media",token:e})})[0]}(i)}}(t,n),i);return o.errorHandler=fa(e),o}(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise().then(function(t){if(null===t)throw new ro(io.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t})})},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new ro(io.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),xa=function(){function t(t){this.promise_=function(t){return Promise.reject(t)}(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){void 0===t&&(t=!1)},t}(),Ca=function(){function t(){this.map_={},this.id_=no}return t.prototype.addRequest=function(t){var e=this.id_;this.id_++,this.map_[e]=t;var n=this;function r(){delete n.map_[e]}t.getPromise().then(r,r)},t.prototype.clear=function(){To(this.map_,function(t,e){e&&e.cancel(!0)}),this.map_={}},t}(),Ea=function(){function t(e,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var a=this.app_.options;Oo(a)&&(this.bucket_=t.extractBucket_(a))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=to,this.maxUploadRetryTime_=eo,this.requestMap_=new Ca}return t.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:Uo.makeFromBucketSpec(e).bucket},t.prototype.getAuthToken=function(){return null!==this.app_&&Oo(this.app_.INTERNAL)&&Oo(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(t){return null!==t?t.accessToken:null},function(t){return null}):Io(null)},t.prototype.bucket=function(){if(this.deleted_)throw co();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},t.prototype.makeRequest=function(t,e){if(this.deleted_)return new xa(co());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},t}(),Sa=function(){function t(t,e,n,r,i,o,a,s,u,l,c){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=l,this.timeout_=u,this.pool_=c;var h=this;this.promise_=Po(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());Do(s)?i(s):i()}catch(t){o(t)}else null!==a?((r=ao()).setServerResponseProp(a.getResponseText()),o(t.errorCallback_?t.errorCallback_(a,r):r)):o(r=n.canceled?t.appDelete_?co():so():new ro(io.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Ta(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function l(){u||(u=!0,e.apply(null,arguments))}function c(e){i=setTimeout(function(){i=null,t(h,s())},e)}function h(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];u||(t?l.apply(null,arguments):s()||o?l.apply(null,arguments):(r<64&&(r*=2),1===a?(a=2,e=0):e=1e3*(r+Math.random()),c(e)))}var p=!1;function f(t){p||(p=!0,u||(null!==i?(t||(a=2),clearTimeout(i),c(0)):t||(a=1)))}return c(0),setTimeout(function(){o=!0,f(!0)},n),f}(function(e,n){if(n)e(!1,new Ta(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Bo.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=ua(t.successCodes_,o);e(!0,new Ta(a,n))}else{var s=n.getErrorCode()===Bo.ABORT;e(!1,new Ta(!1,null,s))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}},e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=ua([408,429],t),r=ua(this.additionalRetryCodes_,t);return e||n||r},t}(),Ta=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function Aa(t,e,n){var r=Wo(t.urlParams),i=t.url+r,o=Ao(t.headers);return function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(o,e),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==Qi.a?Qi.a.SDK_VERSION:"AppManager")}(o),new Sa(i,t.method,o,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,n)}var Pa=function(){function t(t,e,n){if(this.bucket_=null,this.authWrapper_=new Ea(t,function(t,e){return new wa(t,e)},Aa,this,e),this.app_=t,null!=n)this.bucket_=Uo.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new Uo(r,""))}this.internals_=new Ia(this)}return t.prototype.ref=function(t){if($o("ref",[ea(function(t){if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new wa(this.authWrapper_,this.bucket_);return null!=t?e.child(t):e},t.prototype.refFromURL=function(t){return $o("refFromURL",[ea(function(t){if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{Uo.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new wa(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){$o("setMaxUploadRetryTime",[ra()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this.authWrapper_.maxOperationRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxOperationRetryTime=function(t){$o("setMaxOperationRetryTime",[ra()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),Ia=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Io(void 0)},t}();Qi.a.INTERNAL.registerService("storage",function(t,e,n){return new Pa(t,new zo,n)},{TaskState:Co,TaskEvent:wo,StringFormat:fo,Storage:Pa,Reference:wa},void 0,!0);var Oa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Da=function(){function t(t,e,n){this.afs=t,this.storage=e,this.http=n,this.semillas=this.afs.collection("semillas"),this.observableSemillas=this.semillas.snapshotChanges().map(function(t){return t.map(function(t){var e=t.payload.doc.data();return Oa({},e,{id:t.payload.doc.id})})})}return t.prototype.generateSemillaID=function(){return this.afs.createId()},t.prototype.anadirSemilla=function(t){return console.log(t),this.semillas.doc(t._id).set(Object.assign({},t)).catch(console.log)},t.prototype.obtenerSemilla=function(t){return this.semillas.doc(t).snapshotChanges().map(function(t){return t.payload.data()})},t.prototype.actualizarSemilla=function(t){return this.semillas.doc(t._id+"").update(t)},t.prototype.eliminarSemilla=function(t){return this.semillas.doc(t._id+"").delete()},t.prototype.eliminarContenidosSemilla=function(t){this.storage.ref(t).delete()},t.prototype.uploadFile=function(t,e){return this.storage.ref(t).put(e),this.storage.upload(t,e,{customMetadata:{app:"VinylApp"}})},t.prototype.arrayToGeopoints=function(t){var e=new Array;return t.forEach(function(t){e.push({latitude:t[0],longitude:t[1]})}),e},t.prototype.geoPointsToArray=function(t){var e=new Array;return t.forEach(function(t){e.push([t.latitude,t.longitude])}),e},t}(),ka=function(){function t(t,e,n,r,o){this.router=t,this.route=e,this.location=n,this.serviceSemillas=r,this.meta=o,this.style="mapbox://styles/mapbox/satellite-streets-v9",this.lat=17.760267,this.lng=-29.72925,this.objectsAddedToMap=[],qi.accessToken=i.mapbox.accessToken,this.map=qi.Map}return t.prototype.ngAfterViewInit=function(){},t.prototype.ngOnInit=function(){var t=this;this.initializeMap(),this.map.on("load",void 0!==this.route.snapshot.params.id?function(){document.getElementById("i12345").parentNode.removeChild(document.getElementById("i12345")),t.displayContent(t.route.snapshot.params.id)}:function(){document.getElementById("i12345")&&document.getElementById("i12345").parentNode.removeChild(document.getElementById("i12345")),"check"!==sessionStorage.getItem("mapInstructions")&&document.getElementById("start-info").classList.toggle("active")})},t.prototype.toggleOverlay=function(){document.getElementById("start-info").classList.toggle("active"),sessionStorage.setItem("mapInstructions","check")},t.prototype.initializeMap=function(){var t=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){t.lat=e.coords.latitude,t.lng=e.coords.longitude,t.map.flyTo({center:[t.lng,t.lat]})}),this.buildMap()},t.prototype.buildMap=function(){this.map=new qi.Map({container:"map",style:this.style,zoom:3,center:[this.lng,this.lat]}),this.pintarMarkers()},t.prototype.pintarMarkers=function(){var t=this;this.objetosAnteriores?(this.objectsAddedToMap=this.objetosAnteriores,this.objectsAddedToMap.forEach(function(e){e.addTo(t.map)})):this.subscripcion=this.serviceSemillas.observableSemillas.subscribe(function(e){e.forEach(function(e){if(e.published){var n=["amarillo","blanco","verde","naranja"],r=n[Math.floor(Math.random()*n.length)],i=document.createElement("div");i.innerHTML='<svg heigth="130" width="40" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">\n            \n                    <path style="fill:var(--color-'+r+'" d="m16.4547,20.46156a8.40682,8.40682 0 0 0 -0.73364,-1.01971c-1.40729,-1.46266 -2.84226,-2.89763 -4.25878,-4.35106c-1.28732,-1.31962 -2.5931,-2.6254 -3.83429,-3.98655a4.43873,4.43873 0 0 1 -0.84437,-1.52264a1.04278,1.04278 0 0 1 0.46141,-1.33808a1.00586,1.00586 0 0 1 1.18581,0.35528c0.89051,0.8859 1.76719,1.78103 2.63924,2.68538q3.38672,3.50207 6.76883,7.00876c0.22147,0.2307 0.46141,0.42449 0.83976,0.74748a3.49285,3.49285 0 0 0 0.2307,-0.81669q-0.13381,-6.695 -0.2953,-13.38078q0,-0.99664 -0.02307,-1.99327a1.12122,1.12122 0 0 1 0.79362,-1.19504a1.49495,1.49495 0 0 1 1.49034,0.50293a2.89763,2.89763 0 0 1 0.51677,1.88254c0,1.73489 0,3.46977 0.02768,5.20466q0.05998,4.31876 0.17072,8.63291a2.43161,2.43161 0 0 0 0.30914,0.77055a2.51928,2.51928 0 0 0 0.72902,-0.35528c3.09604,-3.10988 6.17362,-6.24283 9.26965,-9.3527a7.5809,7.5809 0 0 1 1.28732,-1.03816a1.27348,1.27348 0 0 1 1.60569,0.22609a1.02894,1.02894 0 0 1 -0.19379,1.38422c-1.22734,1.22273 -2.47775,2.427 -3.72355,3.63127q-2.27012,2.19168 -4.54485,4.36952c-0.63674,0.60906 -1.29194,1.20427 -1.91945,1.84562c-0.26762,0.26762 -0.46141,0.5906 -0.86283,1.07508a8.41605,8.41605 0 0 0 1.0843,0q5.49535,-0.89513 10.98147,-1.80871a5.13545,5.13545 0 0 1 0.54907,-0.0323c0.42911,-0.02307 0.83053,0.02768 0.97357,0.52139a0.95511,0.95511 0 0 1 -0.46141,1.23657a6.32588,6.32588 0 0 1 -1.55955,0.50293c-2.60233,0.48448 -5.20928,0.92281 -7.81161,1.38422a12.15805,12.15805 0 0 1 -1.84562,0.28146c-1.58262,0.0323 -2.79612,0.79823 -3.8389,1.87792a1.84562,1.84562 0 0 0 -0.46141,1.05201c-0.06921,0.73364 0,1.4765 0,2.21475q0.05076,20.20959 0.11074,40.41918c0.02768,6.7919 0.11997,13.5838 0.14765,20.3757a2.30703,2.30703 0 0 0 1.13506,2.19629a3.54821,3.54821 0 0 1 1.2458,1.63338a13.84219,13.84219 0 0 1 0.92281,3.28521a54.09987,54.09987 0 0 1 0.60444,6.71346c0.03691,5.57379 -0.0646,11.14296 -0.14765,16.71675a18.35474,18.35474 0 0 1 -0.92281,5.66145a11.12912,11.12912 0 0 1 -1.25041,2.57003c-0.96434,1.43959 -2.44084,1.81794 -4.08806,1.64722a2.30703,2.30703 0 0 1 -1.76257,-1.21811a14.43279,14.43279 0 0 1 -1.2135,-2.47314c-0.92281,-2.51928 -1.26425,-5.15852 -1.55494,-7.80238c-0.76132,-7.0226 -0.76132,-14.0775 -0.66442,-21.12779a11.16603,11.16603 0 0 1 0.6229,-3.12833a4.46641,4.46641 0 0 1 2.40393,-2.76844c0.83515,-0.3922 1.07046,-0.95973 1.07508,-1.84562q0.04153,-21.87065 0.12458,-43.74131q0.0323,-9.68953 0.08767,-19.37906c0,-1.54571 -0.69672,-2.42238 -2.21014,-2.80996c-2.74075,-0.70134 -5.47689,-1.43497 -8.21764,-2.13631c-0.89051,-0.22609 -1.79948,-0.36912 -2.68538,-0.61367a3.36827,3.36827 0 0 1 -1.27809,-0.60444a1.16736,1.16736 0 0 1 -0.30453,-0.95973c0.04153,-0.20763 0.46141,-0.38297 0.75209,-0.46141a1.74412,1.74412 0 0 1 0.76132,0a42.67084,42.67084 0 0 1 7.3825,1.78564c1.30578,0.46141 2.67154,0.72902 4.00962,1.0843l0.21225,-0.22147l0,0.00001l0.00001,-0.00002z" id="svg_1" fill="black"/>\n                  \n                  </svg>\n                    ',i.className="marker-semilla",i.id=e._id,i.childNodes[0].addEventListener("click",function(){t.displayContent(e._id)});var o=t.serviceSemillas.geoPointsToArray(e.geoInfo.source.data.geometry.coordinates);if(0!=o.length){var a=new qi.Marker(i).setLngLat(o[o.length-1]).addTo(t.map);t.objectsAddedToMap.push(a)}else console.log(JSON.stringify(e))}})})},t.prototype.displayContent=function(t){var e=this;this.serviceSemillas.obtenerSemilla(t).subscribe(function(n){e.currentSemilla=n,n.geoInfo.source.data.geometry.coordinates=e.serviceSemillas.geoPointsToArray(n.geoInfo.source.data.geometry.coordinates),e.objetosAnteriores=e.objectsAddedToMap;var r=0;if("audio"==e.currentSemilla.testimonialType)for(;r<4;){var i=document.getElementById("audio"+(r+1));i.src=e.currentSemilla.audios[r],i.load(),r++}e.objectsAddedToMap.forEach(function(e){e.getElement().id!=t&&e.remove()}),e.location.replaceState("/map/"+t),document.getElementById("aside").classList.add("aside-active"),e.map.addLayer(n.geoInfo)})},t.prototype.closeAside=function(){"check"!==sessionStorage.getItem("mapInstructions")&&document.getElementById("start-info").classList.toggle("active"),this.subscripcion.unsubscribe(),this.location.replaceState("/map"),document.getElementById("aside").classList.remove("aside-active"),this.map.removeLayer(this.currentSemilla.geoInfo.id+""),this.map.removeSource(this.currentSemilla.geoInfo.id+""),this.pintarMarkers()},t.prototype.shareFacebook=function(){FB.ui({method:"share",display:"popup",href:"https://beta.semillasvenezuela.org/"+this.route.snapshot.params.id},function(t){})},t.prototype.shareTwitter=function(){window.open("https://twitter.com/share?text=Mira este testimonio de un venezolano en el mundo &hashtags=SomoSemillas&url="+document.URL,"twitter-popup","height=350,width=600")},t}(),Ma=r["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{height:100vh}.map[_ngcontent-%COMP%]{position:absolute;right:0;width:100vw;overflow:unset;height:90vh;z-index:-1}.aside[_ngcontent-%COMP%]{background:var(--color-amarillo);height:90vh;width:30vw;position:fixed;z-index:999;left:-30vw;transition:.5s ease-in-out;padding:2vh 5vmin}.content[_ngcontent-%COMP%]{margin:3vh 0;height:90%;overflow-y:scroll}.aside-active[_ngcontent-%COMP%]{left:0}.close[_ngcontent-%COMP%]{display:flex}.social[_ngcontent-%COMP%]{display:flex;justify-content:space-around}audio[_ngcontent-%COMP%]{width:100%}.button[_ngcontent-%COMP%]{border:none;color:#fff;display:inline-block;text-transform:uppercase;text-decoration:none;padding:20px 50px;border-radius:3px;margin:5px;border-bottom-style:solid;border-bottom-width:3px;transition:text-shadow .3s;font-style:normal}.button[_ngcontent-%COMP%]:active{position:relative;top:1px;border-bottom-width:2px}.button[_ngcontent-%COMP%]:hover{text-shadow:2px 2px 0 rgba(0,0,0,.3)}.green[_ngcontent-%COMP%]{background-color:var(--color-verde-quem);border-color:var(--color-verde)}.display-none[_ngcontent-%COMP%]{display:none}.button[_ngcontent-%COMP%]:disabled{background:#798188;border-color:#8a9299}.active[_ngcontent-%COMP%]{display:flex!important}@media screen and (max-width:800px){.aside[_ngcontent-%COMP%]{height:40vh;width:100vw;bottom:-40vh;position:fixed;left:0}.aside-active[_ngcontent-%COMP%]{bottom:0}}"]],data:{}});function Ra(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,16,"div",[],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,1,"p",[["style","font-weight: bold; font-size: 1.1em"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["1.\tSalir. \xbfCu\xe1ndo saliste y como tomaste la decisi\xf3n? Cuenta sobre las razones de tu salida, quien y que tuviste que dejar atr\xe1s y como te preparaste para la salida."])),(t()(),r["\u0275eld"](3,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](4,null,["",""])),(t()(),r["\u0275eld"](5,0,null,null,1,"p",[["style","font-weight: bold; font-size: 1.1em"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" 2.\tEn camino. \xbfCu\xe1les fueron tus experiencias y dificultades en el camino? Cuenta sobre los desaf\xedos pr\xe1cticos y personales que tuviste que afrontar en el camino. "])),(t()(),r["\u0275eld"](7,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](8,null,["",""])),(t()(),r["\u0275eld"](9,0,null,null,1,"p",[["style","font-weight: bold; font-size: 1.1em"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" 3.\tLlegando. \xbfC\xf3mo fue tu proceso de adaptaci\xf3n en el pa\xeds al que llegaste? Cuenta sobre el apoyo y las dificultades que viviste y c\xf3mo vas construyendo una nueva vida. "])),(t()(),r["\u0275eld"](11,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](12,null,["",""])),(t()(),r["\u0275eld"](13,0,null,null,1,"p",[["style","font-weight: bold; font-size: 1.1em"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" 4.\tEl futuro. \xbfCu\xe1les son las esperanzas para ti, tus seres queridos y para Venezuela? Cuenta sobre tus deseos, tanto para ti como para todos los venezolanos. "])),(t()(),r["\u0275eld"](15,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](16,null,["",""]))],null,function(t,e){var n=e.component;t(e,4,0,null==n.currentSemilla?null:n.currentSemilla.textos[0]),t(e,8,0,null==n.currentSemilla?null:n.currentSemilla.textos[1]),t(e,12,0,null==n.currentSemilla?null:n.currentSemilla.textos[2]),t(e,16,0,null==n.currentSemilla?null:n.currentSemilla.textos[3])})}function Na(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,45,"div",[["id","contenedor-all"],["style","position: relative;"]],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,0,"div",[["class","map"],["id","map"]],null,null,null,null,null)),(t()(),r["\u0275eld"](2,0,null,null,24,"aside",[["class","aside"],["id","aside"]],null,null,null,null,null)),(t()(),r["\u0275eld"](3,0,null,null,5,"div",[["style","width: 100%; display: flex; justify-content: space-between;"]],null,null,null,null,null)),(t()(),r["\u0275eld"](4,0,null,null,2,"div",[["class","social"],["style","width: 5vmin; display:flex; justify-content: space-between"]],null,null,null,null,null)),(t()(),r["\u0275eld"](5,0,null,null,0,"i",[["class","fab fa-twitter"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.shareTwitter()&&r),r},null,null)),(t()(),r["\u0275eld"](6,0,null,null,0,"i",[["class","fab fa-facebook-f"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.shareFacebook()&&r),r},null,null)),(t()(),r["\u0275eld"](7,0,null,null,1,"div",[["class","close"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.closeAside()&&r),r},null,null)),(t()(),r["\u0275eld"](8,0,null,null,0,"i",[["class","fas fa-times"]],null,null,null,null,null)),(t()(),r["\u0275eld"](9,0,null,null,17,"div",[["class","content"]],null,null,null,null,null)),(t()(),r["\u0275and"](16777216,null,null,1,null,Ra)),r["\u0275did"](11,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275eld"](12,0,null,null,14,"div",[],null,null,null,null,null)),r["\u0275did"](13,278528,null,0,S.NgClass,[r.IterableDiffers,r.KeyValueDiffers,r.ElementRef,r.Renderer2],{ngClass:[0,"ngClass"]},null),r["\u0275pod"](14,{"display-none":0}),(t()(),r["\u0275eld"](15,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["1.\tSalir. \xbfCu\xe1ndo saliste y como tomaste la decisi\xf3n? Cuenta sobre las razones de tu salida, quien y que tuviste que dejar atr\xe1s y como te preparaste para la salida."])),(t()(),r["\u0275eld"](17,0,null,null,0,"audio",[["controls","controls"],["id","audio1"]],null,null,null,null,null)),(t()(),r["\u0275eld"](18,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" 2.\tEn camino. \xbfCu\xe1les fueron tus experiencias y dificultades en el camino? Cuenta sobre los desaf\xedos pr\xe1cticos y personales que tuviste que afrontar en el camino. "])),(t()(),r["\u0275eld"](20,0,null,null,0,"audio",[["controls","controls"],["id","audio2"]],null,null,null,null,null)),(t()(),r["\u0275eld"](21,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" 3.\tLlegando. \xbfC\xf3mo fue tu proceso de adaptaci\xf3n en el pa\xeds al que llegaste? Cuenta sobre el apoyo y las dificultades que viviste y c\xf3mo vas construyendo una nueva vida. "])),(t()(),r["\u0275eld"](23,0,null,null,0,"audio",[["controls","controls"],["id","audio3"]],null,null,null,null,null)),(t()(),r["\u0275eld"](24,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" 4.\tEl futuro. \xbfCu\xe1les son las esperanzas para ti, tus seres queridos y para Venezuela? Cuenta sobre tus deseos, tanto para ti como para todos los venezolanos. "])),(t()(),r["\u0275eld"](26,0,null,null,0,"audio",[["controls","controls"],["id","audio4"]],null,null,null,null,null)),(t()(),r["\u0275eld"](27,0,null,null,3,"div",[["id","i12345"],["style","position:fixed; height: 90vh; top:10vh; width: 100vw; background: var(--color-amarillo);display: flex; flex-direction: column; justify-content:center; align-items: center;"]],null,null,null,null,null)),(t()(),r["\u0275eld"](28,0,null,null,0,"i",[["class","fas fa-spinner fa-spin"],["style","font-size: 3em;"]],null,null,null,null,null)),(t()(),r["\u0275eld"](29,0,null,null,1,"p",[["style","font-size: 1.5em;"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Cargando..."])),(t()(),r["\u0275eld"](31,0,null,null,14,"div",[["id","start-info"],["style","position:fixed; height: 90vh; top:10vh; width: 100vw; background: var(--color-amarillo);display: none; flex-direction: column; justify-content:center; align-items: center; opacity: 0.85; padding: 0 10vw; text-align: center;"]],null,null,null,null,null)),(t()(),r["\u0275eld"](32,0,null,null,0,"i",[["class","fas fa-info"],["style","font-size: 2em;"]],null,null,null,null,null)),(t()(),r["\u0275eld"](33,0,null,null,1,"p",[["style","font-size: 1.3em; font-weight: bolder"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Bienvenido al mapa"])),(t()(),r["\u0275eld"](35,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r["\u0275eld"](36,0,null,null,1,"p",[["style","font-size: 1em;"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["En este observaras las semillas que venezolanos han dejado en su diaspora."])),(t()(),r["\u0275eld"](38,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r["\u0275eld"](39,0,null,null,1,"p",[["style","font-size: 1em;"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Estas semillas contienen testimonios, para verlos tocalos, estos testimonios podran estar en audio o en texto, adicionalmente pudieron ser dejados de manera anonima."])),(t()(),r["\u0275eld"](41,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r["\u0275eld"](42,0,null,null,1,"p",[["style","font-size: 1em;"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Apoyemos a los venezolanos dignificando sus historias, por esto te invitamos a compartir en Facebook o Twitter los testimonios que mas te agraden."])),(t()(),r["\u0275eld"](44,0,null,null,1,"button",[["class","button green"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggleOverlay()&&r),r},null,null)),(t()(),r["\u0275ted"](-1,null,[" Listo "]))],function(t,e){var n=e.component;t(e,11,0,"text"==(null==n.currentSemilla?null:n.currentSemilla.testimonialType)),t(e,13,0,t(e,14,0,"text"==(null==n.currentSemilla?null:n.currentSemilla.testimonialType)))},null)}var La=r["\u0275ccf"]("app-map",ka,function(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"app-map",[],null,null,null,Na,Ma)),r["\u0275did"](1,4308992,null,0,ka,[ni,gr,S.Location,Da,Ke],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Fa=n("isby"),Ba=function(t){function e(e,n){var r=t.call(this,e)||this;r.sources=n,r.completed=0,r.haveValues=0;var i=n.length;r.values=new Array(i);for(var o=0;o<i;o++){var a=n[o],s=Object(Pt.a)(r,a,null,o);s&&r.add(s)}return r}return o.c(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,n=this.haveValues,r=this.values,i=r.length;t._hasValue?(this.completed++,this.completed===i&&(n===i&&e.next(r),e.complete())):e.complete()},e}(At.a),ja=function(){function t(){}return Object.defineProperty(t.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.reset=function(t){void 0===t&&(t=void 0),this.control&&this.control.reset(t)},t.prototype.hasError=function(t,e){return!!this.control&&this.control.hasError(t,e)},t.prototype.getError=function(t,e){return this.control?this.control.getError(t,e):null},t}(),za=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),Object.defineProperty(e.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),e}(ja);function Va(t){return null==t||0===t.length}var Ua=new r.InjectionToken("NgValidators"),qa=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Ga=function(){function t(){}return t.min=function(t){return function(e){if(Va(e.value)||Va(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}},t.max=function(t){return function(e){if(Va(e.value)||Va(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}},t.required=function(t){return Va(t.value)?{required:!0}:null},t.requiredTrue=function(t){return!0===t.value?null:{required:!0}},t.email=function(t){return Va(t.value)?null:qa.test(t.value)?null:{email:!0}},t.minLength=function(t){return function(e){if(Va(e.value))return null;var n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}},t.maxLength=function(t){return function(e){var n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}},t.pattern=function(e){return e?("string"==typeof e?(r="","^"!==e.charAt(0)&&(r+="^"),r+=e,"$"!==e.charAt(e.length-1)&&(r+="$"),n=new RegExp(r)):(r=e.toString(),n=e),function(t){if(Va(t.value))return null;var e=t.value;return n.test(e)?null:{pattern:{requiredPattern:r,actualValue:e}}}):t.nullValidator;var n,r},t.nullValidator=function(t){return null},t.compose=function(t){if(!t)return null;var e=t.filter(Ha);return 0==e.length?null:function(t){return Ka(function(t,n){return e.map(function(e){return e(t)})}(t))}},t.composeAsync=function(t){if(!t)return null;var e=t.filter(Ha);return 0==e.length?null:function(t){return function t(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&Object(Fa.a)(n[0])&&(n=n[0]),0===n.length?l:e?t(n).pipe(Object(d.a)(function(t){return e.apply(void 0,t)})):new u.a(function(t){return new Ba(t,n)})}(function(t,n){return e.map(function(e){return e(t)})}(t).map(Wa)).pipe(Object(d.a)(Ka))}},t}();function Ha(t){return null!=t}function Wa(t){var e=Object(r["\u0275isPromise"])(t)?Object(p.a)(t):t;if(!Object(r["\u0275isObservable"])(e))throw new Error("Expected validator to return Promise or Observable.");return e}function Ka(t){var e=t.reduce(function(t,e){return null!=e?Object(o.a)({},t,e):t},{});return 0===Object.keys(e).length?null:e}var Xa=new r.InjectionToken("NgValueAccessor"),Qa=function(){function t(t,e){this._renderer=t,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t}(),Za=new r.InjectionToken("CompositionEventMode"),Ya=function(){function t(t,e,n){var r;this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=function(t){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(r=Lt()?Lt().getUserAgent():"",!/android (\d+)/.test(r.toLowerCase())))}return t.prototype.writeValue=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t.prototype._handleInput=function(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)},t.prototype._compositionStart=function(){this._composing=!0},t.prototype._compositionEnd=function(t){this._composing=!1,this._compositionMode&&this.onChange(t)},t}();function Ja(t){return t.validate?function(e){return t.validate(e)}:t}function $a(t){return t.validate?function(e){return t.validate(e)}:t}var ts=function(){function t(t,e){this._renderer=t,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)},t.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t}();function es(){throw new Error("unimplemented")}var ns=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}return Object(o.c)(e,t),Object.defineProperty(e.prototype,"validator",{get:function(){return es()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return es()},enumerable:!0,configurable:!0}),e}(ja),rs=function(){function t(){this._accessors=[]}return t.prototype.add=function(t,e){this._accessors.push([t,e])},t.prototype.remove=function(t){for(var e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)},t.prototype.select=function(t){var e=this;this._accessors.forEach(function(n){e._isSameGroup(n,t)&&n[1]!==t&&n[1].fireUncheck(t.value)})},t.prototype._isSameGroup=function(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name},t}(),is=function(){function t(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}return t.prototype.ngOnInit=function(){this._control=this._injector.get(ns),this._checkName(),this._registry.add(this._control,this)},t.prototype.ngOnDestroy=function(){this._registry.remove(this)},t.prototype.writeValue=function(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},t.prototype.registerOnChange=function(t){var e=this;this._fn=t,this.onChange=function(){t(e.value),e._registry.select(e)}},t.prototype.fireUncheck=function(t){this.writeValue(t)},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},t.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},t}(),os='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',as='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>';function ss(t,e){return Object(o.f)(e.path,[t])}function us(t,e){t||cs(e,"Cannot find control with"),e.valueAccessor||cs(e,"No value accessor for form control with"),t.validator=Ga.compose([t.validator,e.validator]),t.asyncValidator=Ga.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(function(n){t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&ls(t,e)})}(t,e),function(t,e){t.registerOnChange(function(t,n){e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(function(){t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&ls(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(function(t){e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})}),e._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})})}function ls(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function cs(t,e){var n;throw n=t.path.length>1?"path: '"+t.path.join(" -> ")+"'":t.path[0]?"name: '"+t.path+"'":"unspecified name attribute",new Error(e+" "+n)}function hs(t){return null!=t?Ga.compose(t.map(Ja)):null}function ps(t){return null!=t?Ga.composeAsync(t.map($a)):null}var fs=[Qa,function(){function t(t,e){this._renderer=t,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))},t.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t}(),ts,function(){function t(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=r["\u0275looseIdentical"]}return Object.defineProperty(t.prototype,"compareWith",{set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t},enumerable:!0,configurable:!0}),t.prototype.writeValue=function(t){this.value=t;var e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),(t+": "+e).slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)},t.prototype.registerOnChange=function(t){var e=this;this.onChange=function(n){e.value=e._getOptionValue(n),t(e.value)}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t.prototype._registerOption=function(){return(this._idCounter++).toString()},t.prototype._getOptionId=function(t){var e,n;try{for(var r=Object(o.g)(Array.from(this._optionMap.keys())),i=r.next();!i.done;i=r.next()){var a=i.value;if(this._compareWith(this._optionMap.get(a),t))return a}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null},t.prototype._getOptionValue=function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t},t}(),function(){function t(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=r["\u0275looseIdentical"]}return Object.defineProperty(t.prototype,"compareWith",{set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t},enumerable:!0,configurable:!0}),t.prototype.writeValue=function(t){var e,n=this;if(this.value=t,Array.isArray(t)){var r=t.map(function(t){return n._getOptionId(t)});e=function(t,e){t._setSelected(r.indexOf(e.toString())>-1)}}else e=function(t,e){t._setSelected(!1)};this._optionMap.forEach(e)},t.prototype.registerOnChange=function(t){var e=this;this.onChange=function(n){var r=[];if(n.hasOwnProperty("selectedOptions"))for(var i=n.selectedOptions,o=0;o<i.length;o++){var a=i.item(o),s=e._getOptionValue(a.value);r.push(s)}else for(i=n.options,o=0;o<i.length;o++)(a=i.item(o)).selected&&(s=e._getOptionValue(a.value),r.push(s));e.value=r,t(r)}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t.prototype._registerOption=function(t){var e=(this._idCounter++).toString();return this._optionMap.set(e,t),e},t.prototype._getOptionId=function(t){var e,n;try{for(var r=Object(o.g)(Array.from(this._optionMap.keys())),i=r.next();!i.done;i=r.next()){var a=i.value;if(this._compareWith(this._optionMap.get(a)._value,t))return a}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null},t.prototype._getOptionValue=function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t},t}(),is],ds=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},e.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(e.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return ss(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validator",{get:function(){return hs(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return ps(this._asyncValidators)},enumerable:!0,configurable:!0}),e.prototype._checkParentType=function(){},e}(za),ms=function(){function t(t){this._cd=t}return Object.defineProperty(t.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),t}(),gs=function(t){function e(e){return t.call(this,e)||this}return Object(o.c)(e,t),e}(ms),ys=function(t){function e(e){return t.call(this,e)||this}return Object(o.c)(e,t),e}(ms);function vs(t){var e=_s(t)?t.validators:t;return Array.isArray(e)?hs(e):e||null}function bs(t,e){var n=_s(e)?e.asyncValidators:t;return Array.isArray(n)?ps(n):n||null}function _s(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}var ws=function(){function t(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return"VALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invalid",{get:function(){return"INVALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pending",{get:function(){return"PENDING"==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return"DISABLED"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return"DISABLED"!==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updateOn",{get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"},enumerable:!0,configurable:!0}),t.prototype.setValidators=function(t){this.validator=vs(t)},t.prototype.setAsyncValidators=function(t){this.asyncValidator=bs(t)},t.prototype.clearValidators=function(){this.validator=null},t.prototype.clearAsyncValidators=function(){this.asyncValidator=null},t.prototype.markAsTouched=function(t){void 0===t&&(t={}),this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)},t.prototype.markAsUntouched=function(t){void 0===t&&(t={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(t){t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)},t.prototype.markAsDirty=function(t){void 0===t&&(t={}),this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)},t.prototype.markAsPristine=function(t){void 0===t&&(t={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(t){t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)},t.prototype.markAsPending=function(t){void 0===t&&(t={}),this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)},t.prototype.disable=function(t){void 0===t&&(t={}),this.status="DISABLED",this.errors=null,this._forEachChild(function(e){e.disable(Object(o.a)({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(t),this._onDisabledChange.forEach(function(t){return t(!0)})},t.prototype.enable=function(t){void 0===t&&(t={}),this.status="VALID",this._forEachChild(function(e){e.enable(Object(o.a)({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(t),this._onDisabledChange.forEach(function(t){return t(!1)})},t.prototype._updateAncestors=function(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),this._parent._updatePristine(),this._parent._updateTouched())},t.prototype.setParent=function(t){this._parent=t},t.prototype.updateValueAndValidity=function(t){void 0===t&&(t={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)},t.prototype._updateTreeValidity=function(t){void 0===t&&(t={emitEvent:!0}),this._forEachChild(function(e){return e._updateTreeValidity(t)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})},t.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"},t.prototype._runValidator=function(){return this.validator?this.validator(this):null},t.prototype._runAsyncValidator=function(t){var e=this;if(this.asyncValidator){this.status="PENDING";var n=Wa(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(function(n){return e.setErrors(n,{emitEvent:t})})}},t.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},t.prototype.setErrors=function(t,e){void 0===e&&(e={}),this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)},t.prototype.get=function(t){return function(t,e,n){return null==e?null:(e instanceof Array||(e=e.split(".")),e instanceof Array&&0===e.length?null:e.reduce(function(t,e){return t instanceof Cs?t.controls.hasOwnProperty(e)?t.controls[e]:null:t instanceof Es&&t.at(e)||null},t))}(this,t)},t.prototype.getError=function(t,e){var n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null},t.prototype.hasError=function(t,e){return!!this.getError(t,e)},Object.defineProperty(t.prototype,"root",{get:function(){for(var t=this;t._parent;)t=t._parent;return t},enumerable:!0,configurable:!0}),t.prototype._updateControlsErrors=function(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)},t.prototype._initObservables=function(){this.valueChanges=new r.EventEmitter,this.statusChanges=new r.EventEmitter},t.prototype._calculateStatus=function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"},t.prototype._anyControlsHaveStatus=function(t){return this._anyControls(function(e){return e.status===t})},t.prototype._anyControlsDirty=function(){return this._anyControls(function(t){return t.dirty})},t.prototype._anyControlsTouched=function(){return this._anyControls(function(t){return t.touched})},t.prototype._updatePristine=function(t){void 0===t&&(t={}),this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)},t.prototype._updateTouched=function(t){void 0===t&&(t={}),this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)},t.prototype._isBoxedValue=function(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t},t.prototype._registerOnCollectionChange=function(t){this._onCollectionChange=t},t.prototype._setUpdateStrategy=function(t){_s(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)},t}(),xs=function(t){function e(e,n,r){void 0===e&&(e=null);var i=t.call(this,vs(n),bs(r,n))||this;return i._onChange=[],i._applyFormState(e),i._setUpdateStrategy(n),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i._initObservables(),i}return Object(o.c)(e,t),e.prototype.setValue=function(t,e){var n=this;void 0===e&&(e={}),this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(function(t){return t(n.value,!1!==e.emitViewToModelChange)}),this.updateValueAndValidity(e)},e.prototype.patchValue=function(t,e){void 0===e&&(e={}),this.setValue(t,e)},e.prototype.reset=function(t,e){void 0===t&&(t=null),void 0===e&&(e={}),this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1},e.prototype._updateValue=function(){},e.prototype._anyControls=function(t){return!1},e.prototype._allControlsDisabled=function(){return this.disabled},e.prototype.registerOnChange=function(t){this._onChange.push(t)},e.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},e.prototype.registerOnDisabledChange=function(t){this._onDisabledChange.push(t)},e.prototype._forEachChild=function(t){},e.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))},e.prototype._applyFormState=function(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t},e}(ws),Cs=function(t){function e(e,n,r){var i=t.call(this,vs(n),bs(r,n))||this;return i.controls=e,i._initObservables(),i._setUpdateStrategy(n),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return Object(o.c)(e,t),e.prototype.registerControl=function(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)},e.prototype.addControl=function(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.removeControl=function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.setControl=function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.contains=function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled},e.prototype.setValue=function(t,e){var n=this;void 0===e&&(e={}),this._checkAllValuesPresent(t),Object.keys(t).forEach(function(r){n._throwIfControlMissing(r),n.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.patchValue=function(t,e){var n=this;void 0===e&&(e={}),Object.keys(t).forEach(function(r){n.controls[r]&&n.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.reset=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this._forEachChild(function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e),this._updatePristine(e),this._updateTouched(e)},e.prototype.getRawValue=function(){return this._reduceChildren({},function(t,e,n){return t[n]=e instanceof xs?e.value:e.getRawValue(),t})},e.prototype._syncPendingControls=function(){var t=this._reduceChildren(!1,function(t,e){return!!e._syncPendingControls()||t});return t&&this.updateValueAndValidity({onlySelf:!0}),t},e.prototype._throwIfControlMissing=function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: "+t+".")},e.prototype._forEachChild=function(t){var e=this;Object.keys(this.controls).forEach(function(n){return t(e.controls[n],n)})},e.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})},e.prototype._updateValue=function(){this.value=this._reduceValue()},e.prototype._anyControls=function(t){var e=this,n=!1;return this._forEachChild(function(r,i){n=n||e.contains(i)&&t(r)}),n},e.prototype._reduceValue=function(){var t=this;return this._reduceChildren({},function(e,n,r){return(n.enabled||t.disabled)&&(e[r]=n.value),e})},e.prototype._reduceChildren=function(t,e){var n=t;return this._forEachChild(function(t,r){n=e(n,t,r)}),n},e.prototype._allControlsDisabled=function(){var t,e;try{for(var n=Object(o.g)(Object.keys(this.controls)),r=n.next();!r.done;r=n.next())if(this.controls[r.value].enabled)return!1}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return Object.keys(this.controls).length>0||this.disabled},e.prototype._checkAllValuesPresent=function(t){this._forEachChild(function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control with name: '"+n+"'.")})},e}(ws),Es=function(t){function e(e,n,r){var i=t.call(this,vs(n),bs(r,n))||this;return i.controls=e,i._initObservables(),i._setUpdateStrategy(n),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return Object(o.c)(e,t),e.prototype.at=function(t){return this.controls[t]},e.prototype.push=function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.insert=function(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()},e.prototype.removeAt=function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),this.updateValueAndValidity()},e.prototype.setControl=function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(e.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),e.prototype.setValue=function(t,e){var n=this;void 0===e&&(e={}),this._checkAllValuesPresent(t),t.forEach(function(t,r){n._throwIfControlMissing(r),n.at(r).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.patchValue=function(t,e){var n=this;void 0===e&&(e={}),t.forEach(function(t,r){n.at(r)&&n.at(r).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.reset=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this._forEachChild(function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e),this._updatePristine(e),this._updateTouched(e)},e.prototype.getRawValue=function(){return this.controls.map(function(t){return t instanceof xs?t.value:t.getRawValue()})},e.prototype._syncPendingControls=function(){var t=this.controls.reduce(function(t,e){return!!e._syncPendingControls()||t},!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t},e.prototype._throwIfControlMissing=function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)},e.prototype._forEachChild=function(t){this.controls.forEach(function(e,n){t(e,n)})},e.prototype._updateValue=function(){var t=this;this.value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(t){return t.value})},e.prototype._anyControls=function(t){return this.controls.some(function(e){return e.enabled&&t(e)})},e.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})},e.prototype._checkAllValuesPresent=function(t){this._forEachChild(function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control at index: "+n+".")})},e.prototype._allControlsDisabled=function(){var t,e;try{for(var n=Object(o.g)(this.controls),r=n.next();!r.done;r=n.next())if(r.value.enabled)return!1}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return this.controls.length>0||this.disabled},e.prototype._registerControl=function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)},e}(ws),Ss=Promise.resolve(null),Ts=function(t){function e(e,n){var i=t.call(this)||this;return i.submitted=!1,i._directives=[],i.ngSubmit=new r.EventEmitter,i.form=new Cs({},hs(e),ps(n)),i}return Object(o.c)(e,t),e.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(e.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),e.prototype.addControl=function(t){var e=this;Ss.then(function(){var n=e._findContainer(t.path);t.control=n.registerControl(t.name,t.control),us(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),e._directives.push(t)})},e.prototype.getControl=function(t){return this.form.get(t.path)},e.prototype.removeControl=function(t){var e=this;Ss.then(function(){var n,r,i=e._findContainer(t.path);i&&i.removeControl(t.name),(r=(n=e._directives).indexOf(t))>-1&&n.splice(r,1)})},e.prototype.addFormGroup=function(t){var e=this;Ss.then(function(){var n=e._findContainer(t.path),r=new Cs({});(function(t,e){null==t&&cs(e,"Cannot find control with"),t.validator=Ga.compose([t.validator,e.validator]),t.asyncValidator=Ga.composeAsync([t.asyncValidator,e.asyncValidator])})(r,t),n.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})},e.prototype.removeFormGroup=function(t){var e=this;Ss.then(function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name)})},e.prototype.getFormGroup=function(t){return this.form.get(t.path)},e.prototype.updateModel=function(t,e){var n=this;Ss.then(function(){n.form.get(t.path).setValue(e)})},e.prototype.setValue=function(t){this.control.setValue(t)},e.prototype.onSubmit=function(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(function(t){var e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e},e.prototype.onReset=function(){this.resetForm()},e.prototype.resetForm=function(t){void 0===t&&(t=void 0),this.form.reset(t),this.submitted=!1},e.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},e.prototype._findContainer=function(t){return t.pop(),t.length?this.form.get(t):this.form},e}(za),As=function(){function t(){}return t.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      \n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')},t.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+os+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+as)},t.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},t.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+os+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+as)},t}(),Ps=function(t){function e(e,n,r){var i=t.call(this)||this;return i._parent=e,i._validators=n,i._asyncValidators=r,i}return Object(o.c)(e,t),e.prototype._checkParentType=function(){this._parent instanceof e||this._parent instanceof Ts||As.modelGroupParentException()},e}(ds),Is=Promise.resolve(null),Os=function(t){function e(e,n,i,o){var a=t.call(this)||this;return a.control=new xs,a._registered=!1,a.update=new r.EventEmitter,a._parent=e,a._rawValidators=n||[],a._rawAsyncValidators=i||[],a.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e)||cs(t,"Value accessor was not provided as an array for form control with");var n=void 0,r=void 0,i=void 0;return e.forEach(function(e){var o;e.constructor===Ya?n=e:(o=e,fs.some(function(t){return o.constructor===t})?(r&&cs(t,"More than one built-in value accessor matches form control with"),r=e):(i&&cs(t,"More than one custom value accessor matches form control with"),i=e))}),i||r||n||(cs(t,"No valid value accessor for form control with"),null)}(a,o),a}return Object(o.c)(e,t),e.prototype.ngOnChanges=function(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;var n=t.model;return!!n.isFirstChange()||!Object(r["\u0275looseIdentical"])(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},e.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(e.prototype,"path",{get:function(){return this._parent?ss(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validator",{get:function(){return hs(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return ps(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),e.prototype.viewToModelUpdate=function(t){this.viewModel=t,this.update.emit(t)},e.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},e.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},e.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},e.prototype._setUpStandalone=function(){us(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},e.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},e.prototype._checkParentType=function(){!(this._parent instanceof Ps)&&this._parent instanceof ds?As.formGroupNameException():this._parent instanceof Ps||this._parent instanceof Ts||As.modelParentException()},e.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||As.missingNameException()},e.prototype._updateValue=function(t){var e=this;Is.then(function(){e.control.setValue(t,{emitViewToModelChange:!1})})},e.prototype._updateDisabled=function(t){var e=this,n=t.isDisabled.currentValue,r=""===n||n&&"false"!==n;Is.then(function(){r&&!e.control.disabled?e.control.disable():!r&&e.control.disabled&&e.control.enable()})},e}(ns),Ds=function(){function t(){}return Object.defineProperty(t.prototype,"required",{get:function(){return this._required},set:function(t){this._required=null!=t&&!1!==t&&""+t!="false",this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),t.prototype.validate=function(t){return this.required?Ga.required(t):null},t.prototype.registerOnValidatorChange=function(t){this._onChange=t},t}(),ks=function(){},Ms=function(){},Rs=function(){},Ns=function(){},Ls=function(){function t(){this.semillaChange=new r.EventEmitter}return t.prototype.ngOnInit=function(){},t.prototype.step=function(t){this.semilla.step=t,this.semillaChange.emit(this.semilla)},t}(),Fs=r["\u0275crt"]({encapsulation:0,styles:[['*[_ngcontent-%COMP%]{outline:0;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}form[_ngcontent-%COMP%]{height:90vh;background:var(--color-amarillo);overflow-y:scroll}.introduction-text[_ngcontent-%COMP%]{font-style:italic;font-size:1.1em;padding:2vh 10vw;color:var(--color-blanco)}.line[_ngcontent-%COMP%]{transition:width .9s cubic-bezier(.165,.84,.44,1);width:50vw;height:2px;background:#fff;margin:auto auto 12px}.form-group[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.5rem;padding:.8vh 0}.style-input[_ngcontent-%COMP%]{position:relative;width:100%;max-width:80vw;border-radius:2px;padding:1vh;background:#c7af61}.error[_ngcontent-%COMP%]{border:1px solid #f25f5c}.style-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;color:#fff;font-size:1rem;vertical-align:middle;width:100%}.style-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#fff}input[_ngcontent-%COMP%]{border-style:none;background:0 0;outline:0;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}input[_ngcontent-%COMP%]:-webkit-autofill, input[_ngcontent-%COMP%]:-webkit-autofill:active, input[_ngcontent-%COMP%]:-webkit-autofill:focus, input[_ngcontent-%COMP%]:-webkit-autofill:hover{-webkit-box-shadow:0 0 0 30px var(--color-amarillo-quem) inset!important;-webkit-text-fill-color:#fff!important}@-webkit-keyframes pulse{0%{width:.7em;height:.7em;margin:.4em}50%{width:1.1em;height:1.1em;margin:.2em}100%{width:.9em;height:.9em;margin:.3em}}@keyframes pulse{0%{width:.7em;height:.7em;margin:.4em}50%{width:1.1em;height:1.1em;margin:.2em}100%{width:.9em;height:.9em;margin:.3em}}.radio-group[_ngcontent-%COMP%]{padding:0 10vw;align-items:flex-start}.list[_ngcontent-%COMP%]{padding:.5rem 1rem;margin:.5rem .5rem 2rem;border-left:.1875rem solid var(--color-naranja);list-style:none}.list__item[_ngcontent-%COMP%]{margin:0 0 .5rem;padding:0}.label--radio[_ngcontent-%COMP%]{position:relative;margin:.5rem;font-family:Arial,sans-serif;line-height:135%;cursor:pointer;color:var(--color-blanco);font-size:1.4rem}.radio[_ngcontent-%COMP%]{position:relative;margin:0 1rem 0 0;cursor:pointer}.radio[_ngcontent-%COMP%]:before{transition:transform .4s cubic-bezier(.45,1.8,.5,.75);transition:transform .4s cubic-bezier(.45,1.8,.5,.75),-webkit-transform .4s cubic-bezier(.45,1.8,.5,.75);-webkit-transform:scale(0,0);transform:scale(0,0);content:"";position:absolute;top:0;left:.125rem;z-index:1;width:.75rem;height:.75rem;background:var(--color-naranja);border-radius:50%}.radio[_ngcontent-%COMP%]:checked:before{-webkit-transform:scale(1,1);transform:scale(1,1)}.radio[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-.25rem;left:-.125rem;width:1rem;height:1rem;background:var(--color-amarillo-quem);border:2px solid var(--color-amarillo-quem);border-radius:50%}.btn[_ngcontent-%COMP%]{background:var(--color-verde);z-index:1000;position:absolute;bottom:0;width:10vmin;height:10vmin;border-radius:50%;color:#fff;margin:2vh;display:flex;justify-content:center;align-items:center;font-size:3vmin;transition:.5s ease-in-out}.btn[_ngcontent-%COMP%]:disabled{background:#798188}.btn.left[_ngcontent-%COMP%]{left:0}.btn.right[_ngcontent-%COMP%]{right:0}@media screen and (max-width:800px){.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .label--radio[_ngcontent-%COMP%]{font-size:1.2em}}']],data:{}});function Bs(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,501,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r["\u0275nov"](t,2).onSubmit(n)&&i),"reset"===e&&(i=!1!==r["\u0275nov"](t,2).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.step(2)&&i),i},null,null)),r["\u0275did"](1,16384,null,0,ks,[],null,null),r["\u0275did"](2,4210688,[["semillasForm",4]],0,Ts,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),r["\u0275prd"](2048,null,za,null,[Ts]),r["\u0275did"](4,16384,null,0,ys,[[4,za]],null,null),(t()(),r["\u0275eld"](5,0,null,null,1,"p",[["class","introduction-text"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Tus datos personales ayudan a entender las din\xe1micas de la migraci\xf3n venezolana. Solo tu nombre (o seud\xf3nimo), g\xe9nero y edad aparecer\xe1n al lado de tu testimonio. Otros datos ser\xe1n guardados en una base de datos protegida y servir\xe1n \xfanicamente fines investigativos. "])),(t()(),r["\u0275eld"](7,0,null,null,0,"div",[["class","line"]],null,null,null,null,null)),(t()(),r["\u0275eld"](8,0,null,null,11,"div",[["class","form-group"],["style","margin-bottom: 2vh;"]],null,null,null,null,null)),(t()(),r["\u0275eld"](9,0,null,null,1,"label",[["for","username"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Ingresa tu nombre"])),(t()(),r["\u0275eld"](11,0,null,null,8,"div",[["class","style-input"]],null,null,null,null,null)),(t()(),r["\u0275eld"](12,0,null,null,7,"input",[["id","name"],["name","name"],["placeholder","Nombre/Apodo"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,13)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,13).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,13)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,13)._compositionEnd(n.target.value)&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.name=n)&&i),i},null,null)),r["\u0275did"](13,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](14,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t){return[t]},[Ya]),r["\u0275did"](17,671744,[["name",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](19,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275eld"](20,0,null,null,39,"div",[["class","form-group radio-group"]],null,null,null,null,null)),(t()(),r["\u0275eld"](21,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["G\xe9nero"])),(t()(),r["\u0275eld"](23,0,null,null,36,"ul",[["class","list"]],null,null,null,null,null)),(t()(),r["\u0275eld"](24,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](25,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](26,0,null,null,8,"input",[["checked","checked"],["class","radio"],["name","genero"],["required",""],["type","radio"],["value","hombre"]],[[8,"checked",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,27)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,27).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,27)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,27)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,28).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,28).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.gender=n)&&i),i},null,null)),r["\u0275did"](27,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](28,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](29,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](32,671744,[["gender",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](34,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Hombre "])),(t()(),r["\u0275eld"](36,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](37,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](38,0,null,null,8,"input",[["class","radio"],["name","genero"],["required",""],["type","radio"],["value","mujer"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,39)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,39).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,39)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,39)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,40).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,40).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.gender=n)&&i),i},null,null)),r["\u0275did"](39,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](40,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](41,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](44,671744,[["gender",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](46,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Mujer "])),(t()(),r["\u0275eld"](48,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](49,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](50,0,null,null,8,"input",[["class","radio"],["name","genero"],["required",""],["type","radio"],["value","otro"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,51)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,51).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,51)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,51)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,52).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,52).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.gender=n)&&i),i},null,null)),r["\u0275did"](51,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](52,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](53,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](56,671744,[["gender",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](58,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Otro "])),(t()(),r["\u0275eld"](60,0,null,null,99,"div",[["class","form-group radio-group"]],null,null,null,null,null)),(t()(),r["\u0275eld"](61,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Rango de Edad"])),(t()(),r["\u0275eld"](63,0,null,null,96,"ul",[["class","list"]],null,null,null,null,null)),(t()(),r["\u0275eld"](64,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](65,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](66,0,null,null,8,"input",[["checked","checked"],["class","radio"],["id","b1"],["name","age"],["required",""],["type","radio"],["value","menos18"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,67)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,67).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,67)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,67)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,68).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,68).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.age=n)&&i),i},null,null)),r["\u0275did"](67,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](68,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](69,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](72,671744,[["age",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](74,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Menos de 18 "])),(t()(),r["\u0275eld"](76,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](77,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](78,0,null,null,8,"input",[["class","radio"],["id","b2"],["name","age"],["required",""],["type","radio"],["value","18-24"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,79)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,79).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,79)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,79)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,80).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,80).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.age=n)&&i),i},null,null)),r["\u0275did"](79,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](80,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](81,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](84,671744,[["age",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](86,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" 18 a 24 a\xf1os "])),(t()(),r["\u0275eld"](88,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](89,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](90,0,null,null,8,"input",[["class","radio"],["id","b3"],["name","age"],["required",""],["type","radio"],["value","25-34"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,91)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,91).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,91)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,91)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,92).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,92).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.age=n)&&i),i},null,null)),r["\u0275did"](91,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](92,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](93,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](96,671744,[["age",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](98,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" 25 a 34 a\xf1os "])),(t()(),r["\u0275eld"](100,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](101,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](102,0,null,null,8,"input",[["class","radio"],["id","b4"],["name","age"],["required",""],["type","radio"],["value","35-44"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,103)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,103).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,103)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,103)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,104).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,104).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.age=n)&&i),i},null,null)),r["\u0275did"](103,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](104,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](105,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](108,671744,[["age",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](110,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" 35 a 44 a\xf1os "])),(t()(),r["\u0275eld"](112,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](113,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](114,0,null,null,8,"input",[["class","radio"],["id","b5"],["name","age"],["required",""],["type","radio"],["value","45-54"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,115)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,115).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,115)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,115)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,116).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,116).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.age=n)&&i),i},null,null)),r["\u0275did"](115,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](116,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](117,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](120,671744,[["age",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](122,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" 45 a 54 a\xf1os "])),(t()(),r["\u0275eld"](124,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](125,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](126,0,null,null,8,"input",[["class","radio"],["id","b6"],["name","age"],["required",""],["type","radio"],["value","55-64"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,127)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,127).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,127)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,127)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,128).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,128).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.age=n)&&i),i},null,null)),r["\u0275did"](127,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](128,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](129,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](132,671744,[["age",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](134,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" 55 a 64 a\xf1os "])),(t()(),r["\u0275eld"](136,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](137,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](138,0,null,null,8,"input",[["class","radio"],["id","b7"],["name","age"],["required",""],["type","radio"],["value","65-74"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,139)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,139).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,139)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,139)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,140).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,140).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.age=n)&&i),i},null,null)),r["\u0275did"](139,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](140,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](141,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](144,671744,[["age",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](146,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" 65 a 74 a\xf1os "])),(t()(),r["\u0275eld"](148,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](149,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](150,0,null,null,8,"input",[["class","radio"],["id","b8"],["name","age"],["required",""],["type","radio"],["value","mas75"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,151)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,151).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,151)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,151)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,152).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,152).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.age=n)&&i),i},null,null)),r["\u0275did"](151,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](152,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](153,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](156,671744,[["age",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](158,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" 75 a\xf1os o m\xe1s "])),(t()(),r["\u0275eld"](160,0,null,null,51,"div",[["class","form-group radio-group"]],null,null,null,null,null)),(t()(),r["\u0275eld"](161,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Estado Civil"])),(t()(),r["\u0275eld"](163,0,null,null,48,"ul",[["class","list"]],null,null,null,null,null)),(t()(),r["\u0275eld"](164,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](165,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](166,0,null,null,8,"input",[["checked","checked"],["class","radio"],["id","r1"],["name","martial"],["required",""],["type","radio"],["value","soltero/a"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,167)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,167).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,167)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,167)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,168).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,168).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.martialStatus=n)&&i),i},null,null)),r["\u0275did"](167,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](168,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](169,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](172,671744,[["martial",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](174,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Soltero/a "])),(t()(),r["\u0275eld"](176,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](177,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](178,0,null,null,8,"input",[["class","radio"],["id","r2"],["name","martial"],["required",""],["type","radio"],["value","casado/a"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,179)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,179).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,179)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,179)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,180).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,180).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.martialStatus=n)&&i),i},null,null)),r["\u0275did"](179,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](180,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](181,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](184,671744,[["martial",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](186,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Casado/a "])),(t()(),r["\u0275eld"](188,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](189,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](190,0,null,null,8,"input",[["class","radio"],["id","r3"],["name","martial"],["required",""],["type","radio"],["value","divorciado/a"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,191)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,191).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,191)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,191)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,192).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,192).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.martialStatus=n)&&i),i},null,null)),r["\u0275did"](191,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](192,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](193,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](196,671744,[["martial",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](198,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Divorciado/a "])),(t()(),r["\u0275eld"](200,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](201,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](202,0,null,null,8,"input",[["class","radio"],["id","r3"],["name","martial"],["required",""],["type","radio"],["value","viudo/a"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,203)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,203).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,203)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,203)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,204).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,204).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.martialStatus=n)&&i),i},null,null)),r["\u0275did"](203,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](204,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](205,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](208,671744,[["martial",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](210,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Viudo/a "])),(t()(),r["\u0275eld"](212,0,null,null,87,"div",[["class","form-group radio-group"]],null,null,null,null,null)),(t()(),r["\u0275eld"](213,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Nivel Educativo"])),(t()(),r["\u0275eld"](215,0,null,null,84,"ul",[["class","list"]],null,null,null,null,null)),(t()(),r["\u0275eld"](216,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](217,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](218,0,null,null,8,"input",[["checked","checked"],["class","radio"],["id","r1"],["name","education"],["required",""],["type","radio"],["value","primaria incompleta"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,219)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,219).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,219)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,219)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,220).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,220).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.educativeLevel=n)&&i),i},null,null)),r["\u0275did"](219,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](220,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](221,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](224,671744,[["education",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](226,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Primaria incompleta "])),(t()(),r["\u0275eld"](228,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](229,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](230,0,null,null,8,"input",[["class","radio"],["id","r2"],["name","education"],["required",""],["type","radio"],["value","primaria completa"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,231)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,231).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,231)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,231)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,232).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,232).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.educativeLevel=n)&&i),i},null,null)),r["\u0275did"](231,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](232,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](233,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](236,671744,[["education",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](238,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Primaria completa "])),(t()(),r["\u0275eld"](240,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](241,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](242,0,null,null,8,"input",[["class","radio"],["id","r3"],["name","education"],["required",""],["type","radio"],["value","secundaria incompleta"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,243)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,243).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,243)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,243)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,244).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,244).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.educativeLevel=n)&&i),i},null,null)),r["\u0275did"](243,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](244,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](245,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](248,671744,[["education",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](250,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Secundaria incompleta "])),(t()(),r["\u0275eld"](252,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](253,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](254,0,null,null,8,"input",[["class","radio"],["id","r3"],["name","education"],["required",""],["type","radio"],["value","secundaria completa"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,255)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,255).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,255)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,255)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,256).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,256).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.educativeLevel=n)&&i),i},null,null)),r["\u0275did"](255,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](256,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](257,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](260,671744,[["education",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](262,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Secundaria completa "])),(t()(),r["\u0275eld"](264,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](265,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](266,0,null,null,8,"input",[["class","radio"],["id","r3"],["name","education"],["required",""],["type","radio"],["value","universitario incompleto"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,267)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,267).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,267)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,267)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,268).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,268).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.educativeLevel=n)&&i),i},null,null)),r["\u0275did"](267,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](268,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](269,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](272,671744,[["education",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](274,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Universitario incompleto "])),(t()(),r["\u0275eld"](276,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](277,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](278,0,null,null,8,"input",[["class","radio"],["id","r3"],["name","education"],["required",""],["type","radio"],["value","universitario completo"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,279)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,279).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,279)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,279)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,280).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,280).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.educativeLevel=n)&&i),i},null,null)),r["\u0275did"](279,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](280,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](281,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](284,671744,[["education",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](286,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Universitario completo "])),(t()(),r["\u0275eld"](288,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](289,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](290,0,null,null,8,"input",[["class","radio"],["id","r3"],["name","education"],["required",""],["type","radio"],["value","sin formaci\xf3n"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,291)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,291).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,291)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,291)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,292).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,292).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.educativeLevel=n)&&i),i},null,null)),r["\u0275did"](291,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](292,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](293,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](296,671744,[["education",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](298,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Sin formaci\xf3n "])),(t()(),r["\u0275eld"](300,0,null,null,99,"div",[["class","form-group radio-group"]],null,null,null,null,null)),(t()(),r["\u0275eld"](301,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Ocupaci\xf3n en Venezuela"])),(t()(),r["\u0275eld"](303,0,null,null,96,"ul",[["class","list"]],null,null,null,null,null)),(t()(),r["\u0275eld"](304,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](305,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](306,0,null,null,8,"input",[["checked","checked"],["class","radio"],["id","r1"],["name","venezuelaOcupation"],["required",""],["type","radio"],["value","Empresario/a o profesional con asalariados"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,307)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,307).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,307)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,307)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,308).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,308).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.venezuelaOcupation=n)&&i),i},null,null)),r["\u0275did"](307,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](308,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](309,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](312,671744,[["vzlaOcupation",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](314,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Empresario/a o profesional con asalariados "])),(t()(),r["\u0275eld"](316,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](317,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](318,0,null,null,8,"input",[["class","radio"],["id","r2"],["name","venezuelaOcupation"],["required",""],["type","radio"],["value","Empresario/a o trabajador/a independiente sin asalariados"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,319)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,319).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,319)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,319)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,320).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,320).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.venezuelaOcupation=n)&&i),i},null,null)),r["\u0275did"](319,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](320,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](321,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](324,671744,[["vzlaOcupation",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](326,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Empresario/a o trabajador/a independiente sin asalariados "])),(t()(),r["\u0275eld"](328,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](329,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](330,0,null,null,8,"input",[["class","radio"],["id","r3"],["name","venezuelaOcupation"],["required",""],["type","radio"],["value","Asalariado sector privado"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,331)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,331).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,331)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,331)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,332).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,332).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.venezuelaOcupation=n)&&i),i},null,null)),r["\u0275did"](331,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](332,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](333,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](336,671744,[["vzlaOcupation",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](338,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Asalariado sector privado "])),(t()(),r["\u0275eld"](340,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](341,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](342,0,null,null,8,"input",[["class","radio"],["id","r4"],["name","venezuelaOcupation"],["required",""],["type","radio"],["value","Asalariado sector publico"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,343)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,343).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,343)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,343)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,344).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,344).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.venezuelaOcupation=n)&&i),i},null,null)),r["\u0275did"](343,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](344,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](345,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](348,671744,[["vzlaOcupation",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](350,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Asalariado sector p\xfablico "])),(t()(),r["\u0275eld"](352,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](353,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](354,0,null,null,8,"input",[["class","radio"],["id","r5"],["name","venezuelaOcupation"],["required",""],["type","radio"],["value","Ama de casa"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,355)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,355).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,355)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,355)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,356).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,356).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.venezuelaOcupation=n)&&i),i},null,null)),r["\u0275did"](355,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](356,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](357,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](360,671744,[["vzlaOcupation",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](362,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Ama de casa "])),(t()(),r["\u0275eld"](364,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](365,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](366,0,null,null,8,"input",[["class","radio"],["id","r6"],["name","venezuelaOcupation"],["required",""],["type","radio"],["value","Estudiante"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,367)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,367).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,367)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,367)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,368).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,368).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.venezuelaOcupation=n)&&i),i},null,null)),r["\u0275did"](367,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](368,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](369,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](372,671744,[["vzlaOcupation",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](374,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Estudiante "])),(t()(),r["\u0275eld"](376,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](377,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](378,0,null,null,8,"input",[["class","radio"],["id","r7"],["name","venezuelaOcupation"],["required",""],["type","radio"],["value","Jubilado"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,379)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,379).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,379)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,379)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,380).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,380).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.venezuelaOcupation=n)&&i),i},null,null)),r["\u0275did"](379,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](380,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](381,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](384,671744,[["vzlaOcupation",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](386,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Jubilado "])),(t()(),r["\u0275eld"](388,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](389,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](390,0,null,null,8,"input",[["class","radio"],["id","r8"],["name","venezuelaOcupation"],["required",""],["type","radio"],["value","Desempleado"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,391)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,391).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,391)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,391)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,392).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,392).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.venezuelaOcupation=n)&&i),i},null,null)),r["\u0275did"](391,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](392,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](393,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](396,671744,[["vzlaOcupation",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](398,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Desempleado "])),(t()(),r["\u0275eld"](400,0,null,null,99,"div",[["class","form-group radio-group"]],null,null,null,null,null)),(t()(),r["\u0275eld"](401,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Ocupaci\xf3n en su pa\xeds Actual"])),(t()(),r["\u0275eld"](403,0,null,null,96,"ul",[["class","list"]],null,null,null,null,null)),(t()(),r["\u0275eld"](404,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](405,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](406,0,null,null,8,"input",[["checked","checked"],["class","radio"],["id","r1"],["name","currentOcupation"],["required",""],["type","radio"],["value","Empresario/a o profesional con asalariados"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,407)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,407).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,407)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,407)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,408).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,408).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.currentOcupation=n)&&i),i},null,null)),r["\u0275did"](407,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](408,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](409,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](412,671744,[["currentOcupation",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](414,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Empresario/a o profesional con asalariados "])),(t()(),r["\u0275eld"](416,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](417,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](418,0,null,null,8,"input",[["class","radio"],["id","r2"],["name","currentOcupation"],["required",""],["type","radio"],["value","Empresario/a o trabajador/a independiente sin asalariados"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,419)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,419).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,419)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,419)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,420).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,420).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.currentOcupation=n)&&i),i},null,null)),r["\u0275did"](419,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](420,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](421,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](424,671744,[["currentOcupation",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](426,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Empresario/a o trabajador/a independiente sin asalariados "])),(t()(),r["\u0275eld"](428,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](429,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](430,0,null,null,8,"input",[["class","radio"],["id","r3"],["name","currentOcupation"],["required",""],["type","radio"],["value","Asalariado sector privado"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,431)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,431).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,431)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,431)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,432).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,432).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.currentOcupation=n)&&i),i},null,null)),r["\u0275did"](431,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](432,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](433,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](436,671744,[["currentOcupation",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](438,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Asalariado sector privado "])),(t()(),r["\u0275eld"](440,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](441,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](442,0,null,null,8,"input",[["class","radio"],["id","r4"],["name","currentOcupation"],["required",""],["type","radio"],["value","Asalariado sector publico"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,443)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,443).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,443)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,443)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,444).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,444).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.currentOcupation=n)&&i),i},null,null)),r["\u0275did"](443,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](444,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](445,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](448,671744,[["currentOcupation",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](450,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Asalariado sector p\xfablico "])),(t()(),r["\u0275eld"](452,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](453,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](454,0,null,null,8,"input",[["class","radio"],["id","r5"],["name","currentOcupation"],["required",""],["type","radio"],["value","Ama de casa"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,455)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,455).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,455)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,455)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,456).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,456).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.currentOcupation=n)&&i),i},null,null)),r["\u0275did"](455,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](456,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](457,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](460,671744,[["currentOcupation",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](462,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Ama de casa "])),(t()(),r["\u0275eld"](464,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](465,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](466,0,null,null,8,"input",[["class","radio"],["id","r6"],["name","currentOcupation"],["required",""],["type","radio"],["value","Estudiante"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,467)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,467).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,467)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,467)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,468).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,468).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.currentOcupation=n)&&i),i},null,null)),r["\u0275did"](467,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](468,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](469,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](472,671744,[["currentOcupation",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](474,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Estudiante "])),(t()(),r["\u0275eld"](476,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](477,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](478,0,null,null,8,"input",[["class","radio"],["id","r7"],["name","currentOcupation"],["required",""],["type","radio"],["value","Jubilado"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,479)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,479).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,479)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,479)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,480).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,480).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.currentOcupation=n)&&i),i},null,null)),r["\u0275did"](479,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](480,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](481,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](484,671744,[["currentOcupation",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](486,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Jubilado "])),(t()(),r["\u0275eld"](488,0,null,null,11,"li",[["class","list__item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](489,0,null,null,10,"label",[["class","label--radio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](490,0,null,null,8,"input",[["class","radio"],["id","r8"],["name","currentOcupation"],["required",""],["type","radio"],["value","Desempleado"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,491)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,491).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,491)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,491)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,492).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,492).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.currentOcupation=n)&&i),i},null,null)),r["\u0275did"](491,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](492,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275did"](493,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](496,671744,[["currentOcupation",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](498,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275ted"](-1,null,[" Desempleado "])),(t()(),r["\u0275eld"](500,0,null,null,1,"button",[["class","btn right"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(t()(),r["\u0275eld"](501,0,null,null,0,"i",[["class","fas fa-arrow-right"]],null,null,null,null,null))],function(t,e){var n=e.component;t(e,14,0,""),t(e,17,0,"name",n.semilla.name),t(e,28,0,"genero","hombre"),t(e,29,0,""),t(e,32,0,"genero",n.semilla.gender),t(e,40,0,"genero","mujer"),t(e,41,0,""),t(e,44,0,"genero",n.semilla.gender),t(e,52,0,"genero","otro"),t(e,53,0,""),t(e,56,0,"genero",n.semilla.gender),t(e,68,0,"age","menos18"),t(e,69,0,""),t(e,72,0,"age",n.semilla.age),t(e,80,0,"age","18-24"),t(e,81,0,""),t(e,84,0,"age",n.semilla.age),t(e,92,0,"age","25-34"),t(e,93,0,""),t(e,96,0,"age",n.semilla.age),t(e,104,0,"age","35-44"),t(e,105,0,""),t(e,108,0,"age",n.semilla.age),t(e,116,0,"age","45-54"),t(e,117,0,""),t(e,120,0,"age",n.semilla.age),t(e,128,0,"age","55-64"),t(e,129,0,""),t(e,132,0,"age",n.semilla.age),t(e,140,0,"age","65-74"),t(e,141,0,""),t(e,144,0,"age",n.semilla.age),t(e,152,0,"age","mas75"),t(e,153,0,""),t(e,156,0,"age",n.semilla.age),t(e,168,0,"martial","soltero/a"),t(e,169,0,""),t(e,172,0,"martial",n.semilla.martialStatus),t(e,180,0,"martial","casado/a"),t(e,181,0,""),t(e,184,0,"martial",n.semilla.martialStatus),t(e,192,0,"martial","divorciado/a"),t(e,193,0,""),t(e,196,0,"martial",n.semilla.martialStatus),t(e,204,0,"martial","viudo/a"),t(e,205,0,""),t(e,208,0,"martial",n.semilla.martialStatus),t(e,220,0,"education","primaria incompleta"),t(e,221,0,""),t(e,224,0,"education",n.semilla.educativeLevel),t(e,232,0,"education","primaria completa"),t(e,233,0,""),t(e,236,0,"education",n.semilla.educativeLevel),t(e,244,0,"education","secundaria incompleta"),t(e,245,0,""),t(e,248,0,"education",n.semilla.educativeLevel),t(e,256,0,"education","secundaria completa"),t(e,257,0,""),t(e,260,0,"education",n.semilla.educativeLevel),t(e,268,0,"education","universitario incompleto"),t(e,269,0,""),t(e,272,0,"education",n.semilla.educativeLevel),t(e,280,0,"education","universitario completo"),t(e,281,0,""),t(e,284,0,"education",n.semilla.educativeLevel),t(e,292,0,"education","sin formaci\xf3n"),t(e,293,0,""),t(e,296,0,"education",n.semilla.educativeLevel),t(e,308,0,"venezuelaOcupation","Empresario/a o profesional con asalariados"),t(e,309,0,""),t(e,312,0,"venezuelaOcupation",n.semilla.venezuelaOcupation),t(e,320,0,"venezuelaOcupation","Empresario/a o trabajador/a independiente sin asalariados"),t(e,321,0,""),t(e,324,0,"venezuelaOcupation",n.semilla.venezuelaOcupation),t(e,332,0,"venezuelaOcupation","Asalariado sector privado"),t(e,333,0,""),t(e,336,0,"venezuelaOcupation",n.semilla.venezuelaOcupation),t(e,344,0,"venezuelaOcupation","Asalariado sector publico"),t(e,345,0,""),t(e,348,0,"venezuelaOcupation",n.semilla.venezuelaOcupation),t(e,356,0,"venezuelaOcupation","Ama de casa"),t(e,357,0,""),t(e,360,0,"venezuelaOcupation",n.semilla.venezuelaOcupation),t(e,368,0,"venezuelaOcupation","Estudiante"),t(e,369,0,""),t(e,372,0,"venezuelaOcupation",n.semilla.venezuelaOcupation),t(e,380,0,"venezuelaOcupation","Jubilado"),t(e,381,0,""),t(e,384,0,"venezuelaOcupation",n.semilla.venezuelaOcupation),t(e,392,0,"venezuelaOcupation","Desempleado"),t(e,393,0,""),t(e,396,0,"venezuelaOcupation",n.semilla.venezuelaOcupation),t(e,408,0,"currentOcupation","Empresario/a o profesional con asalariados"),t(e,409,0,""),t(e,412,0,"currentOcupation",n.semilla.currentOcupation),t(e,420,0,"currentOcupation","Empresario/a o trabajador/a independiente sin asalariados"),t(e,421,0,""),t(e,424,0,"currentOcupation",n.semilla.currentOcupation),t(e,432,0,"currentOcupation","Asalariado sector privado"),t(e,433,0,""),t(e,436,0,"currentOcupation",n.semilla.currentOcupation),t(e,444,0,"currentOcupation","Asalariado sector publico"),t(e,445,0,""),t(e,448,0,"currentOcupation",n.semilla.currentOcupation),t(e,456,0,"currentOcupation","Ama de casa"),t(e,457,0,""),t(e,460,0,"currentOcupation",n.semilla.currentOcupation),t(e,468,0,"currentOcupation","Estudiante"),t(e,469,0,""),t(e,472,0,"currentOcupation",n.semilla.currentOcupation),t(e,480,0,"currentOcupation","Jubilado"),t(e,481,0,""),t(e,484,0,"currentOcupation",n.semilla.currentOcupation),t(e,492,0,"currentOcupation","Desempleado"),t(e,493,0,""),t(e,496,0,"currentOcupation",n.semilla.currentOcupation)},function(t,e){t(e,0,0,r["\u0275nov"](e,4).ngClassUntouched,r["\u0275nov"](e,4).ngClassTouched,r["\u0275nov"](e,4).ngClassPristine,r["\u0275nov"](e,4).ngClassDirty,r["\u0275nov"](e,4).ngClassValid,r["\u0275nov"](e,4).ngClassInvalid,r["\u0275nov"](e,4).ngClassPending),t(e,12,0,r["\u0275nov"](e,14).required?"":null,r["\u0275nov"](e,19).ngClassUntouched,r["\u0275nov"](e,19).ngClassTouched,r["\u0275nov"](e,19).ngClassPristine,r["\u0275nov"](e,19).ngClassDirty,r["\u0275nov"](e,19).ngClassValid,r["\u0275nov"](e,19).ngClassInvalid,r["\u0275nov"](e,19).ngClassPending),t(e,26,0,!0,r["\u0275nov"](e,29).required?"":null,r["\u0275nov"](e,34).ngClassUntouched,r["\u0275nov"](e,34).ngClassTouched,r["\u0275nov"](e,34).ngClassPristine,r["\u0275nov"](e,34).ngClassDirty,r["\u0275nov"](e,34).ngClassValid,r["\u0275nov"](e,34).ngClassInvalid,r["\u0275nov"](e,34).ngClassPending),t(e,38,0,r["\u0275nov"](e,41).required?"":null,r["\u0275nov"](e,46).ngClassUntouched,r["\u0275nov"](e,46).ngClassTouched,r["\u0275nov"](e,46).ngClassPristine,r["\u0275nov"](e,46).ngClassDirty,r["\u0275nov"](e,46).ngClassValid,r["\u0275nov"](e,46).ngClassInvalid,r["\u0275nov"](e,46).ngClassPending),t(e,50,0,r["\u0275nov"](e,53).required?"":null,r["\u0275nov"](e,58).ngClassUntouched,r["\u0275nov"](e,58).ngClassTouched,r["\u0275nov"](e,58).ngClassPristine,r["\u0275nov"](e,58).ngClassDirty,r["\u0275nov"](e,58).ngClassValid,r["\u0275nov"](e,58).ngClassInvalid,r["\u0275nov"](e,58).ngClassPending),t(e,66,0,r["\u0275nov"](e,69).required?"":null,r["\u0275nov"](e,74).ngClassUntouched,r["\u0275nov"](e,74).ngClassTouched,r["\u0275nov"](e,74).ngClassPristine,r["\u0275nov"](e,74).ngClassDirty,r["\u0275nov"](e,74).ngClassValid,r["\u0275nov"](e,74).ngClassInvalid,r["\u0275nov"](e,74).ngClassPending),t(e,78,0,r["\u0275nov"](e,81).required?"":null,r["\u0275nov"](e,86).ngClassUntouched,r["\u0275nov"](e,86).ngClassTouched,r["\u0275nov"](e,86).ngClassPristine,r["\u0275nov"](e,86).ngClassDirty,r["\u0275nov"](e,86).ngClassValid,r["\u0275nov"](e,86).ngClassInvalid,r["\u0275nov"](e,86).ngClassPending),t(e,90,0,r["\u0275nov"](e,93).required?"":null,r["\u0275nov"](e,98).ngClassUntouched,r["\u0275nov"](e,98).ngClassTouched,r["\u0275nov"](e,98).ngClassPristine,r["\u0275nov"](e,98).ngClassDirty,r["\u0275nov"](e,98).ngClassValid,r["\u0275nov"](e,98).ngClassInvalid,r["\u0275nov"](e,98).ngClassPending),t(e,102,0,r["\u0275nov"](e,105).required?"":null,r["\u0275nov"](e,110).ngClassUntouched,r["\u0275nov"](e,110).ngClassTouched,r["\u0275nov"](e,110).ngClassPristine,r["\u0275nov"](e,110).ngClassDirty,r["\u0275nov"](e,110).ngClassValid,r["\u0275nov"](e,110).ngClassInvalid,r["\u0275nov"](e,110).ngClassPending),t(e,114,0,r["\u0275nov"](e,117).required?"":null,r["\u0275nov"](e,122).ngClassUntouched,r["\u0275nov"](e,122).ngClassTouched,r["\u0275nov"](e,122).ngClassPristine,r["\u0275nov"](e,122).ngClassDirty,r["\u0275nov"](e,122).ngClassValid,r["\u0275nov"](e,122).ngClassInvalid,r["\u0275nov"](e,122).ngClassPending),t(e,126,0,r["\u0275nov"](e,129).required?"":null,r["\u0275nov"](e,134).ngClassUntouched,r["\u0275nov"](e,134).ngClassTouched,r["\u0275nov"](e,134).ngClassPristine,r["\u0275nov"](e,134).ngClassDirty,r["\u0275nov"](e,134).ngClassValid,r["\u0275nov"](e,134).ngClassInvalid,r["\u0275nov"](e,134).ngClassPending),t(e,138,0,r["\u0275nov"](e,141).required?"":null,r["\u0275nov"](e,146).ngClassUntouched,r["\u0275nov"](e,146).ngClassTouched,r["\u0275nov"](e,146).ngClassPristine,r["\u0275nov"](e,146).ngClassDirty,r["\u0275nov"](e,146).ngClassValid,r["\u0275nov"](e,146).ngClassInvalid,r["\u0275nov"](e,146).ngClassPending),t(e,150,0,r["\u0275nov"](e,153).required?"":null,r["\u0275nov"](e,158).ngClassUntouched,r["\u0275nov"](e,158).ngClassTouched,r["\u0275nov"](e,158).ngClassPristine,r["\u0275nov"](e,158).ngClassDirty,r["\u0275nov"](e,158).ngClassValid,r["\u0275nov"](e,158).ngClassInvalid,r["\u0275nov"](e,158).ngClassPending),t(e,166,0,r["\u0275nov"](e,169).required?"":null,r["\u0275nov"](e,174).ngClassUntouched,r["\u0275nov"](e,174).ngClassTouched,r["\u0275nov"](e,174).ngClassPristine,r["\u0275nov"](e,174).ngClassDirty,r["\u0275nov"](e,174).ngClassValid,r["\u0275nov"](e,174).ngClassInvalid,r["\u0275nov"](e,174).ngClassPending),t(e,178,0,r["\u0275nov"](e,181).required?"":null,r["\u0275nov"](e,186).ngClassUntouched,r["\u0275nov"](e,186).ngClassTouched,r["\u0275nov"](e,186).ngClassPristine,r["\u0275nov"](e,186).ngClassDirty,r["\u0275nov"](e,186).ngClassValid,r["\u0275nov"](e,186).ngClassInvalid,r["\u0275nov"](e,186).ngClassPending),t(e,190,0,r["\u0275nov"](e,193).required?"":null,r["\u0275nov"](e,198).ngClassUntouched,r["\u0275nov"](e,198).ngClassTouched,r["\u0275nov"](e,198).ngClassPristine,r["\u0275nov"](e,198).ngClassDirty,r["\u0275nov"](e,198).ngClassValid,r["\u0275nov"](e,198).ngClassInvalid,r["\u0275nov"](e,198).ngClassPending),t(e,202,0,r["\u0275nov"](e,205).required?"":null,r["\u0275nov"](e,210).ngClassUntouched,r["\u0275nov"](e,210).ngClassTouched,r["\u0275nov"](e,210).ngClassPristine,r["\u0275nov"](e,210).ngClassDirty,r["\u0275nov"](e,210).ngClassValid,r["\u0275nov"](e,210).ngClassInvalid,r["\u0275nov"](e,210).ngClassPending),t(e,218,0,r["\u0275nov"](e,221).required?"":null,r["\u0275nov"](e,226).ngClassUntouched,r["\u0275nov"](e,226).ngClassTouched,r["\u0275nov"](e,226).ngClassPristine,r["\u0275nov"](e,226).ngClassDirty,r["\u0275nov"](e,226).ngClassValid,r["\u0275nov"](e,226).ngClassInvalid,r["\u0275nov"](e,226).ngClassPending),t(e,230,0,r["\u0275nov"](e,233).required?"":null,r["\u0275nov"](e,238).ngClassUntouched,r["\u0275nov"](e,238).ngClassTouched,r["\u0275nov"](e,238).ngClassPristine,r["\u0275nov"](e,238).ngClassDirty,r["\u0275nov"](e,238).ngClassValid,r["\u0275nov"](e,238).ngClassInvalid,r["\u0275nov"](e,238).ngClassPending),t(e,242,0,r["\u0275nov"](e,245).required?"":null,r["\u0275nov"](e,250).ngClassUntouched,r["\u0275nov"](e,250).ngClassTouched,r["\u0275nov"](e,250).ngClassPristine,r["\u0275nov"](e,250).ngClassDirty,r["\u0275nov"](e,250).ngClassValid,r["\u0275nov"](e,250).ngClassInvalid,r["\u0275nov"](e,250).ngClassPending),t(e,254,0,r["\u0275nov"](e,257).required?"":null,r["\u0275nov"](e,262).ngClassUntouched,r["\u0275nov"](e,262).ngClassTouched,r["\u0275nov"](e,262).ngClassPristine,r["\u0275nov"](e,262).ngClassDirty,r["\u0275nov"](e,262).ngClassValid,r["\u0275nov"](e,262).ngClassInvalid,r["\u0275nov"](e,262).ngClassPending),t(e,266,0,r["\u0275nov"](e,269).required?"":null,r["\u0275nov"](e,274).ngClassUntouched,r["\u0275nov"](e,274).ngClassTouched,r["\u0275nov"](e,274).ngClassPristine,r["\u0275nov"](e,274).ngClassDirty,r["\u0275nov"](e,274).ngClassValid,r["\u0275nov"](e,274).ngClassInvalid,r["\u0275nov"](e,274).ngClassPending),t(e,278,0,r["\u0275nov"](e,281).required?"":null,r["\u0275nov"](e,286).ngClassUntouched,r["\u0275nov"](e,286).ngClassTouched,r["\u0275nov"](e,286).ngClassPristine,r["\u0275nov"](e,286).ngClassDirty,r["\u0275nov"](e,286).ngClassValid,r["\u0275nov"](e,286).ngClassInvalid,r["\u0275nov"](e,286).ngClassPending),t(e,290,0,r["\u0275nov"](e,293).required?"":null,r["\u0275nov"](e,298).ngClassUntouched,r["\u0275nov"](e,298).ngClassTouched,r["\u0275nov"](e,298).ngClassPristine,r["\u0275nov"](e,298).ngClassDirty,r["\u0275nov"](e,298).ngClassValid,r["\u0275nov"](e,298).ngClassInvalid,r["\u0275nov"](e,298).ngClassPending),t(e,306,0,r["\u0275nov"](e,309).required?"":null,r["\u0275nov"](e,314).ngClassUntouched,r["\u0275nov"](e,314).ngClassTouched,r["\u0275nov"](e,314).ngClassPristine,r["\u0275nov"](e,314).ngClassDirty,r["\u0275nov"](e,314).ngClassValid,r["\u0275nov"](e,314).ngClassInvalid,r["\u0275nov"](e,314).ngClassPending),t(e,318,0,r["\u0275nov"](e,321).required?"":null,r["\u0275nov"](e,326).ngClassUntouched,r["\u0275nov"](e,326).ngClassTouched,r["\u0275nov"](e,326).ngClassPristine,r["\u0275nov"](e,326).ngClassDirty,r["\u0275nov"](e,326).ngClassValid,r["\u0275nov"](e,326).ngClassInvalid,r["\u0275nov"](e,326).ngClassPending),t(e,330,0,r["\u0275nov"](e,333).required?"":null,r["\u0275nov"](e,338).ngClassUntouched,r["\u0275nov"](e,338).ngClassTouched,r["\u0275nov"](e,338).ngClassPristine,r["\u0275nov"](e,338).ngClassDirty,r["\u0275nov"](e,338).ngClassValid,r["\u0275nov"](e,338).ngClassInvalid,r["\u0275nov"](e,338).ngClassPending),t(e,342,0,r["\u0275nov"](e,345).required?"":null,r["\u0275nov"](e,350).ngClassUntouched,r["\u0275nov"](e,350).ngClassTouched,r["\u0275nov"](e,350).ngClassPristine,r["\u0275nov"](e,350).ngClassDirty,r["\u0275nov"](e,350).ngClassValid,r["\u0275nov"](e,350).ngClassInvalid,r["\u0275nov"](e,350).ngClassPending),t(e,354,0,r["\u0275nov"](e,357).required?"":null,r["\u0275nov"](e,362).ngClassUntouched,r["\u0275nov"](e,362).ngClassTouched,r["\u0275nov"](e,362).ngClassPristine,r["\u0275nov"](e,362).ngClassDirty,r["\u0275nov"](e,362).ngClassValid,r["\u0275nov"](e,362).ngClassInvalid,r["\u0275nov"](e,362).ngClassPending),t(e,366,0,r["\u0275nov"](e,369).required?"":null,r["\u0275nov"](e,374).ngClassUntouched,r["\u0275nov"](e,374).ngClassTouched,r["\u0275nov"](e,374).ngClassPristine,r["\u0275nov"](e,374).ngClassDirty,r["\u0275nov"](e,374).ngClassValid,r["\u0275nov"](e,374).ngClassInvalid,r["\u0275nov"](e,374).ngClassPending),t(e,378,0,r["\u0275nov"](e,381).required?"":null,r["\u0275nov"](e,386).ngClassUntouched,r["\u0275nov"](e,386).ngClassTouched,r["\u0275nov"](e,386).ngClassPristine,r["\u0275nov"](e,386).ngClassDirty,r["\u0275nov"](e,386).ngClassValid,r["\u0275nov"](e,386).ngClassInvalid,r["\u0275nov"](e,386).ngClassPending),t(e,390,0,r["\u0275nov"](e,393).required?"":null,r["\u0275nov"](e,398).ngClassUntouched,r["\u0275nov"](e,398).ngClassTouched,r["\u0275nov"](e,398).ngClassPristine,r["\u0275nov"](e,398).ngClassDirty,r["\u0275nov"](e,398).ngClassValid,r["\u0275nov"](e,398).ngClassInvalid,r["\u0275nov"](e,398).ngClassPending),t(e,406,0,r["\u0275nov"](e,409).required?"":null,r["\u0275nov"](e,414).ngClassUntouched,r["\u0275nov"](e,414).ngClassTouched,r["\u0275nov"](e,414).ngClassPristine,r["\u0275nov"](e,414).ngClassDirty,r["\u0275nov"](e,414).ngClassValid,r["\u0275nov"](e,414).ngClassInvalid,r["\u0275nov"](e,414).ngClassPending),t(e,418,0,r["\u0275nov"](e,421).required?"":null,r["\u0275nov"](e,426).ngClassUntouched,r["\u0275nov"](e,426).ngClassTouched,r["\u0275nov"](e,426).ngClassPristine,r["\u0275nov"](e,426).ngClassDirty,r["\u0275nov"](e,426).ngClassValid,r["\u0275nov"](e,426).ngClassInvalid,r["\u0275nov"](e,426).ngClassPending),t(e,430,0,r["\u0275nov"](e,433).required?"":null,r["\u0275nov"](e,438).ngClassUntouched,r["\u0275nov"](e,438).ngClassTouched,r["\u0275nov"](e,438).ngClassPristine,r["\u0275nov"](e,438).ngClassDirty,r["\u0275nov"](e,438).ngClassValid,r["\u0275nov"](e,438).ngClassInvalid,r["\u0275nov"](e,438).ngClassPending),t(e,442,0,r["\u0275nov"](e,445).required?"":null,r["\u0275nov"](e,450).ngClassUntouched,r["\u0275nov"](e,450).ngClassTouched,r["\u0275nov"](e,450).ngClassPristine,r["\u0275nov"](e,450).ngClassDirty,r["\u0275nov"](e,450).ngClassValid,r["\u0275nov"](e,450).ngClassInvalid,r["\u0275nov"](e,450).ngClassPending),t(e,454,0,r["\u0275nov"](e,457).required?"":null,r["\u0275nov"](e,462).ngClassUntouched,r["\u0275nov"](e,462).ngClassTouched,r["\u0275nov"](e,462).ngClassPristine,r["\u0275nov"](e,462).ngClassDirty,r["\u0275nov"](e,462).ngClassValid,r["\u0275nov"](e,462).ngClassInvalid,r["\u0275nov"](e,462).ngClassPending),t(e,466,0,r["\u0275nov"](e,469).required?"":null,r["\u0275nov"](e,474).ngClassUntouched,r["\u0275nov"](e,474).ngClassTouched,r["\u0275nov"](e,474).ngClassPristine,r["\u0275nov"](e,474).ngClassDirty,r["\u0275nov"](e,474).ngClassValid,r["\u0275nov"](e,474).ngClassInvalid,r["\u0275nov"](e,474).ngClassPending),t(e,478,0,r["\u0275nov"](e,481).required?"":null,r["\u0275nov"](e,486).ngClassUntouched,r["\u0275nov"](e,486).ngClassTouched,r["\u0275nov"](e,486).ngClassPristine,r["\u0275nov"](e,486).ngClassDirty,r["\u0275nov"](e,486).ngClassValid,r["\u0275nov"](e,486).ngClassInvalid,r["\u0275nov"](e,486).ngClassPending),t(e,490,0,r["\u0275nov"](e,493).required?"":null,r["\u0275nov"](e,498).ngClassUntouched,r["\u0275nov"](e,498).ngClassTouched,r["\u0275nov"](e,498).ngClassPristine,r["\u0275nov"](e,498).ngClassDirty,r["\u0275nov"](e,498).ngClassValid,r["\u0275nov"](e,498).ngClassInvalid,r["\u0275nov"](e,498).ngClassPending),t(e,500,0,!r["\u0275nov"](e,2).form.valid)})}var js=function(){function t(){}return t.prototype.transform=function(t){return t.slice().reverse()},t}(),zs=n("iFvi"),Vs=function(){function t(t){this.serviceSemillas=t,this.semillaChange=new r.EventEmitter,this.lat=17.760267,this.lng=-29.72925,this.style="mapbox://styles/mapbox/satellite-streets-v9",this.chev=!1,this.users=[],this.lineString=[],qi.accessToken=i.mapbox.accessToken,this.map=qi.Map}return t.prototype.ngOnInit=function(){this.initializeMap(),this.geocoder=new zs({accessToken:i.mapbox.accessToken,placeholder:"Buscar",zoom:16,flyTo:!0}),document.getElementById("geocoder").appendChild(this.geocoder.onAdd(this.map)),this.geocoder.on("result",function(t){})},t.prototype.initializeMap=function(){var t=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){t.lat=e.coords.latitude,t.lng=e.coords.longitude,t.map.flyTo({center:[t.lng,t.lat]})}),this.buildMap()},t.prototype.buildMap=function(){var t=this;this.map=new qi.Map({container:"map",style:this.style,zoom:3,center:[this.lng,this.lat]}),this.map.on("click",function(e){t.geocoding([e.lngLat.lng,e.lngLat.lat])}),this.map.on("load",function(e){t.map.addSource("linea-pintada",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),t.map.addLayer({id:"linea",type:"line",paint:{"line-color":"yellow","line-opacity":.75,"line-width":5},source:"linea-pintada",filter:["==","$type","LineString"]}),t.map.addLayer({id:"puntos",type:"circle",source:"linea-pintada",paint:{"circle-radius":6,"circle-color":"#B42222"},filter:["==","$type","Point"]})})},t.prototype.geocoding=function(t){var e=this;this.geocoder.mapboxClient.geocodeReverse({latitude:t[1],longitude:t[0]},function(n,r){try{i=(i=r).features.filter(function(t){return t.id.includes("place")})[0].place_name,e.users.push(i),e.users=e.users.slice()}catch(n){var i=r;e.users.push(i="Lat: "+t[1]+" Lon: "+t[0]),e.users=e.users.slice()}}),this.lineString.push(t),this.pintarLinea(this.lineString)},t.prototype.pintarLinea=function(t){var e=[{type:"Feature",geometry:{type:"LineString",coordinates:t}}];this.lineString.forEach(function(t){e.push({type:"Feature",geometry:{type:"Point",coordinates:t}})}),this.map.getSource("linea-pintada").setData({type:"FeatureCollection",features:e})},t.prototype.remove=function(t){this.lineString.splice(this.users.indexOf(t),1),this.pintarLinea(this.lineString),this.users.remove(t),this.users=this.users.slice()},t.prototype.search=function(){document.querySelector(".search-bar").classList.toggle("active"),document.querySelector(".busqueda").classList.toggle("active")},t.prototype.step=function(t){var e=this.serviceSemillas.arrayToGeopoints(this.lineString);this.semilla.geoInfo={id:"geopoints",type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"red","line-width":3}},this.semilla.step=t},t.prototype.chevron=function(){document.querySelector(".listed").classList.toggle("active");var t=document.getElementById("chevron");this.chev?(this.chev=!this.chev,t.classList.replace("fa-chevron-down","fa-chevron-up")):(this.chev=!this.chev,t.classList.replace("fa-chevron-up","fa-chevron-down"))},t.prototype.instructions=function(){document.querySelector(".instructions").classList.add("display-block")},t}(),Us=r["\u0275crt"]({encapsulation:0,styles:[['.contenedor[_ngcontent-%COMP%]{position:relative;height:90vh}.busqueda[_ngcontent-%COMP%]{width:10vmin;position:absolute;min-height:10vmin;top:0;transition:width .4s ease-in-out}.busqueda.active[_ngcontent-%COMP%]{width:100vw}.instructions[_ngcontent-%COMP%]{z-index:100000;height:90vh;width:100vw;background:var(--color-amarillo);display:flex;flex-direction:column;justify-content:center;flex-wrap:nowrap;position:absolute;padding:0 10vw}.display-block[_ngcontent-%COMP%]{display:none}.button[_ngcontent-%COMP%]{border:none;color:#fff;display:inline-block;text-transform:uppercase;text-decoration:none;padding:20px 50px;border-radius:3px;margin:5px;border-bottom-style:solid;border-bottom-width:3px;transition:text-shadow .3s;font-style:normal}.button[_ngcontent-%COMP%]:active{position:relative;top:1px;border-bottom-width:2px}.button[_ngcontent-%COMP%]:hover{text-shadow:2px 2px 0 rgba(0,0,0,.3)}.green[_ngcontent-%COMP%]{background-color:var(--color-verde-quem);border-color:var(--color-verde)}.search[_ngcontent-%COMP%]{width:10vmin;height:10vmin;background:var(--color-naranja);position:absolute;display:flex;justify-content:center;align-items:center}.search[_ngcontent-%COMP%]:hover{opacity:.9}.search-bar[_ngcontent-%COMP%]{position:absolute;left:10vmin;width:0;height:10vmin;background:#3e3e3e;transition:width .3s ease-in-out}.search-bar.active[_ngcontent-%COMP%]{width:100%;max-width:calc(100% - 10vmin)}.mapboxgl-ctrl-geocoder[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{background:0 0;outline:0;border:0;width:100%;height:100%;font:25px/25px helvetica;color:#fff;box-sizing:border-box;padding:0 20px}.map[_ngcontent-%COMP%]{position:absolute;right:0;width:100vw;overflow:unset;height:90vh;z-index:0}.mapboxgl-ctrl-geocoder[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}.btn[_ngcontent-%COMP%]{background:var(--color);background:var(--color-verde);z-index:1000;position:absolute;bottom:0;width:10vmin;height:10vmin;border-radius:50%;color:#fff;margin:2vh;display:flex;justify-content:center;align-items:center;font-size:3vmin}.btn.left[_ngcontent-%COMP%]{left:0}.btn.right[_ngcontent-%COMP%]{right:0}.listed[_ngcontent-%COMP%]{background:var(--color-amarillo);z-index:100;position:fixed;height:90vh;width:100vw;-webkit-transform:translateY(70vh);transform:translateY(70vh);transition:.3s ease-in-out;padding:0 15vw;overflow-y:scroll}.listed.active[_ngcontent-%COMP%]{-webkit-transform:translateY(0);transform:translateY(0)}.chevron[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;padding:1vh}.chevron[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}@media screen and (min-width:800px){.listed[_ngcontent-%COMP%]{height:90vh;-webkit-transform:translateY(80vh);transform:translateY(80vh)}.listed.active[_ngcontent-%COMP%]{-webkit-transform:translateY(45vh);transform:translateY(45vh)}.timeline[_ngcontent-%COMP%]{height:45vh}.btn[_ngcontent-%COMP%]{height:6vmin;width:6vmin}}.timeline[_ngcontent-%COMP%]{line-height:1.4em;list-style:none;margin:0;padding:0;width:100%;overflow-y:scroll}.timeline[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .timeline[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .timeline[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .timeline[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .timeline[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .timeline[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{line-height:inherit}.timeline-item[_ngcontent-%COMP%]{padding-left:40px;position:relative}.timeline-item[_ngcontent-%COMP%]:last-child{padding-bottom:0}.timeline-info[_ngcontent-%COMP%]{font-size:12px;font-weight:700;letter-spacing:3px;margin:0 0 .5em;text-transform:uppercase;white-space:nowrap}.timeline-marker[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;width:15px}.timeline-marker[_ngcontent-%COMP%]:before{background:#ff6b6b;border:3px solid transparent;border-radius:100%;content:"";display:block;height:15px;position:absolute;top:4px;left:0;width:15px;transition:background .3s ease-in-out,border .3s ease-in-out}.timeline-marker[_ngcontent-%COMP%]:after{content:"";width:3px;background:#ccd5db;display:block;position:absolute;top:24px;bottom:0;left:6px}.timeline-item[_ngcontent-%COMP%]:last-child   .timeline-marker[_ngcontent-%COMP%]:after{content:none}.timeline-item[_ngcontent-%COMP%]:not(.period):hover   .timeline-marker[_ngcontent-%COMP%]:before{background:0 0;border:3px solid #ff6b6b}.timeline-content[_ngcontent-%COMP%]{padding-bottom:40px}.timeline-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.period[_ngcontent-%COMP%]{padding:0}.period[_ngcontent-%COMP%]   .timeline-info[_ngcontent-%COMP%]{display:none}.period[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]:before{background:0 0;content:"";width:15px;height:auto;border:none;border-radius:0;top:0;bottom:30px;position:absolute;border-top:3px solid #ccd5db;border-bottom:3px solid #ccd5db}.period[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]:after{content:"";height:32px;top:auto}.period[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{padding:40px 0 70px}.period[_ngcontent-%COMP%]   .timeline-title[_ngcontent-%COMP%]{margin:0}@media (min-width:768px){.timeline-centered[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%], .timeline-split[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]{display:table}.timeline-centered[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%], .timeline-split[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]{display:table-row;padding:0}.timeline-centered[_ngcontent-%COMP%]   .period[_ngcontent-%COMP%]   .timeline-info[_ngcontent-%COMP%], .timeline-centered[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%], .timeline-centered[_ngcontent-%COMP%]   .timeline-info[_ngcontent-%COMP%], .timeline-centered[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%], .timeline-split[_ngcontent-%COMP%]   .period[_ngcontent-%COMP%]   .timeline-info[_ngcontent-%COMP%], .timeline-split[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%], .timeline-split[_ngcontent-%COMP%]   .timeline-info[_ngcontent-%COMP%], .timeline-split[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]{display:table-cell;vertical-align:top}.timeline-centered[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%], .timeline-split[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]{position:relative}.timeline-centered[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%], .timeline-split[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{padding-left:30px}.timeline-centered[_ngcontent-%COMP%]   .timeline-info[_ngcontent-%COMP%], .timeline-split[_ngcontent-%COMP%]   .timeline-info[_ngcontent-%COMP%]{padding-right:30px}.timeline-centered[_ngcontent-%COMP%]   .period[_ngcontent-%COMP%]   .timeline-title[_ngcontent-%COMP%], .timeline-split[_ngcontent-%COMP%]   .period[_ngcontent-%COMP%]   .timeline-title[_ngcontent-%COMP%]{position:relative;left:-45px}}@media (min-width:992px){.timeline-centered[_ngcontent-%COMP%], .timeline-centered[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%], .timeline-centered[_ngcontent-%COMP%]   .timeline-info[_ngcontent-%COMP%], .timeline-centered[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%], .timeline-centered[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]{display:block;margin:0;padding:0}.timeline-centered[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]{padding-bottom:40px;overflow:hidden}.timeline-centered[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]{position:absolute;left:50%;margin-left:-7.5px}.timeline-centered[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%], .timeline-centered[_ngcontent-%COMP%]   .timeline-info[_ngcontent-%COMP%]{width:50%}.timeline-centered[_ngcontent-%COMP%] > .timeline-item[_ngcontent-%COMP%]:nth-child(odd)   .timeline-info[_ngcontent-%COMP%]{float:left;text-align:right;padding-right:30px}.timeline-centered[_ngcontent-%COMP%] > .timeline-item[_ngcontent-%COMP%]:nth-child(even)   .timeline-info[_ngcontent-%COMP%], .timeline-centered[_ngcontent-%COMP%] > .timeline-item[_ngcontent-%COMP%]:nth-child(odd)   .timeline-content[_ngcontent-%COMP%]{float:right;text-align:left;padding-left:30px}.timeline-centered[_ngcontent-%COMP%] > .timeline-item[_ngcontent-%COMP%]:nth-child(even)   .timeline-content[_ngcontent-%COMP%]{float:left;text-align:right;padding-right:30px}.timeline-centered[_ngcontent-%COMP%] > .timeline-item.period[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{float:none;padding:0;width:100%;text-align:center}.timeline-centered[_ngcontent-%COMP%]   .timeline-item.period[_ngcontent-%COMP%]{padding:50px 0 90px}.timeline-centered[_ngcontent-%COMP%]   .period[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]:after{height:30px;bottom:0;top:auto}.timeline-centered[_ngcontent-%COMP%]   .period[_ngcontent-%COMP%]   .timeline-title[_ngcontent-%COMP%]{left:auto}}.marker-outline[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]:before{background:0 0;border-color:#ff6b6b}.marker-outline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:hover   .timeline-marker[_ngcontent-%COMP%]:before{background:#ff6b6b}']],data:{}});function qs(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,6,"li",[["class","timeline-item"]],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,0,"div",[["class","timeline-marker"]],null,null,null,null,null)),(t()(),r["\u0275eld"](2,0,null,null,4,"div",[["class","timeline-content"]],null,null,null,null,null)),(t()(),r["\u0275eld"](3,0,null,null,1,"h3",[["class","timeline-title"]],null,null,null,null,null)),(t()(),r["\u0275ted"](4,null,["",""])),(t()(),r["\u0275eld"](5,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275eld"](6,0,null,null,0,"i",[["class","fas fa-times"],["style","color:red; font-size: 1.4em;"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.remove(t.context.$implicit)&&r),r},null,null))],null,function(t,e){t(e,4,0,e.context.$implicit)})}function Gs(t){return r["\u0275vid"](0,[r["\u0275pid"](0,js,[]),(t()(),r["\u0275eld"](1,0,null,null,30,"div",[["class","contenedor"]],null,null,null,null,null)),(t()(),r["\u0275eld"](2,0,null,null,13,"div",[["class","instructions "]],null,null,null,null,null)),(t()(),r["\u0275eld"](3,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Cada una de las etapas en nuestros caminos nos marc\xf3 y contribuy\xf3 a quien somos hoy en d\xeda. Con esta aplicaci\xf3n, puedes reproducir tu ruta de migraci\xf3n en un mapa global."])),(t()(),r["\u0275eld"](5,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" Instrucciones"])),(t()(),r["\u0275eld"](7,0,null,null,6,"ul",[],null,null,null,null,null)),(t()(),r["\u0275eld"](8,0,null,null,1,"li",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["1"])),(t()(),r["\u0275eld"](10,0,null,null,1,"li",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["2"])),(t()(),r["\u0275eld"](12,0,null,null,1,"li",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["3"])),(t()(),r["\u0275eld"](14,0,null,null,1,"button",[["class","button green"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.instructions()&&r),r},null,null)),(t()(),r["\u0275ted"](-1,null,["Ll\xe9vame al mapa"])),(t()(),r["\u0275eld"](16,0,null,null,0,"div",[["class","map"],["id","map"]],null,null,null,null,null)),(t()(),r["\u0275eld"](17,0,null,null,3,"div",[["class","busqueda"]],null,null,null,null,null)),(t()(),r["\u0275eld"](18,0,null,null,0,"div",[["class","search-bar"],["id","geocoder"]],null,null,null,null,null)),(t()(),r["\u0275eld"](19,0,null,null,1,"div",[["class","search"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.search()&&r),r},null,null)),(t()(),r["\u0275eld"](20,0,null,null,0,"i",[["class","fas fa-search"]],null,null,null,null,null)),(t()(),r["\u0275eld"](21,0,null,null,6,"div",[["class","listed"]],null,null,null,null,null)),(t()(),r["\u0275eld"](22,0,null,null,1,"div",[["class","chevron "]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.chevron()&&r),r},null,null)),(t()(),r["\u0275eld"](23,0,null,null,0,"i",[["class","fas fa-chevron-up bounce"],["id","chevron"]],null,null,null,null,null)),(t()(),r["\u0275eld"](24,0,null,null,3,"ul",[["class","timeline"]],null,null,null,null,null)),(t()(),r["\u0275and"](16777216,null,null,2,null,qs)),r["\u0275did"](26,278528,null,0,S.NgForOf,[r.ViewContainerRef,r.TemplateRef,r.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),r["\u0275ppd"](27,1),(t()(),r["\u0275eld"](28,0,null,null,1,"div",[["class","btn left"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.step(1)&&r),r},null,null)),(t()(),r["\u0275eld"](29,0,null,null,0,"i",[["class","fas fa-arrow-left"]],null,null,null,null,null)),(t()(),r["\u0275eld"](30,0,null,null,1,"div",[["class","btn right"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.step(3)&&r),r},null,null)),(t()(),r["\u0275eld"](31,0,null,null,0,"i",[["class","fas fa-arrow-right"]],null,null,null,null,null))],function(t,e){var n=e.component;t(e,26,0,r["\u0275unv"](e,26,0,t(e,27,0,r["\u0275nov"](e,0),n.users)))},null)}var Hs=new O(A),Ws=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new Ks(t,this.dueTime,this.scheduler))},t}(),Ks=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return o.c(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Xs,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(y.a);function Xs(t){t.debouncedNext()}var Qs=function(){function t(){this.debounceTime=500,this.debounceClick=new r.EventEmitter,this.clicks=new J.a}return t.prototype.ngOnInit=function(){var t,e,n=this;this.subscription=this.clicks.pipe((t=this.debounceTime,void 0===e&&(e=Hs),function(n){return n.lift(new Ws(t,e))})).subscribe(function(t){return n.debounceClick.emit(t)})},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.clickEvent=function(t){t.preventDefault(),t.stopPropagation(),this.clicks.next(t)},t}(),Zs=n("qe5e"),Ys=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new Js(t,this.callback))},t}(),Js=function(t){function e(e,n){var r=t.call(this,e)||this;return r.add(new T.a(n)),r}return o.c(e,t),e}(y.a),$s=function(){function t(t,e){this.semillasService=t,this.storage=e,this.semillaChange=new r.EventEmitter,this.timers=[],this.advance=[!1,!1,!1,!1],this.blobs=[]}return t.prototype.ngOnInit=function(){this.semilla.testimonialType="audio",this.semilla.audios=["","","",""]},t.prototype.ngOnDestroy=function(){this.isRecording&&this.stop()},t.prototype.overlay=function(){document.querySelector(".overlay").classList.add("display-none")},t.prototype.decider=function(){document.getElementById("icon").classList.contains("fa-spinner")||(this.isRecording?this.isRecording&&(document.getElementById("icon").classList.remove("fa-stop"),document.getElementById("decider").classList.remove("stop"),document.getElementById("icon").classList.add("fa-spinner","fa-spin"),document.getElementById("decider").classList.add("record"),this.stop()):(document.getElementById("icon").classList.remove("fa-microphone"),document.getElementById("icon").classList.add("fa-stop"),document.getElementById("decider").classList.remove("record"),document.getElementById("decider").classList.add("stop"),this.record()))},t.prototype.record=function(){document.getElementById("icon").classList.contains("fa-redo")&&this.blobs.pop(),this.isRecording=!0,navigator.mediaDevices.getUserMedia({video:!1,audio:!0}).then(this.successCallback.bind(this),this.errorCallback.bind(this))},t.prototype.stop=function(){var t=this;this.isRecording=!1,this.recordRTC.stopRecording(function(){t.processAudio()}),this.stream.getAudioTracks().forEach(function(t){return t.stop()}),document.getElementById("audio").className="",document.getElementById("audio").classList.add("c100"),clearInterval(this.interval)},t.prototype.successCallback=function(t){var e=this,n={recorderType:Zs.StereoAudioRecorder,disableLogs:!0};this.stream=t,this.recordRTC=Zs(t,n),this.recordRTC.startRecording();var r=0,i=new Date,o=new Date(i.getTime()+3e5);this.interval=setInterval(function(){++r>=300&&(clearInterval(e.interval),e.stop()),e.timing(o)},1001)},t.prototype.timing=function(t){var e=document.getElementById("audio"),n=new Date(t.getTime()-(new Date).getTime());e.classList.remove("p"+(99-Math.floor(n.getTime()/1e3/3))),e.classList.add("p"+(100-Math.floor(n.getTime()/1e3/3)));var r=Math.floor(n.getTime()/1e3%60)<10?"0"+Math.floor(n.getTime()/1e3%60):Math.floor(n.getTime()/1e3%60),i=Math.floor(n.getTime()/1e3/60%60);this.timers[0]=i+":"+r},t.prototype.errorCallback=function(){},t.prototype.processAudio=function(){document.getElementById("icon").classList.remove("fa-spinner","fa-spin"),document.getElementById("icon").classList.add("fa-redo");var t=this.recordRTC.getBlob();document.getElementById("player").src=URL.createObjectURL(t),this.blobs.push(t)},t.prototype.upload=function(){var t=this;this.advance[3]=!0;var e=0;this.blobs.forEach(function(n,r){var i,o=t.semilla._id+"/audio"+r,a=t.semillasService.uploadFile(o,n),s=t.storage.ref(o);a.snapshotChanges().pipe((i=function(){s.getDownloadURL().subscribe(function(n){t.semilla.audios[r]=n,++e==t.blobs.length&&t.crearSemilla()})},function(t){return t.lift(new Ys(i))})).subscribe()})},t.prototype.crearSemilla=function(){this.semilla.step=4,"audio"==this.semilla.testimonialType?this.semilla.textos=null:this.semilla.audios=null,this.semillasService.anadirSemilla(this.semilla)},t}(),tu=r["\u0275crt"]({encapsulation:0,styles:[[".recording[_ngcontent-%COMP%]{height:90vh;overflow-y:scroll}.stop[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#e84c3d}.audio[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center;flex-direction:column;width:100vw;min-height:90vh;padding:10vw}.overlay[_ngcontent-%COMP%]{z-index:100000;height:90vh;width:100vw;background:var(--color-amarillo);display:flex;flex-direction:column;justify-content:center;flex-wrap:nowrap;position:absolute;padding:0 10vw}.button[_ngcontent-%COMP%]{border:none;color:#fff;display:inline-block;text-transform:uppercase;text-decoration:none;padding:20px 50px;border-radius:3px;margin:5px;border-bottom-style:solid;border-bottom-width:3px;transition:text-shadow .3s;font-style:normal}.button[_ngcontent-%COMP%]:active{position:relative;top:1px;border-bottom-width:2px}.button[_ngcontent-%COMP%]:hover{text-shadow:2px 2px 0 rgba(0,0,0,.3)}.green[_ngcontent-%COMP%]{background-color:var(--color-verde-quem);border-color:var(--color-verde)}.display-none[_ngcontent-%COMP%]{display:none}.button[_ngcontent-%COMP%]:disabled{background:#798188;border-color:#8a9299}.textarea[_ngcontent-%COMP%]{position:relative;width:100%;max-width:80vw;border-radius:2px;border:none;color:var(--color-blanco);padding:1vh;background:#c7af61}textarea[_ngcontent-%COMP%]{border-style:none;background:0 0;outline:0;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;resize:none}textarea[_ngcontent-%COMP%]:-webkit-autofill, textarea[_ngcontent-%COMP%]:-webkit-autofill:active, textarea[_ngcontent-%COMP%]:-webkit-autofill:focus, textarea[_ngcontent-%COMP%]:-webkit-autofill:hover{-webkit-box-shadow:0 0 0 30px var(--color-amarillo-quem) inset!important;-webkit-text-fill-color:#fff!important}textarea[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--color-blanco)}textarea[_ngcontent-%COMP%]:-ms-input-placeholder{color:var(--color-blanco)}textarea[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--color-blanco)}textarea[_ngcontent-%COMP%]::placeholder{color:var(--color-blanco)}.textos[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;justify-content:center;padding:0 10vw}.textos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2vh 0}.textos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:4vh 0}"],['.c100.p100[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p51[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p52[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p53[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p54[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p55[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p56[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p57[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p58[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p59[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p60[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p61[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p62[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p63[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p64[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p65[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p66[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p67[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p68[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p69[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p70[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p71[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p72[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p73[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p74[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p75[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p76[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p77[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p78[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p79[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p80[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p81[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p82[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p83[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p84[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p85[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p86[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p87[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p88[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p89[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p90[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p91[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p92[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p93[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p94[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p95[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p96[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p97[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p98[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .c100.p99[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%], .rect-auto[_ngcontent-%COMP%]{clip:rect(auto,auto,auto,auto)}.c100[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%], .c100.p100[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p51[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p52[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p53[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p54[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p55[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p56[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p57[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p58[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p59[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p60[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p61[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p62[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p63[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p64[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p65[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p66[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p67[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p68[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p69[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p70[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p71[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p72[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p73[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p74[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p75[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p76[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p77[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p78[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p79[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p80[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p81[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p82[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p83[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p84[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p85[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p86[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p87[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p88[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p89[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p90[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p91[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p92[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p93[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p94[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p95[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p96[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p97[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p98[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p99[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .pie[_ngcontent-%COMP%]{position:absolute;border:.08em solid var(--color-verde);width:.84em;height:.84em;clip:rect(0,.5em,1em,0);border-radius:50%;-webkit-transform:rotate(0);transform:rotate(0)}.c100.p100[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p100[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p51[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p51[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p52[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p52[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p53[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p53[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p54[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p54[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p55[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p55[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p56[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p56[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p57[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p57[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p58[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p58[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p59[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p59[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p60[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p60[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p61[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p61[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p62[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p62[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p63[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p63[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p64[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p64[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p65[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p65[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p66[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p66[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p67[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p67[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p68[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p68[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p69[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p69[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p70[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p70[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p71[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p71[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p72[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p72[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p73[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p73[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p74[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p74[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p75[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p75[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p76[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p76[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p77[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p77[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p78[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p78[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p79[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p79[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p80[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p80[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p81[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p81[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p82[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p82[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p83[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p83[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p84[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p84[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p85[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p85[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p86[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p86[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p87[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p87[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p88[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p88[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p89[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p89[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p90[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p90[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p91[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p91[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p92[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p92[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p93[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p93[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p94[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p94[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p95[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p95[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p96[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p96[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p97[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p97[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p98[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p98[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .c100.p99[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:after, .c100.p99[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%], .pie-fill[_ngcontent-%COMP%]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.c100[_ngcontent-%COMP%]{position:relative;font-size:120px;width:1em;height:1em;border-radius:50%;float:left;margin:0 .1em .1em 0;background-color:transparent}.c100[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .c100[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after, .c100[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:before{box-sizing:content-box}.c100.center[_ngcontent-%COMP%]{float:none;margin:0 auto}.c100.big[_ngcontent-%COMP%]{font-size:240px}.c100.small[_ngcontent-%COMP%]{font-size:80px}.c100[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:absolute;width:100%;z-index:1;left:0;top:0;height:100%;font-size:.2em;color:#000;display:flex;justify-content:center;align-items:center;text-align:center;white-space:nowrap;transition-property:all;transition-duration:.2s;transition-timing-function:ease-out}.c100[_ngcontent-%COMP%]:after{position:absolute;top:.08em;left:.08em;display:block;content:" ";border-radius:50%;background-color:#f5f5f5;width:.84em;height:.84em;transition-property:all;transition-duration:.2s;transition-timing-function:ease-in}.c100[_ngcontent-%COMP%]   .slice[_ngcontent-%COMP%]{position:absolute;width:1em;height:1em;clip:rect(0,1em,1em,.5em)}.c100.p1[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(3.6deg);transform:rotate(3.6deg)}.c100.p2[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(7.2deg);transform:rotate(7.2deg)}.c100.p3[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(10.8deg);transform:rotate(10.8deg)}.c100.p4[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(14.4deg);transform:rotate(14.4deg)}.c100.p5[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(18deg);transform:rotate(18deg)}.c100.p6[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(21.6deg);transform:rotate(21.6deg)}.c100.p7[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(25.2deg);transform:rotate(25.2deg)}.c100.p8[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(28.8deg);transform:rotate(28.8deg)}.c100.p9[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(32.4deg);transform:rotate(32.4deg)}.c100.p10[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(36deg);transform:rotate(36deg)}.c100.p11[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(39.6deg);transform:rotate(39.6deg)}.c100.p12[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(43.2deg);transform:rotate(43.2deg)}.c100.p13[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(46.800000000000004deg);transform:rotate(46.800000000000004deg)}.c100.p14[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(50.4deg);transform:rotate(50.4deg)}.c100.p15[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(54deg);transform:rotate(54deg)}.c100.p16[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(57.6deg);transform:rotate(57.6deg)}.c100.p17[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(61.2deg);transform:rotate(61.2deg)}.c100.p18[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(64.8deg);transform:rotate(64.8deg)}.c100.p19[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(68.4deg);transform:rotate(68.4deg)}.c100.p20[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(72deg);transform:rotate(72deg)}.c100.p21[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(75.60000000000001deg);transform:rotate(75.60000000000001deg)}.c100.p22[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(79.2deg);transform:rotate(79.2deg)}.c100.p23[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(82.8deg);transform:rotate(82.8deg)}.c100.p24[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(86.4deg);transform:rotate(86.4deg)}.c100.p25[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.c100.p26[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(93.60000000000001deg);transform:rotate(93.60000000000001deg)}.c100.p27[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(97.2deg);transform:rotate(97.2deg)}.c100.p28[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(100.8deg);transform:rotate(100.8deg)}.c100.p29[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(104.4deg);transform:rotate(104.4deg)}.c100.p30[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(108deg);transform:rotate(108deg)}.c100.p31[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(111.60000000000001deg);transform:rotate(111.60000000000001deg)}.c100.p32[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(115.2deg);transform:rotate(115.2deg)}.c100.p33[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(118.8deg);transform:rotate(118.8deg)}.c100.p34[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(122.4deg);transform:rotate(122.4deg)}.c100.p35[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(126deg);transform:rotate(126deg)}.c100.p36[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(129.6deg);transform:rotate(129.6deg)}.c100.p37[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(133.20000000000002deg);transform:rotate(133.20000000000002deg)}.c100.p38[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(136.8deg);transform:rotate(136.8deg)}.c100.p39[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(140.4deg);transform:rotate(140.4deg)}.c100.p40[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(144deg);transform:rotate(144deg)}.c100.p41[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(147.6deg);transform:rotate(147.6deg)}.c100.p42[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(151.20000000000002deg);transform:rotate(151.20000000000002deg)}.c100.p43[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(154.8deg);transform:rotate(154.8deg)}.c100.p44[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(158.4deg);transform:rotate(158.4deg)}.c100.p45[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(162deg);transform:rotate(162deg)}.c100.p46[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(165.6deg);transform:rotate(165.6deg)}.c100.p47[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(169.20000000000002deg);transform:rotate(169.20000000000002deg)}.c100.p48[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(172.8deg);transform:rotate(172.8deg)}.c100.p49[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(176.4deg);transform:rotate(176.4deg)}.c100.p50[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.c100.p51[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(183.6deg);transform:rotate(183.6deg)}.c100.p52[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(187.20000000000002deg);transform:rotate(187.20000000000002deg)}.c100.p53[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(190.8deg);transform:rotate(190.8deg)}.c100.p54[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(194.4deg);transform:rotate(194.4deg)}.c100.p55[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(198deg);transform:rotate(198deg)}.c100.p56[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(201.6deg);transform:rotate(201.6deg)}.c100.p57[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(205.20000000000002deg);transform:rotate(205.20000000000002deg)}.c100.p58[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(208.8deg);transform:rotate(208.8deg)}.c100.p59[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(212.4deg);transform:rotate(212.4deg)}.c100.p60[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(216deg);transform:rotate(216deg)}.c100.p61[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(219.6deg);transform:rotate(219.6deg)}.c100.p62[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(223.20000000000002deg);transform:rotate(223.20000000000002deg)}.c100.p63[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(226.8deg);transform:rotate(226.8deg)}.c100.p64[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(230.4deg);transform:rotate(230.4deg)}.c100.p65[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(234deg);transform:rotate(234deg)}.c100.p66[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(237.6deg);transform:rotate(237.6deg)}.c100.p67[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(241.20000000000002deg);transform:rotate(241.20000000000002deg)}.c100.p68[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(244.8deg);transform:rotate(244.8deg)}.c100.p69[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(248.4deg);transform:rotate(248.4deg)}.c100.p70[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(252deg);transform:rotate(252deg)}.c100.p71[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(255.6deg);transform:rotate(255.6deg)}.c100.p72[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(259.2deg);transform:rotate(259.2deg)}.c100.p73[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(262.8deg);transform:rotate(262.8deg)}.c100.p74[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(266.40000000000003deg);transform:rotate(266.40000000000003deg)}.c100.p75[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.c100.p76[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(273.6deg);transform:rotate(273.6deg)}.c100.p77[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(277.2deg);transform:rotate(277.2deg)}.c100.p78[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(280.8deg);transform:rotate(280.8deg)}.c100.p79[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(284.40000000000003deg);transform:rotate(284.40000000000003deg)}.c100.p80[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(288deg);transform:rotate(288deg)}.c100.p81[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(291.6deg);transform:rotate(291.6deg)}.c100.p82[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(295.2deg);transform:rotate(295.2deg)}.c100.p83[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(298.8deg);transform:rotate(298.8deg)}.c100.p84[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(302.40000000000003deg);transform:rotate(302.40000000000003deg)}.c100.p85[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(306deg);transform:rotate(306deg)}.c100.p86[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(309.6deg);transform:rotate(309.6deg)}.c100.p87[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(313.2deg);transform:rotate(313.2deg)}.c100.p88[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(316.8deg);transform:rotate(316.8deg)}.c100.p89[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(320.40000000000003deg);transform:rotate(320.40000000000003deg)}.c100.p90[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(324deg);transform:rotate(324deg)}.c100.p91[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(327.6deg);transform:rotate(327.6deg)}.c100.p92[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(331.2deg);transform:rotate(331.2deg)}.c100.p93[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(334.8deg);transform:rotate(334.8deg)}.c100.p94[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(338.40000000000003deg);transform:rotate(338.40000000000003deg)}.c100.p95[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(342deg);transform:rotate(342deg)}.c100.p96[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(345.6deg);transform:rotate(345.6deg)}.c100.p97[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(349.2deg);transform:rotate(349.2deg)}.c100.p98[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(352.8deg);transform:rotate(352.8deg)}.c100.p99[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(356.40000000000003deg);transform:rotate(356.40000000000003deg)}.c100.p100[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{-webkit-transform:rotate(360deg);transform:rotate(360deg)}.c100.dark[_ngcontent-%COMP%]{background-color:transparent}.c100.dark[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%], .c100.dark[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{border-color:#c6ff00!important}.c100.dark[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:transparent}.c100.dark[_ngcontent-%COMP%]:after{background-color:transparent}.c100.dark[_ngcontent-%COMP%]:hover > span[_ngcontent-%COMP%]{color:#c6ff00}.c100.green[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%], .c100.green[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{border-color:#4db53c!important}.c100.green[_ngcontent-%COMP%]:hover > span[_ngcontent-%COMP%]{color:#4db53c}.c100.green.dark[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%], .c100.green.dark[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{border-color:#5fd400!important}.c100.green.dark[_ngcontent-%COMP%]:hover > span[_ngcontent-%COMP%]{color:#5fd400}.c100.orange[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%], .c100.orange[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{border-color:#dd9d22!important}.c100.orange[_ngcontent-%COMP%]:hover > span[_ngcontent-%COMP%]{color:#dd9d22}.c100.orange.dark[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%], .c100.orange.dark[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{border-color:#e08833!important}.c100.orange.dark[_ngcontent-%COMP%]:hover > span[_ngcontent-%COMP%]{color:#e08833}']],data:{}});function eu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Te recomendamos esta opci\xf3n si tienes una buena conexi\xf3n a internet."]))],null,null)}function nu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"p",[["style","font-size:0.7em"]],null,null,null,null,null)),(t()(),r["\u0275ted"](1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.timers[0])})}function ru(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,16,"div",[["class","audio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["1. Salir. \xbfCu\xe1ndo saliste y como tomaste la decisi\xf3n? Cuenta sobre las razones de tu salida, quien y que tuviste que dejar atr\xe1s y como te preparaste para la salida."])),(t()(),r["\u0275eld"](3,0,null,null,9,"div",[["class","c100"],["id","audio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](4,0,null,null,5,"span",[["id","hola"]],null,null,null,null,null)),(t()(),r["\u0275eld"](5,0,null,null,4,"span",[["appDebounceClick",""],["class","inner record"],["id","decider"]],null,[[null,"debounceClick"],[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==r["\u0275nov"](t,6).clickEvent(n)&&i),"debounceClick"===e&&(i=!1!==o.decider()&&i),i},null,null)),r["\u0275did"](6,212992,null,0,Qs,[],null,{debounceClick:"debounceClick"}),(t()(),r["\u0275eld"](7,0,null,null,0,"i",[["class","fas fa-microphone"],["id","icon"]],null,null,null,null,null)),(t()(),r["\u0275and"](16777216,null,null,1,null,nu)),r["\u0275did"](9,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275eld"](10,0,null,null,2,"div",[["class","slice"]],null,null,null,null,null)),(t()(),r["\u0275eld"](11,0,null,null,0,"div",[["class","bar"]],null,null,null,null,null)),(t()(),r["\u0275eld"](12,0,null,null,0,"div",[["class","fill"]],null,null,null,null,null)),(t()(),r["\u0275eld"](13,0,null,null,1,"audio",[["controls","controls"],["id","player"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["TAG"])),(t()(),r["\u0275eld"](15,0,null,null,1,"button",[["class","button green"]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=0!=(t.component.advance[0]=!0)&&r),r},null,null)),(t()(),r["\u0275ted"](-1,null,["siguiente"]))],function(t,e){var n=e.component;t(e,6,0),t(e,9,0,n.isRecording)},function(t,e){t(e,15,0,void 0===e.component.blobs[0])})}function iu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"p",[["style","font-size:0.7em"]],null,null,null,null,null)),(t()(),r["\u0275ted"](1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.timers[0])})}function ou(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,16,"div",[["class","audio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["2. En camino. \xbfCu\xe1les fueron tus experiencias y dificultades en el camino? Cuenta sobre los desaf\xedos pr\xe1cticos y personales que tuviste que afrontar en el camino. "])),(t()(),r["\u0275eld"](3,0,null,null,9,"div",[["class","c100"],["id","audio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](4,0,null,null,5,"span",[["id","hola"]],null,null,null,null,null)),(t()(),r["\u0275eld"](5,0,null,null,4,"span",[["appDebounceClick",""],["class","inner record"],["id","decider"]],null,[[null,"debounceClick"],[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==r["\u0275nov"](t,6).clickEvent(n)&&i),"debounceClick"===e&&(i=!1!==o.decider()&&i),i},null,null)),r["\u0275did"](6,212992,null,0,Qs,[],null,{debounceClick:"debounceClick"}),(t()(),r["\u0275eld"](7,0,null,null,0,"i",[["class","fas fa-microphone"],["id","icon"]],null,null,null,null,null)),(t()(),r["\u0275and"](16777216,null,null,1,null,iu)),r["\u0275did"](9,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275eld"](10,0,null,null,2,"div",[["class","slice"]],null,null,null,null,null)),(t()(),r["\u0275eld"](11,0,null,null,0,"div",[["class","bar"]],null,null,null,null,null)),(t()(),r["\u0275eld"](12,0,null,null,0,"div",[["class","fill"]],null,null,null,null,null)),(t()(),r["\u0275eld"](13,0,null,null,1,"audio",[["controls","controls"],["id","player"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["TAG"])),(t()(),r["\u0275eld"](15,0,null,null,1,"button",[["class","button green"]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=0!=(t.component.advance[1]=!0)&&r),r},null,null)),(t()(),r["\u0275ted"](-1,null,["siguiente"]))],function(t,e){var n=e.component;t(e,6,0),t(e,9,0,n.isRecording)},function(t,e){t(e,15,0,void 0===e.component.blobs[1])})}function au(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"p",[["style","font-size:0.7em"]],null,null,null,null,null)),(t()(),r["\u0275ted"](1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.timers[0])})}function su(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,16,"div",[["class","audio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["3. Llegando. \xbfC\xf3mo fue tu proceso de adaptaci\xf3n en el pa\xeds al que llegaste? Cuenta sobre el apoyo y las dificultades que viviste y c\xf3mo vas construyendo una nueva vida."])),(t()(),r["\u0275eld"](3,0,null,null,9,"div",[["class","c100"],["id","audio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](4,0,null,null,5,"span",[["id","hola"]],null,null,null,null,null)),(t()(),r["\u0275eld"](5,0,null,null,4,"span",[["appDebounceClick",""],["class","inner record"],["id","decider"]],null,[[null,"debounceClick"],[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==r["\u0275nov"](t,6).clickEvent(n)&&i),"debounceClick"===e&&(i=!1!==o.decider()&&i),i},null,null)),r["\u0275did"](6,212992,null,0,Qs,[],null,{debounceClick:"debounceClick"}),(t()(),r["\u0275eld"](7,0,null,null,0,"i",[["class","fas fa-microphone"],["id","icon"]],null,null,null,null,null)),(t()(),r["\u0275and"](16777216,null,null,1,null,au)),r["\u0275did"](9,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275eld"](10,0,null,null,2,"div",[["class","slice"]],null,null,null,null,null)),(t()(),r["\u0275eld"](11,0,null,null,0,"div",[["class","bar"]],null,null,null,null,null)),(t()(),r["\u0275eld"](12,0,null,null,0,"div",[["class","fill"]],null,null,null,null,null)),(t()(),r["\u0275eld"](13,0,null,null,1,"audio",[["controls","controls"],["id","player"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["TAG"])),(t()(),r["\u0275eld"](15,0,null,null,1,"button",[["class","button green"]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=0!=(t.component.advance[2]=!0)&&r),r},null,null)),(t()(),r["\u0275ted"](-1,null,["siguiente"]))],function(t,e){var n=e.component;t(e,6,0),t(e,9,0,n.isRecording)},function(t,e){t(e,15,0,void 0===e.component.blobs[2])})}function uu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"p",[["style","font-size:0.7em"]],null,null,null,null,null)),(t()(),r["\u0275ted"](1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.timers[0])})}function lu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,16,"div",[["class","audio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["4. El futuro. \xbfCu\xe1les son las esperanzas para ti, tus seres queridos y para Venezuela? Cuenta sobre tus deseos, tanto para ti como para todos los venezolanos. "])),(t()(),r["\u0275eld"](3,0,null,null,9,"div",[["class","c100"],["id","audio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](4,0,null,null,5,"span",[["id","hola"]],null,null,null,null,null)),(t()(),r["\u0275eld"](5,0,null,null,4,"span",[["appDebounceClick",""],["class","inner record"],["id","decider"]],null,[[null,"debounceClick"],[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==r["\u0275nov"](t,6).clickEvent(n)&&i),"debounceClick"===e&&(i=!1!==o.decider()&&i),i},null,null)),r["\u0275did"](6,212992,null,0,Qs,[],null,{debounceClick:"debounceClick"}),(t()(),r["\u0275eld"](7,0,null,null,0,"i",[["class","fas fa-microphone"],["id","icon"]],null,null,null,null,null)),(t()(),r["\u0275and"](16777216,null,null,1,null,uu)),r["\u0275did"](9,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275eld"](10,0,null,null,2,"div",[["class","slice"]],null,null,null,null,null)),(t()(),r["\u0275eld"](11,0,null,null,0,"div",[["class","bar"]],null,null,null,null,null)),(t()(),r["\u0275eld"](12,0,null,null,0,"div",[["class","fill"]],null,null,null,null,null)),(t()(),r["\u0275eld"](13,0,null,null,1,"audio",[["controls","controls"],["id","player"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["TAG"])),(t()(),r["\u0275eld"](15,0,null,null,1,"button",[["class","button green"]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.upload()&&r),r},null,null)),(t()(),r["\u0275ted"](-1,null,["siguiente"]))],function(t,e){var n=e.component;t(e,6,0),t(e,9,0,n.isRecording)},function(t,e){t(e,15,0,void 0===e.component.blobs[3])})}function cu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,3,"div",[["class","audio"]],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,0,"i",[["class","fas fa-spinner fa-spin"],["style","font-size: 3em;"]],null,null,null,null,null)),(t()(),r["\u0275eld"](2,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Tus testimonios se est\xe1n subiendo, espera unos segundos."]))],null,null)}function hu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,10,"div",[],null,null,null,null,null)),(t()(),r["\u0275and"](16777216,null,null,1,null,ru)),r["\u0275did"](2,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,ou)),r["\u0275did"](4,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,su)),r["\u0275did"](6,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,lu)),r["\u0275did"](8,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,cu)),r["\u0275did"](10,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,!n.advance[0]),t(e,4,0,n.advance[0]&&!n.advance[1]),t(e,6,0,n.advance[1]&&!n.advance[2]),t(e,8,0,n.advance[2]&&!n.advance[3]),t(e,10,0,n.advance[3])},null)}function pu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,34,"div",[["class","textos"]],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["1.\tSalir. \xbfCu\xe1ndo saliste y como tomaste la decisi\xf3n? Cuenta sobre las razones de tu salida, quien y que tuviste que dejar atr\xe1s y como te preparaste para la salida."])),(t()(),r["\u0275eld"](3,0,null,null,5,"textarea",[["class","textarea"],["name","text1"],["placeholder","Tu respuesta"],["rows","20"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,4)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,4).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,4)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,4)._compositionEnd(n.target.value)&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.textos[0]=n)&&i),i},null,null)),r["\u0275did"](4,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275prd"](1024,null,Xa,function(t){return[t]},[Ya]),r["\u0275did"](6,671744,[["message",4]],0,Os,[[8,null],[8,null],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](8,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275eld"](9,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["2.\tEn camino. \xbfCu\xe1les fueron tus experiencias y dificultades en el camino? Cuenta sobre los desaf\xedos pr\xe1cticos y personales que tuviste que afrontar en el camino. "])),(t()(),r["\u0275eld"](11,0,null,null,5,"textarea",[["class","textarea"],["name","text2"],["placeholder","Tu respuesta"],["rows","8"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,12)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,12).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,12)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,12)._compositionEnd(n.target.value)&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.textos[1]=n)&&i),i},null,null)),r["\u0275did"](12,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275prd"](1024,null,Xa,function(t){return[t]},[Ya]),r["\u0275did"](14,671744,[["message",4]],0,Os,[[8,null],[8,null],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](16,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275eld"](17,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["3.\tLlegando. \xbfC\xf3mo fue tu proceso de adaptaci\xf3n en el pa\xeds al que llegaste? Cuenta sobre el apoyo y las dificultades que viviste y c\xf3mo vas construyendo una nueva vida. "])),(t()(),r["\u0275eld"](19,0,null,null,5,"textarea",[["class","textarea"],["name","text3"],["placeholder","Tu respuesta"],["rows","8"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,20)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,20).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,20)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,20)._compositionEnd(n.target.value)&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.textos[2]=n)&&i),i},null,null)),r["\u0275did"](20,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275prd"](1024,null,Xa,function(t){return[t]},[Ya]),r["\u0275did"](22,671744,[["message",4]],0,Os,[[8,null],[8,null],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](24,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275eld"](25,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["4.\tEl futuro. \xbfCu\xe1les son las esperanzas para ti, tus seres queridos y para Venezuela? Cuenta sobre tus deseos, tanto para ti como para todos los venezolanos."])),(t()(),r["\u0275eld"](27,0,null,null,5,"textarea",[["class","textarea"],["name","text4"],["placeholder","Tu respuesta"],["rows","8"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,28)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,28).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,28)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,28)._compositionEnd(n.target.value)&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.textos[3]=n)&&i),i},null,null)),r["\u0275did"](28,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275prd"](1024,null,Xa,function(t){return[t]},[Ya]),r["\u0275did"](30,671744,[["message",4]],0,Os,[[8,null],[8,null],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](32,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275eld"](33,0,null,null,1,"button",[["class","button green"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.crearSemilla()&&r),r},null,null)),(t()(),r["\u0275ted"](-1,null,["Listo"]))],function(t,e){var n=e.component;t(e,6,0,"text1",n.semilla.textos[0]),t(e,14,0,"text2",n.semilla.textos[1]),t(e,22,0,"text3",n.semilla.textos[2]),t(e,30,0,"text4",n.semilla.textos[3])},function(t,e){t(e,3,0,r["\u0275nov"](e,8).ngClassUntouched,r["\u0275nov"](e,8).ngClassTouched,r["\u0275nov"](e,8).ngClassPristine,r["\u0275nov"](e,8).ngClassDirty,r["\u0275nov"](e,8).ngClassValid,r["\u0275nov"](e,8).ngClassInvalid,r["\u0275nov"](e,8).ngClassPending),t(e,11,0,r["\u0275nov"](e,16).ngClassUntouched,r["\u0275nov"](e,16).ngClassTouched,r["\u0275nov"](e,16).ngClassPristine,r["\u0275nov"](e,16).ngClassDirty,r["\u0275nov"](e,16).ngClassValid,r["\u0275nov"](e,16).ngClassInvalid,r["\u0275nov"](e,16).ngClassPending),t(e,19,0,r["\u0275nov"](e,24).ngClassUntouched,r["\u0275nov"](e,24).ngClassTouched,r["\u0275nov"](e,24).ngClassPristine,r["\u0275nov"](e,24).ngClassDirty,r["\u0275nov"](e,24).ngClassValid,r["\u0275nov"](e,24).ngClassInvalid,r["\u0275nov"](e,24).ngClassPending),t(e,27,0,r["\u0275nov"](e,32).ngClassUntouched,r["\u0275nov"](e,32).ngClassTouched,r["\u0275nov"](e,32).ngClassPristine,r["\u0275nov"](e,32).ngClassDirty,r["\u0275nov"](e,32).ngClassValid,r["\u0275nov"](e,32).ngClassInvalid,r["\u0275nov"](e,32).ngClassPending)})}function fu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,32,"div",[["class","recording"]],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,27,"div",[["class","overlay"]],null,null,null,null,null)),(t()(),r["\u0275eld"](2,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" Tu historia es \xfanica en el mundo. A trav\xe9s de cuatro etapas cronol\xf3gicas de tu migraci\xf3n, desde salir de Venezuela hasta echar ra\xedces en un pa\xeds nuevo, te invitamos a contar tu historia en tus propias palabras. Semillas de la Di\xe1spora es un proyecto inclusivo y constructivo. Valoramos tus opiniones, sin embargo te pedimos no incitar la violencia y no limitarte a hacer proposiciones pol\xedticos que no guardan ninguna relaci\xf3n con la migraci\xf3n venezolana. Nos reservamos el derecho de no publicar tu testimonio si viola alguna de estas condiciones de respeto mutuo. "])),(t()(),r["\u0275eld"](4,0,null,null,20,"div",[["class","switch switch--horizontal"]],null,null,null,null,null)),(t()(),r["\u0275eld"](5,0,null,null,6,"input",[["checked","checked"],["id","radio-a"],["name","first-switch"],["type","radio"],["value","audio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,6)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,6).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,6)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,6)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,7).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,7).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.testimonialType=n)&&i),i},null,null)),r["\u0275did"](6,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](7,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](9,671744,null,0,Os,[[8,null],[8,null],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](11,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275eld"](12,0,null,null,1,"label",[["for","radio-a"]],null,null,null,null,null)),(t()(),r["\u0275eld"](13,0,null,null,0,"i",[["class","fas fa-microphone"]],null,null,null,null,null)),(t()(),r["\u0275eld"](14,0,null,null,6,"input",[["id","radio-b"],["name","first-switch"],["type","radio"],["value","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,15)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,15).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,15)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,15)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,16).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,16).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.semilla.testimonialType=n)&&i),i},null,null)),r["\u0275did"](15,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](16,212992,null,0,is,[r.Renderer2,r.ElementRef,rs,r.Injector],{name:[0,"name"],value:[1,"value"]},null),r["\u0275prd"](1024,null,Xa,function(t,e){return[t,e]},[Ya,is]),r["\u0275did"](18,671744,null,0,Os,[[8,null],[8,null],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](20,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275eld"](21,0,null,null,1,"label",[["for","radio-b"]],null,null,null,null,null)),(t()(),r["\u0275eld"](22,0,null,null,0,"i",[["class","fas fa-pencil-alt"]],null,null,null,null,null)),(t()(),r["\u0275eld"](23,0,null,null,1,"span",[["class","toggle-outside"]],null,null,null,null,null)),(t()(),r["\u0275eld"](24,0,null,null,0,"span",[["class","toggle-inside"]],null,null,null,null,null)),(t()(),r["\u0275and"](16777216,null,null,1,null,eu)),r["\u0275did"](26,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275eld"](27,0,null,null,1,"button",[["class","button green"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.overlay()&&r),r},null,null)),(t()(),r["\u0275ted"](-1,null,["Listo"])),(t()(),r["\u0275and"](16777216,null,null,1,null,hu)),r["\u0275did"](30,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,pu)),r["\u0275did"](32,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,7,0,"first-switch","audio"),t(e,9,0,"first-switch",n.semilla.testimonialType),t(e,16,0,"first-switch","text"),t(e,18,0,"first-switch",n.semilla.testimonialType),t(e,26,0,"audio"==n.semilla.testimonialType),t(e,30,0,"audio"==n.semilla.testimonialType),t(e,32,0,"text"==n.semilla.testimonialType)},function(t,e){t(e,5,0,r["\u0275nov"](e,11).ngClassUntouched,r["\u0275nov"](e,11).ngClassTouched,r["\u0275nov"](e,11).ngClassPristine,r["\u0275nov"](e,11).ngClassDirty,r["\u0275nov"](e,11).ngClassValid,r["\u0275nov"](e,11).ngClassInvalid,r["\u0275nov"](e,11).ngClassPending),t(e,14,0,r["\u0275nov"](e,20).ngClassUntouched,r["\u0275nov"](e,20).ngClassTouched,r["\u0275nov"](e,20).ngClassPristine,r["\u0275nov"](e,20).ngClassDirty,r["\u0275nov"](e,20).ngClassValid,r["\u0275nov"](e,20).ngClassInvalid,r["\u0275nov"](e,20).ngClassPending)})}function du(t,e){return"function"==typeof e?function(n){return n.pipe(du(function(n,r){return Object(p.a)(t(n,r)).pipe(Object(d.a)(function(t,i){return e(n,t,r,i)}))}))}:function(e){return e.lift(new mu(t))}}var mu=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new gu(t,this.project))},t}(),gu=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return o.c(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe(),this.add(this.innerSubscription=Object(Pt.a)(this,t,e,n))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e}(At.a),yu=function(){return Object(o.b)([Object(o.d)(0,Object(r.Inject)(L)),Object(o.d)(1,Object(r.Optional)()),Object(o.d)(1,Object(r.Inject)(F)),Object(o.d)(2,Object(r.Inject)(r.PLATFORM_ID))],function(t,e,n,r){var i=this;this.zone=r;var o=new k(r,n);this.auth=r.runOutsideAngular(function(){return j(t,e).auth()}),this.authState=o.keepUnstableUntilFirst(o.runOutsideAngular(new u.a(function(t){return{unsubscribe:i.auth.onAuthStateChanged(t)}}))),this.user=o.keepUnstableUntilFirst(o.runOutsideAngular(new u.a(function(t){return{unsubscribe:i.auth.onIdTokenChanged(t)}}))),this.idToken=this.user.pipe(du(function(t){return t?Object(p.a)(t.getIdToken()):h(null)})),this.idTokenResult=this.user.pipe(du(function(t){return t?Object(p.a)(t.getIdTokenResult()):h(null)}))})}();(function(){var t,e=e||{},n=this;function r(t){return"string"==typeof t}function i(t){return"boolean"==typeof t}function o(){}function a(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function s(t){return null===t}function u(t){return"array"==a(t)}function l(t){var e=a(t);return"array"==e||"object"==e&&"number"==typeof t.length}function c(t){return"function"==a(t)}function h(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var p="closure_uid_"+(1e9*Math.random()>>>0),f=0;function d(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:m).apply(null,arguments)}function y(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var v=Date.now||function(){return+new Date};function b(t,e){function n(){}n.prototype=e.prototype,t.ob=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ed=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function _(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0}function w(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function x(t){if(Error.captureStackTrace)Error.captureStackTrace(this,x);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function C(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");x.call(this,n+t[r])}function E(t,e){throw new C("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function S(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function T(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function A(){this.b=this.a=null}b(x,Error),x.prototype.name="CustomError",b(C,x),C.prototype.name="AssertionError",S.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var P=new S(function(){return new O},function(t){t.reset()});function I(){var t=pt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function O(){this.next=this.b=this.a=null}A.prototype.add=function(t,e){var n=P.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},O.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},O.prototype.reset=function(){this.next=this.b=this.a=null};var D=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(r(t))return r(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},k=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,o=r(t)?t.split(""):t,a=0;a<i;a++)a in o&&e.call(n,o[a],a,t)},M=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=Array(n),o=r(t)?t.split(""):t,a=0;a<n;a++)a in o&&(i[a]=e.call(void 0,o[a],a,t));return i},R=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=r(t)?t.split(""):t,o=0;o<n;o++)if(o in i&&e.call(void 0,i[o],o,t))return!0;return!1};function N(t,e){return 0<=D(t,e)}function L(t,e){var n;return(n=0<=(e=D(t,e)))&&Array.prototype.splice.call(t,e,1),n}function F(t,e){!function(t,e){var n=t.length,i=r(t)?t.split(""):t;for(--n;0<=n;--n)n in i&&e.call(void 0,i[n],n,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function B(t){return Array.prototype.concat.apply([],arguments)}function j(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function z(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}var V=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function U(t){return Z.test(t)?(-1!=t.indexOf("&")&&(t=t.replace(G,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(H,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(W,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(K,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(X,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(Q,"&#0;")),t):t}var q,G=/&/g,H=/</g,W=/>/g,K=/"/g,X=/'/g,Q=/\x00/g,Z=/[\x00&<>"']/;function Y(t,e){return-1!=t.indexOf(e)}function J(t,e){return t<e?-1:t>e?1:0}t:{var $=n.navigator;if($){var tt=$.userAgent;if(tt){q=tt;break t}}q=""}function et(t){return Y(q,t)}function nt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function rt(t){for(var e in t)return!1;return!0}function it(t){var e,n={};for(e in t)n[e]=t[e];return n}var ot,at,st="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ut(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<st.length;o++)n=st[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function lt(t){n.setTimeout(function(){throw t},0)}function ct(t,e){at||function(){if(n.Promise&&n.Promise.resolve){var t=n.Promise.resolve(void 0);at=function(){t.then(ft)}}else at=function(){var t=ft;!c(n.setImmediate)||n.Window&&n.Window.prototype&&!et("Edge")&&n.Window.prototype.setImmediate==n.setImmediate?(ot||(ot=function(){var t=n.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!et("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=g(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!et("Trident")&&!et("MSIE")){var e=new t,r={},i=r;return e.port1.onmessage=function(){if(void 0!==r.next){var t=(r=r.next).wb;r.wb=null,t()}},function(t){i.next={wb:t},i=i.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){n.setTimeout(t,0)}}()),ot(t)):n.setImmediate(t)}}(),ht||(at(),ht=!0),pt.add(t,e)}var ht=!1,pt=new A;function ft(){for(var t;t=I();){try{t.a.call(t.b)}catch(t){lt(t)}T(P,t)}ht=!1}function dt(t,e){if(this.a=mt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=o)try{var n=this;t.call(e,function(t){At(n,gt,t)},function(t){if(!(t instanceof Rt))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}At(n,yt,t)})}catch(t){At(this,yt,t)}}var mt=0,gt=2,yt=3;function vt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}vt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var bt=new S(function(){return new vt},function(t){t.reset()});function _t(t,e,n){var r=bt.get();return r.g=t,r.b=e,r.f=n,r}function wt(t){if(t instanceof dt)return t;var e=new dt(o);return At(e,gt,t),e}function xt(t){return new dt(function(e,n){n(t)})}function Ct(t,e,n){Pt(t,e,n,null)||ct(y(e,t))}function Et(t){return new dt(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Db:!0,value:o}:{Db:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ct(t[o],y(i,o,!0),y(i,o,!1));else e(r)})}function St(t,e){t.b||t.a!=gt&&t.a!=yt||It(t),t.f?t.f.next=e:t.b=e,t.f=e}function Tt(t,e,n,r){var i=_t(null,null,null);return i.a=new dt(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Rt?o(e):t(i)}catch(t){o(t)}}:o}),i.a.c=t,St(t,i),i.a}function At(t,e,n){t.a==mt&&(t===n&&(e=yt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Pt(n,t.Nc,t.Oc,t)||(t.i=n,t.a=e,t.c=null,It(t),e!=yt||n instanceof Rt||function(t,e){t.g=!0,ct(function(){t.g&&Mt.call(null,e)})}(t,n)))}function Pt(t,e,n,r){if(t instanceof dt)return St(t,_t(e||o,n||null,r)),!0;if(w(t))return t.then(e,n,r),!0;if(h(t))try{var i=t.then;if(c(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function It(t){t.h||(t.h=!0,ct(t.Yb,t))}function Ot(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Dt(t,e,n,r){if(n==yt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,kt(e,n,r);else try{e.c?e.g.call(e.f):kt(e,n,r)}catch(t){Mt.call(null,t)}T(bt,e)}function kt(t,e,n){e==gt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}dt.prototype.then=function(t,e,n){return Tt(this,c(t)?t:null,c(e)?e:null,n)},_(dt),(t=dt.prototype).ia=function(t,e){return(t=_t(t,t,e)).c=!0,St(this,t),this},t.s=function(t,e){return Tt(this,null,t,e)},t.cancel=function(t){this.a==mt&&ct(function(){!function t(e,n){if(e.a==mt)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==mt&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):Ot(r),Dt(r,o,yt,n)))}e.c=null}else At(e,yt,n)}(this,new Rt(t))},this)},t.Nc=function(t){this.a=mt,At(this,gt,t)},t.Oc=function(t){this.a=mt,At(this,yt,t)},t.Yb=function(){for(var t;t=Ot(this);)Dt(this,t,this.a,this.i);this.h=!1};var Mt=lt;function Rt(t){x.call(this,t)}function Nt(){0!=Lt&&(Ft[this[p]||(this[p]=++f)]=this),this.qa=this.qa,this.ja=this.ja}b(Rt,x),Rt.prototype.name="cancel";var Lt=0,Ft={};function Bt(t){if(!t.qa&&(t.qa=!0,t.va(),0!=Lt)){var e=t[p]||(t[p]=++f);if(0!=Lt&&t.ja&&0<t.ja.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ft[e]}}function jt(t){return jt[" "](t),t}Nt.prototype.qa=!1,Nt.prototype.va=function(){if(this.ja)for(;this.ja.length;)this.ja.shift()()},jt[" "]=o;var zt,Vt,Ut=et("Opera"),qt=et("Trident")||et("MSIE"),Gt=et("Edge"),Ht=Gt||qt,Wt=et("Gecko")&&!(Y(q.toLowerCase(),"webkit")&&!et("Edge"))&&!(et("Trident")||et("MSIE"))&&!et("Edge"),Kt=Y(q.toLowerCase(),"webkit")&&!et("Edge");function Xt(){var t=n.document;return t?t.documentMode:void 0}t:{var Qt="",Zt=(Vt=q,Wt?/rv:([^\);]+)(\)|;)/.exec(Vt):Gt?/Edge\/([\d\.]+)/.exec(Vt):qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Vt):Kt?/WebKit\/(\S+)/.exec(Vt):Ut?/(?:Version)[ \/]?(\S+)/.exec(Vt):void 0);if(Zt&&(Qt=Zt?Zt[1]:""),qt){var Yt=Xt();if(null!=Yt&&Yt>parseFloat(Qt)){zt=String(Yt);break t}}zt=Qt}var Jt,$t={};function te(t){return function(t,e){var n=$t;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=V(String(zt)).split("."),r=V(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=J(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||J(0==a[2].length,0==s[2].length)||J(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var ee=n.document;Jt=ee&&qt?Xt()||("CSS1Compat"==ee.compatMode?parseInt(zt,10):5):void 0;var ne=Object.freeze||function(t){return t},re=!qt||9<=Number(Jt),ie=qt&&!te("9"),oe=function(){if(!n.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return n.addEventListener("test",o,e),n.removeEventListener("test",o,e),t}();function ae(t,e){this.type=t,this.b=this.target=e,this.Kb=!0}function se(t,e){if(ae.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,i=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Wt){t:{try{jt(e.nodeName);var o=!0;break t}catch(t){}o=!1}o||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===i?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=r(t.pointerType)?t.pointerType:ue[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}ae.prototype.preventDefault=function(){this.Kb=!1},b(se,ae);var ue=ne({2:"touch",3:"pen",4:"mouse"});se.prototype.preventDefault=function(){se.ob.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ie)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},se.prototype.f=function(){return this.a};var le="closure_listenable_"+(1e6*Math.random()|0),ce=0;function he(t){t.oa=!0,t.listener=null,t.proxy=null,t.src=null,t.La=null}function pe(t){this.src=t,this.a={},this.b=0}function fe(t,e){var n=e.type;n in t.a&&L(t.a[n],e)&&(he(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function de(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.oa&&o.listener==e&&o.capture==!!n&&o.La==r)return i}return-1}pe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=de(t,e,r,i);return-1<a?(e=t[a],n||(e.Ia=!1)):((e=new function(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.La=i,this.key=++ce,this.oa=this.Ia=!1}(e,this.src,o,!!r,i)).Ia=n,t.push(e)),e};var me="closure_lm_"+(1e6*Math.random()|0),ge={};function ye(t,e,n,r,i){if(r&&r.once)be(t,e,n,r,i);else if(u(e))for(var o=0;o<e.length;o++)ye(t,e[o],n,r,i);else n=Pe(n),t&&t[le]?Oe(t,e,n,h(r)?!!r.capture:!!r,i):ve(t,e,n,!1,r,i)}function ve(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=h(i)?!!i.capture:!!i,s=Te(t);if(s||(t[me]=s=new pe(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=Se,e=re?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)oe||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(xe(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function be(t,e,n,r,i){if(u(e))for(var o=0;o<e.length;o++)be(t,e[o],n,r,i);else n=Pe(n),t&&t[le]?De(t,e,n,h(r)?!!r.capture:!!r,i):ve(t,e,n,!0,r,i)}function _e(t,e,n,r,i){if(u(e))for(var o=0;o<e.length;o++)_e(t,e[o],n,r,i);else r=h(r)?!!r.capture:!!r,n=Pe(n),t&&t[le]?(t=t.l,(e=String(e).toString())in t.a&&-1<(n=de(o=t.a[e],n,r,i))&&(he(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Te(t))&&(e=t.a[e.toString()],t=-1,e&&(t=de(e,n,r,i)),(n=-1<t?e[t]:null)&&we(n))}function we(t){if("number"!=typeof t&&t&&!t.oa){var e=t.src;if(e&&e[le])fe(e.l,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(xe(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Te(e))?(fe(n,t),0==n.b&&(n.src=null,e[me]=null)):he(t)}}}function xe(t){return t in ge?ge[t]:ge[t]="on"+t}function Ce(t,e,n,r){var i=!0;if((t=Te(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.oa&&(o=Ee(o,r),i=i&&!1!==o)}return i}function Ee(t,e){var n=t.listener,r=t.La||t.src;return t.Ia&&we(t),n.call(r,e)}function Se(t,e){if(t.oa)return!0;if(!re){if(!e)t:{e=["window","event"];for(var r=n,i=0;i<e.length;i++)if(null==(r=r[e[i]])){e=null;break t}e=r}if(e=new se(i=e,this),r=!0,!(0>i.keyCode||void 0!=i.returnValue)){t:{var o=!1;if(0==i.keyCode)try{i.keyCode=-1;break t}catch(t){o=!0}(o||void 0==i.returnValue)&&(i.returnValue=!0)}for(i=[],o=e.b;o;o=o.parentNode)i.push(o);for(t=t.type,o=i.length-1;0<=o;o--){e.b=i[o];var a=Ce(i[o],t,!0,e);r=r&&a}for(o=0;o<i.length;o++)e.b=i[o],a=Ce(i[o],t,!1,e),r=r&&a}return r}return Ee(t,new se(e,this))}function Te(t){return(t=t[me])instanceof pe?t:null}var Ae="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pe(t){return c(t)?t:(t[Ae]||(t[Ae]=function(e){return t.handleEvent(e)}),t[Ae])}function Ie(){Nt.call(this),this.l=new pe(this),this.Rb=this,this.Va=null}function Oe(t,e,n,r,i){t.l.add(String(e),n,!1,r,i)}function De(t,e,n,r,i){t.l.add(String(e),n,!0,r,i)}function ke(t,e,n,r){if(!(e=t.l.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.oa&&a.capture==n){var s=a.listener,u=a.La||a.src;a.Ia&&fe(t.l,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Kb}function Me(t,e,r){if(c(t))r&&(t=g(t,r));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:n.setTimeout(t,e||0)}function Re(t){var e=null;return new dt(function(n,r){-1==(e=Me(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).s(function(t){throw n.clearTimeout(e),t})}function Ne(t){if(t.S&&"function"==typeof t.S)return t.S();if(r(t))return t.split("");if(l(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}function Le(t){if(t.U&&"function"==typeof t.U)return t.U();if(!t.S||"function"!=typeof t.S){if(l(t)||r(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var i in e=[],n=0,t)e[n++]=i;return e}}function Fe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Fe)for(n=t.U(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Be(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];je(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)je(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function je(t,e){return Object.prototype.hasOwnProperty.call(t,e)}b(Ie,Nt),Ie.prototype[le]=!0,Ie.prototype.addEventListener=function(t,e,n,r){ye(this,t,e,n,r)},Ie.prototype.removeEventListener=function(t,e,n,r){_e(this,t,e,n,r)},Ie.prototype.dispatchEvent=function(t){var e,n=this.Va;if(n)for(e=[];n;n=n.Va)e.push(n);n=this.Rb;var i=t.type||t;if(r(t))t=new ae(t,n);else if(t instanceof ae)t.target=t.target||n;else{var o=t;ut(t=new ae(i,n),o)}if(o=!0,e)for(var a=e.length-1;0<=a;a--){var s=t.b=e[a];o=ke(s,i,!0,t)&&o}if(o=ke(s=t.b=n,i,!0,t)&&o,o=ke(s,i,!1,t)&&o,e)for(a=0;a<e.length;a++)o=ke(s=t.b=e[a],i,!1,t)&&o;return o},Ie.prototype.va=function(){if(Ie.ob.va.call(this),this.l){var t,e=this.l;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)he(n[r]);delete e.a[t],e.b--}}this.Va=null},(t=Fe.prototype).S=function(){Be(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.U=function(){return Be(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return je(this.b,t)?this.b[t]:e},t.set=function(t,e){je(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.U(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ze=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ve(t,e){if(this.b=this.l=this.c="",this.i=null,this.h=this.g="",this.f=!1,t instanceof Ve){this.f=void 0!==e?e:t.f,Ue(this,t.c),this.l=t.l,this.b=t.b,qe(this,t.i),this.g=t.g,e=t.a;var n=new rn;n.c=e.c,e.a&&(n.a=new Fe(e.a),n.b=e.b),Ge(this,n),this.h=t.h}else t&&(n=String(t).match(ze))?(this.f=!!e,Ue(this,n[1]||"",!0),this.l=Qe(n[2]||""),this.b=Qe(n[3]||"",!0),qe(this,n[4]),this.g=Qe(n[5]||"",!0),Ge(this,n[6]||"",!0),this.h=Qe(n[7]||"")):(this.f=!!e,this.a=new rn(null,this.f))}function Ue(t,e,n){t.c=n?Qe(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function qe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function Ge(t,e,n){e instanceof rn?(t.a=e,function(t,e){e&&!t.f&&(on(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(sn(this,e),ln(this,n,t))},t)),t.f=e}(t.a,t.f)):(n||(e=Ze(e,en)),t.a=new rn(e,t.f))}function He(t,e,n){t.a.set(e,n)}function We(t,e){return t.a.get(e)}function Ke(t){return t instanceof Ve?new Ve(t):new Ve(t,void 0)}function Xe(t,e){var n=new Ve(null,void 0);return Ue(n,"https"),t&&(n.b=t),e&&(n.g=e),n}function Qe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ze(t,e,n){return r(t)?(t=encodeURI(t).replace(e,Ye),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ye(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ve.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Ze(e,Je,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Ze(e,Je,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ze(n,"/"==n.charAt(0)?tn:$e,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Ze(n,nn)),t.join("")};var Je=/[#\/\?@]/g,$e=/[#\?:]/g,tn=/[#\?]/g,en=/[#\?@]/g,nn=/#/g;function rn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function on(t){t.a||(t.a=new Fe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function an(t){var e=Le(t);if(void 0===e)throw Error("Keys are undefined");var n=new rn(null,void 0);t=Ne(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];u(o)?ln(n,i,o):n.add(i,o)}return n}function sn(t,e){on(t),e=cn(t,e),je(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,je((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Be(t)))}function un(t,e){return on(t),e=cn(t,e),je(t.a.b,e)}function ln(t,e,n){sn(t,e),0<n.length&&(t.c=null,t.a.set(cn(t,e),j(n)),t.b+=n.length)}function cn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=rn.prototype).add=function(t,e){on(this),this.c=null,t=cn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){on(this),this.a.forEach(function(n,r){k(n,function(n){t.call(e,n,r,this)},this)},this)},t.U=function(){on(this);for(var t=this.a.S(),e=this.a.U(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.S=function(t){on(this);var e=[];if(r(t))un(this,t)&&(e=B(e,this.a.get(cn(this,t))));else{t=this.a.S();for(var n=0;n<t.length;n++)e=B(e,t[n])}return e},t.set=function(t,e){return on(this),this.c=null,un(this,t=cn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return 0<(t=t?this.S(t):[]).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.U(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.S(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var hn=!qt||9<=Number(Jt);function pn(){this.a="",this.b=dn}function fn(t){return t instanceof pn&&t.constructor===pn&&t.b===dn?t.a:(E("expected object of type Const, got '"+t+"'"),"type_error:Const")}pn.prototype.na=!0,pn.prototype.ma=function(){return this.a},pn.prototype.toString=function(){return"Const{"+this.a+"}"};var dn={};function mn(t){var e=new pn;return e.a=t,e}function gn(){this.a="",this.b=wn}function yn(t){return t instanceof gn&&t.constructor===gn&&t.b===wn?t.a:(E("expected object of type TrustedResourceUrl, got '"+t+"' of type "+a(t)),"type_error:TrustedResourceUrl")}function vn(t,e){var n=fn(t);if(!_n.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=new gn;return e.a=t,e}(t=n.replace(bn,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof pn?fn(t):encodeURIComponent(String(t))}))}mn(""),gn.prototype.na=!0,gn.prototype.ma=function(){return this.a},gn.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var bn=/%{(\w+)}/g,_n=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank#/i,wn={};function xn(){this.a="",this.b=Tn}function Cn(t){return t instanceof xn&&t.constructor===xn&&t.b===Tn?t.a:(E("expected object of type SafeUrl, got '"+t+"' of type "+a(t)),"type_error:SafeUrl")}xn.prototype.na=!0,xn.prototype.ma=function(){return this.a},xn.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var En=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Sn(t){return t instanceof xn?t:(t=t.na?t.ma():String(t),En.test(t)||(t="about:invalid#zClosurez"),An(t))}var Tn={};function An(t){var e=new xn;return e.a=t,e}function Pn(){this.a="",this.b=In}An("about:blank"),Pn.prototype.na=!0,Pn.prototype.ma=function(){return this.a},Pn.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var In={};function On(t){var e=new Pn;return e.a=t,e}function Dn(t){var e=document;return r(t)?e.getElementById(t):t}function kn(t,e){nt(e,function(e,n){e&&e.na&&(e=e.ma()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Mn.hasOwnProperty(n)?t.setAttribute(Mn[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}On("<!DOCTYPE html>"),On(""),On("<br>");var Mn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Rn(t){if(t&&"number"==typeof t.length){if(h(t))return"function"==typeof t.item||"string"==typeof t.item;if(c(t))return"function"==typeof t.item}return!1}function Nn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(u(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),Bn(i,r),r.push(":"),t(e,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Bn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new function(){},t,e),e.join("")}var Ln={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Fn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Bn(t,e){e.push('"',t.replace(Fn,function(t){var e=Ln[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Ln[t]=e),e}),'"')}function jn(){var t=ir();return qt&&!!Jt&&11==Jt||/Edge\/\d+/.test(t)}function zn(){return n.window&&n.window.location.href||self&&self.location&&self.location.href||""}function Vn(t,e){e=e||n.window;var r="about:blank";t&&(r=Cn(Sn(t))),e.location.href=r}function Un(t){return!!((t=(t||ir()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function qn(t){t=t||n.window;try{t.close()}catch(t){}}function Gn(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=ir().toLowerCase(),r&&(e.target=r,Y(n,"crios/")&&(e.target="_blank")),er(ir())==$n&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof xn?n:Sn(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((et("iPhone")&&!et("iPod")&&!et("iPad")||et("iPad")||et("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(s=r.document.createElement("A"),e instanceof xn||e instanceof xn||(e=e.na?e.ma():String(e),En.test(e)||(e="about:invalid#zClosurez"),e=An(e)),s.href=Cn(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=Cn(e),s&&(Ht&&Y(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,mn("b/12014412, meta tag with sanitized URL"),t=On(t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+U(t)+'">'),s.document.write(function(t){return t instanceof Pn&&t.constructor===Pn&&t.b===In?t.a:(E("expected object of type SafeHtml, got '"+t+"' of type "+a(t)),"type_error:SafeHtml")}(t)),s.document.close())):(s=r.open(Cn(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var Hn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wn=/^[^@]+@[^@]+$/;function Kn(){var t=null;return new dt(function(e){"complete"==n.document.readyState?e():(t=function(){e()},be(window,"load",t))}).s(function(e){throw _e(window,"load",t),e})}function Xn(t){return t=t||ir(),!("file:"!==lr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Qn(){var t=n.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Zn(){return"object"!=typeof n.window&&"function"==typeof n.importScripts}function Yn(){return Qi.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Qi.a.INTERNAL.hasOwnProperty("node")?"Node":Zn()?"Worker":"Browser"}function Jn(){var t=Yn();return"ReactNative"===t||"Node"===t}var $n="Firefox",tr="Chrome";function er(t){var e=t.toLowerCase();return Y(e,"opera/")||Y(e,"opr/")||Y(e,"opios/")?"Opera":Y(e,"iemobile")?"IEMobile":Y(e,"msie")||Y(e,"trident/")?"IE":Y(e,"edge/")?"Edge":Y(e,"firefox/")?$n:Y(e,"silk/")?"Silk":Y(e,"blackberry")?"Blackberry":Y(e,"webos")?"Webos":!Y(e,"safari/")||Y(e,"chrome/")||Y(e,"crios/")||Y(e,"android")?!Y(e,"chrome/")&&!Y(e,"crios/")||Y(e,"edge/")?Y(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":tr:"Safari"}var nr={Uc:"FirebaseCore-web",Wc:"FirebaseUI-web"};function rr(t,e){e=e||[];var n,r=[],i={};for(n in nr)i[nr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Yn())?r=er(i=ir()):"Worker"===r&&(r=er(i=ir())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function ir(){return n.navigator&&n.navigator.userAgent||""}function or(t,e){t=t.split("."),e=e||n;for(var r=0;r<t.length&&"object"==typeof e&&null!=e;r++)e=e[t[r]];return r!=t.length&&(e=void 0),e}function ar(){try{var t=n.localStorage,e=dr();if(t)return t.setItem(e,"1"),t.removeItem(e),!jn()||!!n.indexedDB}catch(t){return Zn()&&!!n.indexedDB}return!1}function sr(){return(ur()||"chrome-extension:"===lr()||Xn())&&!Jn()&&ar()&&!Zn()}function ur(){return"http:"===lr()||"https:"===lr()}function lr(){return n.location&&n.location.protocol||null}function cr(t){return!Un(t=t||ir())&&er(t)!=$n}function hr(t){return void 0===t?null:Nn(t)}function pr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function fr(t){if(null!==t)return JSON.parse(t)}function dr(t){return t||Math.floor(1e9*Math.random()).toString()}function mr(t){return"Safari"!=er(t=t||ir())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function gr(){var t=n.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var r=0;r<t.CP.length;r++)t.CP[r]=null}function yr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=ir(),e=Yn(),this.b=Un(t)||"ReactNative"===e}function vr(){var t=n.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function br(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function _r(){return!(!or("fireauth.oauthhelper",n)&&!or("fireauth.iframe",n))}yr.prototype.get=function(){var t=n.navigator;return!t||"boolean"!=typeof t.onLine||!ur()&&"chrome-extension:"!==lr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var wr,xr={};function Cr(t){xr[t]||(xr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Er={};Object.defineProperty(Er,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Er,"abcd",{configurable:!0,enumerable:!0,value:2}),wr=2==Er.abcd}catch(Vt){wr=!1}function Sr(t,e,n){wr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Tr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Sr(t,n,e[n])}function Ar(t){var e={};return Tr(e,t),e}function Pr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Sr(e,n,Pr(t[n]));return e}function Ir(t,e){this.code=Dr+t,this.message=e||kr[t]||""}function Or(t){var e=t&&t.code;return e?new Ir(e.substring(Dr.length),t.message):null}b(Ir,Error),Ir.prototype.C=function(){return{code:this.code,message:this.message}},Ir.prototype.toJSON=function(){return this.C()};var Dr="auth/",kr={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Mr(t){var e=t[Br];if(void 0===e)throw new Ir("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Ir("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Rr];if(n&&"object"==typeof n){e=n[Vr];var r=n[jr];if(n=n[zr],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new Ir("argument-error",jr+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Ir("argument-error",zr+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new Ir("argument-error",Vr+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Ir("missing-android-pkg-name")}}else if(void 0!==n)throw new Ir("argument-error",Rr+" property must be a non null object when specified.");if(this.f=null,(e=t[Fr])&&"object"==typeof e){if("string"==typeof(e=e[Ur])&&e.length)this.f=e;else if(void 0!==e)throw new Ir("argument-error",Ur+" property must be a non empty string when specified.")}else if(void 0!==e)throw new Ir("argument-error",Fr+" property must be a non null object when specified.");if(void 0!==(e=t[Lr])&&"boolean"!=typeof e)throw new Ir("argument-error",Lr+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Nr])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new Ir("argument-error",Nr+" property must be a non empty string when specified.");this.i=t||null}var Rr="android",Nr="dynamicLinkDomain",Lr="handleCodeInApp",Fr="iOS",Br="url",jr="installApp",zr="minimumVersion",Vr="packageName",Ur="bundleId";function qr(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Gr=null,Hr=null;function Wr(t){this.c=t.sub,v(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function Kr(t){return(t=Xr(t))&&t.sub&&t.iss&&t.aud&&t.exp?new Wr(t):null}function Xr(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Hr[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Gr){Gr={},Hr={};for(var t=0;65>t;t++)Gr[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),Hr[Gr[t]]=t,62<=t&&(Hr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,function(t){e+=String.fromCharCode(t)}),e}(t))}catch(t){}return null}Wr.prototype.f=function(){return this.b};var Qr,Zr={$c:{ab:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},bd:{ab:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},cd:{ab:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Yr(t){for(var e in Zr)if(Zr[e].id===t)return{firebaseEndpoint:(t=Zr[e]).ab,secureTokenEndpoint:t.ib};return null}Qr=Yr("__EID__")?"__EID__":void 0;var Jr="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),$r=["client_id","response_type","scope","redirect_uri","state"],ti={Vc:{Ma:"locale",Ba:500,Aa:600,Na:"facebook.com",hb:$r},Xc:{Ma:null,Ba:500,Aa:620,Na:"github.com",hb:$r},Yc:{Ma:"hl",Ba:515,Aa:680,Na:"google.com",hb:$r},dd:{Ma:"lang",Ba:485,Aa:705,Na:"twitter.com",hb:Jr}};function ei(t){for(var e in ti)if(ti[e].Na==t)return ti[e];return null}function ni(t){var e={};e["facebook.com"]=si,e["google.com"]=li,e["github.com"]=ui,e["twitter.com"]=ci;var n=t&&t[ii];try{if(n)return e[n]?new e[n](t):new ai(t);if(void 0!==t[ri])return new oi(t)}catch(t){}return null}var ri="idToken",ii="providerId";function oi(t){var e=t[ii];if(!e&&t[ri]){var n=Kr(t[ri]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Sr(this,"providerId",e),Sr(this,"isNewUser",n)}function ai(t){oi.call(this,t),Sr(this,"profile",Pr((t=fr(t.rawUserInfo||"{}"))||{}))}function si(t){if(ai.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ui(t){if(ai.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Sr(this,"username",this.profile&&this.profile.login||null)}function li(t){if(ai.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ci(t){if(ai.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Sr(this,"username",t.screenName||null)}function hi(t){var e=Ke(t),n=We(e,"link"),r=We(Ke(n),"link");return We(Ke(e=We(e,"deep_link_id")),"link")||e||r||n||t}function pi(t,e){return t.then(function(t){if(t[Ko]){var n=Kr(t[Ko]);if(!n||e!=n.c)throw new Ir("user-mismatch");return t}throw new Ir("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==Dr+"user-not-found"?new Ir("user-mismatch"):t})}function fi(t,e){if(!e)throw new Ir("internal-error","failed to construct a credential");this.a=e,Sr(this,"providerId",t),Sr(this,"signInMethod",t)}function di(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function mi(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Sr(this,"idToken",e.idToken),e.accessToken&&Sr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Sr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Ir("internal-error","failed to construct a credential");Sr(this,"accessToken",e.oauthToken),Sr(this,"secret",e.oauthTokenSecret)}Sr(this,"providerId",t),Sr(this,"signInMethod",n)}function gi(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:an(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function yi(t,e){this.Dc=e||[],Tr(this,{providerId:t,isOAuthProvider:!0}),this.yb={},this.cb=(ei(t)||{}).Ma||null,this.$a=null}function vi(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new Ir("argument-error",'SAML provider IDs must be prefixed with "saml."');yi.call(this,t,[])}function bi(t){yi.call(this,t,$r),this.a=[]}function _i(){bi.call(this,"facebook.com")}function wi(t){if(!t)throw new Ir("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return h(t)&&(e=t.accessToken),(new _i).credential(null,e)}function xi(){bi.call(this,"github.com")}function Ci(t){if(!t)throw new Ir("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return h(t)&&(e=t.accessToken),(new xi).credential(null,e)}function Ei(){bi.call(this,"google.com"),this.ua("profile")}function Si(t,e){var n=t;return h(t)&&(n=t.idToken,e=t.accessToken),(new Ei).credential(n,e)}function Ti(){yi.call(this,"twitter.com",Jr)}function Ai(t,e){var n=t;if(h(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Ir("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new mi("twitter.com",n,"twitter.com")}function Pi(t,e,n){this.a=t,this.c=e,Sr(this,"providerId","password"),Sr(this,"signInMethod",n===Ii.EMAIL_LINK_SIGN_IN_METHOD?Ii.EMAIL_LINK_SIGN_IN_METHOD:Ii.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ii(){Tr(this,{providerId:"password",isOAuthProvider:!1})}function Oi(t,e){if(!(e=Di(e)))throw new Ir("argument-error","Invalid email link!");return new Pi(t,e,Ii.EMAIL_LINK_SIGN_IN_METHOD)}function Di(t){var e=We((t=new function(t){this.a=Ke(t)}(t=hi(t))).a,"oobCode")||null;return"signIn"===(We(t.a,"mode")||null)&&e?e:null}function ki(t){if(!(t.Ta&&t.Sa||t.Fa&&t.$))throw new Ir("internal-error");this.a=t,Sr(this,"providerId","phone"),Sr(this,"signInMethod","phone")}function Mi(t){return t.a.Fa&&t.a.$?{temporaryProof:t.a.Fa,phoneNumber:t.a.$}:{sessionInfo:t.a.Ta,code:t.a.Sa}}function Ri(t){try{this.a=t||Qi.a.auth()}catch(t){throw new Ir("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Tr(this,{providerId:"phone",isOAuthProvider:!1})}function Ni(t,e){if(!t)throw new Ir("missing-verification-id");if(!e)throw new Ir("missing-verification-code");return new ki({Ta:t,Sa:e})}function Li(t){if(t.temporaryProof&&t.phoneNumber)return new ki({Fa:t.temporaryProof,$:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Si(o,n);case"facebook.com":return wi(n);case"github.com":return Ci(n);case"twitter.com":return Ai(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new fi(e,a):new mi(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new bi(e).credential(o,n,i):null}}catch(t){return null}}function Fi(t){if(!t.isOAuthProvider)throw new Ir("invalid-oauth-provider")}function Bi(t,e,n,r,i,o){if(this.b=t,this.c=e||null,this.f=n||null,this.g=r||null,this.h=o||null,this.a=i||null,!this.f&&!this.a)throw new Ir("invalid-auth-event");if(this.f&&this.a)throw new Ir("invalid-auth-event");if(this.f&&!this.g)throw new Ir("invalid-auth-event")}function ji(t){return(t=t||{}).type?new Bi(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Or(t.error),t.postBody):null}function zi(){this.b=null,this.a=[]}b(ai,oi),b(si,ai),b(ui,ai),b(li,ai),b(ci,ai),fi.prototype.la=function(t){return ha(t,di(this))},fi.prototype.b=function(t,e){var n=di(this);return n.idToken=e,pa(t,n)},fi.prototype.f=function(t,e){return pi(fa(t,di(this)),e)},fi.prototype.C=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},mi.prototype.la=function(t){return ha(t,gi(this))},mi.prototype.b=function(t,e){var n=gi(this);return n.idToken=e,pa(t,n)},mi.prototype.f=function(t,e){return pi(fa(t,gi(this)),e)},mi.prototype.C=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},yi.prototype.Da=function(t){return this.yb=it(t),this},b(vi,yi),b(bi,yi),bi.prototype.ua=function(t){return N(this.a,t)||this.a.push(t),this},bi.prototype.Eb=function(){return j(this.a)},bi.prototype.credential=function(t,e,n){if(!t&&!e)throw new Ir("argument-error","credential failed: must provide the ID token and/or the access token.");return new mi(this.providerId,{idToken:t||null,accessToken:e||null,nonce:n||null},this.providerId)},b(_i,bi),Sr(_i,"PROVIDER_ID","facebook.com"),Sr(_i,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),b(xi,bi),Sr(xi,"PROVIDER_ID","github.com"),Sr(xi,"GITHUB_SIGN_IN_METHOD","github.com"),b(Ei,bi),Sr(Ei,"PROVIDER_ID","google.com"),Sr(Ei,"GOOGLE_SIGN_IN_METHOD","google.com"),b(Ti,yi),Sr(Ti,"PROVIDER_ID","twitter.com"),Sr(Ti,"TWITTER_SIGN_IN_METHOD","twitter.com"),Pi.prototype.la=function(t){return this.signInMethod==Ii.EMAIL_LINK_SIGN_IN_METHOD?Ua(t,wa,{email:this.a,oobCode:this.c}):Ua(t,Ba,{email:this.a,password:this.c})},Pi.prototype.b=function(t,e){return this.signInMethod==Ii.EMAIL_LINK_SIGN_IN_METHOD?Ua(t,xa,{idToken:e,email:this.a,oobCode:this.c}):Ua(t,ka,{idToken:e,email:this.a,password:this.c})},Pi.prototype.f=function(t,e){return pi(this.la(t),e)},Pi.prototype.C=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Tr(Ii,{PROVIDER_ID:"password"}),Tr(Ii,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Tr(Ii,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),ki.prototype.la=function(t){return t.Ua(Mi(this))},ki.prototype.b=function(t,e){var n=Mi(this);return n.idToken=e,Ua(t,za,n)},ki.prototype.f=function(t,e){var n=Mi(this);return n.operation="REAUTH",pi(t=Ua(t,Va,n),e)},ki.prototype.C=function(){var t={providerId:"phone"};return this.a.Ta&&(t.verificationId=this.a.Ta),this.a.Sa&&(t.verificationCode=this.a.Sa),this.a.Fa&&(t.temporaryProof=this.a.Fa),this.a.$&&(t.phoneNumber=this.a.$),t},Ri.prototype.Ua=function(t,e){var n=this.a.b;return wt(e.verify()).then(function(i){if(!r(i))throw new Ir("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return Ua(n,Oa,e)}(0,{phoneNumber:t,recaptchaToken:i}).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new Ir("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Tr(Ri,{PROVIDER_ID:"phone"}),Tr(Ri,{PHONE_SIGN_IN_METHOD:"phone"}),Bi.prototype.C=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,postBody:this.h,error:this.a&&this.a.C()}};var Vi,Ui=null;function qi(t){var e="unauthorized-domain",n=void 0,r=Ke(t);t=r.b,"chrome-extension"==(r=r.c)?n=z("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=z("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Ir.call(this,e,n)}function Gi(t,e,n){Ir.call(this,t,n),(t=e||{}).zb&&Sr(this,"email",t.zb),t.$&&Sr(this,"phoneNumber",t.$),t.credential&&Sr(this,"credential",t.credential)}function Hi(t){if(t.code){var e=t.code||"";0==e.indexOf(Dr)&&(e=e.substring(Dr.length));var n={credential:Li(t)};if(t.email)n.zb=t.email;else if(t.phoneNumber)n.$=t.phoneNumber;else if(!n.credential)return new Ir(e,t.message||void 0);return new Gi(e,n,t.message)}return null}function Wi(){}function Ki(){}function Xi(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Zi(){}function Yi(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText="",this.a.onload=g(this.ec,this),this.a.onerror=g(this.Fb,this),this.a.onprogress=g(this.fc,this),this.a.ontimeout=g(this.ic,this)}function Ji(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function $i(t,e,n){this.reset(t,e,n,void 0,void 0)}function to(t){this.f=t,this.b=this.c=this.a=null}function eo(t,e){this.name=t,this.value=e}zi.prototype.subscribe=function(t){var e=this;this.a.push(t),this.b||(this.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=or("universalLinks.subscribe",n))&&t(null,this.b))},zi.prototype.unsubscribe=function(t){F(this.a,function(e){return e==t})},b(qi,Ir),b(Gi,Ir),Gi.prototype.C=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.C();return e&&ut(t,e),t},Gi.prototype.toJSON=function(){return this.C()},Wi.prototype.c=null,b(Ki,Wi),Ki.prototype.a=function(){var t=Xi(this);return t?new ActiveXObject(t):new XMLHttpRequest},Ki.prototype.b=function(){var t={};return Xi(this)&&(t[0]=!0,t[1]=!0),t},Vi=new Ki,b(Zi,Wi),Zi.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Yi;throw Error("Unsupported browser")},Zi.prototype.b=function(){return{}},(t=Yi.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.ec=function(){this.status=200,this.responseText=this.a.responseText,Ji(this,4)},t.Fb=function(){this.status=500,this.responseText="",Ji(this,4)},t.ic=function(){this.Fb()},t.fc=function(){this.status=200,Ji(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},$i.prototype.a=null,$i.prototype.reset=function(t,e,n,r,i){r||v(),delete this.a},eo.prototype.toString=function(){return this.name};var no=new eo("SEVERE",1e3),ro=new eo("WARNING",900),io=new eo("CONFIG",700),oo=new eo("FINE",500);to.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(E("Root logger has no level set."),null)}(this).value)for(c(e)&&(e=e()),t=new $i(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ao={},so=null;function uo(t){var e;if(so||(so=new to(""),ao[""]=so,so.c=io),!(e=ao[t])){e=new to(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=uo(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ao[t]=e}return e}function lo(t,e){t&&t.log(oo,e,void 0)}function co(t){this.f=t}function ho(t){Ie.call(this),this.i=t,this.readyState=po,this.status=0,this.responseText=this.statusText="",this.onreadystatechange=null,this.g=new Headers,this.b=null,this.h="GET",this.c="",this.a=!1,this.f=uo("goog.net.FetchXmlHttp")}b(co,Wi),co.prototype.a=function(){return new ho(this.f)},co.prototype.b=function(t){return function(){return t}}({}),b(ho,Ie);var po=0;function fo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function mo(t){Ie.call(this),this.headers=new Fe,this.D=t||null,this.c=!1,this.w=this.a=null,this.h=this.N=this.m="",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.o=go,this.v=this.O=!1}(t=ho.prototype).open=function(t,e){if(this.readyState!=po)throw this.abort(),Error("Error reopening a connection");this.h=t,this.c=e,this.readyState=1,fo(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.g,method:this.h,credentials:void 0,cache:void 0};t&&(e.body=t),this.i.fetch(new Request(this.c,e)).then(this.hc.bind(this),this.Gb.bind(this))},t.abort=function(){this.responseText="",this.g=new Headers,this.status=0,1<=this.readyState&&this.a&&4!=this.readyState&&(this.readyState=4,this.a=!1,fo(this)),this.readyState=po},t.hc=function(t){this.a&&(this.b||(this.b=t.headers,this.readyState=2,fo(this)),this.a&&(this.readyState=3,fo(this),this.a&&t.text().then(this.gc.bind(this,t),this.Gb.bind(this))))},t.gc=function(t,e){this.a&&(this.status=t.status,this.statusText=t.statusText,this.responseText=e,this.readyState=4,fo(this))},t.Gb=function(t){var e=this.f;e&&e.log(ro,"Failed to fetch url "+this.c,t instanceof Error?t:Error(t)),this.a&&(this.readyState=4,fo(this))},t.setRequestHeader=function(t,e){this.g.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.f)&&t.log(ro,"Attempting to get response header but no headers have been received for url: "+this.c,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.f;return t&&t.log(ro,"Attempting to get all response headers but no headers have been received for url: "+this.c,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},b(mo,Ie);var go="";mo.prototype.b=uo("goog.net.XhrIo");var yo=/^https?$/i,vo=["POST","PUT"];function bo(t){return"content-type"==t.toLowerCase()}function _o(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,wo(t),Co(t)}function wo(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function xo(t){if(t.c&&void 0!==e)if(t.w[1]&&4==So(t)&&2==To(t))lo(t.b,Ao(t,"Local request error detected and ignored"));else if(t.i&&4==So(t))Me(t.Jb,0,t);else if(t.dispatchEvent("readystatechange"),4==So(t)){lo(t.b,Ao(t,"Request complete")),t.c=!1;try{var r,i=To(t);t:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var o=!0;break t;default:o=!1}if(!(r=o)){var a;if(a=0===i){var s=String(t.m).match(ze)[1]||null;if(!s&&n.self&&n.self.location){var u=n.self.location.protocol;s=u.substr(0,u.length-1)}a=!yo.test(s?s.toLowerCase():"")}r=a}if(r)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var l=2<So(t)?t.a.statusText:""}catch(e){lo(t.b,"Can not get status: "+e.message),l=""}t.h=l+" ["+To(t)+"]",wo(t)}}finally{Co(t)}}}function Co(t,e){if(t.a){Eo(t);var n=t.a,r=t.w[0]?o:null;t.a=null,t.w=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(no,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Eo(t){t.a&&t.v&&(t.a.ontimeout=null),t.u&&(n.clearTimeout(t.u),t.u=null)}function So(t){return t.a?t.a.readyState:0}function To(t){try{return 2<So(t)?t.a.status:-1}catch(t){return-1}}function Ao(t,e){return e+" ["+t.N+" "+t.m+" "+To(t)+"]"}function Po(t,e){this.g=[],this.v=t,this.u=e||null,this.f=this.a=!1,this.c=void 0,this.m=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function Io(t,e,n){t.a=!0,t.c=n,t.f=!e,Mo(t)}function Oo(t){if(t.a){if(!t.m)throw new Ro(t);t.m=!1}}function Do(t,e,n,r){t.g.push([e,n,r]),t.a&&Mo(t)}function ko(t){return R(t.g,function(t){return c(t[1])})}function Mo(t){if(t.h&&t.a&&ko(t)){var e=t.h,r=Fo[e];r&&(n.clearTimeout(r.a),delete Fo[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var i=r=!1;t.g.length&&!t.i;){var o=t.g.shift(),a=o[0],s=o[1];if(o=o[2],a=t.f?s:a)try{var u=a.call(o||t.u,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(w(e)||"function"==typeof n.Promise&&e instanceof n.Promise)&&(i=!0,t.i=!0)}catch(n){e=n,t.f=!0,ko(t)||(r=!0)}}t.c=e,i&&(u=g(t.o,t,!0),i=g(t.o,t,!1),e instanceof Po?(Do(e,u,i),e.w=!0):e.then(u,i)),r&&(e=new Lo(e),Fo[e.a]=e,t.h=e.a)}function Ro(){x.call(this)}function No(){x.call(this)}function Lo(t){this.a=n.setTimeout(g(this.c,this),0),this.b=t}(t=mo.prototype).Ga=function(){void 0!==e&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",lo(this.b,Ao(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(lo(this.b,Ao(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Co(this))},t.va=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Co(this,!0)),mo.ob.va.call(this)},t.Jb=function(){this.qa||(this.I||this.i||this.f?xo(this):this.wc())},t.wc=function(){xo(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.o){case go:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(no,"Response type "+this.o+" is not supported on this browser",void 0),null}catch(t){return lo(this.b,"Can not get response: "+t.message),null}},Po.prototype.cancel=function(t){if(this.a)this.c instanceof Po&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.v?this.v.call(this.u,this):this.m=!0,this.a||(t=new No(this),Oo(this),Io(this,!1,t))}},Po.prototype.o=function(t,e){this.i=!1,Io(this,t,e)},Po.prototype.D=function(){Oo(this),Io(this,!0,null)},Po.prototype.then=function(t,e,n){var r,i,o=new dt(function(t,e){r=t,i=e});return Do(this,r,function(t){t instanceof No?o.cancel():i(t)}),o.then(t,e,n)},_(Po),b(Ro,x),Ro.prototype.message="Deferred has already fired",Ro.prototype.name="AlreadyCalledError",b(No,x),No.prototype.message="Deferred was canceled",No.prototype.name="CanceledError",Lo.prototype.c=function(){throw delete Fo[this.a],this.b};var Fo={};function Bo(t){var e={},n=e.document||document,r=yn(t),i=document.createElement("SCRIPT"),o={Lb:i,Ga:void 0},a=new Po(jo,o),s=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(s=window.setTimeout(function(){zo(i,!0);var t=new qo(Uo,"Timeout reached for loading script "+r);Oo(a),Io(a,!1,t)},u),o.Ga=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(zo(i,e.fd||!1,s),a.D())},i.onerror=function(){zo(i,!0,s);var t=new qo(Vo,"Error while loading script "+r);Oo(a),Io(a,!1,t)},ut(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),kn(i,o),i.src=yn(t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function jo(){if(this&&this.Lb){var t=this.Lb;t&&"SCRIPT"==t.tagName&&zo(t,!0,this.Ga)}}function zo(t,e,r){null!=r&&n.clearTimeout(r),t.onload=o,t.onerror=o,t.onreadystatechange=o,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Vo=0,Uo=1;function qo(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),x.call(this,n),this.code=t}function Go(t){this.f=t}function Ho(t,e,r){if(this.b=t,this.i=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.l=t.secureTokenTimeout||Xo,this.f=it(t.secureTokenHeaders||Qo),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||Zo,this.a=it(t.firebaseHeaders||Yo),r&&(this.a["X-Client-Version"]=r,this.f["X-Client-Version"]=r),r="Node"==Yn(),!(r=n.XMLHttpRequest||r&&Qi.a.INTERNAL.node&&Qi.a.INTERNAL.node.XMLHttpRequest)&&!Zn())throw new Ir("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,this.c=Zn()?new co(self):Jn()?new Go(r):new Zi}b(qo,x),b(Go,Wi),Go.prototype.a=function(){return new this.f},Go.prototype.b=function(){return{}};var Wo,Ko="idToken",Xo=new yr(3e4,6e4),Qo={"Content-Type":"application/x-www-form-urlencoded"},Zo=new yr(3e4,6e4),Yo={"Content-Type":"application/json"};function Jo(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function $o(t,e){e?(t.a["X-Client-Version"]=e,t.f["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.f["X-Client-Version"])}function ta(t,e,r,i,o,a,s){(function(){var t=ir();return!((t=er(t)!=tr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||qt&&Jt&&!(9<Jt))})()||Zn()?t=g(t.o,t):(Wo||(Wo=new dt(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{n[na]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var r=vn(ea,{onload:na});!function(t,e){Do(Bo(r),null,e,void 0)}(0,function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)})),t=g(t.m,t)),t(e,r,i,o,a,s)}Ho.prototype.o=function(t,e,i,o,a,s){if(Zn()&&(void 0===n.fetch||void 0===n.Headers||void 0===n.Request))throw new Ir("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var u=new mo(this.c);if(s){u.g=Math.max(0,s);var c=setTimeout(function(){u.dispatchEvent("timeout")},s)}Oe(u,"complete",function(){c&&clearTimeout(c);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return lo(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)}),De(u,"ready",function(){c&&clearTimeout(c),Bt(this)}),De(u,"timeout",function(){c&&clearTimeout(c),Bt(this),e&&e(null)}),function(t,e,i,o,a){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.m+"; newUri="+e);i=i?i.toUpperCase():"GET",t.m=e,t.h="",t.N=i,t.G=!1,t.c=!0,t.a=t.D?t.D.a():Vi.a(),t.w=function(t){return t.c||(t.c=t.b())}(t.D?t.D:Vi),t.a.onreadystatechange=g(t.Jb,t);try{lo(t.b,Ao(t,"Opening Xhr")),t.I=!0,t.a.open(i,String(e),!0),t.I=!1}catch(e){return lo(t.b,Ao(t,"Error opening Xhr: "+e.message)),void _o(t,e)}e=o||"";var s=new Fe(t.headers);a&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(l(t)||r(t))k(t,e,void 0);else for(var n=Le(t),i=Ne(t),o=i.length,a=0;a<o;a++)e.call(void 0,i[a],n&&n[a],t)}(a,function(t,e){s.set(e,t)}),a=function(t){t:{for(var e=bo,n=t.length,i=r(t)?t.split(""):t,o=0;o<n;o++)if(o in i&&e.call(void 0,i[o],o,t)){e=o;break t}e=-1}return 0>e?null:r(t)?t.charAt(e):t[e]}(s.U()),o=n.FormData&&e instanceof n.FormData,!N(vo,i)||a||o||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.o&&(t.a.responseType=t.o),"withCredentials"in t.a&&t.a.withCredentials!==t.O&&(t.a.withCredentials=t.O);try{Eo(t),0<t.g&&(t.v=function(t){return qt&&te(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),lo(t.b,Ao(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=g(t.Ga,t)):t.u=Me(t.Ga,t.g,t)),lo(t.b,Ao(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){lo(t.b,Ao(t,"Send error: "+e.message)),_o(t,e)}}(u,t,i,o,a)};var ea=mn("https://apis.google.com/js/client.js?onload=%{onload}"),na="__fcb"+Math.floor(1e6*Math.random()).toString();function ra(t){if(!r(t=t.email)||!Wn.test(t))throw new Ir("invalid-email")}function ia(t){"email"in t&&ra(t)}function oa(t){if(!t[Ko])throw new Ir("internal-error")}function aa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Ir("internal-error")}else{if(!t.sessionInfo)throw new Ir("missing-verification-id");if(!t.code)throw new Ir("missing-verification-code")}}Ho.prototype.m=function(t,e,n,r,i){var o=this;Wo.then(function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})}).s(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Ho.prototype.Qa=function(){return Ua(this,Ma,{})},Ho.prototype.pb=function(t,e){return Ua(this,Da,{idToken:t,email:e})},Ho.prototype.qb=function(t,e){return Ua(this,ka,{idToken:t,password:e})};var sa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ua(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new Ir("internal-error")}function la(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&un(t=new rn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ca(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Hi(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Hi(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Hi(t)):t.errorMessage&&(e=qa(t.errorMessage)),e)throw e;if(!t[Ko])throw new Ir("internal-error")}function ha(t,e){return e.returnIdpCredential=!0,Ua(t,Ra,e)}function pa(t,e){return e.returnIdpCredential=!0,Ua(t,La,e)}function fa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ua(t,Na,e)}function da(t){if(!t.oobCode)throw new Ir("invalid-action-code")}(t=Ho.prototype).rb=function(t,e){var n={idToken:t},r=[];return nt(sa,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),Ua(this,Da,n)},t.kb=function(t,e){return ut(t={requestType:"PASSWORD_RESET",email:t},e),Ua(this,Ta,t)},t.lb=function(t,e){return ut(t={requestType:"EMAIL_SIGNIN",email:t},e),Ua(this,Ea,t)},t.jb=function(t,e){return ut(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ua(this,Sa,t)},t.Ua=function(t){return Ua(this,ja,t)},t.Za=function(t,e){return Ua(this,Ia,{oobCode:t,newPassword:e})},t.Ja=function(t){return Ua(this,ga,{oobCode:t})},t.Wa=function(t){return Ua(this,ma,{oobCode:t})};var ma={endpoint:"setAccountInfo",B:da,da:"email"},ga={endpoint:"resetPassword",B:da,J:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new Ir("internal-error")}},ya={endpoint:"signupNewUser",B:function(t){if(ra(t),!t.password)throw new Ir("weak-password")},J:oa,R:!0},va={endpoint:"createAuthUri"},ba={endpoint:"deleteAccount",T:["idToken"]},_a={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],B:function(t){if(!u(t.deleteProvider))throw new Ir("internal-error")}},wa={endpoint:"emailLinkSignin",T:["email","oobCode"],B:ra,J:oa,R:!0},xa={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],B:ra,J:oa,R:!0},Ca={endpoint:"getAccountInfo"},Ea={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new Ir("internal-error");ra(t)},da:"email"},Sa={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Ir("internal-error")},da:"email"},Ta={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Ir("internal-error");ra(t)},da:"email"},Aa={ub:!0,endpoint:"getProjectConfig",Ib:"GET"},Pa={ub:!0,endpoint:"getRecaptchaParam",Ib:"GET",J:function(t){if(!t.recaptchaSiteKey)throw new Ir("internal-error")}},Ia={endpoint:"resetPassword",B:da,da:"email"},Oa={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],da:"sessionInfo"},Da={endpoint:"setAccountInfo",T:["idToken"],B:ia,R:!0},ka={endpoint:"setAccountInfo",T:["idToken"],B:function(t){if(ia(t),!t.password)throw new Ir("weak-password")},J:oa,R:!0},Ma={endpoint:"signupNewUser",J:oa,R:!0},Ra={endpoint:"verifyAssertion",B:ua,Oa:la,J:ca,R:!0},Na={endpoint:"verifyAssertion",B:ua,Oa:la,J:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Ir("user-not-found");if(t.errorMessage)throw qa(t.errorMessage);if(!t[Ko])throw new Ir("internal-error")},R:!0},La={endpoint:"verifyAssertion",B:function(t){if(ua(t),!t.idToken)throw new Ir("internal-error")},Oa:la,J:ca,R:!0},Fa={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new Ir("invalid-custom-token")},J:oa,R:!0},Ba={endpoint:"verifyPassword",B:function(t){if(ra(t),!t.password)throw new Ir("wrong-password")},J:oa,R:!0},ja={endpoint:"verifyPhoneNumber",B:aa,J:oa},za={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new Ir("internal-error");aa(t)},J:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Hi(t);oa(t)}},Va={Xb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:aa,J:oa};function Ua(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,e.T))return xt(new Ir("internal-error"));var r,i=e.Ib||"POST";return wt(n).then(e.B).then(function(){return e.R&&(n.returnSecureToken=!0),function(t,e,n,r,i,o){var a=Ke(t.g+e);He(a,"key",t.b),o&&He(a,"cb",v().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&He(a,u,r[u]);return new dt(function(e,o){ta(t,a.toString(),function(t){t?t.error?o(Ga(t,i||{})):e(t):o(new Ir("network-request-failed"))},n,s?void 0:Nn(pr(r)),t.a,t.h.get())})}(t,e.endpoint,i,n,e.Xb,e.ub||!1)}).then(function(t){return r=t,e.Oa?e.Oa(n,r):r}).then(e.J).then(function(){if(!e.da)return r;if(!(e.da in r))throw new Ir("internal-error");return r[e.da]})}function qa(t){return Ga({error:{errors:[{message:t}],code:400,message:t}})}function Ga(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Ir(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",ut(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new Ir(r[i],e);return!e&&t&&(e=hr(t)),new Ir("internal-error",e)}var Ha=mn("https://apis.google.com/js/api.js?onload=%{onload}"),Wa=new yr(3e4,6e4),Ka=new yr(5e3,15e3),Xa=null;function Qa(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Xe(this.i,"/__/auth/iframe"),He(this.a,"apiKey",this.g),He(this.a,"appName",this.h),this.b=null,this.c=[]}function Za(t,e,n,r,i){this.o=t,this.m=e,this.c=n,this.l=r,this.h=this.g=this.i=null,this.a=i,this.f=null}function Ya(t){try{return Qi.a.app(t).auth().ya()}catch(t){return[]}}function Ja(t,e,n,r,i){this.m=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.o=this.u=this.v=null,this.g=[],this.l=this.a=null}function $a(t){var e=zn();return function(t){return Ua(t,Aa,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Ke(e),r=n.c;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Ke(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:Hn.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new qi(zn())})}function ts(t){return t.l?t.l:(t.l=Kn().then(function(){if(!t.u){var e=t.c,r=t.h,i=Ya(t.b),o=new Qa(t.m,t.f,t.b);o.f=e,o.b=r,o.c=j(i||[]),t.u=o.toString()}t.i=new function(t){this.b=t,this.a=null,this.fb=function(t){return(Xa||(Xa=new dt(function(t,e){function r(){gr(),or("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){gr(),e(Error("Network Error"))},timeout:Wa.get()})}if(or("gapi.iframes.Iframe"))t();else if(or("gapi.load"))r();else{var i="__iframefcb"+Math.floor(1e6*Math.random()).toString();n[i]=function(){or("gapi.load")?r():e(Error("Network Error"))},wt(Bo(i=vn(Ha,{onload:i}))).s(function(){e(Error("Network Error"))})}}).s(function(t){throw Xa=null,t}))).then(function(){return new dt(function(e,n){or("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},Ka.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}(t.u),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.fb.then(function(){t.a.register("authEvent",e,or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.i,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=ji(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",wt(n)}return n.status="ERROR",wt(n)})}(t)}),t.l)}function es(t){return t.o||(t.v=t.c?rr(t.c,Ya(t.b)):null,t.o=new Ho(t.f,Yr(t.h),t.v)),t.o}function ns(t,e,n,r,i,o,a,s,u,l){return(t=new Za(t,e,n,r,i)).i=o,t.g=a,t.h=s,t.b=it(u||null),t.f=l,t.toString()}function rs(t){if(this.a=t||Qi.a.INTERNAL.reactNative&&Qi.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Ir("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function is(t){this.b=t,this.a={},this.c=g(this.f,this)}Qa.prototype.toString=function(){return this.f?He(this.a,"v",this.f):sn(this.a.a,"v"),this.b?He(this.a,"eid",this.b):sn(this.a.a,"eid"),this.c.length?He(this.a,"fw",this.c.join(",")):sn(this.a.a,"fw"),this.a.toString()},Za.prototype.toString=function(){var t=Xe(this.o,"/__/auth/handler");if(He(t,"apiKey",this.m),He(t,"appName",this.c),He(t,"authType",this.l),this.a.isOAuthProvider){var e=this.a;try{var n=Qi.a.app(this.c).auth().ea()}catch(t){n=null}for(var r in e.$a=n,He(t,"providerId",this.a.providerId),n=pr((e=this.a).yb))n[r]=n[r].toString();r=e.Dc,n=it(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.cb&&e.$a&&!n[e.cb]&&(n[e.cb]=e.$a),rt(n)||He(t,"customParameters",hr(n))}if("function"==typeof this.a.Eb&&(e=this.a.Eb()).length&&He(t,"scopes",e.join(",")),this.i?He(t,"redirectUrl",this.i):sn(t.a,"redirectUrl"),this.g?He(t,"eventId",this.g):sn(t.a,"eventId"),this.h?He(t,"v",this.h):sn(t.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!We(t,a)&&He(t,a,this.b[a]);return this.f?He(t,"eid",this.f):sn(t.a,"eid"),(a=Ya(this.c)).length&&He(t,"fw",a.join(",")),t.toString()},(t=Ja.prototype).Ea=function(t,e,n){var r=new Ir("popup-closed-by-user"),i=new Ir("web-storage-unsupported"),o=this,a=!1;return this.ga().then(function(){(function(t){var e={type:"webStorageSupport"};return ts(t).then(function(){return function(t,e){return t.fb.then(function(){return new dt(function(n){t.a.send(e.type,e,n,or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.i,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&qn(t),e(i),a=!0)})}).s(function(){}).then(function(){if(!a)return function(t){return new dt(function(e){return function n(){Re(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!a)return Re(n).then(function(){e(r)})})},t.Mb=function(){var t=ir();return!cr(t)&&!mr(t)},t.Hb=function(){return!1},t.Cb=function(t,e,n,r,i,o,a){if(!t)return xt(new Ir("popup-blocked"));if(a&&!cr())return this.ga().s(function(e){qn(t),i(e)}),r(),wt();this.a||(this.a=$a(es(this)));var s=this;return this.a.then(function(){var e=s.ga().s(function(e){throw qn(t),i(e),e});return r(),e}).then(function(){Fi(n),a||Vn(ns(s.m,s.f,s.b,e,n,null,o,s.c,void 0,s.h),t)}).s(function(t){throw"auth/network-request-failed"==t.code&&(s.a=null),t})},t.Ca=function(t,e,n){this.a||(this.a=$a(es(this)));var r=this;return this.a.then(function(){Fi(e),Vn(ns(r.m,r.f,r.b,t,e,zn(),n,r.c,void 0,r.h))}).s(function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t})},t.ga=function(){var t=this;return ts(this).then(function(){return t.i.fb}).s(function(){throw t.a=null,new Ir("network-request-failed")})},t.Qb=function(){return!0},t.wa=function(t){this.g.push(t)},t.Ka=function(t){F(this.g,function(e){return e==t})},(t=rs.prototype).get=function(t){return wt(this.a.getItem(t)).then(function(t){return t&&fr(t)})},t.set=function(t,e){return wt(this.a.setItem(t,hr(e)))},t.P=function(t){return wt(this.a.removeItem(t))},t.Y=function(){},t.ca=function(){};var os,as=[];function ss(t){this.a=t}function us(t){this.c=t,this.b=!1,this.a=[]}function ls(t,e,n,r){var i,o,a,s,u=n||{},l=null;if(t.b)return xt(Error("connection_unavailable"));var c=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new dt(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout(function(){r(Error("unsupported_event"))},c),t.a.push(l={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(e){return cs(t,l),e}).s(function(e){throw cs(t,l),e})}function cs(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),F(t.a,function(t){return t==e})}}function hs(){if(!fs())throw new Ir("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=n.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.u=!1,this.h=null;var t=this;Zn()&&self?(this.l=function(){var t=Zn()?self:null;if(k(as,function(n){n.b==t&&(e=n)}),!e){var e=new is(t);as.push(e)}return e}(),this.l.subscribe("keyChanged",function(e,n){return vs(t).then(function(e){return 0<e.length&&k(t.a,function(t){t(e)}),{keyProcessed:N(e,n.key)}})}),this.l.subscribe("ping",function(){return wt(["keyChanged"])})):function(){var t=n.navigator;return t&&t.serviceWorker?wt().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):wt(null)}().then(function(e){(t.h=e)&&(t.g=new us(new ss(e)),ls(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&N(e[0].value,"keyChanged")&&(t.u=!0)}).s(function(){}))})}function ps(t){return t.o||(t.o=function t(e){return new dt(function(n,r){var i=e.m.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(t){}r(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){r(t)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):function(t){return new dt(function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(e).then(function(){return t(e)}).then(function(t){n(t)}).s(function(t){r(t)})}})}(t)),t.o}function fs(){try{return!!n.indexedDB}catch(t){return!1}}function ds(t){return t.objectStore("firebaseLocalStorage")}function ms(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function gs(t){return new dt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function ys(t,e){return t.g&&t.h&&function(){var t=n.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?ls(t.g,"keyChanged",{key:e},t.u).then(function(){}).s(function(){}):wt()}function vs(t){return ps(t).then(function(t){var e=ds(ms(t,!1));return e.getAll?gs(e.getAll()):new dt(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r})}function bs(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function _s(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=wt().then(function(){if(fs()){var t=dr(),r="__sak"+t;return os||(os=new hs),(n=os).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.P(r)}).then(function(){return n}).s(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.Y(function(t){k(e.a,function(e){e(t)})}),t})}function ws(){this.a={},this.type="inMemory"}function xs(){if(!function(){var t="Node"==Yn();if(!(t=Cs()||t&&Qi.a.INTERNAL.node&&Qi.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Yn())throw new Ir("internal-error","The LocalStorage compatibility library was not found.");throw new Ir("web-storage-unsupported")}this.a=Cs()||Qi.a.INTERNAL.node.localStorage,this.type="localStorage"}function Cs(){try{var t=n.localStorage,e=dr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Es(){this.type="nullStorage"}function Ss(){if(!function(){var t="Node"==Yn();if(!(t=Ts()||t&&Qi.a.INTERNAL.node&&Qi.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Yn())throw new Ir("internal-error","The SessionStorage compatibility library was not found.");throw new Ir("web-storage-unsupported")}this.a=Ts()||Qi.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Ts(){try{var t=n.sessionStorage,e=dr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}is.prototype.f=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];k(r,function(e){i.push(wt().then(function(){return e(t.origin,t.data.data)}))}),Et(i).then(function(r){var i=[];k(r,function(t){i.push({fulfilled:t.Db,value:t.value,reason:t.reason?t.reason.message:void 0})}),k(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},is.prototype.subscribe=function(t,e){rt(this.a)&&this.b.addEventListener("message",this.c),void 0===this.a[t]&&(this.a[t]=[]),this.a[t].push(e)},is.prototype.unsubscribe=function(t,e){void 0!==this.a[t]&&e?(F(this.a[t],function(t){return t==e}),0==this.a[t].length&&delete this.a[t]):e||delete this.a[t],rt(this.a)&&this.b.removeEventListener("message",this.c)},ss.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},us.prototype.close=function(){for(;0<this.a.length;)cs(this,this.a[0]);this.b=!0},(t=hs.prototype).set=function(t,e){var n,r=!1,i=this;return ps(this).then(function(e){return gs((e=ds(ms(n=e,!0))).get(t))}).then(function(o){var a=ds(ms(n,!0));return o?(o.value=e,gs(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,gs(a.add(o)))}).then(function(){return i.c[t]=e,ys(i,t)}).ia(function(){r&&i.b--})},t.get=function(t){return ps(this).then(function(e){return gs(ds(ms(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.P=function(t){var e=!1,n=this;return ps(this).then(function(r){return e=!0,n.b++,gs(ds(ms(r,!0)).delete(t))}).then(function(){return delete n.c[t],ys(n,t)}).ia(function(){e&&n.b--})},t.Y=function(t){0==this.a.length&&function(t){bs(t),function e(){t.f=setTimeout(function(){t.i=vs(t).then(function(e){0<e.length&&k(t.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ca=function(t){F(this.a,function(e){return e==t}),0==this.a.length&&bs(this)},(t=_s.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.P=function(t){return this.b.then(function(e){return e.P(t)})},t.Y=function(t){this.a.push(t)},t.ca=function(t){F(this.a,function(e){return e==t})},(t=ws.prototype).get=function(t){return wt(this.a[t])},t.set=function(t,e){return this.a[t]=e,wt()},t.P=function(t){return delete this.a[t],wt()},t.Y=function(){},t.ca=function(){},(t=xs.prototype).get=function(t){var e=this;return wt().then(function(){return fr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return wt().then(function(){var r=hr(e);null===r?n.P(t):n.a.setItem(t,r)})},t.P=function(t){var e=this;return wt().then(function(){e.a.removeItem(t)})},t.Y=function(t){n.window&&ye(n.window,"storage",t)},t.ca=function(t){n.window&&_e(n.window,"storage",t)},(t=Es.prototype).get=function(){return wt(null)},t.set=function(){return wt()},t.P=function(){return wt()},t.Y=function(){},t.ca=function(){},(t=Ss.prototype).get=function(t){var e=this;return wt().then(function(){return fr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return wt().then(function(){var r=hr(e);null===r?n.P(t):n.a.setItem(t,r)})},t.P=function(t){var e=this;return wt().then(function(){e.a.removeItem(t)})},t.Y=function(){},t.ca=function(){};var As,Ps,Is={A:xs,Ra:Ss},Os={A:xs,Ra:Ss},Ds={A:rs,Ra:Es},ks={A:xs,Ra:Es},Ms={Zc:"local",NONE:"none",ad:"session"};function Rs(){var t=!(mr(ir())||!Qn()),e=cr(),r=ar();this.o=t,this.h=e,this.l=r,this.a={},As||(As=new function(){var t={};t.Browser=Is,t.Node=Os,t.ReactNative=Ds,t.Worker=ks,this.a=t[Yn()]}),t=As;try{this.g=!jn()&&_r()||!n.indexedDB?new t.a.A:new _s(Zn()?new ws:new t.a.A)}catch(t){this.g=new ws,this.h=!0}try{this.i=new t.a.Ra}catch(t){this.i=new ws}this.m=new ws,this.f=g(this.Pb,this),this.b={}}function Ns(){return Ps||(Ps=new Rs),Ps}function Ls(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function Fs(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Bs(t,e,n){return n=Fs(e,n),"local"==e.A&&(t.b[n]=null),Ls(t,e.A).P(n)}function js(t){t.c&&(clearInterval(t.c),t.c=null)}(t=Rs.prototype).get=function(t,e){return Ls(this,t.A).get(Fs(t,e))},t.set=function(t,e,n){var r=Fs(t,n),i=this,o=Ls(this,t.A);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.A&&(i.b[r]=e)})},t.addListener=function(t,e,r){t=Fs(t,e),this.l&&(this.b[t]=n.localStorage.getItem(t)),rt(this.a)&&(Ls(this,"local").Y(this.f),this.h||(jn()||!_r())&&n.indexedDB||!this.l||function(t){js(t),t.c=setInterval(function(){for(var e in t.a){var r=n.localStorage.getItem(e),i=t.b[e];r!=i&&(t.b[e]=r,r=new se({type:"storage",key:e,target:window,oldValue:i,newValue:r,a:!0}),t.Pb(r))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(r)},t.removeListener=function(t,e,n){t=Fs(t,e),this.a[t]&&(F(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),rt(this.a)&&(Ls(this,"local").ca(this.f),js(this))},t.Pb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var r in this.a){var i=this.b[r];void 0===i&&(i=null);var o=n.localStorage.getItem(r);o!==i&&(this.b[r]=o,this.Xa(r))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Ls(this,"local").ca(this.f):js(this),this.o)if(r=n.localStorage.getItem(e),(i=t.a.newValue)!==r)null!==i?n.localStorage.setItem(e,i):n.localStorage.removeItem(e);else if(this.b[e]===i&&void 0===t.a.a)return;var a=this;r=function(){void 0===t.a.a&&a.b[e]===n.localStorage.getItem(e)||(a.b[e]=n.localStorage.getItem(e),a.Xa(e))},qt&&Jt&&10==Jt&&n.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(r,10):r()}}else k(t,g(this.Xa,this))},t.Xa=function(t){this.a[t]&&k(this.a[t],function(t){t()})};var zs,Vs={name:"authEvent",A:"local"};function Us(t,e){this.b=qs,this.f=n.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=n.Int32Array?new Int32Array(64):Array(64),void 0!==zs||(zs=n.Int32Array?new Int32Array(Zs):Zs),this.reset()}b(Us,function(){this.b=-1});for(var qs=64,Gs=qs-1,Hs=[],Ws=0;Ws<Gs;Ws++)Hs[Ws]=0;var Ks=B(128,Hs);function Xs(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],l=0|t.a[4],c=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var p=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))|0)+((a=(a=l&c^~l&h)+(0|zs[e])|0)+(0|n[e])|0)|0,o=h,h=c,c=l,l=u+a|0,u=s,s=i,i=r,r=a+p|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+l|0,t.a[5]=t.a[5]+c|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function Qs(t,e,n){void 0===n&&(n=e.length);var i=0,o=t.c;if(r(e))for(;i<n;)t.f[o++]=e.charCodeAt(i++),o==t.b&&(Xs(t),o=0);else{if(!l(e))throw Error("message must be string or array");for(;i<n;){var a=e[i++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");t.f[o++]=a,o==t.b&&(Xs(t),o=0)}}t.c=o,t.g+=n}Us.prototype.reset=function(){this.g=this.c=0,this.a=n.Int32Array?new Int32Array(this.h):j(this.h)};var Zs=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ys(){Us.call(this,8,Js)}b(Ys,Us);var Js=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function $s(t,e,n,r,i){this.m=t,this.i=e,this.l=n,this.o=r||null,this.u=i||null,this.h=e+":"+n,this.v=new function(){this.a=Ns()},this.g=new function(t){this.a=t,this.b=Ns()}(this.h),this.f=null,this.b=[],this.a=this.c=null}function tu(t){return new Ir("invalid-cordova-configuration",t)}function eu(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function nu(t){return t.f||(t.f=t.ga().then(function(){return new dt(function(e){t.wa(function n(r){return e(r),t.Ka(n),!1}),function(t){function e(e){i=!0,o&&o.cancel(),ru(t).then(function(n){var i=r;if(n&&e&&e.url){var o=null;-1!=(i=hi(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=fr(We(o=Ke(i),"firebaseError")||null))?Or(o):null)?new Bi(n.b,n.c,null,null,o):new Bi(n.b,n.c,i,n.g)),i=o||r}eu(t,i)})}var r=new Bi("unknown",null,null,null,new Ir("no-auth-event")),i=!1,o=Re(500).then(function(){return ru(t).then(function(){i||eu(t,r)})}),a=n.handleOpenURL;n.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(or("BuildInfo.packageName",n).toLowerCase()+"://")&&e({url:t}),"function"==typeof a)try{a(t)}catch(t){console.error(t)}},Ui||(Ui=new zi),Ui.subscribe(e)}(t)})})),t.f}function ru(t){var e=null;return function(t){return t.b.get(Vs,t.a).then(function(t){return ji(t)})}(t.g).then(function(n){return e=n,Bs((n=t.g).b,Vs,n.a)}).then(function(){return e})}(t=$s.prototype).ga=function(){return this.za?this.za:this.za=(Xn(void 0)?Kn().then(function(){return new dt(function(t,e){var r=n.document,i=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);r.addEventListener("deviceready",function(){clearTimeout(i),t()},!1)})}):xt(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof or("universalLinks.subscribe",n))throw tu("cordova-universal-links-plugin-fix is not installed");if(void 0===or("BuildInfo.packageName",n))throw tu("cordova-plugin-buildinfo is not installed");if("function"!=typeof or("cordova.plugins.browsertab.openUrl",n))throw tu("cordova-plugin-browsertab is not installed");if("function"!=typeof or("cordova.InAppBrowser.open",n))throw tu("cordova-plugin-inappbrowser is not installed")},function(){throw new Ir("cordova-not-ready")})},t.Ea=function(t,e){return e(new Ir("operation-not-supported-in-this-environment")),wt()},t.Cb=function(){return xt(new Ir("operation-not-supported-in-this-environment"))},t.Qb=function(){return!1},t.Mb=function(){return!0},t.Hb=function(){return!0},t.Ca=function(t,e,r){if(this.c)return xt(new Ir("redirect-operation-pending"));var i=this,o=n.document,a=null,s=null,u=null,l=null;return this.c=wt().then(function(){return Fi(e),nu(i)}).then(function(){return function(t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Bi(e,i,null,o,new Ir("no-auth-event")),s=or("BuildInfo.packageName",n);if("string"!=typeof s)throw new Ir("invalid-cordova-configuration");var u=or("BuildInfo.displayName",n),l={};if(ir().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=s;else{if(!ir().toLowerCase().match(/android/))return xt(new Ir("operation-not-supported-in-this-environment"));l.apn=s}u&&(l.appDisplayName=u),o=function(t){var e=new Ys;Qs(e,t),t=[];var n=8*e.g;Qs(e,Ks,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Xs(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return M(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),l.sessionId=o;var c=ns(t.m,t.i,t.l,e,r,null,i,t.o,l,t.u);return t.ga().then(function(){var e=t.h;return t.v.a.set(Vs,a.C(),e)}).then(function(){var e=or("cordova.plugins.browsertab.isAvailable",n);if("function"!=typeof e)throw new Ir("invalid-cordova-configuration");var r=null;e(function(e){if(e){if("function"!=typeof(r=or("cordova.plugins.browsertab.openUrl",n)))throw new Ir("invalid-cordova-configuration");r(c)}else{if("function"!=typeof(r=or("cordova.InAppBrowser.open",n)))throw new Ir("invalid-cordova-configuration");e=!(!(e=ir()).match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),t.a=r(c,e?"_blank":"_system","location=yes")}})})}(i,t,e,r)}).then(function(){return new dt(function(t,e){s=function(){var e=or("cordova.plugins.browsertab.close",n);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.wa(s),l=function(){vr()&&u()},o.addEventListener("resume",u=function(){a||(a=Re(2e3).then(function(){e(new Ir("redirect-cancelled-by-user"))}))},!1),ir().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).s(function(t){return ru(i).then(function(){throw t})})}).ia(function(){u&&o.removeEventListener("resume",u,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),s&&i.Ka(s),i.c=null})},t.wa=function(t){this.b.push(t),nu(this).s(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Bi("unknown",null,null,null,new Ir("no-auth-event")),t(e))})},t.Ka=function(t){F(this.b,function(e){return e==t})};var iu={name:"pendingRedirect",A:"session"};function ou(t){return Bs(t.b,iu,t.a)}function au(t,e,n){this.u=t,this.l=e,this.m=n,this.h=[],this.f=!1,this.i=g(this.bb,this),this.b=new gu,this.o=new _u,this.g=new function(t){this.a=t,this.b=Ns()}(this.l+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.o,this.c.linkViaPopup=this.o,this.c.reauthViaPopup=this.o,this.a=su(this.u,this.l,this.m,Qr)}function su(t,e,n,r){var i=Qi.a.SDK_VERSION||null;return Xn()?new $s(t,e,n,i,r):new Ja(t,e,n,i,r)}function uu(t){t.f||(t.f=!0,t.a.wa(t.i));var e=t.a;return t.a.ga().s(function(n){throw t.a==e&&t.reset(),n})}function lu(t){t.a.Mb()&&uu(t).s(function(e){var n=new Bi("unknown",null,null,null,new Ir("operation-not-supported-in-this-environment"));fu(e)&&t.bb(n)}),t.a.Hb()||yu(t.b)}(t=au.prototype).reset=function(){this.f=!1,this.a.Ka(this.i),this.a=su(this.u,this.l,this.m)},t.Ya=function(){this.b.Ya()},t.subscribe=function(t){if(N(this.h,t)||this.h.push(t),!this.f){var e=this;(function(t){return t.b.get(iu,t.a).then(function(t){return"pending"==t})})(this.g).then(function(t){t?ou(e.g).then(function(){uu(e).s(function(t){var n=new Bi("unknown",null,null,null,new Ir("operation-not-supported-in-this-environment"));fu(t)&&e.bb(n)})}):lu(e)}).s(function(){lu(e)})}},t.unsubscribe=function(t){F(this.h,function(e){return e==t})},t.bb=function(t){if(!t)throw new Ir("invalid-auth-event");for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.vb(t.b,t.c)){(e=this.c[t.b])&&e.h(t,r),e=!0;break}}return yu(this.b),e};var cu=new yr(2e3,1e4),hu=new yr(3e4,6e4);function pu(t,e,n,r,i,o){return t.a.Cb(e,n,r,function(){t.f||(t.f=!0,t.a.wa(t.i))},function(){t.reset()},i,o)}function fu(t){return!(!t||"auth/cordova-not-ready"!=t.code)}au.prototype.fa=function(){return this.b.fa()},au.prototype.Ca=function(t,e,n){var r,i=this;return function(t){return t.b.set(iu,"pending",t.a)}(this.g).then(function(){return i.a.Ca(t,e,n).s(function(t){if(fu(t))throw new Ir("operation-not-supported-in-this-environment");return r=t,ou(i.g).then(function(){throw r})}).then(function(){return i.a.Qb()?new dt(function(){}):ou(i.g).then(function(){return i.fa()}).then(function(){}).s(function(){})})})},au.prototype.Ea=function(t,e,n,r){return this.a.Ea(n,function(n){t.ha(e,null,n,r)},cu.get())};var du={};function mu(t,e,n){var r=e+":"+n;return du[r]||(du[r]=new au(t,e,n)),du[r]}function gu(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function yu(t){t.g||(t.g=!0,bu(t,!1,null,null))}function vu(t,e){if(t.b=function(){return wt(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function bu(t,e,n,r){e?r?function(t,e){if(t.b=function(){return xt(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):vu(t,n):vu(t,{user:null}),t.f=[],t.c=[]}function _u(){}function wu(){this.sb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.sb},set:function(t){this.sb=t},enumerable:!1})}function xu(t,e){this.a=e,Sr(this,"verificationId",t)}function Cu(t,e,n,r){return new Ri(t).Ua(e,n).then(function(t){return new xu(t,r)})}function Eu(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Su(t){this.f=t,this.b=this.a=null,this.c=0}function Tu(t,e){var n=e[Ko],r=e.refreshToken;e=Au(e.expiresIn),t.b=n,t.c=e,t.a=r}function Au(t){return v()+1e3*parseInt(t,10)}function Pu(t,e){this.a=t||null,this.b=e||null,Tr(this,{lastSignInTime:br(e||null),creationTime:br(t||null)})}function Iu(t,e){for(var n in ae.call(this,t),e)this[n]=e[n]}function Ou(t,e,n){this.G=[],this.m=t.apiKey,this.o=t.appName,this.u=t.authDomain||null,t=Qi.a.SDK_VERSION?rr(Qi.a.SDK_VERSION):null,this.b=new Ho(this.m,Yr(Qr),t),this.h=new Su(this.b),Fu(this,e[Ko]),Tu(this.h,e),Sr(this,"refreshToken",this.h.a),zu(this,n||{}),Ie.call(this),this.I=!1,this.u&&sr()&&(this.a=mu(this.u,this.m,this.o)),this.N=[],this.i=null,this.w=function(t){return new Eu(function(){return t.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.h.c-v()-3e5;return 0<e?e:0})}(this),this.V=g(this.Ha,this);var r=this;this.ka=null,this.ta=function(t){r.pa(t.g)},this.X=null,this.O=[],this.sa=function(t){ku(r,t.c)},this.W=null}function Du(t,e){t.X&&_e(t.X,"languageCodeChanged",t.ta),(t.X=e)&&ye(e,"languageCodeChanged",t.ta)}function ku(t,e){t.O=e,$o(t.b,Qi.a.SDK_VERSION?rr(Qi.a.SDK_VERSION,t.O):null)}function Mu(t,e){t.W&&_e(t.W,"frameworkChanged",t.sa),(t.W=e)&&ye(e,"frameworkChanged",t.sa)}function Ru(t){try{return Qi.a.app(t.o).auth()}catch(e){throw new Ir("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.o+"'!")}}function Nu(t){t.D||t.w.b||(t.w.start(),_e(t,"tokenChanged",t.V),ye(t,"tokenChanged",t.V))}function Lu(t){_e(t,"tokenChanged",t.V),t.w.stop()}function Fu(t,e){t.ra=e,Sr(t,"_lat",e)}function Bu(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return Et(e).then(function(){return t})}function ju(t){t.a&&!t.I&&(t.I=!0,t.a.subscribe(t))}function zu(t,e){Tr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new Pu(e.createdAt,e.lastLoginAt),providerData:[]})}function Vu(){}function Uu(t){return wt().then(function(){if(t.D)throw new Ir("app-deleted")})}function qu(t){return M(t.providerData,function(t){return t.providerId})}function Gu(t,e){e&&(Hu(t,e.providerId),t.providerData.push(e))}function Hu(t,e){F(t.providerData,function(t){return t.providerId==e})}function Wu(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Sr(t,e,n)}function Ku(t,e){t!=e&&(Tr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),Sr(t,"metadata",e.metadata?function(t){return new Pu(t.a,t.b)}(e.metadata):new Pu),k(e.providerData,function(e){Gu(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Sr(t,"refreshToken",t.h.a))}function Xu(t){return t.F().then(function(e){var n=t.isAnonymous;return function(t,e){return Ua(t.b,Ca,{idToken:e}).then(g(t.xc,t))}(t,e).then(function(){return n||Wu(t,"isAnonymous",!1),e})})}function Qu(t,e){e[Ko]&&t.ra!=e[Ko]&&(Tu(t.h,e),t.dispatchEvent(new Iu("tokenChanged")),Fu(t,e[Ko]),Wu(t,"refreshToken",t.h.a))}function Zu(t,e){return Xu(t).then(function(){if(N(qu(t),e))return Bu(t).then(function(){throw new Ir("provider-already-linked")})})}function Yu(t,e,n){return Ar({user:t,credential:Li(e),additionalUserInfo:e=ni(e),operationType:n})}function Ju(t,e){return Qu(t,e),t.reload().then(function(){return t})}function $u(t,e,n,r,i){if(!sr())return xt(new Ir("operation-not-supported-in-this-environment"));if(t.i&&!i)return xt(t.i);var o=ei(n.providerId),a=dr(t.uid+":::"),s=null;(!cr()||Qn())&&t.u&&n.isOAuthProvider&&(s=ns(t.u,t.m,t.o,e,n,null,a,Qi.a.SDK_VERSION||null));var u=Gn(s,o&&o.Ba,o&&o.Aa);return r=r().then(function(){if(el(t),!i)return t.F().then(function(){})}).then(function(){return pu(t.a,u,e,n,a,!!s)}).then(function(){return new dt(function(n,r){t.ha(e,null,new Ir("cancelled-popup-request"),t.g||null),t.f=n,t.v=r,t.g=a,t.c=t.a.Ea(t,e,u,a)})}).then(function(t){return u&&qn(u),t?Ar(t):null}).s(function(t){throw u&&qn(u),t}),nl(t,r,i)}function tl(t,e,n,r,i){if(!sr())return xt(new Ir("operation-not-supported-in-this-environment"));if(t.i&&!i)return xt(t.i);var o=null,a=dr(t.uid+":::");return r=r().then(function(){if(el(t),!i)return t.F().then(function(){})}).then(function(){return t.aa=a,Bu(t)}).then(function(e){return t.ba&&(e=(e=t.ba).b.set(il,t.C(),e.a)),e}).then(function(){return t.a.Ca(e,n,a)}).s(function(e){if(o=e,t.ba)return ol(t.ba);throw o}).then(function(){if(o)throw o}),nl(t,r,i)}function el(t){if(!t.a||!t.I){if(t.a&&!t.I)throw new Ir("internal-error");throw new Ir("auth-domain-config-required")}}function nl(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),xt(t.i)):e.s(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new Iu("userInvalidated")),t.i=e),e})}(t,e,n);return t.G.push(r),r.ia(function(){L(t.G,r)}),r}function rl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[Ko]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-v())/1e3;var r=new Ou(e,n,t);return t.providerData&&k(t.providerData,function(t){t&&Gu(r,Ar(t))}),t.redirectEventId&&(r.aa=t.redirectEventId),r}gu.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},gu.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.b,r=t.c,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(bu(this,!0,null,t.a),wt()):e.xa(n,r)?function(t,e,n){n=n.xa(e.b,e.c);var r=e.f,i=e.g,o=e.h,a=!!e.b.match(/Redirect$/);n(r,i,o).then(function(e){bu(t,a,e,null)}).s(function(e){bu(t,a,null,e)})}(this,t,e):xt(new Ir("invalid-auth-event")):(bu(this,!1,null,null),wt())}else xt(new Ir("invalid-auth-event"))},gu.prototype.Ya=function(){this.g&&!this.i&&bu(this,!1,null,null)},gu.prototype.fa=function(){var t=this;return new dt(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new Ir("timeout");t.a&&t.a.cancel(),t.a=Re(hu.get()).then(function(){t.b||(t.g=!0,bu(t,!0,null,e))})}(t))})},_u.prototype.h=function(t,e){if(t){var n=t.b,r=t.c;t.a?(e.ha(t.b,null,t.a,t.c),wt()):e.xa(n,r)?function(t,e){var n=t.c,r=t.b;e.xa(r,n)(t.f,t.g,t.h).then(function(t){e.ha(r,t,null,n)}).s(function(t){e.ha(r,null,t,n)})}(t,e):xt(new Ir("invalid-auth-event"))}else xt(new Ir("invalid-auth-event"))},xu.prototype.confirm=function(t){return t=Ni(this.verificationId,t),this.a(t)},Eu.prototype.start=function(){this.a=this.c,function t(e,r){e.stop(),e.b=Re(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,r)).then(function(){return t=n.document,e=null,vr()||!t?wt():new dt(function(n){t.addEventListener("visibilitychange",e=function(){vr()&&(t.removeEventListener("visibilitychange",e,!1),n())},!1)}).s(function(n){throw t.removeEventListener("visibilitychange",e,!1),n});var t,e}).then(function(){return e.h()}).then(function(){t(e,!0)}).s(function(n){e.i(n)&&t(e,!1)})}(this,!0)},Eu.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Su.prototype.C=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Su.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?xt(new Ir("user-token-expired")):t||!this.b||v()>this.c-3e4?this.a?function(t,e){return function(t,e){return new dt(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ta(t,t.i+"?key="+encodeURIComponent(t.b),function(t){t?t.error?r(Ga(t)):t.access_token&&t.refresh_token?n(t):r(new Ir("internal-error")):r(new Ir("network-request-failed"))},"POST",an(e).toString(),t.f,t.l.get()):r(new Ir("internal-error"))})}(t.f,e).then(function(e){return t.b=e.access_token,t.c=Au(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).s(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):wt(null):wt({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Pu.prototype.C=function(){return{lastLoginAt:this.b,createdAt:this.a}},b(Iu,ae),b(Ou,Ie),Ou.prototype.pa=function(t){this.ka=t,Jo(this.b,t)},Ou.prototype.ea=function(){return this.ka},Ou.prototype.ya=function(){return j(this.O)},Ou.prototype.Ha=function(){this.w.b&&(this.w.stop(),this.w.start())},Sr(Ou.prototype,"providerId","firebase"),(t=Ou.prototype).reload=function(){var t=this;return nl(this,Uu(this).then(function(){return Xu(t).then(function(){return Bu(t)}).then(Vu)}))},t.dc=function(t){return this.F(t).then(function(t){return new function(t){var e=Xr(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new Ir("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Tr(this,{token:t,expirationTime:br(1e3*e.exp),authTime:br(1e3*e.auth_time),issuedAtTime:br(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}(t)})},t.F=function(t){var e=this;return nl(this,Uu(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new Ir("internal-error");return t.accessToken!=e.ra&&(Fu(e,t.accessToken),e.dispatchEvent(new Iu("tokenChanged"))),Wu(e,"refreshToken",t.refreshToken),t.accessToken}))},t.xc=function(t){if(!(t=t.users)||!t.length)throw new Ir("internal-error");zu(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?M(t,function(t){return new function(t,e,n,r,i,o){Tr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Gu(this,e[n]);Wu(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.gb=function(t){var e=this,n=null;return nl(this,t.f(this.b,this.uid).then(function(t){return Qu(e,t),n=Yu(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},t.yc=function(t){return Cr("firebase.User.prototype.reauthenticateWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential instead."),this.gb(t).then(function(){})},t.eb=function(t){var e=this,n=null;return nl(this,Zu(this,t.providerId).then(function(){return e.F()}).then(function(n){return t.b(e.b,n)}).then(function(t){return n=Yu(e,t,"link"),Ju(e,t)}).then(function(){return n}))},t.pc=function(t){return Cr("firebase.User.prototype.linkWithCredential is deprecated. Please use firebase.User.prototype.linkAndRetrieveDataWithCredential instead."),this.eb(t).then(function(t){return t.user})},t.qc=function(t,e){var n=this;return nl(this,Zu(this,"phone").then(function(){return Cu(Ru(n),t,e,g(n.eb,n))}))},t.zc=function(t,e){var n=this;return nl(this,wt().then(function(){return Cu(Ru(n),t,e,g(n.gb,n))}),!0)},t.pb=function(t){var e=this;return nl(this,this.F().then(function(n){return e.b.pb(n,t)}).then(function(t){return Qu(e,t),e.reload()}))},t.Rc=function(t){var e=this;return nl(this,this.F().then(function(n){return t.b(e.b,n)}).then(function(t){return Qu(e,t),e.reload()}))},t.qb=function(t){var e=this;return nl(this,this.F().then(function(n){return e.b.qb(n,t)}).then(function(t){return Qu(e,t),e.reload()}))},t.rb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Uu(this);var e=this;return nl(this,this.F().then(function(n){return e.b.rb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Qu(e,t),Wu(e,"displayName",t.displayName||null),Wu(e,"photoURL",t.photoUrl||null),k(e.providerData,function(t){"password"===t.providerId&&(Sr(t,"displayName",e.displayName),Sr(t,"photoURL",e.photoURL))}),Bu(e)}).then(Vu))},t.Pc=function(t){var e=this;return nl(this,Xu(this).then(function(n){return N(qu(e),t)?function(t,e,n){return Ua(t,_a,{idToken:e,deleteProvider:n})}(e.b,n,[t]).then(function(t){var n={};return k(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),k(qu(e),function(t){n[t]||Hu(e,t)}),n[Ri.PROVIDER_ID]||Sr(e,"phoneNumber",null),Bu(e)}):Bu(e).then(function(){throw new Ir("no-such-provider")})}))},t.delete=function(){var t=this;return nl(this,this.F().then(function(e){return Ua(t.b,ba,{idToken:e})}).then(function(){t.dispatchEvent(new Iu("userDeleted"))})).then(function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");Du(t,null),Mu(t,null),t.G=[],t.D=!0,Lu(t),Sr(t,"refreshToken",null),t.a&&t.a.unsubscribe(t)})},t.vb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.aa||null)==e||"reauthViaRedirect"==t&&(this.aa||null)==e)},t.ha=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.xa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?g(this.Ab,this):"reauthViaPopup"==t&&e==(this.g||null)?g(this.Bb,this):"linkViaRedirect"==t&&(this.aa||null)==e?g(this.Ab,this):"reauthViaRedirect"==t&&(this.aa||null)==e?g(this.Bb,this):null},t.rc=function(t){var e=this;return $u(this,"linkViaPopup",t,function(){return Zu(e,t.providerId).then(function(){return Bu(e)})},!1)},t.Ac=function(t){return $u(this,"reauthViaPopup",t,function(){return wt()},!0)},t.sc=function(t){var e=this;return tl(this,"linkViaRedirect",t,function(){return Zu(e,t.providerId)},!1)},t.Bc=function(t){return tl(this,"reauthViaRedirect",t,function(){return wt()},!0)},t.Ab=function(t,e,n){var r=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return nl(this,this.F().then(function(i){return pa(r.b,{requestUri:t,postBody:n,sessionId:e,idToken:i})}).then(function(t){return i=Yu(r,t,"link"),Ju(r,t)}).then(function(){return i}))},t.Bb=function(t,e,n){var r=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return nl(this,wt().then(function(){return pi(fa(r.b,{requestUri:t,sessionId:e,postBody:n}),r.uid)}).then(function(t){return i=Yu(r,t,"reauthenticate"),Qu(r,t),r.i=null,r.reload()}).then(function(){return i}),!0)},t.jb=function(t){var e=this,n=null;return nl(this,this.F().then(function(e){return n=e,void 0===t||rt(t)?{}:qr(new Mr(t))}).then(function(t){return e.b.jb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.toJSON=function(){return this.C()},t.C=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.m,appName:this.o,authDomain:this.u,stsTokenManager:this.h.C(),redirectEventId:this.aa||null};return this.metadata&&ut(t,this.metadata.C()),k(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),t};var il={name:"redirectUser",A:"session"};function ol(t){return Bs(t.b,il,t.a)}function al(t){this.a=t,this.b=Ns(),this.c=null,this.f=function(t){var e=ll("local"),r=ll("session"),i=ll("none");return function(t,e,r){var i=Fs(e,r),o=Ls(t,e.A);return t.get(e,r).then(function(a){var s=null;try{s=fr(n.localStorage.getItem(i))}catch(t){}if(s&&!a)return n.localStorage.removeItem(i),t.set(e,s,r);s&&a&&"localStorage"!=o.type&&n.localStorage.removeItem(i)})}(t.b,e,t.a).then(function(){return t.b.get(r,t.a)}).then(function(n){return n?r:t.b.get(i,t.a).then(function(n){return n?i:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(ul,t.a).then(function(t){return t?ll(t):e})})})}).then(function(e){return t.c=e,sl(t,e.A)}).s(function(){t.c||(t.c=e)})}(this),this.b.addListener(ll("local"),this.a,g(this.g,this))}function sl(t,e){var n,r=[];for(n in Ms)Ms[n]!==e&&r.push(Bs(t.b,ll(Ms[n]),t.a));return r.push(Bs(t.b,ul,t.a)),function(t){return new dt(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Ct(t[s],y(o,s),a);else e(i)})}(r)}al.prototype.g=function(){var t=this,e=ll("local");fl(this,function(){return wt().then(function(){return t.c&&"local"!=t.c.A?t.b.get(e,t.a):null}).then(function(n){if(n)return sl(t,"local").then(function(){t.c=e})})})};var ul={name:"persistence",A:"session"};function ll(t){return{name:"authUser",A:t}}function cl(t,e){return fl(t,function(){return t.b.set(t.c,e.C(),t.a)})}function hl(t){return fl(t,function(){return Bs(t.b,t.c,t.a)})}function pl(t,e){return fl(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),rl(t||{})})})}function fl(t,e){return t.f=t.f.then(e,e),t.f}function dl(t){if(this.m=!1,Sr(this,"settings",new wu),Sr(this,"app",t),!wl(this).options||!wl(this).options.apiKey)throw new Ir("invalid-api-key");t=Qi.a.SDK_VERSION?rr(Qi.a.SDK_VERSION):null,this.b=new Ho(wl(this).options&&wl(this).options.apiKey,Yr(Qr),t),this.N=[],this.o=[],this.I=[],this.Tb=Qi.a.INTERNAL.createSubscribe(g(this.mc,this)),this.O=void 0,this.Ub=Qi.a.INTERNAL.createSubscribe(g(this.nc,this)),bl(this,null),this.h=new al(wl(this).options.apiKey+":"+wl(this).name),this.w=new function(t){this.a=t,this.b=Ns()}(wl(this).options.apiKey+":"+wl(this).name),this.V=Sl(this,function(t){var e=wl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(il,t.a).then(function(t){return t&&e&&(t.authDomain=e),rl(t||{})})}(t.w,wl(t).options.authDomain).then(function(e){return(t.D=e)&&(e.ba=t.w),ol(t.w)});return Sl(t,e)}(t).then(function(){return pl(t.h,e)}).then(function(e){return e?(e.ba=t.w,t.D&&(t.D.aa||null)==(e.aa||null)?e:e.reload().then(function(){return cl(t.h,e).then(function(){return e})}).s(function(n){return"auth/network-request-failed"==n.code?e:hl(t.h)})):null}).then(function(e){bl(t,e||null)});return Sl(t,n)}(this)),this.i=Sl(this,function(t){return t.V.then(function(){return t.fa()}).s(function(){}).then(function(){if(!t.m)return t.ka()}).s(function(){}).then(function(){if(!t.m){t.X=!0;var e=t.h;e.b.addListener(ll("local"),e.a,t.ka)}})}(this)),this.X=!1,this.ka=g(this.Mc,this),this.Ha=g(this.Z,this),this.ra=g(this.bc,this),this.sa=g(this.jc,this),this.ta=g(this.kc,this),function(t){var e=wl(t).options.authDomain,n=wl(t).options.apiKey;e&&sr()&&(t.Sb=t.V.then(function(){if(!t.m){if(t.a=mu(e,n,wl(t).name),t.a.subscribe(t),xl(t)&&ju(xl(t)),t.D){ju(t.D);var r=t.D;r.pa(t.ea()),Du(r,t),ku(r=t.D,t.G),Mu(r,t),t.D=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=g(this.delete,this),this.INTERNAL.logFramework=g(this.tc,this),this.u=0,Ie.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ea()},set:function(t){this.pa(t)},enumerable:!1}),t.W=null}(this),this.G=[]}function ml(t){ae.call(this,"languageCodeChanged"),this.g=t}function gl(t){ae.call(this,"frameworkChanged"),this.c=t}function yl(t){return t.Sb||xt(new Ir("auth-domain-config-required"))}function vl(t,e){var n={};return n.apiKey=wl(t).options.apiKey,n.authDomain=wl(t).options.authDomain,n.appName=wl(t).name,t.V.then(function(){return function(t,e,n,r){var i=new Ou(t,e);return n&&(i.ba=n),r&&ku(i,r),i.reload().then(function(){return i})}(n,e,t.w,t.ya())}).then(function(e){return xl(t)&&e.uid==xl(t).uid?(Ku(xl(t),e),t.Z(e)):(bl(t,e),ju(e),t.Z(e))}).then(function(){El(t)})}function bl(t,e){xl(t)&&(function(t,e){F(t.N,function(t){return t==e})}(xl(t),t.Ha),_e(xl(t),"tokenChanged",t.ra),_e(xl(t),"userDeleted",t.sa),_e(xl(t),"userInvalidated",t.ta),Lu(xl(t))),e&&(e.N.push(t.Ha),ye(e,"tokenChanged",t.ra),ye(e,"userDeleted",t.sa),ye(e,"userInvalidated",t.ta),0<t.u&&Nu(e)),Sr(t,"currentUser",e),e&&(e.pa(t.ea()),Du(e,t),ku(e,t.G),Mu(e,t))}function _l(t,e){var n=null,r=null;return Sl(t,e.then(function(e){return n=Li(e),r=ni(e),vl(t,e)}).then(function(){return Ar({user:xl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function wl(t){return t.app}function xl(t){return t.currentUser}function Cl(t){return xl(t)&&xl(t)._lat||null}function El(t){if(t.X){for(var e=0;e<t.o.length;e++)t.o[e]&&t.o[e](Cl(t));if(t.O!==t.getUid()&&t.I.length)for(t.O=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](Cl(t))}}function Sl(t,e){return t.N.push(e),e.ia(function(){L(t.N,e)}),e}function Tl(){}function Al(){this.a={},this.b=1e12}al.prototype.mb=function(t){var e=null,n=this;return function(t){var e=new Ir("invalid-persistence-type"),n=new Ir("unsupported-persistence-type");t:{for(r in Ms)if(Ms[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Yn()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!ar()&&"none"!==t)throw n}}(t),fl(this,function(){return t!=n.c.A?n.b.get(n.c,n.a).then(function(r){return e=r,sl(n,t)}).then(function(){if(n.c=ll(t),e)return n.b.set(n.c,e,n.a)}):wt()})},b(dl,Ie),b(ml,ae),b(gl,ae),(t=dl.prototype).mb=function(t){return Sl(this,t=this.h.mb(t))},t.pa=function(t){this.W===t||this.m||(this.W=t,Jo(this.b,this.W),this.dispatchEvent(new ml(this.ea())))},t.ea=function(){return this.W},t.Sc=function(){var t=n.navigator;this.pa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.tc=function(t){this.G.push(t),$o(this.b,Qi.a.SDK_VERSION?rr(Qi.a.SDK_VERSION,this.G):null),this.dispatchEvent(new gl(this.G))},t.ya=function(){return j(this.G)},t.toJSON=function(){return{apiKey:wl(this).options.apiKey,authDomain:wl(this).options.authDomain,appName:wl(this).name,currentUser:xl(this)&&xl(this).C()}},t.vb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ha=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.xa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?g(this.ac,this):null},t.ac=function(t,e,n){var r=this;t={requestUri:t,postBody:n,sessionId:e},this.c&&(this.c.cancel(),this.c=null);var i=null,o=null,a=ha(r.b,t).then(function(t){return i=Li(t),o=ni(t),t});return Sl(this,t=r.V.then(function(){return a}).then(function(t){return vl(r,t)}).then(function(){return Ar({user:xl(r),credential:i,additionalUserInfo:o,operationType:"signIn"})}))},t.Kc=function(t){if(!sr())return xt(new Ir("operation-not-supported-in-this-environment"));var e=this,n=ei(t.providerId),r=dr(),i=null;(!cr()||Qn())&&wl(this).options.authDomain&&t.isOAuthProvider&&(i=ns(wl(this).options.authDomain,wl(this).options.apiKey,wl(this).name,"signInViaPopup",t,null,r,Qi.a.SDK_VERSION||null));var o=Gn(i,n&&n.Ba,n&&n.Aa);return Sl(this,n=yl(this).then(function(e){return pu(e,o,"signInViaPopup",t,r,!!i)}).then(function(){return new dt(function(t,n){e.ha("signInViaPopup",null,new Ir("cancelled-popup-request"),e.g),e.f=t,e.v=n,e.g=r,e.c=e.a.Ea(e,"signInViaPopup",o,r)})}).then(function(t){return o&&qn(o),t?Ar(t):null}).s(function(t){throw o&&qn(o),t}))},t.Lc=function(t){if(!sr())return xt(new Ir("operation-not-supported-in-this-environment"));var e=this;return Sl(this,yl(this).then(function(){return fl(t=e.h,function(){return t.b.set(ul,t.c.A,t.a)});var t}).then(function(){return e.a.Ca("signInViaRedirect",t)}))},t.fa=function(){if(!sr())return xt(new Ir("operation-not-supported-in-this-environment"));var t=this;return Sl(this,yl(this).then(function(){return t.a.fa()}).then(function(t){return t?Ar(t):null}))},t.Qc=function(t){if(!t)return xt(new Ir("null-user"));var e=this,n={};n.apiKey=wl(this).options.apiKey,n.authDomain=wl(this).options.authDomain,n.appName=wl(this).name;var r=function(t,e,n,r){e=e||{apiKey:t.m,authDomain:t.u,appName:t.o};var i=t.h,o={};return o[Ko]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-v())/1e3,e=new Ou(e,o),n&&(e.ba=n),r&&ku(e,r),Ku(e,t),e}(t,n,e.w,e.ya());return Sl(this,this.i.then(function(){if(wl(e).options.apiKey!=t.m)return r.reload()}).then(function(){return xl(e)&&t.uid==xl(e).uid?(Ku(xl(e),t),e.Z(t)):(bl(e,r),ju(r),e.Z(r))}).then(function(){El(e)}))},t.nb=function(){var t=this;return Sl(this,this.i.then(function(){return xl(t)?(bl(t,null),hl(t.h).then(function(){El(t)})):wt()}))},t.Mc=function(){var t=this;return pl(this.h,wl(this).options.authDomain).then(function(e){if(!t.m){var n;if(n=xl(t)&&e){n=xl(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Ku(xl(t),e),xl(t).F();(xl(t)||e)&&(bl(t,e),e&&(ju(e),e.ba=t.w),t.a&&t.a.subscribe(t),El(t))}})},t.Z=function(t){return cl(this.h,t)},t.bc=function(){El(this),this.Z(xl(this))},t.jc=function(){this.nb()},t.kc=function(){this.nb()},t.mc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(xl(e))})},t.nc=function(t){var e=this;!function(t,e){t.I.push(e),Sl(t,t.i.then(function(){!t.m&&N(t.I,e)&&t.O!==t.getUid()&&(t.O=t.getUid(),e(Cl(t)))}))}(this,function(){t.next(xl(e))})},t.vc=function(t,e,n){var r=this;return this.X&&Qi.a.Promise.resolve().then(function(){c(t)?t(xl(r)):c(t.next)&&t.next(xl(r))}),this.Tb(t,e,n)},t.uc=function(t,e,n){var r=this;return this.X&&Qi.a.Promise.resolve().then(function(){r.O=r.getUid(),c(t)?t(xl(r)):c(t.next)&&t.next(xl(r))}),this.Ub(t,e,n)},t.cc=function(t){var e=this;return Sl(this,this.i.then(function(){return xl(e)?xl(e).F(t).then(function(t){return{accessToken:t}}):null}))},t.Nb=function(t){var e=this;return this.i.then(function(){return _l(e,Ua(e.b,Fa,{token:t}))}).then(function(t){var n=t.user;return Wu(n,"isAnonymous",!1),e.Z(n),t})},t.Ec=function(t){return Cr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCustomToken is deprecated. Please use firebase.auth.Auth.prototype.signInWithCustomToken instead."),this.Nb(t)},t.Fc=function(t,e){return Cr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.signInWithEmailAndPassword instead."),this.Ob(t,e)},t.Ob=function(t,e){var n=this;return this.i.then(function(){return _l(n,Ua(n.b,Ba,{email:t,password:e}))})},t.xb=function(t,e){var n=this;return this.i.then(function(){return _l(n,Ua(n.b,ya,{email:t,password:e}))})},t.Wb=function(t,e){return Cr("firebase.auth.Auth.prototype.createUserAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.createUserWithEmailAndPassword instead."),this.xb(t,e)},t.Hc=function(t){return Cr("firebase.auth.Auth.prototype.signInWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential instead."),this.Pa(t).then(function(t){return t.user})},t.Pa=function(t){var e=this;return this.i.then(function(){return _l(e,t.la(e.b))})},t.Qa=function(){var t=this;return this.i.then(function(){var e=xl(t);return e&&e.isAnonymous?Ar({user:e,credential:null,additionalUserInfo:Ar({providerId:null,isNewUser:!1}),operationType:"signIn"}):_l(t,t.b.Qa()).then(function(e){var n=e.user;return Wu(n,"isAnonymous",!0),t.Z(n),e})})},t.Gc=function(){return Cr("firebase.auth.Auth.prototype.signInAnonymouslyAndRetrieveData is deprecated. Please use firebase.auth.Auth.prototype.signInAnonymously instead."),this.Qa()},t.getUid=function(){return xl(this)&&xl(this).uid||null},t.Vb=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&xl(this)&&Nu(xl(this))},t.Cc=function(t){var e=this;k(this.o,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&xl(this)&&Lu(xl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.o.push(t),Sl(this,this.i.then(function(){e.m||N(e.o,t)&&t(Cl(e))}))},t.removeAuthTokenListener=function(t){F(this.o,function(e){return e==t})},t.delete=function(){this.m=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&(t=this.h).b.removeListener(ll("local"),t.a,this.ka),this.a&&(this.a.unsubscribe(this),this.a.Ya()),Qi.a.Promise.resolve()},t.Zb=function(t){return Cr("firebase.auth.Auth.prototype.fetchProvidersForEmail is deprecated. Please use firebase.auth.Auth.prototype.fetchSignInMethodsForEmail instead."),Sl(this,function(t,e){return Ua(t,va,{identifier:e,continueUri:ur()?zn():"http://localhost"}).then(function(t){return t.allProviders||[]})}(this.b,t))},t.$b=function(t){return Sl(this,function(t,e){return Ua(t,va,{identifier:e,continueUri:ur()?zn():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.b,t))},t.oc=function(t){return!!Di(t)},t.lb=function(t,e){var n=this;return Sl(this,wt().then(function(){var t=new Mr(e);if(!t.c)throw new Ir("argument-error",Lr+" must be true when sending sign in link to email");return qr(t)}).then(function(e){return n.b.lb(t,e)}).then(function(){}))},t.Tc=function(t){return this.Ja(t).then(function(t){return t.data.email})},t.Za=function(t,e){return Sl(this,this.b.Za(t,e).then(function(){}))},t.Ja=function(t){return Sl(this,this.b.Ja(t).then(function(t){return new function(t){var e={},n=t.email,r=t.newEmail;if(!(t=t.requestType)||"EMAIL_SIGNIN"!=t&&!n)throw Error("Invalid provider user info!");e.fromEmail=r||null,e.email=n||null,Sr(this,"operation",t),Sr(this,"data",Pr(e))}(t)}))},t.Wa=function(t){return Sl(this,this.b.Wa(t).then(function(){}))},t.kb=function(t,e){var n=this;return Sl(this,wt().then(function(){return void 0===e||rt(e)?{}:qr(new Mr(e))}).then(function(e){return n.b.kb(t,e)}).then(function(){}))},t.Jc=function(t,e){return Sl(this,Cu(this,t,e,g(this.Pa,this)))},t.Ic=function(t,e){var n=this;return Sl(this,wt().then(function(){var r=Oi(t,e||zn());return n.Pa(r)}))},Tl.prototype.render=function(){},Tl.prototype.reset=function(){},Tl.prototype.getResponse=function(){},Tl.prototype.execute=function(){};var Pl=null;function Il(t,e){return(e=Ol(e))&&t.a[e]||null}function Ol(t){return(t=void 0===t?1e12:t)?t.toString():null}function Dl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Dn(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():ye(this.f,"click",this.i)}function kl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Ml(){}Al.prototype.render=function(t,e){return this.a[this.b.toString()]=new Dl(t,e),this.b++},Al.prototype.reset=function(t){var e=Il(this,t);t=Ol(t),e&&t&&(e.delete(),delete this.a[t])},Al.prototype.getResponse=function(t){return(t=Il(this,t))?t.getResponse():null},Al.prototype.execute=function(t){(t=Il(this,t))&&t.execute()},Dl.prototype.getResponse=function(){return kl(this),this.b},Dl.prototype.execute=function(){kl(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()},6e4)},500))},Dl.prototype.delete=function(){kl(this),this.g=!0,clearTimeout(this.a),this.a=null,_e(this.f,"click",this.i)},Ml.prototype.g=function(){return Pl||(Pl=new Al),wt(Pl)},Ml.prototype.c=function(){};var Rl=null;function Nl(){this.b=n.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ll=mn("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Fl=new yr(3e4,6e4);Nl.prototype.g=function(t){var e=this;return new dt(function(r,i){var o=setTimeout(function(){i(new Ir("network-request-failed"))},Fl.get());!n.grecaptcha||t!==e.f&&!e.b?(n[e.a]=function(){if(n.grecaptcha){e.f=t;var a=n.grecaptcha.render;n.grecaptcha.render=function(t,n){return t=a(t,n),e.b++,t},clearTimeout(o),r(n.grecaptcha)}else clearTimeout(o),i(new Ir("internal-error"));delete n[e.a]},wt(Bo(vn(Ll,{onload:e.a,hl:t||""}))).s(function(){clearTimeout(o),i(new Ir("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(o),r(n.grecaptcha))})},Nl.prototype.c=function(){this.b--};var Bl=null;function jl(t,e,r,i,o,a,s){if(Sr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.m=e,this.g=null,s?(Rl||(Rl=new Ml),s=Rl):(Bl||(Bl=new Nl),s=Bl),this.o=s,this.a=r||{theme:"light",type:"image"},this.h=[],this.a[Ul])throw new Ir("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[ql],!n.document)throw new Ir("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Dn(e)||!this.i&&Dn(e).hasChildNodes())throw new Ir("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new Ho(t,a||null,o||null),this.v=i||function(){return null};var u=this;this.l=[];var l=this.a[zl];this.a[zl]=function(t){if(Gl(u,t),"function"==typeof l)l(t);else if("string"==typeof l){var e=or(l,n);"function"==typeof e&&e(t)}};var c=this.a[Vl];this.a[Vl]=function(){if(Gl(u,null),"function"==typeof c)c();else if("string"==typeof c){var t=or(c,n);"function"==typeof t&&t()}}}var zl="callback",Vl="expired-callback",Ul="sitekey",ql="size";function Gl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Hl(t,e){return t.h.push(e),e.ia(function(){L(t.h,e)}),e}function Wl(t){if(t.D)throw new Ir("internal-error","RecaptchaVerifier instance has been destroyed.")}function Kl(t,e,n){var r=!1;try{this.b=n||Qi.a.app()}catch(t){throw new Ir("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Ir("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().ya()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Qi.a.SDK_VERSION?rr(Qi.a.SDK_VERSION,o):null,jl.call(this,n,t,e,function(){try{var t=i.b.auth().ea()}catch(e){t=null}return t},o,Yr(Qr),r)}function Xl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new Ir("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Ql.length)throw new Ir("internal-error","Argument validator received an unsupported number of arguments.");n=Ql[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new Ir("argument-error",t+" failed: "+r)}(t=jl.prototype).za=function(){var t=this;return this.f?this.f:this.f=Hl(this,wt().then(function(){if(ur()&&!Zn())return Kn();throw new Ir("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.o.g(t.v())}).then(function(e){return t.g=e,Ua(t.u,Pa,{})}).then(function(e){t.a[Ul]=e.recaptchaSiteKey}).s(function(e){throw t.f=null,e}))},t.render=function(){Wl(this);var t=this;return Hl(this,this.za().then(function(){if(null===t.c){var e=t.m;if(!t.i){var n=Dn(e);e=function(t,e,n){var i=arguments,o=document,a=String(i[0]),s=i[1];if(!hn&&s&&(s.name||s.type)){if(a=["<",a],s.name&&a.push(' name="',U(s.name),'"'),s.type){a.push(' type="',U(s.type),'"');var c={};ut(c,s),delete c.type,s=c}a.push(">"),a=a.join("")}return a=o.createElement(a),s&&(r(s)?a.className=s:u(s)?a.className=s.join(" "):kn(a,s)),2<i.length&&function(t,e,n){function i(n){n&&e.appendChild(r(n)?t.createTextNode(n):n)}for(var o=2;o<n.length;o++){var a=n[o];!l(a)||h(a)&&0<a.nodeType?i(a):k(Rn(a)?j(a):a,i)}}(o,a,i),a}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Wl(this);var t=this;return Hl(this,this.render().then(function(e){return new dt(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){F(t.l,function(t){return t==e})}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){Wl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Wl(this),this.D=!0,this.o.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=Dn(this.m);for(var e;e=t.firstChild;)t.removeChild(e)}},b(Kl,jl);var Ql="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Zl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:r}}function Yl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:i}}function Jl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:h}}function $l(t,e){return{name:t||"",K:"a function",optional:!!e,M:c}}function tc(t,e){return{name:t||"",K:"null",optional:!!e,M:s}}function ec(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.la||t&&e.providerId!==t)}}}function nc(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!!(t&&r(t.type)&&c(t.verify))}}}function rc(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function ic(t,e){for(var n in e){var r=e[n].name;t[r]=sc(r,t[n],e[n].j)}}function oc(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:y(function(t){return this[t]},n),set:y(function(t,e,n,r){Xl(t,[n],[r],!0),this[e]=r},r,n,e[n].tb),enumerable:!0})}}function ac(t,e,n,r){t[e]=sc(e,n,r)}function sc(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Xl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}ic(dl.prototype,{Wa:{name:"applyActionCode",j:[Zl("code")]},Ja:{name:"checkActionCode",j:[Zl("code")]},Za:{name:"confirmPasswordReset",j:[Zl("code"),Zl("newPassword")]},xb:{name:"createUserWithEmailAndPassword",j:[Zl("email"),Zl("password")]},Wb:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[Zl("email"),Zl("password")]},Zb:{name:"fetchProvidersForEmail",j:[Zl("email")]},$b:{name:"fetchSignInMethodsForEmail",j:[Zl("email")]},fa:{name:"getRedirectResult",j:[]},oc:{name:"isSignInWithEmailLink",j:[Zl("emailLink")]},uc:{name:"onAuthStateChanged",j:[rc(Jl(),$l(),"nextOrObserver"),$l("opt_error",!0),$l("opt_completed",!0)]},vc:{name:"onIdTokenChanged",j:[rc(Jl(),$l(),"nextOrObserver"),$l("opt_error",!0),$l("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[Zl("email"),rc(Jl("opt_actionCodeSettings",!0),tc(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[Zl("email"),Jl("actionCodeSettings")]},mb:{name:"setPersistence",j:[Zl("persistence")]},Pa:{name:"signInAndRetrieveDataWithCredential",j:[ec()]},Qa:{name:"signInAnonymously",j:[]},Gc:{name:"signInAnonymouslyAndRetrieveData",j:[]},Hc:{name:"signInWithCredential",j:[ec()]},Nb:{name:"signInWithCustomToken",j:[Zl("token")]},Ec:{name:"signInAndRetrieveDataWithCustomToken",j:[Zl("token")]},Ob:{name:"signInWithEmailAndPassword",j:[Zl("email"),Zl("password")]},Ic:{name:"signInWithEmailLink",j:[Zl("email"),Zl("emailLink",!0)]},Fc:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[Zl("email"),Zl("password")]},Jc:{name:"signInWithPhoneNumber",j:[Zl("phoneNumber"),nc()]},Kc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Qc:{name:"updateCurrentUser",j:[rc({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof Ou)}},tc(),"user")]},nb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Zl(null,!0)]},Sc:{name:"useDeviceLanguage",j:[]},Tc:{name:"verifyPasswordResetCode",j:[Zl("code")]}}),oc(dl.prototype,{lc:{name:"languageCode",tb:rc(Zl(),tc(),"languageCode")}}),(dl.Persistence=Ms).LOCAL="local",dl.Persistence.SESSION="session",dl.Persistence.NONE="none",ic(Ou.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[Yl("opt_forceRefresh",!0)]},F:{name:"getIdToken",j:[Yl("opt_forceRefresh",!0)]},eb:{name:"linkAndRetrieveDataWithCredential",j:[ec()]},pc:{name:"linkWithCredential",j:[ec()]},qc:{name:"linkWithPhoneNumber",j:[Zl("phoneNumber"),nc()]},rc:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},sc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},gb:{name:"reauthenticateAndRetrieveDataWithCredential",j:[ec()]},yc:{name:"reauthenticateWithCredential",j:[ec()]},zc:{name:"reauthenticateWithPhoneNumber",j:[Zl("phoneNumber"),nc()]},Ac:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Bc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[rc(Jl("opt_actionCodeSettings",!0),tc(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Zl(null,!0)]},Pc:{name:"unlink",j:[Zl("provider")]},pb:{name:"updateEmail",j:[Zl("email")]},qb:{name:"updatePassword",j:[Zl("password")]},Rc:{name:"updatePhoneNumber",j:[ec("phone")]},rb:{name:"updateProfile",j:[Jl("profile")]}}),ic(Al.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ic(Tl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ic(dt.prototype,{ia:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),oc(wu.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",tb:Yl("appVerificationDisabledForTesting")}}),ic(xu.prototype,{confirm:{name:"confirm",j:[Zl("verificationCode")]}}),ac(Ii,"credential",function(t,e){return new Pi(t,e)},[Zl("email"),Zl("password")]),ic(_i.prototype,{ua:{name:"addScope",j:[Zl("scope")]},Da:{name:"setCustomParameters",j:[Jl("customOAuthParameters")]}}),ac(_i,"credential",wi,[rc(Zl(),Jl(),"token")]),ac(Ii,"credentialWithLink",Oi,[Zl("email"),Zl("emailLink")]),ic(xi.prototype,{ua:{name:"addScope",j:[Zl("scope")]},Da:{name:"setCustomParameters",j:[Jl("customOAuthParameters")]}}),ac(xi,"credential",Ci,[rc(Zl(),Jl(),"token")]),ic(Ei.prototype,{ua:{name:"addScope",j:[Zl("scope")]},Da:{name:"setCustomParameters",j:[Jl("customOAuthParameters")]}}),ac(Ei,"credential",Si,[rc(Zl(),rc(Jl(),tc()),"idToken"),rc(Zl(),tc(),"accessToken",!0)]),ic(Ti.prototype,{Da:{name:"setCustomParameters",j:[Jl("customOAuthParameters")]}}),ac(Ti,"credential",Ai,[rc(Zl(),Jl(),"token"),Zl("secret",!0)]),ic(bi.prototype,{ua:{name:"addScope",j:[Zl("scope")]},credential:{name:"credential",j:[rc(Zl(),tc(),"idToken",!0),rc(Zl(),tc(),"accessToken",!0),rc(Zl(),tc(),"nonce",!0)]},Da:{name:"setCustomParameters",j:[Jl("customOAuthParameters")]}}),ac(Ri,"credential",Ni,[Zl("verificationId"),Zl("verificationCode")]),ic(Ri.prototype,{Ua:{name:"verifyPhoneNumber",j:[Zl("phoneNumber"),nc()]}}),ic(Ir.prototype,{toJSON:{name:"toJSON",j:[Zl(null,!0)]}}),ic(Gi.prototype,{toJSON:{name:"toJSON",j:[Zl(null,!0)]}}),ic(qi.prototype,{toJSON:{name:"toJSON",j:[Zl(null,!0)]}}),ic(Kl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if(void 0===Qi.a||!Qi.a.INTERNAL||!Qi.a.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:dl,Error:Ir};ac(t,"EmailAuthProvider",Ii,[]),ac(t,"FacebookAuthProvider",_i,[]),ac(t,"GithubAuthProvider",xi,[]),ac(t,"GoogleAuthProvider",Ei,[]),ac(t,"TwitterAuthProvider",Ti,[]),ac(t,"OAuthProvider",bi,[Zl("providerId")]),ac(t,"SAMLAuthProvider",vi,[Zl("providerId")]),ac(t,"PhoneAuthProvider",Ri,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof dl)}}]),ac(t,"RecaptchaVerifier",Kl,[rc(Zl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Jl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Qi.a.app.App)}}]),Qi.a.INTERNAL.registerService("auth",function(t,e){return e({INTERNAL:{getUid:g((t=new dl(t)).getUid,t),getToken:g(t.cc,t),addAuthTokenListener:g(t.Vb,t),removeAuthTokenListener:g(t.Cc,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(t){}}),Qi.a.INTERNAL.extendNamespace({User:Ou})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var vu=function(){},bu=function(){function t(t){this.afAuth=t,this.isAdminVar=!1}return t.prototype.loginAnonimo=function(){return this.afAuth.auth.signInAnonymously()},t.prototype.logout=function(){return this.afAuth.auth.signOut()},t.prototype.getUser=function(){return this.afAuth.user},t.prototype.loginCorreo=function(t,e){return this.afAuth.auth.signInWithEmailAndPassword(t,e)},t.prototype.isAdmin=function(){return this.isAdminVar},t}(),_u=n("/IO6"),wu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},xu=function(){function t(t,e,n,r){this.router=t,this.semillasService=e,this.authService=n,this.deviceService=r,this.semilla=new Ns}return t.prototype.ngOnInit=function(){if(localStorage.getItem("semilla")){var t=JSON.parse(localStorage.getItem("semilla"));this.semilla=t}},t.prototype.ngOnDestroy=function(){localStorage.setItem("semilla",JSON.stringify(this.semilla))},t.prototype.step=function(t){var e=this,n={timesShared:0,dateCreated:new Date,age:"",device:this.deviceService.os+" "+this.deviceService.device+" "+this.deviceService.browser+" ",_id:this.semillasService.generateSemillaID(),published:!1,textos:[]};this.authService.loginAnonimo(),this.authService.getUser().subscribe(function(r){null!=r&&(e.idUsuario=r.uid,localStorage.setItem("idUser",JSON.stringify(e.idUsuario)),e.semilla.userId=e.idUsuario,e.semilla=wu({},e.semilla,n),e.semilla.step=t)})},t}(),Cu=r["\u0275crt"]({encapsulation:0,styles:[["button[_ngcontent-%COMP%]{display:block;height:100px;width:40vw}p.centrado[_ngcontent-%COMP%]{font-size:.56em;text-align:center;padding:10vw;font-weight:0}.text[_ngcontent-%COMP%]{height:90vh;display:flex;justify-content:center;align-items:center;word-wrap:break-word;flex-wrap:wrap;text-align:center;padding:5vw;font-style:italic;color:var(--color-blanco)}.button[_ngcontent-%COMP%]{border:none;color:#fff;display:inline-block;text-transform:uppercase;text-decoration:none;padding:20px 50px;border-radius:3px;margin:5px;border-bottom-style:solid;border-bottom-width:3px;transition:text-shadow .3s;font-style:normal}.button[_ngcontent-%COMP%]:active{position:relative;top:1px;border-bottom-width:2px}.button[_ngcontent-%COMP%]:hover{text-shadow:2px 2px 0 rgba(0,0,0,.3)}.green[_ngcontent-%COMP%]{background-color:var(--color-verde-quem);border-color:var(--color-verde)}.step4[_ngcontent-%COMP%]{height:90vh;width:100vw;display:flex;justify-content:center;align-items:center}.step4[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 10vw}"]],data:{}});function Eu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,8,"div",[["class","text"]],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,5,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" Todas las historias son \xfanicas y cada una de ellas es valiosa, no importa en qu\xe9 momento has migrado. "])),(t()(),r["\u0275eld"](3,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" Te invitamos a dejar un testimonio con tus propias palabras, escrito o a trav\xe9s de notas de voz. T\xfa decides qu\xe9 tanto quieres compartir con el mundo. Si deseas permanecer an\xf3nimo tambi\xe9n es posible. "])),(t()(),r["\u0275eld"](5,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" Tu testimonio consta de tres partes. La primera parte consiste \xfanicamente en datos personales. Despu\xe9s, te invitamos a reproducir tu ruta de migraci\xf3n en un mapa global. La \xfaltima parte de tu testimonio ser\xe1 de libre narraci\xf3n a trav\xe9s de cuatro temas. "])),(t()(),r["\u0275eld"](7,0,null,null,1,"div",[["class","button green"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.step(1)&&r),r},null,null)),(t()(),r["\u0275ted"](-1,null,["Comenzar"]))],null,null)}function Su(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"step1",[["class","content"]],null,[[null,"semillaChange"]],function(t,e,n){var r=!0;return"semillaChange"===e&&(r=!1!==(t.component.semilla=n)&&r),r},Bs,Fs)),r["\u0275did"](1,114688,null,0,Ls,[],{semilla:[0,"semilla"]},{semillaChange:"semillaChange"})],function(t,e){t(e,1,0,e.component.semilla)},null)}function Tu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"step2",[["class","content"]],null,[[null,"semillaChange"]],function(t,e,n){var r=!0;return"semillaChange"===e&&(r=!1!==(t.component.semilla=n)&&r),r},Gs,Us)),r["\u0275did"](1,114688,null,0,Vs,[Da],{semilla:[0,"semilla"]},{semillaChange:"semillaChange"})],function(t,e){t(e,1,0,e.component.semilla)},null)}function Au(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"step3",[["class","content"]],null,[[null,"semillaChange"]],function(t,e,n){var r=!0;return"semillaChange"===e&&(r=!1!==(t.component.semilla=n)&&r),r},fu,tu)),r["\u0275did"](1,245760,null,0,$s,[Da,Ki],{semilla:[0,"semilla"]},{semillaChange:"semillaChange"})],function(t,e){t(e,1,0,e.component.semilla)},null)}function Pu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,2,"div",[["class","content step4"]],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" Acabaste, ahora tu testimonio ser\xe1 evaluado para aprobar su publicaci\xf3n. "]))],null,null)}function Iu(t){return r["\u0275vid"](0,[(t()(),r["\u0275and"](16777216,null,null,1,null,Eu)),r["\u0275did"](1,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,Su)),r["\u0275did"](3,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,Tu)),r["\u0275did"](5,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,Au)),r["\u0275did"](7,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,Pu)),r["\u0275did"](9,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0,!n.semilla.step),t(e,3,0,1==n.semilla.step),t(e,5,0,2==n.semilla.step),t(e,7,0,3==n.semilla.step),t(e,9,0,4==n.semilla.step)},null)}var Ou=r["\u0275ccf"]("app-crear-semilla",xu,function(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"app-crear-semilla",[],null,null,null,Iu,Cu)),r["\u0275did"](1,245760,null,0,xu,[ni,Da,bu,_u.DeviceDetectorService],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Du=function(){function t(){}return t.prototype.ngOnInit=function(){},t}(),ku=r["\u0275crt"]({encapsulation:0,styles:[[".nosotros[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;font-size:1.1em;padding:4vh 0;overflow:scroll;min-height:90vh}.text[_ngcontent-%COMP%]{padding:2vh 10vw}h2[_ngcontent-%COMP%]{margin-bottom:1vh}"]],data:{}});function Mu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,18,"div",[["class","nosotros"]],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,6,"div",[["class","text"]],null,null,null,null,null)),(t()(),r["\u0275eld"](2,0,null,null,1,"h2",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Misi\xf3n: "])),(t()(),r["\u0275eld"](4,0,null,null,3,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" Semillas Di\xe1spora Venezuela se dedica a dignificar y guardar la memoria de todos los que salieron de Venezuela por la crisis migratoria. "])),(t()(),r["\u0275eld"](6,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" Queremos promover la solidaridad desde la experiencia com\xfan de haber salido del pa\xeds en b\xfasqueda de un futuro mejor. Creemos que este espacio virtual puede ayudar a construir nuevos lazos entre la comunidad de migrantes venezolanos y quienes lean sus historias. "])),(t()(),r["\u0275eld"](8,0,null,null,10,"div",[["class","text"]],null,null,null,null,null)),(t()(),r["\u0275eld"](9,0,null,null,1,"h2",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Equipo: "])),(t()(),r["\u0275eld"](11,0,null,null,7,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" Somos un equipo internacional formado por personas de varios pa\xedses que, a ra\xedz de la crisis migratoria en Venezuela, decidimos abrir un espacio para contar las historias de miles de personas que han tenido que salir de su tierra y que ahora se encuentran esparcidas, como semillas, en el mundo. "])),(t()(),r["\u0275eld"](13,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r["\u0275eld"](14,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" Nos sentimos profundamente preocupados por las condiciones en las que muchos venezolanos y venezolanas han abandonado su pa\xeds. Queremos reconocer la importancia que tienen sus historias en la construcci\xf3n de lazos incluyentes. Reconocemos la necesidad de que los testimonios sean escuchados en el mundo, para que la comunidad internacional este consciente de las experiencias. "])),(t()(),r["\u0275eld"](16,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r["\u0275eld"](17,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" Semillas Di\xe1spora Venezuela es una organizaci\xf3n independiente, sin fines pol\xedticos o de lucro, que \xfanicamente busca dignificar y guardar la memoria de todos los que han salido de Venezuela afectados por la crisis migratoria. No es financiada por ninguna asociaci\xf3n internacional y tiene como \xfanico prop\xf3sito recopilar experiencias que unan a\xfan en la distancia. No es un proyecto pol\xedtico ni pretende serlo, es \xfanica y exclusivamente una plataforma que busca recopilar testimonios sobre la migraci\xf3n venezolana. Nos desligamos de cualquier tipo de postura pol\xedtica o ideol\xf3gica. "]))],null,null)}var Ru=r["\u0275ccf"]("nosotros",Du,function(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"nosotros",[],null,null,null,Mu,ku)),r["\u0275did"](1,114688,null,0,Du,[],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Nu=function(){function t(t){this.serviceSemillas=t,this.lat=17.760267,this.lng=-29.72925,this.style="mapbox://styles/mapbox/satellite-streets-v9",this.contador=0,qi.accessToken=i.mapbox.accessToken,this.map=qi.Map}return t.prototype.ngOnInit=function(){this.initializeMap()},t.prototype.ngOnChanges=function(t){var e=t.semillaAPintar;this.pintarCamino(e.previousValue,e.currentValue,e.firstChange)},t.prototype.initializeMap=function(){var t=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){t.lat=e.coords.latitude,t.lng=e.coords.longitude,t.map.flyTo({center:[t.lng,t.lat]})}),this.buildMap()},t.prototype.buildMap=function(){var t=this;this.map=new qi.Map({container:"map",style:this.style,zoom:3,center:[this.lng,this.lat]}),this.map.on("load",function(e){t.map.addSource("linea-pintada",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),t.map.addLayer({id:"linea",type:"line",paint:{"line-color":"yellow","line-opacity":.75,"line-width":5},source:"linea-pintada",filter:["==","$type","LineString"]})})},t.prototype.pintarCamino=function(t,e,n){if(!n){e.geoInfo.source.data.geometry.coordinates=this.serviceSemillas.geoPointsToArray(e.geoInfo.source.data.geometry.coordinates);var r=[{type:"Feature",geometry:{type:"LineString",coordinates:e.geoInfo.source.data.geometry.coordinates}}];this.map.getSource("linea-pintada").setData({type:"FeatureCollection",features:r}),e.geoInfo.source.data.geometry.coordinates=this.serviceSemillas.arrayToGeopoints(e.geoInfo.source.data.geometry.coordinates)}},t}(),Lu=r["\u0275crt"]({encapsulation:0,styles:[["#map[_ngcontent-%COMP%]{width:100vw;height:50vh}"]],data:{}});function Fu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,0,"div",[["class","map"],["id","map"]],null,null,null,null,null))],null,null)}var Bu=n("Iab2"),ju=function(){function t(t,e,n){this.serviceSemillas=t,this.authService=e,this.router=n,this.semillasSinAprobar=new Array}return t.prototype.ngOnInit=function(){var t=this;this.subscripcion=this.serviceSemillas.observableSemillas.subscribe(function(e){t.todasSemillas=e,e.forEach(function(e){e.published||t.semillasSinAprobar.push(e)})})},t.prototype.selectSemilla=function(t){this.toggleSidebar(),this.semillaActual=t},t.prototype.logout=function(){this.router.navigate(["/adminLogin"]),console.log("cerrando sesi\xf3n"),this.authService.logout(),this.authService.isAdminVar=!1},t.prototype.toggleSidebar=function(){document.getElementById("sidebar").classList.toggle("active")},t.prototype.descargarCSV=function(){var t=this.todasSemillas.map(function(t){return"audio"==t.testimonialType?{_id:t._id,testimonialType:t.testimonialType,audio1:t.audios[0],audio2:t.audios[1],audio3:t.audios[2],audio4:t.audios[3],texto1:"VACIO",texto2:"VACIO",texto3:"VACIO",texto4:"VACIO",published:t.published,name:t.name,gender:t.gender,age:t.age,martialStatus:t.martialStatus,educativeLevel:t.educativeLevel,venezuelaOcupation:t.venezuelaOcupation,currentOcupation:t.currentOcupation,device:t.device,dateCreated:t.dateCreated,timesShared:t.timesShared}:{_id:t._id,testimonialType:t.testimonialType,texto1:t.textos[0],texto2:t.textos[1],texto3:t.textos[2],texto4:t.textos[3],audio1:"VACIO",audio2:"VACIO",audio3:"VACIO",audio4:"VACIO",published:t.published,name:t.name,gender:t.gender,age:t.age,martialStatus:t.martialStatus,educativeLevel:t.educativeLevel,venezuelaOcupation:t.venezuelaOcupation,currentOcupation:t.currentOcupation,device:t.device,dateCreated:t.dateCreated,timesShared:t.timesShared}}),e=function(t,e){return null===e?"":e},n=Object.keys(t[0]),r=t.map(function(t){return n.map(function(n){return JSON.stringify(t[n],e)}).join(",")});r.unshift(n.join(","));var i=r.join("\r\n"),o=new Blob([i],{type:"text/csv"});Object(Bu.saveAs)(o,"ReportSemillas")},t.prototype.aprobar=function(){var t=this,e=this.semillaActual;e.published=!0,this.serviceSemillas.actualizarSemilla(e),this.subscripcion.unsusbscribe(),this.serviceSemillas.observableSemillas.subscribe(function(e){t.todasSemillas=e,e.forEach(function(e){e.published||t.semillasSinAprobar.push(e)})})},t.prototype.rechazar=function(){"audio"==this.semillaActual.testimonialType?(this.serviceSemillas.eliminarContenidosSemilla(this.semillaActual._id),this.serviceSemillas.eliminarSemilla(this.semillaActual)):this.serviceSemillas.eliminarSemilla(this.semillaActual)},t}(),zu=r["\u0275crt"]({encapsulation:0,styles:[["*[_ngcontent-%COMP%]{outline:0;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.contenedor[_ngcontent-%COMP%]{width:100vw;min-height:90vh}.hideChildren[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:none}.barraLateral[_ngcontent-%COMP%]{width:40vw;height:90vh;position:fixed;background:var(--color-negro);color:var(--color-blanco);z-index:100;opacity:.9;padding:2vh 3vw;left:-40vw;transition:.5s ease-out;will-change:transform}.active[_ngcontent-%COMP%]{left:0!important}.semillasList[_ngcontent-%COMP%]{overflow:scroll;max-height:60vh}.semillasList[_ngcontent-%COMP%]:not(.title){margin-left:2vw}.logOut[_ngcontent-%COMP%]{height:20vh;display:flex;flex-direction:column;justify-content:space-between}.button-round[_ngcontent-%COMP%]{background:var(--color-verde);z-index:1000;position:fixed;top:10vh;right:0;width:10vmin;height:10vmin;border-radius:50%;color:#fff;margin:2vh;display:flex;justify-content:center;align-items:center;font-size:3vmin;transition:.5s ease-in-out}.button[_ngcontent-%COMP%]{border:none;color:#fff;display:inline-block;text-transform:uppercase;text-decoration:none;padding:20px 50px;border-radius:3px;border-bottom-style:solid;border-bottom-width:3px;transition:text-shadow .3s;font-style:normal;width:100%}.button[_ngcontent-%COMP%]:active{position:relative;top:1px;border-bottom-width:2px}.button[_ngcontent-%COMP%]:hover{text-shadow:2px 2px 0 rgba(0,0,0,.3)}.green[_ngcontent-%COMP%]{background-color:var(--color-verde-quem);border-color:var(--color-verde)}.yellow[_ngcontent-%COMP%]{background-color:var(--color-amarillo-quem);border-color:var(--color-amarillo)}.red[_ngcontent-%COMP%]{background-color:#d21919;border-color:#cd0000}.display-none[_ngcontent-%COMP%]{display:none}.button[_ngcontent-%COMP%]:disabled{background:#798188;border-color:#8a9299}.contenido[_ngcontent-%COMP%]{padding:4vh;max-height:50vh;overflow-y:scroll;display:flex;justify-content:space-between}@media (max-width:800px){.barraLateral[_ngcontent-%COMP%]{width:100vw;left:-100vw}.contenido[_ngcontent-%COMP%]{flex-direction:column;justify-content:flex-start}}"]],data:{}});function Vu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"li",[["style","font-weight: bold; text-transform: uppercase; font-size:0.8em; cursor: pointer;"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.selectSemilla(t.context.$implicit)&&r),r},null,null)),(t()(),r["\u0275ted"](1,null,[" ",""]))],null,function(t,e){t(e,1,0,e.context.$implicit.name)})}function Uu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,12,"div",[],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Respuesta 1"])),(t()(),r["\u0275eld"](3,0,null,null,0,"audio",[["controls",""]],[[8,"src",4]],null,null,null,null)),(t()(),r["\u0275eld"](4,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Respuesta 2"])),(t()(),r["\u0275eld"](6,0,null,null,0,"audio",[["controls",""]],[[8,"src",4]],null,null,null,null)),(t()(),r["\u0275eld"](7,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Respuesta 3"])),(t()(),r["\u0275eld"](9,0,null,null,0,"audio",[["controls",""]],[[8,"src",4]],null,null,null,null)),(t()(),r["\u0275eld"](10,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Respuesta 4"])),(t()(),r["\u0275eld"](12,0,null,null,0,"audio",[["controls",""]],[[8,"src",4]],null,null,null,null))],null,function(t,e){var n=e.component;t(e,3,0,null==n.semillaActual?null:n.semillaActual.audios[0]),t(e,6,0,null==n.semillaActual?null:n.semillaActual.audios[1]),t(e,9,0,null==n.semillaActual?null:n.semillaActual.audios[2]),t(e,12,0,null==n.semillaActual?null:n.semillaActual.audios[3])})}function qu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,16,"div",[],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Respuesta 1"])),(t()(),r["\u0275eld"](3,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](4,null,["",""])),(t()(),r["\u0275eld"](5,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Respuesta 2"])),(t()(),r["\u0275eld"](7,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](8,null,["",""])),(t()(),r["\u0275eld"](9,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Respuesta 3"])),(t()(),r["\u0275eld"](11,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](12,null,["",""])),(t()(),r["\u0275eld"](13,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Respuesta 4"])),(t()(),r["\u0275eld"](15,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](16,null,["",""]))],null,function(t,e){var n=e.component;t(e,4,0,null==n.semillaActual?null:n.semillaActual.textos[0]),t(e,8,0,null==n.semillaActual?null:n.semillaActual.textos[1]),t(e,12,0,null==n.semillaActual?null:n.semillaActual.textos[2]),t(e,16,0,null==n.semillaActual?null:n.semillaActual.textos[3])})}function Gu(t){return r["\u0275vid"](0,[r["\u0275pid"](0,S.DatePipe,[r.LOCALE_ID]),(t()(),r["\u0275eld"](1,0,null,null,59,"div",[["class","contenedor"]],null,null,null,null,null)),(t()(),r["\u0275eld"](2,0,null,null,1,"button",[["class","button-round"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggleSidebar()&&r),r},null,null)),(t()(),r["\u0275eld"](3,0,null,null,0,"i",[["class","fas fa-times"],["style","cursor: pointer;"]],null,null,null,null,null)),(t()(),r["\u0275eld"](4,0,null,null,15,"div",[["class","barraLateral"],["id","sidebar"]],null,null,null,null,null)),(t()(),r["\u0275eld"](5,0,null,null,14,"div",[["style","position: relative;display: flex;\n        flex-direction: column;\n        justify-content: space-between; height: 100%;"]],null,null,null,null,null)),(t()(),r["\u0275eld"](6,0,null,null,7,"div",[["class","semillasList"]],null,null,null,null,null)),(t()(),r["\u0275eld"](7,0,null,null,2,"div",[["style","display:flex;justify-content: space-between;"]],null,null,null,null,null)),(t()(),r["\u0275eld"](8,0,null,null,1,"p",[["class","title"],["style","font-size: 1.5em; font-weight: bold; text-transform: uppercase;"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Semillas "])),(t()(),r["\u0275eld"](10,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r["\u0275eld"](11,0,null,null,2,"ol",[],null,null,null,null,null)),(t()(),r["\u0275and"](16777216,null,null,1,null,Vu)),r["\u0275did"](13,278528,null,0,S.NgForOf,[r.ViewContainerRef,r.TemplateRef,r.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),r["\u0275eld"](14,0,null,null,5,"div",[["class","logOut"]],null,null,null,null,null)),(t()(),r["\u0275eld"](15,0,null,null,2,"button",[["class","button yellow"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.descargarCSV()&&r),r},null,null)),(t()(),r["\u0275eld"](16,0,null,null,0,"i",[["class","fas fa-file-download"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" Descarga todos los testimonios en CSV"])),(t()(),r["\u0275eld"](18,0,null,null,1,"button",[["class","button red"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.logout()&&r),r},null,null)),(t()(),r["\u0275ted"](-1,null,["Cerrar Sesi\xf3n"])),(t()(),r["\u0275eld"](20,0,null,null,33,"div",[["class","contenido"]],null,null,null,null,null)),(t()(),r["\u0275eld"](21,0,null,null,8,"div",[],null,null,null,null,null)),(t()(),r["\u0275eld"](22,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](23,null,["ID: ",""])),(t()(),r["\u0275eld"](24,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](25,null,["Tipo: ",""])),(t()(),r["\u0275and"](16777216,null,null,1,null,Uu)),r["\u0275did"](27,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,qu)),r["\u0275did"](29,16384,null,0,S.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275eld"](30,0,null,null,23,"div",[],null,null,null,null,null)),(t()(),r["\u0275eld"](31,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](32,null,["Nombre/Apodo: "," "])),(t()(),r["\u0275eld"](33,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](34,null,["Genero: "," "])),(t()(),r["\u0275eld"](35,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](36,null,["Edad: ",""])),(t()(),r["\u0275eld"](37,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](38,null,["Estado Civil: ",""])),(t()(),r["\u0275eld"](39,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](40,null,["Nivel Educativo: ",""])),(t()(),r["\u0275eld"](41,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](42,null,["Ocupaci\xf3n en Venezuela: ",""])),(t()(),r["\u0275eld"](43,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](44,null,["Ocupaci\xf3n en Venezuela: ",""])),(t()(),r["\u0275eld"](45,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](46,null,["Dispositivo:"," "])),(t()(),r["\u0275eld"](47,0,null,null,2,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](48,null,["Dia de creaci\xf3n: ",""])),r["\u0275ppd"](49,1),(t()(),r["\u0275eld"](50,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](51,null,["Lugar de creaci\xf3n: ",""])),(t()(),r["\u0275eld"](52,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](53,null,["Veces compartido: ",""])),(t()(),r["\u0275eld"](54,0,null,null,4,"div",[["style","display:flex; justify-content: space-between"]],null,null,null,null,null)),(t()(),r["\u0275eld"](55,0,null,null,1,"button",[["class","button green"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.aprobar()&&r),r},null,null)),(t()(),r["\u0275ted"](-1,null,["Aprovar"])),(t()(),r["\u0275eld"](57,0,null,null,1,"button",[["class","button red"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.rechazar()&&r),r},null,null)),(t()(),r["\u0275ted"](-1,null,["Rechazar"])),(t()(),r["\u0275eld"](59,0,null,null,1,"app-admin-map",[],null,null,null,Fu,Lu)),r["\u0275did"](60,638976,null,0,Nu,[Da],{semillaAPintar:[0,"semillaAPintar"]},null)],function(t,e){var n=e.component;t(e,13,0,n.semillasSinAprobar),t(e,27,0,"audio"==(null==n.semillaActual?null:n.semillaActual.testimonialType)),t(e,29,0,"text"==(null==n.semillaActual?null:n.semillaActual.testimonialType)),t(e,60,0,n.semillaActual)},function(t,e){var n=e.component;t(e,23,0,null==n.semillaActual?null:n.semillaActual._id),t(e,25,0,null==n.semillaActual?null:n.semillaActual.testimonialType),t(e,32,0,null==n.semillaActual?null:n.semillaActual.name),t(e,34,0,null==n.semillaActual?null:n.semillaActual.gender),t(e,36,0,null==n.semillaActual?null:n.semillaActual.age),t(e,38,0,null==n.semillaActual?null:n.semillaActual.martialStatus),t(e,40,0,null==n.semillaActual?null:n.semillaActual.educativeLevel),t(e,42,0,null==n.semillaActual?null:n.semillaActual.venezuelaOcupation),t(e,44,0,null==n.semillaActual?null:n.semillaActual.currentOcupation),t(e,46,0,null==n.semillaActual?null:n.semillaActual.device),t(e,48,0,r["\u0275unv"](e,48,0,t(e,49,0,r["\u0275nov"](e,0),null==n.semillaActual?null:n.semillaActual.dateCreated))),t(e,51,0,null==n.semillaActual?null:n.semillaActual.place),t(e,53,0,null==n.semillaActual?null:n.semillaActual.timesShared)})}var Hu=r["\u0275ccf"]("app-admin",ju,function(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"app-admin",[],null,null,null,Gu,zu)),r["\u0275did"](1,114688,null,0,ju,[Da,bu,ni],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Wu=function(){function t(t,e){this.authService=t,this.router=e}return t.prototype.ngOnInit=function(){this.user={email:"",password:""}},t.prototype.loginCorreo=function(){var t=this;this.authService.loginCorreo(this.user.email,this.user.password),this.authService.getUser().subscribe(function(e){null!=e&&(t.authService.isAdminVar="SobHG3gmLXZs63CDrqCxPZP7eQT2"===e.uid||"semillasvenezuela@gmail.com"===e.email,t.authService.isAdmin&&t.router.navigate(["/approval"]))})},t}(),Ku=r["\u0275crt"]({encapsulation:0,styles:[[".contenedor[_ngcontent-%COMP%]{width:100vw;min-height:90vh;display:flex;flex-direction:column;justify-content:center;align-items:center}.login[_ngcontent-%COMP%]{width:80vw}.hideChildren[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:none}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.5rem;padding:.8vh 0}.style-input[_ngcontent-%COMP%]{position:relative;width:100%;max-width:80vw;border-radius:2px;padding:1vh;background:#c7af61}.error[_ngcontent-%COMP%]{border:1px solid #f25f5c}.style-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;color:#fff;font-size:1rem;vertical-align:middle;width:100%}.style-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#fff}input[_ngcontent-%COMP%]{border-style:none;background:0 0;outline:0;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}input[_ngcontent-%COMP%]:-webkit-autofill, input[_ngcontent-%COMP%]:-webkit-autofill:active, input[_ngcontent-%COMP%]:-webkit-autofill:focus, input[_ngcontent-%COMP%]:-webkit-autofill:hover{-webkit-box-shadow:0 0 0 30px var(--color-amarillo-quem) inset!important;-webkit-text-fill-color:#fff!important}.button[_ngcontent-%COMP%]{border:none;color:#fff;display:inline-block;text-transform:uppercase;text-decoration:none;padding:20px 50px;border-radius:3px;border-bottom-style:solid;border-bottom-width:3px;transition:text-shadow .3s;font-style:normal;width:100%}.button[_ngcontent-%COMP%]:active{position:relative;top:1px;border-bottom-width:2px}.button[_ngcontent-%COMP%]:hover{text-shadow:2px 2px 0 rgba(0,0,0,.3)}.green[_ngcontent-%COMP%]{background-color:var(--color-verde-quem);border-color:var(--color-verde)}.display-none[_ngcontent-%COMP%]{display:none}.button[_ngcontent-%COMP%]:disabled{background:#798188;border-color:#8a9299}"]],data:{}});function Xu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,32,"div",[["class","contenedor"]],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,31,"div",[["class","login"]],null,null,null,null,null)),(t()(),r["\u0275eld"](2,0,null,null,30,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r["\u0275nov"](t,4).onSubmit(n)&&i),"reset"===e&&(i=!1!==r["\u0275nov"](t,4).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.loginCorreo()&&i),i},null,null)),r["\u0275did"](3,16384,null,0,ks,[],null,null),r["\u0275did"](4,4210688,[["semillasForm",4]],0,Ts,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),r["\u0275prd"](2048,null,za,null,[Ts]),r["\u0275did"](6,16384,null,0,ys,[[4,za]],null,null),(t()(),r["\u0275eld"](7,0,null,null,11,"div",[["class","form-group"],["style","margin-bottom: 2vh;"]],null,null,null,null,null)),(t()(),r["\u0275eld"](8,0,null,null,1,"label",[["for","username"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Ingresa tu correo"])),(t()(),r["\u0275eld"](10,0,null,null,8,"div",[["class","style-input"]],null,null,null,null,null)),(t()(),r["\u0275eld"](11,0,null,null,7,"input",[["id","email"],["name","name"],["placeholder","Correo"],["required",""],["type","email"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,12)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,12).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,12)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,12)._compositionEnd(n.target.value)&&i),"ngModelChange"===e&&(i=!1!==(o.user.email=n)&&i),i},null,null)),r["\u0275did"](12,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](13,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t){return[t]},[Ya]),r["\u0275did"](16,671744,[["email",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](18,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275eld"](19,0,null,null,11,"div",[["class","form-group"],["style","margin-bottom: 2vh;"]],null,null,null,null,null)),(t()(),r["\u0275eld"](20,0,null,null,1,"label",[["for","username"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Ingresa la contrase\xf1a"])),(t()(),r["\u0275eld"](22,0,null,null,8,"div",[["class","style-input"]],null,null,null,null,null)),(t()(),r["\u0275eld"](23,0,null,null,7,"input",[["id","password"],["name","name"],["placeholder","Contrase\xf1a"],["required",""],["type","password"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,24)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,24).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,24)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,24)._compositionEnd(n.target.value)&&i),"ngModelChange"===e&&(i=!1!==(o.user.password=n)&&i),i},null,null)),r["\u0275did"](24,16384,null,0,Ya,[r.Renderer2,r.ElementRef,[2,Za]],null,null),r["\u0275did"](25,16384,null,0,Ds,[],{required:[0,"required"]},null),r["\u0275prd"](1024,null,Ua,function(t){return[t]},[Ds]),r["\u0275prd"](1024,null,Xa,function(t){return[t]},[Ya]),r["\u0275did"](28,671744,[["password",4]],0,Os,[[2,za],[6,Ua],[8,null],[6,Xa]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,ns,null,[Os]),r["\u0275did"](30,16384,null,0,gs,[[4,ns]],null,null),(t()(),r["\u0275eld"](31,0,null,null,1,"button",[["class","button green"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(t()(),r["\u0275eld"](32,0,null,null,0,"i",[["class","fas fa-arrow-right"]],null,null,null,null,null))],function(t,e){var n=e.component;t(e,13,0,""),t(e,16,0,"name",n.user.email),t(e,25,0,""),t(e,28,0,"name",n.user.password)},function(t,e){t(e,2,0,r["\u0275nov"](e,6).ngClassUntouched,r["\u0275nov"](e,6).ngClassTouched,r["\u0275nov"](e,6).ngClassPristine,r["\u0275nov"](e,6).ngClassDirty,r["\u0275nov"](e,6).ngClassValid,r["\u0275nov"](e,6).ngClassInvalid,r["\u0275nov"](e,6).ngClassPending),t(e,11,0,r["\u0275nov"](e,13).required?"":null,r["\u0275nov"](e,18).ngClassUntouched,r["\u0275nov"](e,18).ngClassTouched,r["\u0275nov"](e,18).ngClassPristine,r["\u0275nov"](e,18).ngClassDirty,r["\u0275nov"](e,18).ngClassValid,r["\u0275nov"](e,18).ngClassInvalid,r["\u0275nov"](e,18).ngClassPending),t(e,23,0,r["\u0275nov"](e,25).required?"":null,r["\u0275nov"](e,30).ngClassUntouched,r["\u0275nov"](e,30).ngClassTouched,r["\u0275nov"](e,30).ngClassPristine,r["\u0275nov"](e,30).ngClassDirty,r["\u0275nov"](e,30).ngClassValid,r["\u0275nov"](e,30).ngClassInvalid,r["\u0275nov"](e,30).ngClassPending),t(e,31,0,!r["\u0275nov"](e,4).form.valid)})}var Qu=r["\u0275ccf"]("app-login",Wu,function(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"app-login",[],null,null,null,Xu,Ku)),r["\u0275did"](1,114688,null,0,Wu,[bu,ni],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Zu=function(){function t(t,e,n){this.router=t,this.deviceDetector=e,this.serviceSemillas=n,this.abierto=!1}return t.prototype.ngOnInit=function(){document.getElementById("touch-bar").addEventListener("touchmove",function(t){t.preventDefault()},!1)},t.prototype.toggleMenu=function(){var t=document.getElementById("menu-bars");this.abierto?(t.classList.remove("fa-times"),t.classList.add("fa-bars"),this.abierto=!1):(t.classList.remove("fa-bars"),t.classList.add("fa-times"),this.abierto=!0),document.querySelector(".responsive-navbar").classList.toggle("active")},t}(),Yu=r["\u0275crt"]({encapsulation:0,styles:[[".navbar[_ngcontent-%COMP%]{width:100vw;position:fixed;background:var(--color-negro);height:10vh;z-index:999;top:0;margin-bottom:10vh;padding:2vw;display:flex}.responsive-navbar[_ngcontent-%COMP%]{visibility:hidden;width:100vw;height:90vh;position:fixed;top:10vh;left:-100vw;background:var(--color-negro);color:var(--color-blanco);transition:.5s ease-out;will-change:transform;z-index:999999;opacity:.9;display:flex;flex-direction:column;justify-content:space-evenly;align-items:center;font-size:1.7em;font-weight:bolder}.responsive-navbar.active[_ngcontent-%COMP%]{-webkit-transform:translateX(100vw);transform:translateX(100vw);visibility:visible}ul.desktop[_ngcontent-%COMP%]{display:none}ul.mobile[_ngcontent-%COMP%]{display:flex}ul[_ngcontent-%COMP%]{justify-content:space-around;height:100%;width:100%;color:var(--color-blanco);align-items:center}ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit;text-decoration:none}ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--color-naranja);text-decoration:underline}ul[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;margin-bottom:1vh}@media (min-width:768px){ul.desktop[_ngcontent-%COMP%]{display:flex}ul.mobile[_ngcontent-%COMP%]{display:none}}*[_ngcontent-%COMP%]{outline:0}"]],data:{}});function Ju(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,25,"div",[["class","navbar"],["id","touch-bar"]],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,20,"ul",[["class","desktop"]],null,null,null,null,null)),(t()(),r["\u0275eld"](2,0,null,null,3,"a",[["routerLink","/"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r["\u0275nov"](t,3).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r["\u0275did"](3,671744,null,0,ai,[ni,gr,S.LocationStrategy],{routerLink:[0,"routerLink"]},null),(t()(),r["\u0275eld"](4,0,null,null,1,"li",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Inicio "])),(t()(),r["\u0275eld"](6,0,null,null,3,"a",[["routerLink","/new"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r["\u0275nov"](t,7).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r["\u0275did"](7,671744,null,0,ai,[ni,gr,S.LocationStrategy],{routerLink:[0,"routerLink"]},null),(t()(),r["\u0275eld"](8,0,null,null,1,"li",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Deja tu testimonio "])),(t()(),r["\u0275eld"](10,0,null,null,3,"a",[["routerLink","/map"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r["\u0275nov"](t,11).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r["\u0275did"](11,671744,null,0,ai,[ni,gr,S.LocationStrategy],{routerLink:[0,"routerLink"]},null),(t()(),r["\u0275eld"](12,0,null,null,1,"li",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Descubre "])),(t()(),r["\u0275eld"](14,0,null,null,3,"a",[["routerLink","/nosotros"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r["\u0275nov"](t,15).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r["\u0275did"](15,671744,null,0,ai,[ni,gr,S.LocationStrategy],{routerLink:[0,"routerLink"]},null),(t()(),r["\u0275eld"](16,0,null,null,1,"li",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Nosotros "])),(t()(),r["\u0275eld"](18,0,null,null,3,"a",[["routerLink",""]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r["\u0275nov"](t,19).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r["\u0275did"](19,671744,null,0,ai,[ni,gr,S.LocationStrategy],{routerLink:[0,"routerLink"]},null),(t()(),r["\u0275eld"](20,0,null,null,1,"li",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Contacto "])),(t()(),r["\u0275eld"](22,0,null,null,3,"ul",[["class","mobile"]],null,null,null,null,null)),(t()(),r["\u0275eld"](23,0,null,null,0,"img",[["alt",""],["src","../../assets/logo-neg.png"]],null,null,null,null,null)),(t()(),r["\u0275eld"](24,0,null,null,1,"div",[["style","font-size: 1.3em; min-width: 5vw;"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggleMenu()&&r),r},null,null)),(t()(),r["\u0275eld"](25,0,null,null,0,"i",[["class","fas fa-bars"],["id","menu-bars"]],null,null,null,null,null)),(t()(),r["\u0275eld"](26,0,null,null,15,"div",[["class","responsive-navbar"]],null,null,null,null,null)),(t()(),r["\u0275eld"](27,0,null,null,2,"div",[["routerLink","/"]],null,[[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==r["\u0275nov"](t,28).onClick()&&i),"click"===e&&(i=!1!==o.toggleMenu()&&i),i},null,null)),r["\u0275did"](28,16384,null,0,oi,[ni,gr,[8,null],r.Renderer2,r.ElementRef],{routerLink:[0,"routerLink"]},null),(t()(),r["\u0275ted"](-1,null,["Inicio"])),(t()(),r["\u0275eld"](30,0,null,null,2,"div",[["routerLink","/new"]],null,[[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==r["\u0275nov"](t,31).onClick()&&i),"click"===e&&(i=!1!==o.toggleMenu()&&i),i},null,null)),r["\u0275did"](31,16384,null,0,oi,[ni,gr,[8,null],r.Renderer2,r.ElementRef],{routerLink:[0,"routerLink"]},null),(t()(),r["\u0275ted"](-1,null,["Deja tu testimonio"])),(t()(),r["\u0275eld"](33,0,null,null,2,"div",[["routerLink","/map"]],null,[[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==r["\u0275nov"](t,34).onClick()&&i),"click"===e&&(i=!1!==o.toggleMenu()&&i),i},null,null)),r["\u0275did"](34,16384,null,0,oi,[ni,gr,[8,null],r.Renderer2,r.ElementRef],{routerLink:[0,"routerLink"]},null),(t()(),r["\u0275ted"](-1,null,["Descubre"])),(t()(),r["\u0275eld"](36,0,null,null,2,"div",[["routerLink","/nosotros"]],null,[[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==r["\u0275nov"](t,37).onClick()&&i),"click"===e&&(i=!1!==o.toggleMenu()&&i),i},null,null)),r["\u0275did"](37,16384,null,0,oi,[ni,gr,[8,null],r.Renderer2,r.ElementRef],{routerLink:[0,"routerLink"]},null),(t()(),r["\u0275ted"](-1,null,["Nosotros"])),(t()(),r["\u0275eld"](39,0,null,null,2,"div",[["routerLink",""]],null,[[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==r["\u0275nov"](t,40).onClick()&&i),"click"===e&&(i=!1!==o.toggleMenu()&&i),i},null,null)),r["\u0275did"](40,16384,null,0,oi,[ni,gr,[8,null],r.Renderer2,r.ElementRef],{routerLink:[0,"routerLink"]},null),(t()(),r["\u0275ted"](-1,null,["Contacto"]))],function(t,e){t(e,3,0,"/"),t(e,7,0,"/new"),t(e,11,0,"/map"),t(e,15,0,"/nosotros"),t(e,19,0,""),t(e,28,0,"/"),t(e,31,0,"/new"),t(e,34,0,"/map"),t(e,37,0,"/nosotros"),t(e,40,0,"")},function(t,e){t(e,2,0,r["\u0275nov"](e,3).target,r["\u0275nov"](e,3).href),t(e,6,0,r["\u0275nov"](e,7).target,r["\u0275nov"](e,7).href),t(e,10,0,r["\u0275nov"](e,11).target,r["\u0275nov"](e,11).href),t(e,14,0,r["\u0275nov"](e,15).target,r["\u0275nov"](e,15).href),t(e,18,0,r["\u0275nov"](e,19).target,r["\u0275nov"](e,19).href)})}var $u=r["\u0275crt"]({encapsulation:0,styles:["./app.component.css"],data:{}});function tl(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"app-menu",[["id","fixed"]],null,null,null,Ju,Yu)),r["\u0275did"](1,114688,null,0,Zu,[ni,_u.DeviceDetectorService,Da],null,null),(t()(),r["\u0275eld"](2,0,null,null,0,"div",[["style","height: 10vh; z-index: -1000;"]],null,null,null,null,null)),(t()(),r["\u0275eld"](3,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),r["\u0275did"](4,212992,null,0,ci,[li,r.ViewContainerRef,r.ComponentFactoryResolver,[8,null],r.ChangeDetectorRef],null,null)],function(t,e){t(e,1,0),t(e,4,0)},null)}var el=r["\u0275ccf"]("app-root",Y,function(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"app-root",[],null,null,null,tl,$u)),r["\u0275did"](1,114688,null,0,Y,[],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),nl=function(){},rl="*";function il(t,e){return void 0===e&&(e=null),{type:2,steps:t,options:e}}function ol(t){return{type:6,styles:t,offset:null}}function al(t){Promise.resolve(null).then(t)}var sl=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.hasStarted=function(){return this._started},t.prototype.init=function(){},t.prototype.play=function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0},t.prototype.triggerMicrotask=function(){var t=this;al(function(){return t._onFinish()})},t.prototype._onStart=function(){this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[]},t.prototype.pause=function(){},t.prototype.restart=function(){},t.prototype.finish=function(){this._onFinish()},t.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.reset=function(){},t.prototype.setPosition=function(t){},t.prototype.getPosition=function(){return 0},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}(),ul=function(){function t(t){var e=this;this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;var n=0,r=0,i=0,o=this.players.length;0==o?al(function(){return e._onFinish()}):this.players.forEach(function(t){t.onDone(function(){++n==o&&e._onFinish()}),t.onDestroy(function(){++r==o&&e._onDestroy()}),t.onStart(function(){++i==o&&e._onStart()})}),this.totalTime=this.players.reduce(function(t,e){return Math.max(t,e.totalTime)},0)}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.init=function(){this.players.forEach(function(t){return t.init()})},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype._onStart=function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[])},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.hasStarted=function(){return this._started},t.prototype.play=function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(t){return t.play()})},t.prototype.pause=function(){this.players.forEach(function(t){return t.pause()})},t.prototype.restart=function(){this.players.forEach(function(t){return t.restart()})},t.prototype.finish=function(){this._onFinish(),this.players.forEach(function(t){return t.finish()})},t.prototype.destroy=function(){this._onDestroy()},t.prototype._onDestroy=function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(t){return t.destroy()}),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.reset=function(){this.players.forEach(function(t){return t.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1},t.prototype.setPosition=function(t){var e=t*this.totalTime;this.players.forEach(function(t){var n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})},t.prototype.getPosition=function(){var t=0;return this.players.forEach(function(e){var n=e.getPosition();t=Math.min(n,t)}),t},t.prototype.beforeDestroy=function(){this.players.forEach(function(t){t.beforeDestroy&&t.beforeDestroy()})},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}(),ll="!";function cl(){return"undefined"!=typeof process}function hl(t){switch(t.length){case 0:return new sl;case 1:return t[0];default:return new ul(t)}}function pl(t,e,n,r,i,o){void 0===i&&(i={}),void 0===o&&(o={});var a=[],s=[],u=-1,l=null;if(r.forEach(function(t){var n=t.offset,r=n==u,c=r&&l||{};Object.keys(t).forEach(function(n){var r=n,s=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,a),s){case ll:s=i[n];break;case rl:s=o[n];break;default:s=e.normalizeStyleValue(n,r,s,a)}c[r]=s}),r||s.push(c),l=c,u=n}),a.length)throw new Error("Unable to animate due to the following errors:\n - "+a.join("\n - "));return s}function fl(t,e,n,r){switch(e){case"start":t.onStart(function(){return r(n&&dl(n,"start",t))});break;case"done":t.onDone(function(){return r(n&&dl(n,"done",t))});break;case"destroy":t.onDestroy(function(){return r(n&&dl(n,"destroy",t))})}}function dl(t,e,n){var r=n.totalTime,i=ml(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,void 0==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function ml(t,e,n,r,i,o,a){return void 0===i&&(i=""),void 0===o&&(o=0),{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!a}}function gl(t,e,n){var r;return t instanceof Map?(r=t.get(e))||t.set(e,r=n):(r=t[e])||(r=t[e]=n),r}function yl(t){var e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}var vl=function(t,e){return!1},bl=function(t,e){return!1},_l=function(t,e,n){return[]},wl=cl();if(wl||"undefined"!=typeof Element){if(vl=function(t,e){return t.contains(e)},wl||Element.prototype.matches)bl=function(t,e){return t.matches(e)};else{var xl=Element.prototype,Cl=xl.matchesSelector||xl.mozMatchesSelector||xl.msMatchesSelector||xl.oMatchesSelector||xl.webkitMatchesSelector;Cl&&(bl=function(t,e){return Cl.apply(t,[e])})}_l=function(t,e,n){var r=[];if(n)r.push.apply(r,Object(o.f)(t.querySelectorAll(e)));else{var i=t.querySelector(e);i&&r.push(i)}return r}}var El=null,Sl=!1;function Tl(t){El||(El=("undefined"!=typeof document?document.body:null)||{},Sl=!!El.style&&"WebkitAppearance"in El.style);var e=!0;return El.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&!(e=t in El.style)&&Sl&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in El.style),e}var Al=bl,Pl=vl,Il=_l;function Ol(t){var e={};return Object.keys(t).forEach(function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}var Dl=function(){function t(){}return t.prototype.validateStyleProperty=function(t){return Tl(t)},t.prototype.matchesElement=function(t,e){return Al(t,e)},t.prototype.containsElement=function(t,e){return Pl(t,e)},t.prototype.query=function(t,e,n){return Il(t,e,n)},t.prototype.computeStyle=function(t,e,n){return n||""},t.prototype.animate=function(t,e,n,r,i,o,a){return void 0===o&&(o=[]),new sl(n,r)},t}(),kl=function(){function t(){}return t.NOOP=new Dl,t}(),Ml=1e3;function Rl(t){if("number"==typeof t)return t;var e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Nl(parseFloat(e[1]),e[2])}function Nl(t,e){switch(e){case"s":return t*Ml;default:return t}}function Ll(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){var r,i=0,o="";if("string"==typeof t){var a=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push('The provided timing value "'+t+'" is invalid.'),{duration:0,delay:0,easing:""};r=Nl(parseFloat(a[1]),a[2]);var s=a[3];null!=s&&(i=Nl(Math.floor(parseFloat(s)),a[4]));var u=a[5];u&&(o=u)}else r=t;if(!n){var l=!1,c=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),l=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),l=!0),l&&e.splice(c,0,'The provided timing value "'+t+'" is invalid.')}return{duration:r,delay:i,easing:o}}(t,e,n)}function Fl(t,e){return void 0===e&&(e={}),Object.keys(t).forEach(function(n){e[n]=t[n]}),e}function Bl(t,e,n){if(void 0===n&&(n={}),e)for(var r in t)n[r]=t[r];else Fl(t,n);return n}function jl(t,e,n){return n?e+":"+n+";":""}function zl(t){for(var e="",n=0;n<t.style.length;n++)e+=jl(0,r=t.style.item(n),t.style.getPropertyValue(r));for(var r in t.style)t.style.hasOwnProperty(r)&&!r.startsWith("_")&&(e+=jl(0,r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[r]));t.setAttribute("style",e)}function Vl(t,e){t.style&&(Object.keys(e).forEach(function(n){var r=Ql(n);t.style[r]=e[n]}),cl()&&zl(t))}function Ul(t,e){t.style&&(Object.keys(e).forEach(function(e){var n=Ql(e);t.style[n]=""}),cl()&&zl(t))}function ql(t){return Array.isArray(t)?1==t.length?t[0]:il(t):t}var Gl=new RegExp("{{\\s*(.+?)\\s*}}","g");function Hl(t){var e=[];if("string"==typeof t){for(var n=t.toString(),r=void 0;r=Gl.exec(n);)e.push(r[1]);Gl.lastIndex=0}return e}function Wl(t,e,n){var r=t.toString(),i=r.replace(Gl,function(t,r){var i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?t:i}function Kl(t){for(var e=[],n=t.next();!n.done;)e.push(n.value),n=t.next();return e}var Xl=/-+([a-z0-9])/g;function Ql(t){return t.replace(Xl,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t[1].toUpperCase()})}function Zl(t,e){return 0===t||0===e}function Yl(t,e,n){var r=Object.keys(n);if(r.length&&e.length){var i=e[0],o=[];if(r.forEach(function(t){i.hasOwnProperty(t)||o.push(t),i[t]=n[t]}),o.length)for(var a=function(){var n=e[s];o.forEach(function(e){n[e]=$l(t,e)})},s=1;s<e.length;s++)a()}return e}function Jl(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function $l(t,e){return window.getComputedStyle(t)[e]}var tc="*",ec=new Set(["true","1"]),nc=new Set(["false","0"]);function rc(t,e){var n=ec.has(t)||nc.has(t),r=ec.has(e)||nc.has(e);return function(i,o){var a=t==tc||t==i,s=e==tc||e==o;return!a&&n&&"boolean"==typeof i&&(a=i?ec.has(t):nc.has(t)),!s&&r&&"boolean"==typeof o&&(s=o?ec.has(e):nc.has(e)),a&&s}}var ic=new RegExp("s*:selfs*,?","g");function oc(t,e,n){return new ac(t).build(e,n)}var ac=function(){function t(t){this._driver=t}return t.prototype.build=function(t,e){var n=new sc(e);return this._resetContextStyleTimingState(n),Jl(this,ql(t),n)},t.prototype._resetContextStyleTimingState=function(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0},t.prototype.visitTrigger=function(t,e){var n=this,r=e.queryCount=0,i=e.depCount=0,o=[],a=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(function(t){if(n._resetContextStyleTimingState(e),0==t.type){var s=t,u=s.name;u.toString().split(/\s*,\s*/).forEach(function(t){s.name=t,o.push(n.visitState(s,e))}),s.name=u}else if(1==t.type){var l=n.visitTransition(t,e);r+=l.queryCount,i+=l.depCount,a.push(l)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:o,transitions:a,queryCount:r,depCount:i,options:null}},t.prototype.visitState=function(t,e){var n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){var i=new Set,o=r||{};if(n.styles.forEach(function(t){if(uc(t)){var e=t;Object.keys(e).forEach(function(t){Hl(e[t]).forEach(function(t){o.hasOwnProperty(t)||i.add(t)})})}}),i.size){var a=Kl(i.values());e.errors.push('state("'+t.name+'", ...) must define default values for all the following style substitutions: '+a.join(", "))}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}},t.prototype.visitTransition=function(t,e){e.queryCount=0,e.depCount=0;var n,r,i,o=Jl(this,ql(t.animation),e);return{type:1,matchers:(n=t.expr,r=e.errors,i=[],"string"==typeof n?n.split(/\s*,\s*/).forEach(function(t){return function(t,e,n){if(":"==t[0]){var r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(t,e){return parseFloat(e)>parseFloat(t)};case":decrement":return function(t,e){return parseFloat(e)<parseFloat(t)};default:return e.push('The transition alias value "'+t+'" is not supported'),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}var i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push('The provided transition expression "'+t+'" is not supported'),e;var o=i[1],a=i[2],s=i[3];e.push(rc(o,s)),"<"!=a[0]||o==tc&&s==tc||e.push(rc(s,o))}(t,i,r)}):i.push(n),i),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:lc(t.options)}},t.prototype.visitSequence=function(t,e){var n=this;return{type:2,steps:t.steps.map(function(t){return Jl(n,t,e)}),options:lc(t.options)}},t.prototype.visitGroup=function(t,e){var n=this,r=e.currentTime,i=0,o=t.steps.map(function(t){e.currentTime=r;var o=Jl(n,t,e);return i=Math.max(i,e.currentTime),o});return e.currentTime=i,{type:3,steps:o,options:lc(t.options)}},t.prototype.visitAnimate=function(t,e){var n,r=function(t,e){var n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return cc(Ll(t,e).duration,0,"");var r=t;if(r.split(/\s+/).some(function(t){return"{"==t.charAt(0)&&"{"==t.charAt(1)})){var i=cc(0,0,"");return i.dynamic=!0,i.strValue=r,i}return cc((n=n||Ll(r,e)).duration,n.delay,n.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;var i=t.styles?t.styles:ol({});if(5==i.type)n=this.visitKeyframes(i,e);else{var o=t.styles,a=!1;if(!o){a=!0;var s={};r.easing&&(s.easing=r.easing),o=ol(s)}e.currentTime+=r.duration+r.delay;var u=this.visitStyle(o,e);u.isEmptyStep=a,n=u}return e.currentAnimateTimings=null,{type:4,timings:r,style:n,options:null}},t.prototype.visitStyle=function(t,e){var n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n},t.prototype._makeStyleAst=function(t,e){var n=[];Array.isArray(t.styles)?t.styles.forEach(function(t){"string"==typeof t?t==rl?n.push(t):e.errors.push("The provided style string value "+t+" is not allowed."):n.push(t)}):n.push(t.styles);var r=!1,i=null;return n.forEach(function(t){if(uc(t)){var e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(var o in e)if(e[o].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}},t.prototype._validateStyleAst=function(t,e){var n=this,r=e.currentAnimateTimings,i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(function(t){"string"!=typeof t&&Object.keys(t).forEach(function(r){if(n._driver.validateStyleProperty(r)){var a,s,u,l=e.collectedStyles[e.currentQuerySelector],c=l[r],h=!0;c&&(o!=i&&o>=c.startTime&&i<=c.endTime&&(e.errors.push('The CSS property "'+r+'" that exists between the times of "'+c.startTime+'ms" and "'+c.endTime+'ms" is also being animated in a parallel animation between the times of "'+o+'ms" and "'+i+'ms"'),h=!1),o=c.startTime),h&&(l[r]={startTime:o,endTime:i}),e.options&&(a=e.errors,s=e.options.params||{},(u=Hl(t[r])).length&&u.forEach(function(t){s.hasOwnProperty(t)||a.push("Unable to resolve the local animation param "+t+" in the given list of values")}))}else e.errors.push('The provided animation property "'+r+'" is not a supported CSS property for animations')})})},t.prototype.visitKeyframes=function(t,e){var n=this,r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),r;var i=0,o=[],a=!1,s=!1,u=0,l=t.steps.map(function(t){var r=n._makeStyleAst(t,e),l=null!=r.offset?r.offset:function(t){if("string"==typeof t)return null;var e=null;if(Array.isArray(t))t.forEach(function(t){if(uc(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}});else if(uc(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}return e}(r.styles),c=0;return null!=l&&(i++,c=r.offset=l),s=s||c<0||c>1,a=a||c<u,u=c,o.push(c),r});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&e.errors.push("Please ensure that all keyframe offsets are in order");var c=t.steps.length,h=0;i>0&&i<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(c-1));var p=c-1,f=e.currentTime,d=e.currentAnimateTimings,m=d.duration;return l.forEach(function(t,i){var a=h>0?i==p?1:h*i:o[i],s=a*m;e.currentTime=f+d.delay+s,d.duration=s,n._validateStyleAst(t,e),t.offset=a,r.styles.push(t)}),r},t.prototype.visitReference=function(t,e){return{type:8,animation:Jl(this,ql(t.animation),e),options:lc(t.options)}},t.prototype.visitAnimateChild=function(t,e){return e.depCount++,{type:9,options:lc(t.options)}},t.prototype.visitAnimateRef=function(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:lc(t.options)}},t.prototype.visitQuery=function(t,e){var n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;var i=Object(o.e)(function(t){var e=!!t.split(/\s*,\s*/).find(function(t){return":self"==t});return e&&(t=t.replace(ic,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,function(t){return".ng-trigger-"+t.substr(1)}).replace(/:animating/g,".ng-animating"),e]}(t.selector),2),a=i[0],s=i[1];e.currentQuerySelector=n.length?n+" "+a:a,gl(e.collectedStyles,e.currentQuerySelector,{});var u=Jl(this,ql(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:a,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:u,originalSelector:t.selector,options:lc(t.options)}},t.prototype.visitStagger=function(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");var n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Ll(t.timings,e.errors,!0);return{type:12,animation:Jl(this,ql(t.animation),e),timings:n,options:null}},t}(),sc=function(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function uc(t){return!Array.isArray(t)&&"object"==typeof t}function lc(t){var e;return t?(t=Fl(t)).params&&(t.params=(e=t.params)?Fl(e):null):t={},t}function cc(t,e,n){return{duration:t,delay:e,easing:n}}function hc(t,e,n,r,i,o,a,s){return void 0===a&&(a=null),void 0===s&&(s=!1),{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:a,subTimeline:s}}var pc=function(){function t(){this._map=new Map}return t.prototype.consume=function(t){var e=this._map.get(t);return e?this._map.delete(t):e=[],e},t.prototype.append=function(t,e){var n=this._map.get(t);n||this._map.set(t,n=[]),n.push.apply(n,Object(o.f)(e))},t.prototype.has=function(t){return this._map.has(t)},t.prototype.clear=function(){this._map.clear()},t}(),fc=new RegExp(":enter","g"),dc=new RegExp(":leave","g");function mc(t,e,n,r,i,o,a,s,u,l){return void 0===o&&(o={}),void 0===a&&(a={}),void 0===l&&(l=[]),(new gc).buildKeyframes(t,e,n,r,i,o,a,s,u,l)}var gc=function(){function t(){}return t.prototype.buildKeyframes=function(t,e,n,r,i,o,a,s,u,l){void 0===l&&(l=[]),u=u||new pc;var c=new vc(t,e,u,r,i,l,[]);c.options=s,c.currentTimeline.setStyles([o],null,c.errors,s),Jl(this,n,c);var h=c.timelines.filter(function(t){return t.containsAnimation()});if(h.length&&Object.keys(a).length){var p=h[h.length-1];p.allowOnlyTimelineStyles()||p.setStyles([a],null,c.errors,s)}return h.length?h.map(function(t){return t.buildKeyframes()}):[hc(e,[],[],[],0,0,"",!1)]},t.prototype.visitTrigger=function(t,e){},t.prototype.visitState=function(t,e){},t.prototype.visitTransition=function(t,e){},t.prototype.visitAnimateChild=function(t,e){var n=e.subInstructions.consume(e.element);if(n){var r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t},t.prototype.visitAnimateRef=function(t,e){var n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t},t.prototype._visitSubInstructions=function(t,e,n){var r=e.currentTimeline.currentTime,i=null!=n.duration?Rl(n.duration):null,o=null!=n.delay?Rl(n.delay):null;return 0!==i&&t.forEach(function(t){var n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r},t.prototype.visitReference=function(t,e){e.updateOptions(t.options,!0),Jl(this,t.animation,e),e.previousNode=t},t.prototype.visitSequence=function(t,e){var n=this,r=e.subContextCount,i=e,o=t.options;if(o&&(o.params||o.delay)&&((i=e.createSubContext(o)).transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=yc);var a=Rl(o.delay);i.delayNextStep(a)}t.steps.length&&(t.steps.forEach(function(t){return Jl(n,t,i)}),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t},t.prototype.visitGroup=function(t,e){var n=this,r=[],i=e.currentTimeline.currentTime,o=t.options&&t.options.delay?Rl(t.options.delay):0;t.steps.forEach(function(a){var s=e.createSubContext(t.options);o&&s.delayNextStep(o),Jl(n,a,s),i=Math.max(i,s.currentTimeline.currentTime),r.push(s.currentTimeline)}),r.forEach(function(t){return e.currentTimeline.mergeTimelineCollectedStyles(t)}),e.transformIntoNewTimeline(i),e.previousNode=t},t.prototype._visitTiming=function(t,e){if(t.dynamic){var n=t.strValue;return Ll(e.params?Wl(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}},t.prototype.visitAnimate=function(t,e){var n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());var i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t},t.prototype.visitStyle=function(t,e){var n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();var i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t},t.prototype.visitKeyframes=function(t,e){var n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(function(t){o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t},t.prototype.visitQuery=function(t,e){var n=this,r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?Rl(i.delay):0;o&&(6===e.previousNode.type||0==r&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=yc);var a=r,s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=s.length;var u=null;s.forEach(function(r,i){e.currentQueryIndex=i;var s=e.createSubContext(t.options,r);o&&s.delayNextStep(o),r===e.element&&(u=s.currentTimeline),Jl(n,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(a),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t},t.prototype.visitStagger=function(t,e){var n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),a=o*(e.currentQueryTotal-1),s=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":s=a-s;break;case"full":s=n.currentStaggerTime}var u=e.currentTimeline;s&&u.delayNextStep(s);var l=u.currentTime;Jl(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-l+(r.startTime-n.currentTimeline.startTime)},t}(),yc={},vc=function(){function t(t,e,n,r,i,o,a,s){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=yc,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=s||new bc(this._driver,e,0),a.push(this.currentTimeline)}return Object.defineProperty(t.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),t.prototype.updateOptions=function(t,e){var n=this;if(t){var r=t,i=this.options;null!=r.duration&&(i.duration=Rl(r.duration)),null!=r.delay&&(i.delay=Rl(r.delay));var o=r.params;if(o){var a=i.params;a||(a=this.options.params={}),Object.keys(o).forEach(function(t){e&&a.hasOwnProperty(t)||(a[t]=Wl(o[t],a,n.errors))})}}},t.prototype._copyOptions=function(){var t={};if(this.options){var e=this.options.params;if(e){var n=t.params={};Object.keys(e).forEach(function(t){n[t]=e[t]})}}return t},t.prototype.createSubContext=function(e,n,r){void 0===e&&(e=null);var i=n||this.element,o=new t(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o},t.prototype.transformIntoNewTimeline=function(t){return this.previousNode=yc,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline},t.prototype.appendInstructionToTimeline=function(t,e,n){var r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new _c(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r},t.prototype.incrementTime=function(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)},t.prototype.delayNextStep=function(t){t>0&&this.currentTimeline.delayNextStep(t)},t.prototype.invokeQuery=function(t,e,n,r,i,a){var s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(fc,"."+this._enterClassName)).replace(dc,"."+this._leaveClassName);var u=this._driver.query(this.element,t,1!=n);0!==n&&(u=n<0?u.slice(u.length+n,u.length):u.slice(0,n)),s.push.apply(s,Object(o.f)(u))}return i||0!=s.length||a.push('`query("'+e+'")` returned zero elements. (Use `query("'+e+'", { optional: true })` if you wish to allow this.)'),s},t}(),bc=function(){function t(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}return t.prototype.containsAnimation=function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}},t.prototype.getCurrentStyleProperties=function(){return Object.keys(this._currentKeyframe)},Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.startTime+this.duration},enumerable:!0,configurable:!0}),t.prototype.delayNextStep=function(t){var e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t},t.prototype.fork=function(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)},t.prototype._loadKeyframe=function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))},t.prototype.forwardFrame=function(){this.duration+=1,this._loadKeyframe()},t.prototype.forwardTime=function(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()},t.prototype._updateStyle=function(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}},t.prototype.allowOnlyTimelineStyles=function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe},t.prototype.applyEmptyStep=function(t){var e=this;t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(function(t){e._backFill[t]=e._globalTimelineStyles[t]||rl,e._currentKeyframe[t]=rl}),this._currentEmptyStepKeyframe=this._currentKeyframe},t.prototype.setStyles=function(t,e,n,r){var i=this;e&&(this._previousKeyframe.easing=e);var o=r&&r.params||{},a=function(t,e){var n,r={};return t.forEach(function(t){"*"===t?(n=n||Object.keys(e)).forEach(function(t){r[t]=rl}):Bl(t,!1,r)}),r}(t,this._globalTimelineStyles);Object.keys(a).forEach(function(t){var e=Wl(a[t],o,n);i._pendingStyles[t]=e,i._localTimelineStyles.hasOwnProperty(t)||(i._backFill[t]=i._globalTimelineStyles.hasOwnProperty(t)?i._globalTimelineStyles[t]:rl),i._updateStyle(t,e)})},t.prototype.applyStylesToKeyframe=function(){var t=this,e=this._pendingStyles,n=Object.keys(e);0!=n.length&&(this._pendingStyles={},n.forEach(function(n){t._currentKeyframe[n]=e[n]}),Object.keys(this._localTimelineStyles).forEach(function(e){t._currentKeyframe.hasOwnProperty(e)||(t._currentKeyframe[e]=t._localTimelineStyles[e])}))},t.prototype.snapshotCurrentStyles=function(){var t=this;Object.keys(this._localTimelineStyles).forEach(function(e){var n=t._localTimelineStyles[e];t._pendingStyles[e]=n,t._updateStyle(e,n)})},t.prototype.getFinalKeyframe=function(){return this._keyframes.get(this.duration)},Object.defineProperty(t.prototype,"properties",{get:function(){var t=[];for(var e in this._currentKeyframe)t.push(e);return t},enumerable:!0,configurable:!0}),t.prototype.mergeTimelineCollectedStyles=function(t){var e=this;Object.keys(t._styleSummary).forEach(function(n){var r=e._styleSummary[n],i=t._styleSummary[n];(!r||i.time>r.time)&&e._updateStyle(n,i.value)})},t.prototype.buildKeyframes=function(){var t=this;this.applyStylesToKeyframe();var e=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration,i=[];this._keyframes.forEach(function(o,a){var s=Bl(o,!0);Object.keys(s).forEach(function(t){var r=s[t];r==ll?e.add(t):r==rl&&n.add(t)}),r||(s.offset=a/t.duration),i.push(s)});var o=e.size?Kl(e.values()):[],a=n.size?Kl(n.values()):[];if(r){var s=i[0],u=Fl(s);s.offset=0,u.offset=1,i=[s,u]}return hc(this.element,i,o,a,this.duration,this.startTime,this.easing,!1)},t}(),_c=function(t){function e(e,n,r,i,o,a,s){void 0===s&&(s=!1);var u=t.call(this,e,n,a.delay)||this;return u.element=n,u.keyframes=r,u.preStyleProps=i,u.postStyleProps=o,u._stretchStartingKeyframe=s,u.timings={duration:a.duration,delay:a.delay,easing:a.easing},u}return Object(o.c)(e,t),e.prototype.containsAnimation=function(){return this.keyframes.length>1},e.prototype.buildKeyframes=function(){var t=this.keyframes,e=this.timings,n=e.delay,r=e.duration,i=e.easing;if(this._stretchStartingKeyframe&&n){var o=[],a=r+n,s=n/a,u=Bl(t[0],!1);u.offset=0,o.push(u);var l=Bl(t[0],!1);l.offset=wc(s),o.push(l);for(var c=t.length-1,h=1;h<=c;h++){var p=Bl(t[h],!1);p.offset=wc((n+p.offset*r)/a),o.push(p)}r=a,n=0,i="",t=o}return hc(this.element,t,this.preStyleProps,this.postStyleProps,r,n,i,!0)},e}(bc);function wc(t,e){void 0===e&&(e=3);var n=Math.pow(10,e-1);return Math.round(t*n)/n}var xc=function(){},Cc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.normalizePropertyName=function(t,e){return Ql(t)},e.prototype.normalizeStyleValue=function(t,e,n,r){var i="",o=n.toString().trim();if(Ec[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push("Please provide a CSS unit value for "+t+":"+n)}return o+i},e}(xc),Ec=function(t){var e={};return"width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",").forEach(function(t){return e[t]=!0}),e}();function Sc(t,e,n,r,i,o,a,s,u,l,c,h,p){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:a,timelines:s,queriedElements:u,preStyleProps:l,postStyleProps:c,totalTime:h,errors:p}}var Tc={},Ac=function(){function t(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}return t.prototype.match=function(t,e,n,r){return function(t,e,n,r,i){return t.some(function(t){return t(e,n,r,i)})}(this.ast.matchers,t,e,n,r)},t.prototype.buildStyles=function(t,e,n){var r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o},t.prototype.build=function(t,e,n,r,i,a,s,u,l,c){var h=[],p=this.ast.options&&this.ast.options.params||Tc,f=this.buildStyles(n,s&&s.params||Tc,h),d=u&&u.params||Tc,m=this.buildStyles(r,d,h),g=new Set,y=new Map,v=new Map,b="void"===r,_={params:Object(o.a)({},p,d)},w=c?[]:mc(t,e,this.ast.animation,i,a,f,m,_,l,h),x=0;if(w.forEach(function(t){x=Math.max(t.duration+t.delay,x)}),h.length)return Sc(e,this._triggerName,n,r,b,f,m,[],[],y,v,x,h);w.forEach(function(t){var n=t.element,r=gl(y,n,{});t.preStyleProps.forEach(function(t){return r[t]=!0});var i=gl(v,n,{});t.postStyleProps.forEach(function(t){return i[t]=!0}),n!==e&&g.add(n)});var C=Kl(g.values());return Sc(e,this._triggerName,n,r,b,f,m,w,C,y,v,x)},t}(),Pc=function(){function t(t,e){this.styles=t,this.defaultParams=e}return t.prototype.buildStyles=function(t,e){var n={},r=Fl(this.defaultParams);return Object.keys(t).forEach(function(e){var n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(function(t){if("string"!=typeof t){var i=t;Object.keys(i).forEach(function(t){var o=i[t];o.length>1&&(o=Wl(o,r,e)),n[t]=o})}}),n},t}(),Ic=function(){function t(t,e){var n=this;this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(function(t){n.states[t.name]=new Pc(t.style,t.options&&t.options.params||{})}),Oc(this.states,"true","1"),Oc(this.states,"false","0"),e.transitions.forEach(function(e){n.transitionFactories.push(new Ac(t,e,n.states))}),this.fallbackTransition=new Ac(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(t,e){return!0}],options:null,queryCount:0,depCount:0},this.states)}return Object.defineProperty(t.prototype,"containsQueries",{get:function(){return this.ast.queryCount>0},enumerable:!0,configurable:!0}),t.prototype.matchTransition=function(t,e,n,r){return this.transitionFactories.find(function(i){return i.match(t,e,n,r)})||null},t.prototype.matchStyles=function(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)},t}();function Oc(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}var Dc=new pc,kc=function(){function t(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}return t.prototype.register=function(t,e){var n=[],r=oc(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r},t.prototype._buildPlayer=function(t,e,n){var r=t.element,i=pl(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)},t.prototype.create=function(t,e,n){var r=this;void 0===n&&(n={});var i,o=[],a=this._animations[t],s=new Map;if(a?(i=mc(this._driver,e,a,"ng-enter","ng-leave",{},{},n,Dc,o)).forEach(function(t){var e=gl(s,t.element,{});t.postStyleProps.forEach(function(t){return e[t]=null})}):(o.push("The requested animation doesn't exist or has already been destroyed"),i=[]),o.length)throw new Error("Unable to create the animation due to the following errors: "+o.join("\n"));s.forEach(function(t,e){Object.keys(t).forEach(function(n){t[n]=r._driver.computeStyle(e,n,rl)})});var u=hl(i.map(function(t){var e=s.get(t.element);return r._buildPlayer(t,{},e)}));return this._playersById[t]=u,u.onDestroy(function(){return r.destroy(t)}),this.players.push(u),u},t.prototype.destroy=function(t){var e=this._getPlayer(t);e.destroy(),delete this._playersById[t];var n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)},t.prototype._getPlayer=function(t){var e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e},t.prototype.listen=function(t,e,n,r){var i=ml(e,"","","");return fl(this._getPlayer(t),n,i,r),function(){}},t.prototype.command=function(t,e,n,r){if("register"!=n)if("create"!=n){var i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}else this.create(t,e,r[0]||{});else this.register(t,r[0])},t}(),Mc=[],Rc={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Nc={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Lc="__ng_removed",Fc=function(){function t(t,e){void 0===e&&(e=""),this.namespaceId=e;var n=t&&t.hasOwnProperty("value");if(this.value=function(t){return null!=t?t:null}(n?t.value:t),n){var r=Fl(t);delete r.value,this.options=r}else this.options={};this.options.params||(this.options.params={})}return Object.defineProperty(t.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),t.prototype.absorbOptions=function(t){var e=t.params;if(e){var n=this.options.params;Object.keys(e).forEach(function(t){null==n[t]&&(n[t]=e[t])})}},t}(),Bc=new Fc("void"),jc=function(){function t(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Kc(e,this._hostClassName)}return t.prototype.listen=function(t,e,n,r){var i,o=this;if(!this._triggers.hasOwnProperty(e))throw new Error('Unable to listen on the animation trigger event "'+n+'" because the animation trigger "'+e+"\" doesn't exist!");if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'+e+'" because the provided event is undefined!');if("start"!=(i=n)&&"done"!=i)throw new Error('The provided animation trigger event "'+n+'" for the animation trigger "'+e+'" is not supported!');var a=gl(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};a.push(s);var u=gl(this._engine.statesByElement,t,{});return u.hasOwnProperty(e)||(Kc(t,"ng-trigger"),Kc(t,"ng-trigger-"+e),u[e]=Bc),function(){o._engine.afterFlush(function(){var t=a.indexOf(s);t>=0&&a.splice(t,1),o._triggers[e]||delete u[e]})}},t.prototype.register=function(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)},t.prototype._getTrigger=function(t){var e=this._triggers[t];if(!e)throw new Error('The provided animation trigger "'+t+'" has not been registered!');return e},t.prototype.trigger=function(t,e,n,r){var i=this;void 0===r&&(r=!0);var o=this._getTrigger(e),a=new Vc(this.id,e,t),s=this._engine.statesByElement.get(t);s||(Kc(t,"ng-trigger"),Kc(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));var u=s[e],l=new Fc(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&l.absorbOptions(u.options),s[e]=l,u||(u=Bc),"void"===l.value||u.value!==l.value){var c=gl(this._engine.playersByElement,t,[]);c.forEach(function(t){t.namespaceId==i.id&&t.triggerName==e&&t.queued&&t.destroy()});var h=o.matchTransition(u.value,l.value,t,l.params),p=!1;if(!h){if(!r)return;h=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:h,fromState:u,toState:l,player:a,isFallbackTransition:p}),p||(Kc(t,"ng-animate-queued"),a.onStart(function(){Xc(t,"ng-animate-queued")})),a.onDone(function(){var e=i.players.indexOf(a);e>=0&&i.players.splice(e,1);var n=i._engine.playersByElement.get(t);if(n){var r=n.indexOf(a);r>=0&&n.splice(r,1)}}),this.players.push(a),c.push(a),a}if(!function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var o=n[i];if(!e.hasOwnProperty(o)||t[o]!==e[o])return!1}return!0}(u.params,l.params)){var f=[],d=o.matchStyles(u.value,u.params,f),m=o.matchStyles(l.value,l.params,f);f.length?this._engine.reportError(f):this._engine.afterFlush(function(){Ul(t,d),Vl(t,m)})}},t.prototype.deregister=function(t){var e=this;delete this._triggers[t],this._engine.statesByElement.forEach(function(e,n){delete e[t]}),this._elementListeners.forEach(function(n,r){e._elementListeners.set(r,n.filter(function(e){return e.name!=t}))})},t.prototype.clearElementCache=function(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);var e=this._engine.playersByElement.get(t);e&&(e.forEach(function(t){return t.destroy()}),this._engine.playersByElement.delete(t))},t.prototype._signalRemovalForInnerTriggers=function(t,e,n){var r=this;void 0===n&&(n=!1),this._engine.driver.query(t,".ng-trigger",!0).forEach(function(t){if(!t[Lc]){var n=r._engine.fetchNamespacesByElement(t);n.size?n.forEach(function(n){return n.triggerLeaveAnimation(t,e,!1,!0)}):r.clearElementCache(t)}})},t.prototype.triggerLeaveAnimation=function(t,e,n,r){var i=this,o=this._engine.statesByElement.get(t);if(o){var a=[];if(Object.keys(o).forEach(function(e){if(i._triggers[e]){var n=i.trigger(t,e,"void",r);n&&a.push(n)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&hl(a).onDone(function(){return i._engine.processLeaveNode(t)}),!0}return!1},t.prototype.prepareLeaveAnimationListeners=function(t){var e=this,n=this._elementListeners.get(t);if(n){var r=new Set;n.forEach(function(n){var i=n.name;if(!r.has(i)){r.add(i);var o=e._triggers[i].fallbackTransition,a=e._engine.statesByElement.get(t)[i]||Bc,s=new Fc("void"),u=new Vc(e.id,i,t);e._engine.totalQueuedPlayers++,e._queue.push({element:t,triggerName:i,transition:o,fromState:a,toState:s,player:u,isFallbackTransition:!0})}})}},t.prototype.removeNode=function(t,e){var n=this,r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e,!0),!this.triggerLeaveAnimation(t,e,!0)){var i=!1;if(r.totalAnimations){var o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else for(var a=t;a=a.parentNode;)if(r.statesByElement.get(a)){i=!0;break}}this.prepareLeaveAnimationListeners(t),i?r.markElementAsRemoved(this.id,t,!1,e):(r.afterFlush(function(){return n.clearElementCache(t)}),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}},t.prototype.insertNode=function(t,e){Kc(t,this._hostClassName)},t.prototype.drainQueuedTransitions=function(t){var e=this,n=[];return this._queue.forEach(function(r){var i=r.player;if(!i.destroyed){var o=r.element,a=e._elementListeners.get(o);a&&a.forEach(function(e){if(e.name==r.triggerName){var n=ml(o,r.triggerName,r.fromState.value,r.toState.value);n._data=t,fl(r.player,e.phase,n,e.callback)}}),i.markedForDestroy?e._engine.afterFlush(function(){i.destroy()}):n.push(r)}}),this._queue=[],n.sort(function(t,n){var r=t.transition.ast.depCount,i=n.transition.ast.depCount;return 0==r||0==i?r-i:e._engine.driver.containsElement(t.element,n.element)?1:-1})},t.prototype.destroy=function(t){this.players.forEach(function(t){return t.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,t)},t.prototype.elementContainsData=function(t){var e=!1;return this._elementListeners.has(t)&&(e=!0),!!this._queue.find(function(e){return e.element===t})||e},t}(),zc=function(){function t(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(t,e){}}return t.prototype._onRemovalComplete=function(t,e){this.onRemovalComplete(t,e)},Object.defineProperty(t.prototype,"queuedPlayers",{get:function(){var t=[];return this._namespaceList.forEach(function(e){e.players.forEach(function(e){e.queued&&t.push(e)})}),t},enumerable:!0,configurable:!0}),t.prototype.createNamespace=function(t,e){var n=new jc(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n},t.prototype._balanceNamespaceList=function(t,e){var n=this._namespaceList.length-1;if(n>=0){for(var r=!1,i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t},t.prototype.register=function(t,e){var n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n},t.prototype.registerTrigger=function(t,e,n){var r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++},t.prototype.destroy=function(t,e){var n=this;if(t){var r=this._fetchNamespace(t);this.afterFlush(function(){n.namespacesByHostElement.delete(r.hostElement),delete n._namespaceLookup[t];var e=n._namespaceList.indexOf(r);e>=0&&n._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(function(){return r.destroy(e)})}},t.prototype._fetchNamespace=function(t){return this._namespaceLookup[t]},t.prototype.fetchNamespacesByElement=function(t){var e=new Set,n=this.statesByElement.get(t);if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=n[r[i]].namespaceId;if(o){var a=this._fetchNamespace(o);a&&e.add(a)}}return e},t.prototype.trigger=function(t,e,n,r){if(Uc(e)){var i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1},t.prototype.insertNode=function(t,e,n,r){if(Uc(e)){var i=e[Lc];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;var o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){var a=this._fetchNamespace(t);a&&a.insertNode(e,n)}r&&this.collectEnterElement(e)}},t.prototype.collectEnterElement=function(t){this.collectedEnterElements.push(t)},t.prototype.markElementAsDisabled=function(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Kc(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Xc(t,"ng-animate-disabled"))},t.prototype.removeNode=function(t,e,n){if(Uc(e)){var r=t?this._fetchNamespace(t):null;r?r.removeNode(e,n):this.markElementAsRemoved(t,e,!1,n)}else this._onRemovalComplete(e,n)},t.prototype.markElementAsRemoved=function(t,e,n,r){this.collectedLeaveElements.push(e),e[Lc]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}},t.prototype.listen=function(t,e,n,r,i){return Uc(e)?this._fetchNamespace(t).listen(e,n,r,i):function(){}},t.prototype._buildInstruction=function(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)},t.prototype.destroyInnerAnimations=function(t){var e=this,n=this.driver.query(t,".ng-trigger",!0);n.forEach(function(t){return e.destroyActiveAnimationsForElement(t)}),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,".ng-animating",!0)).forEach(function(t){return e.finishActiveQueriedAnimationOnElement(t)})},t.prototype.destroyActiveAnimationsForElement=function(t){var e=this.playersByElement.get(t);e&&e.forEach(function(t){t.queued?t.markedForDestroy=!0:t.destroy()})},t.prototype.finishActiveQueriedAnimationOnElement=function(t){var e=this.playersByQueriedElement.get(t);e&&e.forEach(function(t){return t.finish()})},t.prototype.whenRenderingDone=function(){var t=this;return new Promise(function(e){if(t.players.length)return hl(t.players).onDone(function(){return e()});e()})},t.prototype.processLeaveNode=function(t){var e=this,n=t[Lc];if(n&&n.setForRemoval){if(t[Lc]=Rc,n.namespaceId){this.destroyInnerAnimations(t);var r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(function(n){e.markElementAsDisabled(t,!1)})},t.prototype.flush=function(t){var e=this;void 0===t&&(t=-1);var n=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(t,n){return e._balanceNamespaceList(t,n)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++)Kc(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var i=[];try{n=this._flushAnimations(i,t)}finally{for(r=0;r<i.length;r++)i[r]()}}else for(r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(t){return t()}),this._flushFns=[],this._whenQuietFns.length){var o=this._whenQuietFns;this._whenQuietFns=[],n.length?hl(n).onDone(function(){o.forEach(function(t){return t()})}):o.forEach(function(t){return t()})}},t.prototype.reportError=function(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))},t.prototype._flushAnimations=function(t,e){var n=this,r=new pc,i=[],a=new Map,s=[],u=new Map,l=new Map,c=new Map,h=new Set;this.disabledNodes.forEach(function(t){h.add(t);for(var e=n.driver.query(t,".ng-animate-queued",!0),r=0;r<e.length;r++)h.add(e[r])});var p=this.bodyNode,f=Array.from(this.statesByElement.keys()),d=Hc(f,this.collectedEnterElements),m=new Map,g=0;d.forEach(function(t,e){var n="ng-enter"+g++;m.set(e,n),t.forEach(function(t){return Kc(t,n)})});for(var y=[],v=new Set,b=new Set,_=0;_<this.collectedLeaveElements.length;_++)(F=(L=this.collectedLeaveElements[_])[Lc])&&F.setForRemoval&&(y.push(L),v.add(L),F.hasAnimation?this.driver.query(L,".ng-star-inserted",!0).forEach(function(t){return v.add(t)}):b.add(L));var w=new Map,x=Hc(f,Array.from(v));x.forEach(function(t,e){var n="ng-leave"+g++;w.set(e,n),t.forEach(function(t){return Kc(t,n)})}),t.push(function(){d.forEach(function(t,e){var n=m.get(e);t.forEach(function(t){return Xc(t,n)})}),x.forEach(function(t,e){var n=w.get(e);t.forEach(function(t){return Xc(t,n)})}),y.forEach(function(t){n.processLeaveNode(t)})});for(var C=[],E=[],S=this._namespaceList.length-1;S>=0;S--)this._namespaceList[S].drainQueuedTransitions(e).forEach(function(t){var e=t.player,o=t.element;if(C.push(e),n.collectedEnterElements.length){var a=o[Lc];if(a&&a.setForMove)return void e.destroy()}var h=!p||!n.driver.containsElement(p,o),f=w.get(o),d=m.get(o),g=n._buildInstruction(t,r,d,f,h);if(g.errors&&g.errors.length)E.push(g);else{if(h)return e.onStart(function(){return Ul(o,g.fromStyles)}),e.onDestroy(function(){return Vl(o,g.toStyles)}),void i.push(e);if(t.isFallbackTransition)return e.onStart(function(){return Ul(o,g.fromStyles)}),e.onDestroy(function(){return Vl(o,g.toStyles)}),void i.push(e);g.timelines.forEach(function(t){return t.stretchStartingKeyframe=!0}),r.append(o,g.timelines),s.push({instruction:g,player:e,element:o}),g.queriedElements.forEach(function(t){return gl(u,t,[]).push(e)}),g.preStyleProps.forEach(function(t,e){var n=Object.keys(t);if(n.length){var r=l.get(e);r||l.set(e,r=new Set),n.forEach(function(t){return r.add(t)})}}),g.postStyleProps.forEach(function(t,e){var n=Object.keys(t),r=c.get(e);r||c.set(e,r=new Set),n.forEach(function(t){return r.add(t)})})}});if(E.length){var T=[];E.forEach(function(t){T.push("@"+t.triggerName+" has failed due to:\n"),t.errors.forEach(function(t){return T.push("- "+t+"\n")})}),C.forEach(function(t){return t.destroy()}),this.reportError(T)}var A=new Map,P=new Map;s.forEach(function(t){var e=t.element;r.has(e)&&(P.set(e,e),n._beforeAnimationBuild(t.player.namespaceId,t.instruction,A))}),i.forEach(function(t){var e=t.element;n._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(function(t){gl(A,e,[]).push(t),t.destroy()})});var I=y.filter(function(t){return Zc(t,l,c)}),O=new Map;Gc(O,this.driver,b,c,rl).forEach(function(t){Zc(t,l,c)&&I.push(t)});var D=new Map;d.forEach(function(t,e){Gc(D,n.driver,new Set(t),l,ll)}),I.forEach(function(t){var e=O.get(t),n=D.get(t);O.set(t,Object(o.a)({},e,n))});var k=[],M=[],R={};s.forEach(function(t){var e=t.element,o=t.player,s=t.instruction;if(r.has(e)){if(h.has(e))return o.onDestroy(function(){return Vl(e,s.toStyles)}),o.disabled=!0,o.overrideTotalTime(s.totalTime),void i.push(o);var u=R;if(P.size>1){for(var l=e,c=[];l=l.parentNode;){var p=P.get(l);if(p){u=p;break}c.push(l)}c.forEach(function(t){return P.set(t,u)})}var f=n._buildAnimation(o.namespaceId,s,A,a,D,O);if(o.setRealPlayer(f),u===R)k.push(o);else{var d=n.playersByElement.get(u);d&&d.length&&(o.parentPlayer=hl(d)),i.push(o)}}else Ul(e,s.fromStyles),o.onDestroy(function(){return Vl(e,s.toStyles)}),M.push(o),h.has(e)&&i.push(o)}),M.forEach(function(t){var e=a.get(t.element);if(e&&e.length){var n=hl(e);t.setRealPlayer(n)}}),i.forEach(function(t){t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(var N=0;N<y.length;N++){var L,F=(L=y[N])[Lc];if(Xc(L,"ng-leave"),!F||!F.hasAnimation){var B=[];if(u.size){var j=u.get(L);j&&j.length&&B.push.apply(B,Object(o.f)(j));for(var z=this.driver.query(L,".ng-animating",!0),V=0;V<z.length;V++){var U=u.get(z[V]);U&&U.length&&B.push.apply(B,Object(o.f)(U))}}var q=B.filter(function(t){return!t.destroyed});q.length?Qc(this,L,q):this.processLeaveNode(L)}}return y.length=0,k.forEach(function(t){n.players.push(t),t.onDone(function(){t.destroy();var e=n.players.indexOf(t);n.players.splice(e,1)}),t.play()}),k},t.prototype.elementContainsData=function(t,e){var n=!1,r=e[Lc];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n},t.prototype.afterFlush=function(t){this._flushFns.push(t)},t.prototype.afterFlushAnimationsDone=function(t){this._whenQuietFns.push(t)},t.prototype._getPreviousPlayers=function(t,e,n,r,i){var o=[];if(e){var a=this.playersByQueriedElement.get(t);a&&(o=a)}else{var s=this.playersByElement.get(t);if(s){var u=!i||"void"==i;s.forEach(function(t){t.queued||(u||t.triggerName==r)&&o.push(t)})}}return(n||r)&&(o=o.filter(function(t){return!(n&&n!=t.namespaceId||r&&r!=t.triggerName)})),o},t.prototype._beforeAnimationBuild=function(t,e,n){var r,i,a=e.element,s=e.isRemovalTransition?void 0:t,u=e.isRemovalTransition?void 0:e.triggerName,l=function(t){var r=t.element,i=r!==a,o=gl(n,r,[]);c._getPreviousPlayers(r,i,s,u,e.toState).forEach(function(t){var e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),o.push(t)})},c=this;try{for(var h=Object(o.g)(e.timelines),p=h.next();!p.done;p=h.next())l(p.value)}catch(t){r={error:t}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}Ul(a,e.fromStyles)},t.prototype._buildAnimation=function(t,e,n,r,i,o){var a=this,s=e.triggerName,u=e.element,l=[],c=new Set,h=new Set,p=e.timelines.map(function(e){var p=e.element;c.add(p);var f=p[Lc];if(f&&f.removedBeforeQueried)return new sl(e.duration,e.delay);var d,m,g=p!==u,y=(d=(n.get(p)||Mc).map(function(t){return t.getRealPlayer()}),m=[],function t(e,n){for(var r=0;r<e.length;r++){var i=e[r];i instanceof ul?t(i.players,n):n.push(i)}}(d,m),m).filter(function(t){return!!t.element&&t.element===p}),v=i.get(p),b=o.get(p),_=pl(0,a._normalizer,0,e.keyframes,v,b),w=a._buildPlayer(e,_,y);if(e.subTimeline&&r&&h.add(p),g){var x=new Vc(t,s,p);x.setRealPlayer(w),l.push(x)}return w});l.forEach(function(t){gl(a.playersByQueriedElement,t.element,[]).push(t),t.onDone(function(){return function(t,e,n){var r;if(t instanceof Map){if(r=t.get(e)){if(r.length){var i=r.indexOf(n);r.splice(i,1)}0==r.length&&t.delete(e)}}else(r=t[e])&&(r.length&&(i=r.indexOf(n),r.splice(i,1)),0==r.length&&delete t[e]);return r}(a.playersByQueriedElement,t.element,t)})}),c.forEach(function(t){return Kc(t,"ng-animating")});var f=hl(p);return f.onDestroy(function(){c.forEach(function(t){return Xc(t,"ng-animating")}),Vl(u,e.toStyles)}),h.forEach(function(t){gl(r,t,[]).push(f)}),f},t.prototype._buildPlayer=function(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new sl(t.duration,t.delay)},t}(),Vc=function(){function t(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new sl,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return t.prototype.setRealPlayer=function(t){var e=this;this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(function(n){e._queuedCallbacks[n].forEach(function(e){return fl(t,n,void 0,e)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)},t.prototype.getRealPlayer=function(){return this._player},t.prototype.overrideTotalTime=function(t){this.totalTime=t},t.prototype.syncPlayerEvents=function(t){var e=this,n=this._player;n.triggerCallback&&t.onStart(function(){return n.triggerCallback("start")}),t.onDone(function(){return e.finish()}),t.onDestroy(function(){return e.destroy()})},t.prototype._queueEvent=function(t,e){gl(this._queuedCallbacks,t,[]).push(e)},t.prototype.onDone=function(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)},t.prototype.onStart=function(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)},t.prototype.onDestroy=function(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)},t.prototype.init=function(){this._player.init()},t.prototype.hasStarted=function(){return!this.queued&&this._player.hasStarted()},t.prototype.play=function(){!this.queued&&this._player.play()},t.prototype.pause=function(){!this.queued&&this._player.pause()},t.prototype.restart=function(){!this.queued&&this._player.restart()},t.prototype.finish=function(){this._player.finish()},t.prototype.destroy=function(){this.destroyed=!0,this._player.destroy()},t.prototype.reset=function(){!this.queued&&this._player.reset()},t.prototype.setPosition=function(t){this.queued||this._player.setPosition(t)},t.prototype.getPosition=function(){return this.queued?0:this._player.getPosition()},t.prototype.triggerCallback=function(t){var e=this._player;e.triggerCallback&&e.triggerCallback(t)},t}();function Uc(t){return t&&1===t.nodeType}function qc(t,e){var n=t.style.display;return t.style.display=null!=e?e:"none",n}function Gc(t,e,n,r,i){var o=[];n.forEach(function(t){return o.push(qc(t))});var a=[];r.forEach(function(n,r){var o={};n.forEach(function(t){var n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r[Lc]=Nc,a.push(r))}),t.set(r,o)});var s=0;return n.forEach(function(t){return qc(t,o[s++])}),a}function Hc(t,e){var n=new Map;if(t.forEach(function(t){return n.set(t,[])}),0==e.length)return n;var r=new Set(e),i=new Map;return e.forEach(function(t){var e=function t(e){if(!e)return 1;var o=i.get(e);if(o)return o;var a=e.parentNode;return o=n.has(a)?a:r.has(a)?1:t(a),i.set(e,o),o}(t);1!==e&&n.get(e).push(t)}),n}var Wc="$$classes";function Kc(t,e){if(t.classList)t.classList.add(e);else{var n=t[Wc];n||(n=t[Wc]={}),n[e]=!0}}function Xc(t,e){if(t.classList)t.classList.remove(e);else{var n=t[Wc];n&&delete n[e]}}function Qc(t,e,n){hl(n).onDone(function(){return t.processLeaveNode(e)})}function Zc(t,e,n){var r=n.get(t);if(!r)return!1;var i=e.get(t);return i?r.forEach(function(t){return i.add(t)}):e.set(t,r),n.delete(t),!0}var Yc=function(){function t(t,e,n){var r=this;this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=function(t,e){},this._transitionEngine=new zc(t,e,n),this._timelineEngine=new kc(t,e,n),this._transitionEngine.onRemovalComplete=function(t,e){return r.onRemovalComplete(t,e)}}return t.prototype.registerTrigger=function(t,e,n,r,i){var o=t+"-"+r,a=this._triggerCache[o];if(!a){var s=[],u=oc(this._driver,i,s);if(s.length)throw new Error('The animation trigger "'+r+'" has failed to build due to the following errors:\n - '+s.join("\n - "));a=function(t,e){return new Ic(t,e)}(r,u),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)},t.prototype.register=function(t,e){this._transitionEngine.register(t,e)},t.prototype.destroy=function(t,e){this._transitionEngine.destroy(t,e)},t.prototype.onInsert=function(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)},t.prototype.onRemove=function(t,e,n){this._transitionEngine.removeNode(t,e,n)},t.prototype.disableAnimations=function(t,e){this._transitionEngine.markElementAsDisabled(t,e)},t.prototype.process=function(t,e,n,r){if("@"==n.charAt(0)){var i=Object(o.e)(yl(n),2);this._timelineEngine.command(i[0],e,i[1],r)}else this._transitionEngine.trigger(t,e,n,r)},t.prototype.listen=function(t,e,n,r,i){if("@"==n.charAt(0)){var a=Object(o.e)(yl(n),2);return this._timelineEngine.listen(a[0],e,a[1],i)}return this._transitionEngine.listen(t,e,n,r,i)},t.prototype.flush=function(t){void 0===t&&(t=-1),this._transitionEngine.flush(t)},Object.defineProperty(t.prototype,"players",{get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)},enumerable:!0,configurable:!0}),t.prototype.whenRenderingDone=function(){return this._transitionEngine.whenRenderingDone()},t}(),Jc="animation",$c="animationend",th=function(){function t(t,e,n,r,i,o,a){var s=this;this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(t){return s._handleCallback(t)}}return t.prototype.apply=function(){var t,e,n;e=this._duration+"ms "+this._easing+" "+this._delay+"ms 1 normal "+this._fillMode+" "+this._name,(n=ah(t=this._element,"").trim()).length&&(function(t,e){for(var n=0;n<t.length;n++)","===t.charAt(n)&&0}(n),e=n+", "+e),oh(t,"",e),ih(this._element,this._eventFn,!1),this._startTime=Date.now()},t.prototype.pause=function(){eh(this._element,this._name,"paused")},t.prototype.resume=function(){eh(this._element,this._name,"running")},t.prototype.setPosition=function(t){var e=nh(this._element,this._name);this._position=t*this._duration,oh(this._element,"Delay","-"+this._position+"ms",e)},t.prototype.getPosition=function(){return this._position},t.prototype._handleCallback=function(t){var e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()},t.prototype.finish=function(){this._finished||(this._finished=!0,this._onDoneFn(),ih(this._element,this._eventFn,!0))},t.prototype.destroy=function(){var t,e,n,r;this._destroyed||(this._destroyed=!0,this.finish(),e=this._name,(r=rh(n=ah(t=this._element,"").split(","),e))>=0&&(n.splice(r,1),oh(t,"",n.join(","))))},t}();function eh(t,e,n){oh(t,"PlayState",n,nh(t,e))}function nh(t,e){var n=ah(t,"");return n.indexOf(",")>0?rh(n.split(","),e):rh([n],e)}function rh(t,e){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function ih(t,e,n){n?t.removeEventListener($c,e):t.addEventListener($c,e)}function oh(t,e,n,r){var i=Jc+e;if(null!=r){var o=t.style[i];if(o.length){var a=o.split(",");a[r]=n,n=a.join(",")}}t.style[i]=n}function ah(t,e){return t.style[Jc+e]}var sh="linear",uh=function(){function t(t,e,n,r,i,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||sh,this.totalTime=r+i,this._buildStyler()}return t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.destroy=function(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype._flushDoneFns=function(){this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[]},t.prototype._flushStartFns=function(){this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[]},t.prototype.finish=function(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._flushDoneFns())},t.prototype.setPosition=function(t){this._styler.setPosition(t)},t.prototype.getPosition=function(){return this._styler.getPosition()},t.prototype.hasStarted=function(){return this._state>=2},t.prototype.init=function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())},t.prototype.play=function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2),this._styler.resume()},t.prototype.pause=function(){this.init(),this._styler.pause()},t.prototype.restart=function(){this.reset(),this.play()},t.prototype.reset=function(){this._styler.destroy(),this._buildStyler(),this._styler.apply()},t.prototype._buildStyler=function(){var t=this;this._styler=new th(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",function(){return t.finish()})},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t.prototype.beforeDestroy=function(){var t=this;this.init();var e={};if(this.hasStarted()){var n=this._state>=3;Object.keys(this._finalStyles).forEach(function(r){"offset"!=r&&(e[r]=n?t._finalStyles[r]:$l(t.element,r))})}this.currentSnapshot=e},t}(),lh=function(t){function e(e,n){var r=t.call(this)||this;return r.element=e,r._startingStyles={},r.__initialized=!1,r._styles=Ol(n),r}return Object(o.c)(e,t),e.prototype.init=function(){var e=this;!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(function(t){e._startingStyles[t]=e.element.style[t]}),t.prototype.init.call(this))},e.prototype.play=function(){var e=this;this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(function(t){return e.element.style.setProperty(t,e._styles[t])}),t.prototype.play.call(this))},e.prototype.destroy=function(){var e=this;this._startingStyles&&(Object.keys(this._startingStyles).forEach(function(t){var n=e._startingStyles[t];n?e.element.style.setProperty(t,n):e.element.style.removeProperty(t)}),this._startingStyles=null,t.prototype.destroy.call(this))},e}(sl),ch=function(){function t(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}return t.prototype.validateStyleProperty=function(t){return Tl(t)},t.prototype.matchesElement=function(t,e){return Al(t,e)},t.prototype.containsElement=function(t,e){return Pl(t,e)},t.prototype.query=function(t,e,n){return Il(t,e,n)},t.prototype.computeStyle=function(t,e,n){return window.getComputedStyle(t)[e]},t.prototype.buildKeyframeElement=function(t,e,n){var r="@keyframes "+e+" {\n",i="";(n=n.map(function(t){return Ol(t)})).forEach(function(t){i=" ";var e=parseFloat(t.offset);r+=""+i+100*e+"% {\n",i+=" ",Object.keys(t).forEach(function(e){var n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=i+"animation-timing-function: "+n+";\n"));default:return void(r+=""+i+e+": "+n+";\n")}}),r+=i+"}\n"}),r+="}\n";var o=document.createElement("style");return o.innerHTML=r,o},t.prototype.animate=function(t,e,n,r,i,o,a){void 0===o&&(o=[]),a&&this._notifyFaultyScrubber();var s=o.filter(function(t){return t instanceof uh}),u={};Zl(n,r)&&s.forEach(function(t){var e=t.currentSnapshot;Object.keys(e).forEach(function(t){return u[t]=e[t]})});var l=function(t){var e={};return t&&(Array.isArray(t)?t:[t]).forEach(function(t){Object.keys(t).forEach(function(n){"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Yl(t,e,u));if(0==n)return new lh(t,l);var c="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,c,e);document.querySelector("head").appendChild(h);var p=new uh(t,e,c,n,r,i,l);return p.onDestroy(function(){var t;(t=h).parentNode.removeChild(t)}),p},t.prototype._notifyFaultyScrubber=function(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)},t}(),hh=function(){function t(t,e,n){this.element=t,this.keyframes=e,this.options=n,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.init=function(){this._buildPlayer(),this._preparePlayerBeforeStart()},t.prototype._buildPlayer=function(){var t=this;if(!this._initialized){this._initialized=!0;var e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",function(){return t._onFinish()})}},t.prototype._preparePlayerBeforeStart=function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()},t.prototype._triggerWebAnimation=function(t,e,n){return t.animate(e,n)},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.play=function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[],this._started=!0),this.domPlayer.play()},t.prototype.pause=function(){this.init(),this.domPlayer.pause()},t.prototype.finish=function(){this.init(),this._onFinish(),this.domPlayer.finish()},t.prototype.reset=function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1},t.prototype._resetDomPlayerState=function(){this.domPlayer&&this.domPlayer.cancel()},t.prototype.restart=function(){this.reset(),this.play()},t.prototype.hasStarted=function(){return this._started},t.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.setPosition=function(t){this.domPlayer.currentTime=t*this.time},t.prototype.getPosition=function(){return this.domPlayer.currentTime/this.time},Object.defineProperty(t.prototype,"totalTime",{get:function(){return this._delay+this._duration},enumerable:!0,configurable:!0}),t.prototype.beforeDestroy=function(){var t=this,e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(function(n){"offset"!=n&&(e[n]=t._finished?t._finalKeyframe[n]:$l(t.element,n))}),this.currentSnapshot=e},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}(),ph=function(){function t(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(fh().toString()),this._cssKeyframesDriver=new ch}return t.prototype.validateStyleProperty=function(t){return Tl(t)},t.prototype.matchesElement=function(t,e){return Al(t,e)},t.prototype.containsElement=function(t,e){return Pl(t,e)},t.prototype.query=function(t,e,n){return Il(t,e,n)},t.prototype.computeStyle=function(t,e,n){return window.getComputedStyle(t)[e]},t.prototype.overrideWebAnimationsSupport=function(t){this._isNativeImpl=t},t.prototype.animate=function(t,e,n,r,i,o,a){if(void 0===o&&(o=[]),!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);var s={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(s.easing=i);var u={},l=o.filter(function(t){return t instanceof hh});return Zl(n,r)&&l.forEach(function(t){var e=t.currentSnapshot;Object.keys(e).forEach(function(t){return u[t]=e[t]})}),e=Yl(t,e=e.map(function(t){return Bl(t,!1)}),u),new hh(t,e,s)},t}();function fh(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}var dh=function(t){function e(e,n){var i=t.call(this)||this;return i._nextAnimationId=0,i._renderer=e.createRenderer(n.body,{id:"0",encapsulation:r.ViewEncapsulation.None,styles:[],data:{animation:[]}}),i}return Object(o.c)(e,t),e.prototype.build=function(t){var e=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(t)?il(t):t;return yh(this._renderer,null,e,"register",[n]),new mh(e,this._renderer)},e}(nl),mh=function(t){function e(e,n){var r=t.call(this)||this;return r._id=e,r._renderer=n,r}return Object(o.c)(e,t),e.prototype.create=function(t,e){return new gh(this._id,t,e||{},this._renderer)},e}(function(){}),gh=function(){function t(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}return t.prototype._listen=function(t,e){return this._renderer.listen(this.element,"@@"+this.id+":"+t,e)},t.prototype._command=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return yh(this._renderer,this.element,this.id,t,e)},t.prototype.onDone=function(t){this._listen("done",t)},t.prototype.onStart=function(t){this._listen("start",t)},t.prototype.onDestroy=function(t){this._listen("destroy",t)},t.prototype.init=function(){this._command("init")},t.prototype.hasStarted=function(){return this._started},t.prototype.play=function(){this._command("play"),this._started=!0},t.prototype.pause=function(){this._command("pause")},t.prototype.restart=function(){this._command("restart")},t.prototype.finish=function(){this._command("finish")},t.prototype.destroy=function(){this._command("destroy")},t.prototype.reset=function(){this._command("reset")},t.prototype.setPosition=function(t){this._command("setPosition",t)},t.prototype.getPosition=function(){return 0},t}();function yh(t,e,n,r,i){return t.setProperty(e,"@@"+n+":"+r,i)}var vh=function(){function t(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=function(t,e){e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}return t.prototype.createRenderer=function(t,e){var n=this,r=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){var i=this._rendererCache.get(r);return i||(i=new bh("",r,this.engine),this._rendererCache.set(r,i)),i}var o=e.id,a=e.id+"-"+this._currentId;return this._currentId++,this.engine.register(a,t),e.data.animation.forEach(function(e){return n.engine.registerTrigger(o,a,t,e.name,e)}),new _h(this,a,r,this.engine)},t.prototype.begin=function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()},t.prototype._scheduleCountTask=function(){var t=this;this.promise.then(function(){t._microtaskId++})},t.prototype.scheduleListenerCallback=function(t,e,n){var r=this;t>=0&&t<this._microtaskId?this._zone.run(function(){return e(n)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){r._zone.run(function(){r._animationCallbacksBuffer.forEach(function(t){var e=Object(o.e)(t,2);(0,e[0])(e[1])}),r._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))},t.prototype.end=function(){var t=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){t._scheduleCountTask(),t.engine.flush(t._microtaskId)}),this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.engine.whenRenderingDone()},t}(),bh=function(){function t(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?function(t){return e.destroyNode(t)}:null}return Object.defineProperty(t.prototype,"data",{get:function(){return this.delegate.data},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()},t.prototype.createElement=function(t,e){return this.delegate.createElement(t,e)},t.prototype.createComment=function(t){return this.delegate.createComment(t)},t.prototype.createText=function(t){return this.delegate.createText(t)},t.prototype.appendChild=function(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)},t.prototype.insertBefore=function(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)},t.prototype.removeChild=function(t,e){this.engine.onRemove(this.namespaceId,e,this.delegate)},t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setAttribute=function(t,e,n,r){this.delegate.setAttribute(t,e,n,r)},t.prototype.removeAttribute=function(t,e,n){this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,r){this.delegate.setStyle(t,e,n,r)},t.prototype.removeStyle=function(t,e,n){this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)},t.prototype.setValue=function(t,e){this.delegate.setValue(t,e)},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.disableAnimations=function(t,e){this.engine.disableAnimations(t,e)},t}(),_h=function(t){function e(e,n,r,i){var o=t.call(this,n,r,i)||this;return o.factory=e,o.namespaceId=n,o}return Object(o.c)(e,t),e.prototype.setProperty=function(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)},e.prototype.listen=function(t,e,n){var r,i,a,s=this;if("@"==e.charAt(0)){var u=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t),l=e.substr(1),c="";return"@"!=l.charAt(0)&&(l=(r=Object(o.e)((i=l,a=i.indexOf("."),[i.substring(0,a),i.substr(a+1)]),2))[0],c=r[1]),this.engine.listen(this.namespaceId,u,l,c,function(t){s.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)},e}(bh),wh=function(t){function e(e,n,r){return t.call(this,e.body,n,r)||this}return Object(o.c)(e,t),e}(Yc);function xh(){return"function"==typeof fh()?new ph:new ch}function Ch(){return new Cc}function Eh(t,e,n){return new vh(t,e,n)}var Sh=new r.InjectionToken("AnimationModuleType"),Th=function(){},Ah=function(){},Ph=function(){},Ih=function(){function t(t){var e=this;this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){e.headers=new Map,t.split("\n").forEach(function(t){var n=t.indexOf(":");if(n>0){var r=t.slice(0,n),i=r.toLowerCase(),o=t.slice(n+1).trim();e.maybeSetNormalizedName(r,i),e.headers.has(i)?e.headers.get(i).push(o):e.headers.set(i,[o])}})}:function(){e.headers=new Map,Object.keys(t).forEach(function(n){var r=t[n],i=n.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(e.headers.set(i,r),e.maybeSetNormalizedName(n,i))})}:this.headers=new Map}return t.prototype.has=function(t){return this.init(),this.headers.has(t.toLowerCase())},t.prototype.get=function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null},t.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},t.prototype.getAll=function(t){return this.init(),this.headers.get(t.toLowerCase())||null},t.prototype.append=function(t,e){return this.clone({name:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({name:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({name:t,value:e,op:"d"})},t.prototype.maybeSetNormalizedName=function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)},t.prototype.init=function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(t){return e.applyUpdate(t)}),this.lazyUpdate=null))},t.prototype.copyFrom=function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach(function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))})},t.prototype.clone=function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n},t.prototype.applyUpdate=function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var r=("a"===t.op?this.headers.get(e):void 0)||[];r.push.apply(r,Object(o.f)(n)),this.headers.set(e,r);break;case"d":var i=t.value;if(i){var a=this.headers.get(e);if(!a)return;0===(a=a.filter(function(t){return-1===i.indexOf(t)})).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}else this.headers.delete(e),this.normalizedNames.delete(e)}},t.prototype.forEach=function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return t(e.normalizedNames.get(n),e.headers.get(n))})},t}(),Oh=function(){function t(){}return t.prototype.encodeKey=function(t){return Dh(t)},t.prototype.encodeValue=function(t){return Dh(t)},t.prototype.decodeKey=function(t){return decodeURIComponent(t)},t.prototype.decodeValue=function(t){return decodeURIComponent(t)},t}();function Dh(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var kh=function(){function t(t){void 0===t&&(t={});var e,n,r,i=this;if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Oh,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(e=t.fromString,n=this.encoder,r=new Map,e.length>0&&e.split("&").forEach(function(t){var e=t.indexOf("="),i=Object(o.e)(-1==e?[n.decodeKey(t),""]:[n.decodeKey(t.slice(0,e)),n.decodeValue(t.slice(e+1))],2),a=i[0],s=i[1],u=r.get(a)||[];u.push(s),r.set(a,u)}),r)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(function(e){var n=t.fromObject[e];i.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}return t.prototype.has=function(t){return this.init(),this.map.has(t)},t.prototype.get=function(t){this.init();var e=this.map.get(t);return e?e[0]:null},t.prototype.getAll=function(t){return this.init(),this.map.get(t)||null},t.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},t.prototype.append=function(t,e){return this.clone({param:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({param:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({param:t,value:e,op:"d"})},t.prototype.toString=function(){var t=this;return this.init(),this.keys().map(function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map(function(e){return n+"="+t.encoder.encodeValue(e)}).join("&")}).join("&")},t.prototype.clone=function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([e]),n},t.prototype.init=function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(e){return t.map.set(e,t.cloneFrom.map.get(e))}),this.updates.forEach(function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(e.value),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var r=t.map.get(e.param)||[],i=r.indexOf(e.value);-1!==i&&r.splice(i,1),r.length>0?t.map.set(e.param,r):t.map.delete(e.param)}}),this.cloneFrom=null)},t}();function Mh(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Rh(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Nh(t){return"undefined"!=typeof FormData&&t instanceof FormData}var Lh=function(){function t(t,e,n,r){var i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Ih),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{var a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new kh,this.urlWithParams=e}return t.prototype.serializeBody=function(){return null===this.body?null:Mh(this.body)||Rh(this.body)||Nh(this.body)||"string"==typeof this.body?this.body:this.body instanceof kh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},t.prototype.detectContentTypeHeader=function(){return null===this.body?null:Nh(this.body)?null:Rh(this.body)?this.body.type||null:Mh(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof kh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},t.prototype.clone=function(e){void 0===e&&(e={});var n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,s=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,u=e.headers||this.headers,l=e.params||this.params;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce(function(t,n){return t.set(n,e.setHeaders[n])},u)),e.setParams&&(l=Object.keys(e.setParams).reduce(function(t,n){return t.set(n,e.setParams[n])},l)),new t(n,r,o,{params:l,headers:u,reportProgress:s,responseType:i,withCredentials:a})},t}(),Fh=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({}),Bh=function(){return function(t,e,n){void 0===e&&(e=200),void 0===n&&(n="OK"),this.headers=t.headers||new Ih,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}(),jh=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=Fh.ResponseHeader,n}return Object(o.c)(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(Bh),zh=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=Fh.Response,n.body=void 0!==e.body?e.body:null,n}return Object(o.c)(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(Bh),Vh=function(t){function e(e){var n=t.call(this,e,0,"Unknown Error")||this;return n.name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for "+(e.url||"(unknown url)"):"Http failure response for "+(e.url||"(unknown url)")+": "+e.status+" "+e.statusText,n.error=e.error||null,n}return Object(o.c)(e,t),e}(Bh);function Uh(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var qh=function(){function t(t){this.handler=t}return t.prototype.request=function(t,e,n){var r,i=this;if(void 0===n&&(n={}),t instanceof Lh)r=t;else{var o;o=n.headers instanceof Ih?n.headers:new Ih(n.headers);var a=void 0;n.params&&(a=n.params instanceof kh?n.params:new kh({fromObject:n.params})),r=new Lh(t,e,void 0!==n.body?n.body:null,{headers:o,params:a,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}var s=h(r).pipe(xt(function(t){return i.handler.handle(t)}));if(t instanceof Lh||"events"===n.observe)return s;var u=s.pipe(v(function(t){return t instanceof zh}));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return u.pipe(Object(d.a)(function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return u.pipe(Object(d.a)(function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return u.pipe(Object(d.a)(function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return u.pipe(Object(d.a)(function(t){return t.body}))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type "+n.observe+"}")}},t.prototype.delete=function(t,e){return void 0===e&&(e={}),this.request("DELETE",t,e)},t.prototype.get=function(t,e){return void 0===e&&(e={}),this.request("GET",t,e)},t.prototype.head=function(t,e){return void 0===e&&(e={}),this.request("HEAD",t,e)},t.prototype.jsonp=function(t,e){return this.request("JSONP",t,{params:(new kh).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},t.prototype.options=function(t,e){return void 0===e&&(e={}),this.request("OPTIONS",t,e)},t.prototype.patch=function(t,e,n){return void 0===n&&(n={}),this.request("PATCH",t,Uh(n,e))},t.prototype.post=function(t,e,n){return void 0===n&&(n={}),this.request("POST",t,Uh(n,e))},t.prototype.put=function(t,e,n){return void 0===n&&(n={}),this.request("PUT",t,Uh(n,e))},t}(),Gh=function(){function t(t,e){this.next=t,this.interceptor=e}return t.prototype.handle=function(t){return this.interceptor.intercept(t,this.next)},t}(),Hh=new r.InjectionToken("HTTP_INTERCEPTORS"),Wh=function(){function t(){}return t.prototype.intercept=function(t,e){return e.handle(t)},t}(),Kh=/^\)\]\}',?\n/,Xh=function(){},Qh=function(){function t(){}return t.prototype.build=function(){return new XMLHttpRequest},t}(),Zh=function(){function t(t){this.xhrFactory=t}return t.prototype.handle=function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new u.a(function(n){var r=e.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach(function(t,e){return r.setRequestHeader(t,e.join(","))}),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var i=t.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(t.responseType){var o=t.responseType.toLowerCase();r.responseType="json"!==o?o:"text"}var a=t.serializeBody(),s=null,u=function(){if(null!==s)return s;var e=1223===r.status?204:r.status,n=r.statusText||"OK",i=new Ih(r.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(r)||t.url;return s=new jh({headers:i,status:e,statusText:n,url:o})},l=function(){var e=u(),i=e.headers,o=e.status,a=e.statusText,s=e.url,l=null;204!==o&&(l=void 0===r.response?r.responseText:r.response),0===o&&(o=l?200:0);var c=o>=200&&o<300;if("json"===t.responseType&&"string"==typeof l){var h=l;l=l.replace(Kh,"");try{l=""!==l?JSON.parse(l):null}catch(t){l=h,c&&(c=!1,l={error:t,text:l})}}c?(n.next(new zh({body:l,headers:i,status:o,statusText:a,url:s||void 0})),n.complete()):n.error(new Vh({error:l,headers:i,status:o,statusText:a,url:s||void 0}))},c=function(t){var e=new Vh({error:t,status:r.status||0,statusText:r.statusText||"Unknown Error"});n.error(e)},h=!1,p=function(e){h||(n.next(u()),h=!0);var i={type:Fh.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(i.total=e.total),"text"===t.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},f=function(t){var e={type:Fh.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return r.addEventListener("load",l),r.addEventListener("error",c),t.reportProgress&&(r.addEventListener("progress",p),null!==a&&r.upload&&r.upload.addEventListener("progress",f)),r.send(a),n.next({type:Fh.Sent}),function(){r.removeEventListener("error",c),r.removeEventListener("load",l),t.reportProgress&&(r.removeEventListener("progress",p),null!==a&&r.upload&&r.upload.removeEventListener("progress",f)),r.abort()}})},t}(),Yh=new r.InjectionToken("XSRF_COOKIE_NAME"),Jh=new r.InjectionToken("XSRF_HEADER_NAME"),$h=function(){},tp=function(){function t(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return t.prototype.getToken=function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Object(S["\u0275parseCookieValue"])(t,this.cookieName),this.lastCookieString=t),this.lastToken},t}(),ep=function(){function t(t,e){this.tokenService=t,this.headerName=e}return t.prototype.intercept=function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)},t}(),np=function(){function t(t,e){this.backend=t,this.injector=e,this.chain=null}return t.prototype.handle=function(t){if(null===this.chain){var e=this.injector.get(Hh,[]);this.chain=e.reduceRight(function(t,e){return new Gh(t,e)},this.backend)}return this.chain.handle(t)},t}(),rp=function(){function t(){}return t.disable=function(){return{ngModule:t,providers:[{provide:ep,useClass:Wh}]}},t.withOptions=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[e.cookieName?{provide:Yh,useValue:e.cookieName}:[],e.headerName?{provide:Jh,useValue:e.headerName}:[]]}},t}(),ip=function(){},op=function(){function t(t,e){var n=this;this.transferState=e,this.isCacheActive=!0,t.isStable.pipe(v(function(t){return t}),it(1)).toPromise().then(function(){n.isCacheActive=!1})}return t.prototype.invalidateCacheEntry=function(t){this.transferState.remove(Xe("G."+t)),this.transferState.remove(Xe("H."+t))},t.prototype.intercept=function(t,e){var n=this;if("GET"!==t.method&&"HEAD"!==t.method&&(this.isCacheActive=!1,this.invalidateCacheEntry(t.url)),!this.isCacheActive)return e.handle(t);var r=Xe(("GET"===t.method?"G.":"H.")+t.url);if(this.transferState.hasKey(r)){var i=this.transferState.get(r,{});return h(new zh({body:i.body,headers:new Ih(i.headers),status:i.status,statusText:i.statusText,url:i.url}))}return e.handle(t).pipe(pt(function(t){t instanceof zh&&n.transferState.set(r,{body:t.body,headers:function(t){var e,n,r={};try{for(var i=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}(t.keys()),o=i.next();!o.done;o=i.next()){var a=o.value;r[a]=t.getAll(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.headers),status:t.status,statusText:t.statusText,url:t.url})}))},t}(),ap=function(){},sp=function(){function t(){}return t.prototype.build=function(){return new XMLHttpRequest},t}(),up=function(t){return t[t.Get=0]="Get",t[t.Post=1]="Post",t[t.Put=2]="Put",t[t.Delete=3]="Delete",t[t.Options=4]="Options",t[t.Head=5]="Head",t[t.Patch=6]="Patch",t}({}),lp=function(t){return t[t.Basic=0]="Basic",t[t.Cors=1]="Cors",t[t.Default=2]="Default",t[t.Error=3]="Error",t[t.Opaque=4]="Opaque",t}({}),cp=function(t){return t[t.NONE=0]="NONE",t[t.JSON=1]="JSON",t[t.FORM=2]="FORM",t[t.FORM_DATA=3]="FORM_DATA",t[t.TEXT=4]="TEXT",t[t.BLOB=5]="BLOB",t[t.ARRAY_BUFFER=6]="ARRAY_BUFFER",t}({}),hp=function(t){return t[t.Text=0]="Text",t[t.Json=1]="Json",t[t.ArrayBuffer=2]="ArrayBuffer",t[t.Blob=3]="Blob",t}({}),pp=function(){function t(e){var n=this;this._headers=new Map,this._normalizedNames=new Map,e&&(e instanceof t?e.forEach(function(t,e){t.forEach(function(t){return n.append(e,t)})}):Object.keys(e).forEach(function(t){var r=Array.isArray(e[t])?e[t]:[e[t]];n.delete(t),r.forEach(function(e){return n.append(t,e)})}))}return t.fromResponseHeaderString=function(e){var n=new t;return e.split("\n").forEach(function(t){var e=t.indexOf(":");if(e>0){var r=t.slice(0,e),i=t.slice(e+1).trim();n.set(r,i)}}),n},t.prototype.append=function(t,e){var n=this.getAll(t);null===n?this.set(t,e):n.push(e)},t.prototype.delete=function(t){var e=t.toLowerCase();this._normalizedNames.delete(e),this._headers.delete(e)},t.prototype.forEach=function(t){var e=this;this._headers.forEach(function(n,r){return t(n,e._normalizedNames.get(r),e._headers)})},t.prototype.get=function(t){var e=this.getAll(t);return null===e?null:e.length>0?e[0]:null},t.prototype.has=function(t){return this._headers.has(t.toLowerCase())},t.prototype.keys=function(){return Array.from(this._normalizedNames.values())},t.prototype.set=function(t,e){Array.isArray(e)?e.length&&this._headers.set(t.toLowerCase(),[e.join(",")]):this._headers.set(t.toLowerCase(),[e]),this.mayBeSetNormalizedName(t)},t.prototype.values=function(){return Array.from(this._headers.values())},t.prototype.toJSON=function(){var t=this,e={};return this._headers.forEach(function(n,r){var i=[];n.forEach(function(t){return i.push.apply(i,Object(o.f)(t.split(",")))}),e[t._normalizedNames.get(r)]=i}),e},t.prototype.getAll=function(t){return this.has(t)&&this._headers.get(t.toLowerCase())||null},t.prototype.entries=function(){throw new Error('"entries" method is not implemented on Headers class')},t.prototype.mayBeSetNormalizedName=function(t){var e=t.toLowerCase();this._normalizedNames.has(e)||this._normalizedNames.set(e,t)},t}(),fp=function(){function t(t){void 0===t&&(t={});var e=t.body,n=t.status,r=t.headers,i=t.statusText,o=t.type,a=t.url;this.body=null!=e?e:null,this.status=null!=n?n:null,this.headers=null!=r?r:null,this.statusText=null!=i?i:null,this.type=null!=o?o:null,this.url=null!=a?a:null}return t.prototype.merge=function(e){return new t({body:e&&null!=e.body?e.body:this.body,status:e&&null!=e.status?e.status:this.status,headers:e&&null!=e.headers?e.headers:this.headers,statusText:e&&null!=e.statusText?e.statusText:this.statusText,type:e&&null!=e.type?e.type:this.type,url:e&&null!=e.url?e.url:this.url})},t}(),dp=function(t){function e(){return t.call(this,{status:200,statusText:"Ok",type:lp.Default,headers:new pp})||this}return Object(o.c)(e,t),e}(fp),mp=function(){};function gp(t){if("string"!=typeof t)return t;switch(t.toUpperCase()){case"GET":return up.Get;case"POST":return up.Post;case"PUT":return up.Put;case"DELETE":return up.Delete;case"OPTIONS":return up.Options;case"HEAD":return up.Head;case"PATCH":return up.Patch}throw new Error('Invalid request method. The method "'+t+'" is not supported.')}var yp=function(t){return t>=200&&t<300},vp=function(){function t(){}return t.prototype.encodeKey=function(t){return bp(t)},t.prototype.encodeValue=function(t){return bp(t)},t}();function bp(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var _p=function(){function t(t,e){void 0===t&&(t=""),void 0===e&&(e=new vp),this.rawParams=t,this.queryEncoder=e,this.paramsMap=function(t){void 0===t&&(t="");var e=new Map;return t.length>0&&t.split("&").forEach(function(t){var n=t.indexOf("="),r=Object(o.e)(-1==n?[t,""]:[t.slice(0,n),t.slice(n+1)],2),i=r[0],a=r[1],s=e.get(i)||[];s.push(a),e.set(i,s)}),e}(t)}return t.prototype.clone=function(){var e=new t("",this.queryEncoder);return e.appendAll(this),e},t.prototype.has=function(t){return this.paramsMap.has(t)},t.prototype.get=function(t){var e=this.paramsMap.get(t);return Array.isArray(e)?e[0]:null},t.prototype.getAll=function(t){return this.paramsMap.get(t)||[]},t.prototype.set=function(t,e){if(void 0!==e&&null!==e){var n=this.paramsMap.get(t)||[];n.length=0,n.push(e),this.paramsMap.set(t,n)}else this.delete(t)},t.prototype.setAll=function(t){var e=this;t.paramsMap.forEach(function(t,n){var r=e.paramsMap.get(n)||[];r.length=0,r.push(t[0]),e.paramsMap.set(n,r)})},t.prototype.append=function(t,e){if(void 0!==e&&null!==e){var n=this.paramsMap.get(t)||[];n.push(e),this.paramsMap.set(t,n)}},t.prototype.appendAll=function(t){var e=this;t.paramsMap.forEach(function(t,n){for(var r=e.paramsMap.get(n)||[],i=0;i<t.length;++i)r.push(t[i]);e.paramsMap.set(n,r)})},t.prototype.replaceAll=function(t){var e=this;t.paramsMap.forEach(function(t,n){var r=e.paramsMap.get(n)||[];r.length=0;for(var i=0;i<t.length;++i)r.push(t[i]);e.paramsMap.set(n,r)})},t.prototype.toString=function(){var t=this,e=[];return this.paramsMap.forEach(function(n,r){n.forEach(function(n){return e.push(t.queryEncoder.encodeKey(r)+"="+t.queryEncoder.encodeValue(n))})}),e.join("&")},t.prototype.delete=function(t){this.paramsMap.delete(t)},t}(),wp=function(){function t(){}return t.prototype.json=function(){return"string"==typeof this._body?JSON.parse(this._body):this._body instanceof ArrayBuffer?JSON.parse(this.text()):this._body},t.prototype.text=function(t){if(void 0===t&&(t="legacy"),this._body instanceof _p)return this._body.toString();if(this._body instanceof ArrayBuffer)switch(t){case"legacy":return String.fromCharCode.apply(null,new Uint16Array(this._body));case"iso-8859":return String.fromCharCode.apply(null,new Uint8Array(this._body));default:throw new Error("Invalid value for encodingHint: "+t)}return null==this._body?"":"object"==typeof this._body?JSON.stringify(this._body,null,2):this._body.toString()},t.prototype.arrayBuffer=function(){return this._body instanceof ArrayBuffer?this._body:function(t){for(var e=new Uint16Array(t.length),n=0,r=t.length;n<r;n++)e[n]=t.charCodeAt(n);return e.buffer}(this.text())},t.prototype.blob=function(){if(this._body instanceof Blob)return this._body;if(this._body instanceof ArrayBuffer)return new Blob([this._body]);throw new Error("The request body isn't either a blob or an array buffer")},t}(),xp=function(t){function e(e){var n=t.call(this)||this;return n._body=e.body,n.status=e.status,n.ok=n.status>=200&&n.status<=299,n.statusText=e.statusText,n.headers=e.headers,n.type=e.type,n.url=e.url,n}return Object(o.c)(e,t),e.prototype.toString=function(){return"Response with status: "+this.status+" "+this.statusText+" for URL: "+this.url},e}(wp),Cp=/^\)\]\}',?\n/,Ep=function(){function t(t,e,n){var r=this;this.request=t,this.response=new u.a(function(i){var o=e.build();o.open(up[t.method].toUpperCase(),t.url),null!=t.withCredentials&&(o.withCredentials=t.withCredentials);var a=function(){var e=1223===o.status?204:o.status,r=null;204!==e&&"string"==typeof(r=void 0===o.response?o.responseText:o.response)&&(r=r.replace(Cp,"")),0===e&&(e=r?200:0);var a,s=pp.fromResponseHeaderString(o.getAllResponseHeaders()),u=("responseURL"in(a=o)?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):null)||t.url,l=new fp({body:r,status:e,headers:s,statusText:o.statusText||"OK",url:u});null!=n&&(l=n.merge(l));var c=new xp(l);if(c.ok=yp(e),c.ok)return i.next(c),void i.complete();i.error(c)},s=function(t){var e=new fp({body:t,type:lp.Error,status:o.status,statusText:o.statusText});null!=n&&(e=n.merge(e)),i.error(new xp(e))};if(r.setDetectedContentType(t,o),null==t.headers&&(t.headers=new pp),t.headers.has("Accept")||t.headers.append("Accept","application/json, text/plain, */*"),t.headers.forEach(function(t,e){return o.setRequestHeader(e,t.join(","))}),null!=t.responseType&&null!=o.responseType)switch(t.responseType){case hp.ArrayBuffer:o.responseType="arraybuffer";break;case hp.Json:o.responseType="json";break;case hp.Text:o.responseType="text";break;case hp.Blob:o.responseType="blob";break;default:throw new Error("The selected responseType is not supported")}return o.addEventListener("load",a),o.addEventListener("error",s),o.send(r.request.getBody()),function(){o.removeEventListener("load",a),o.removeEventListener("error",s),o.abort()}})}return t.prototype.setDetectedContentType=function(t,e){if(null==t.headers||null==t.headers.get("Content-Type"))switch(t.contentType){case cp.NONE:break;case cp.JSON:e.setRequestHeader("content-type","application/json");break;case cp.FORM:e.setRequestHeader("content-type","application/x-www-form-urlencoded;charset=UTF-8");break;case cp.TEXT:e.setRequestHeader("content-type","text/plain");break;case cp.BLOB:var n=t.blob();n.type&&e.setRequestHeader("content-type",n.type)}},t}(),Sp=function(){function t(t,e){void 0===t&&(t="XSRF-TOKEN"),void 0===e&&(e="X-XSRF-TOKEN"),this._cookieName=t,this._headerName=e}return t.prototype.configureRequest=function(t){var e=Lt().getCookie(this._cookieName);e&&t.headers.set(this._headerName,e)},t}(),Tp=function(){function t(t,e,n){this._browserXHR=t,this._baseResponseOptions=e,this._xsrfStrategy=n}return t.prototype.createConnection=function(t){return this._xsrfStrategy.configureRequest(t),new Ep(t,this._browserXHR,this._baseResponseOptions)},t}(),Ap=function(){function t(t){void 0===t&&(t={});var e=t.method,n=t.headers,r=t.body,i=t.url,o=t.search,a=t.params,s=t.withCredentials,u=t.responseType;this.method=null!=e?gp(e):null,this.headers=null!=n?n:null,this.body=null!=r?r:null,this.url=null!=i?i:null,this.params=this._mergeSearchParams(a||o),this.withCredentials=null!=s?s:null,this.responseType=null!=u?u:null}return Object.defineProperty(t.prototype,"search",{get:function(){return this.params},set:function(t){this.params=t},enumerable:!0,configurable:!0}),t.prototype.merge=function(e){return new t({method:e&&null!=e.method?e.method:this.method,headers:e&&null!=e.headers?e.headers:new pp(this.headers),body:e&&null!=e.body?e.body:this.body,url:e&&null!=e.url?e.url:this.url,params:e&&this._mergeSearchParams(e.params||e.search),withCredentials:e&&null!=e.withCredentials?e.withCredentials:this.withCredentials,responseType:e&&null!=e.responseType?e.responseType:this.responseType})},t.prototype._mergeSearchParams=function(t){return t?t instanceof _p?t.clone():"string"==typeof t?new _p(t):this._parseParams(t):this.params},t.prototype._parseParams=function(t){var e=this;void 0===t&&(t={});var n=new _p;return Object.keys(t).forEach(function(r){var i=t[r];Array.isArray(i)?i.forEach(function(t){return e._appendParam(r,t,n)}):e._appendParam(r,i,n)}),n},t.prototype._appendParam=function(t,e,n){"string"!=typeof e&&(e=JSON.stringify(e)),n.append(t,e)},t}(),Pp=function(t){function e(){return t.call(this,{method:up.Get,headers:new pp})||this}return Object(o.c)(e,t),e}(Ap),Ip=function(t){function e(e){var n=t.call(this)||this,r=e.url;n.url=e.url;var i,o=e.params||e.search;if(o&&(i="object"!=typeof o||o instanceof _p?o.toString():function(t){var e=new _p;return Object.keys(t).forEach(function(n){var r=t[n];r&&Array.isArray(r)?r.forEach(function(t){return e.append(n,t.toString())}):e.append(n,r.toString())}),e}(o).toString()).length>0){var a="?";-1!=n.url.indexOf("?")&&(a="&"==n.url[n.url.length-1]?"":"&"),n.url=r+a+i}return n._body=e.body,n.method=gp(e.method),n.headers=new pp(e.headers),n.contentType=n.detectContentType(),n.withCredentials=e.withCredentials,n.responseType=e.responseType,n}return Object(o.c)(e,t),e.prototype.detectContentType=function(){switch(this.headers.get("content-type")){case"application/json":return cp.JSON;case"application/x-www-form-urlencoded":return cp.FORM;case"multipart/form-data":return cp.FORM_DATA;case"text/plain":case"text/html":return cp.TEXT;case"application/octet-stream":return this._body instanceof Rp?cp.ARRAY_BUFFER:cp.BLOB;default:return this.detectContentTypeFromBody()}},e.prototype.detectContentTypeFromBody=function(){return null==this._body?cp.NONE:this._body instanceof _p?cp.FORM:this._body instanceof kp?cp.FORM_DATA:this._body instanceof Mp?cp.BLOB:this._body instanceof Rp?cp.ARRAY_BUFFER:this._body&&"object"==typeof this._body?cp.JSON:cp.TEXT},e.prototype.getBody=function(){switch(this.contentType){case cp.JSON:case cp.FORM:return this.text();case cp.FORM_DATA:return this._body;case cp.TEXT:return this.text();case cp.BLOB:return this.blob();case cp.ARRAY_BUFFER:return this.arrayBuffer();default:return null}},e}(wp),Op=function(){},Dp="object"==typeof window?window:Op,kp=Dp.FormData||Op,Mp=Dp.Blob||Op,Rp=Dp.ArrayBuffer||Op;function Np(t,e){return t.createConnection(e).response}function Lp(t,e,n,r){return t.merge(new Ap(e?{method:e.method||n,url:e.url||r,search:e.search,params:e.params,headers:e.headers,body:e.body,withCredentials:e.withCredentials,responseType:e.responseType}:{method:n,url:r}))}var Fp=function(){function t(t,e){this._backend=t,this._defaultOptions=e}return t.prototype.request=function(t,e){var n;if("string"==typeof t)n=Np(this._backend,new Ip(Lp(this._defaultOptions,e,up.Get,t)));else{if(!(t instanceof Ip))throw new Error("First argument must be a url string or Request instance.");n=Np(this._backend,t)}return n},t.prototype.get=function(t,e){return this.request(new Ip(Lp(this._defaultOptions,e,up.Get,t)))},t.prototype.post=function(t,e,n){return this.request(new Ip(Lp(this._defaultOptions.merge(new Ap({body:e})),n,up.Post,t)))},t.prototype.put=function(t,e,n){return this.request(new Ip(Lp(this._defaultOptions.merge(new Ap({body:e})),n,up.Put,t)))},t.prototype.delete=function(t,e){return this.request(new Ip(Lp(this._defaultOptions,e,up.Delete,t)))},t.prototype.patch=function(t,e,n){return this.request(new Ip(Lp(this._defaultOptions.merge(new Ap({body:e})),n,up.Patch,t)))},t.prototype.head=function(t,e){return this.request(new Ip(Lp(this._defaultOptions,e,up.Head,t)))},t.prototype.options=function(t,e){return this.request(new Ip(Lp(this._defaultOptions,e,up.Options,t)))},t}();function Bp(){return new Sp}function jp(t,e){return new Fp(t,e)}var zp=function(){},Vp=function(){function t(t,e){this.auth=t,this.router=e}return t.prototype.canActivate=function(t,e){return this.auth.isAdmin()?(console.log("Eres Admin"),!0):(console.log("access denied!"),this.router.navigate(["/adminLogin"]),!1)},t}(),Up=(n("lPHp"),function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t}()),qp=r["\u0275cmf"](Z,[Y],function(t){return r["\u0275mod"]([r["\u0275mpd"](512,r.ComponentFactoryResolver,r["\u0275CodegenComponentFactoryResolver"],[[8,[Ri,Ui,La,Ou,Ru,Hu,Qu,el]],[3,r.ComponentFactoryResolver],r.NgModuleRef]),r["\u0275mpd"](5120,r.LOCALE_ID,r["\u0275angular_packages_core_core_k"],[[3,r.LOCALE_ID]]),r["\u0275mpd"](4608,S.NgLocalization,S.NgLocaleLocalization,[r.LOCALE_ID,[2,S["\u0275angular_packages_common_common_a"]]]),r["\u0275mpd"](5120,r.IterableDiffers,r["\u0275angular_packages_core_core_i"],[]),r["\u0275mpd"](5120,r.KeyValueDiffers,r["\u0275angular_packages_core_core_j"],[]),r["\u0275mpd"](4608,Re,Ne,[S.DOCUMENT]),r["\u0275mpd"](6144,r.Sanitizer,null,[Re]),r["\u0275mpd"](4608,Ae,Ie,[]),r["\u0275mpd"](5120,te,function(t,e,n,r,i,o,a,s){return[new Se(t,e,n),new Me(r),new Oe(i,o,a,s)]},[S.DOCUMENT,r.NgZone,r.PLATFORM_ID,S.DOCUMENT,S.DOCUMENT,Ae,r["\u0275Console"],[2,Pe]]),r["\u0275mpd"](4608,ee,ee,[te,r.NgZone]),r["\u0275mpd"](135680,ie,ie,[S.DOCUMENT]),r["\u0275mpd"](4608,he,he,[ee,ie]),r["\u0275mpd"](5120,kl,xh,[]),r["\u0275mpd"](5120,xc,Ch,[]),r["\u0275mpd"](4608,Yc,wh,[S.DOCUMENT,kl,xc]),r["\u0275mpd"](5120,r.RendererFactory2,Eh,[he,Yc,r.NgZone]),r["\u0275mpd"](6144,re,null,[ie]),r["\u0275mpd"](4608,r.Testability,r.Testability,[r.NgZone]),r["\u0275mpd"](5120,Qe,Ze,[S.DOCUMENT,r.APP_ID]),r["\u0275mpd"](4608,op,op,[r.ApplicationRef,Qe]),r["\u0275mpd"](4608,$h,tp,[S.DOCUMENT,r.PLATFORM_ID,Yh]),r["\u0275mpd"](4608,ep,ep,[$h,Jh]),r["\u0275mpd"](5120,Hh,function(t,e){return[t,e]},[op,ep]),r["\u0275mpd"](4608,Qh,Qh,[]),r["\u0275mpd"](6144,Xh,null,[Qh]),r["\u0275mpd"](4608,Zh,Zh,[Xh]),r["\u0275mpd"](6144,Ph,null,[Zh]),r["\u0275mpd"](4608,Ah,np,[Ph,r.Injector]),r["\u0275mpd"](4608,qh,qh,[Ah]),r["\u0275mpd"](5120,B,j,[L,[2,F]]),r["\u0275mpd"](4608,rs,rs,[]),r["\u0275mpd"](4608,yu,yu,[L,[2,F],r.PLATFORM_ID,r.NgZone]),r["\u0275mpd"](4608,nl,dh,[r.RendererFactory2,Gt]),r["\u0275mpd"](4608,sp,sp,[]),r["\u0275mpd"](4608,fp,dp,[]),r["\u0275mpd"](5120,mp,Bp,[]),r["\u0275mpd"](4608,Tp,Tp,[sp,fp,mp]),r["\u0275mpd"](4608,Ap,Pp,[]),r["\u0275mpd"](5120,Fp,jp,[Tp,Ap]),r["\u0275mpd"](5120,gr,Ai,[ni]),r["\u0275mpd"](4608,di,di,[]),r["\u0275mpd"](6144,pi,null,[di]),r["\u0275mpd"](135680,mi,mi,[ni,r.NgModuleFactoryLoader,r.Compiler,r.Injector,pi]),r["\u0275mpd"](4608,fi,fi,[]),r["\u0275mpd"](5120,gi,xi,[ni,S.ViewportScroller,yi]),r["\u0275mpd"](5120,Di,Oi,[Pi]),r["\u0275mpd"](5120,r.APP_BOOTSTRAP_LISTENER,function(t){return[t]},[Di]),r["\u0275mpd"](4608,_u.DeviceDetectorService,_u.DeviceDetectorService,[r.PLATFORM_ID]),r["\u0275mpd"](4608,Ki,Ki,[L,[2,F],[2,Wi],r.PLATFORM_ID,r.NgZone]),r["\u0275mpd"](4608,Da,Da,[X,Ki,Fp]),r["\u0275mpd"](4608,bu,bu,[yu]),r["\u0275mpd"](4608,Vp,Vp,[bu,ni]),r["\u0275mpd"](1073742336,S.CommonModule,S.CommonModule,[]),r["\u0275mpd"](1024,r.ErrorHandler,Ge,[]),r["\u0275mpd"](1024,r.NgProbeToken,function(){return[_i()]},[]),r["\u0275mpd"](256,r.APP_ID,"my-app",[]),r["\u0275mpd"](2048,Kt,null,[r.APP_ID]),r["\u0275mpd"](512,Pi,Pi,[r.Injector]),r["\u0275mpd"](1024,r.APP_INITIALIZER,function(t,e,n,r,i){return[(a=t,Yt("probe",$t),Yt("coreTokens",Object(o.a)({},Jt,(a||[]).reduce(function(t,e){return t[e.name]=e.token,t},{}))),function(){return $t}),Xt(e,n,r),Ii(i)];var a},[[2,r.NgProbeToken],Kt,S.DOCUMENT,r.Injector,Pi]),r["\u0275mpd"](512,r.ApplicationInitStatus,r.ApplicationInitStatus,[[2,r.APP_INITIALIZER]]),r["\u0275mpd"](131584,r.ApplicationRef,r.ApplicationRef,[r.NgZone,r["\u0275Console"],r.Injector,r.ErrorHandler,r.ComponentFactoryResolver,r.ApplicationInitStatus]),r["\u0275mpd"](1073742336,r.ApplicationModule,r.ApplicationModule,[r.ApplicationRef]),r["\u0275mpd"](1073742336,He,He,[[3,He]]),r["\u0275mpd"](1024,vi,Ei,[[3,ni]]),r["\u0275mpd"](512,Bn,jn,[]),r["\u0275mpd"](512,li,li,[]),r["\u0275mpd"](256,yi,{},[]),r["\u0275mpd"](1024,S.LocationStrategy,Ci,[S.PlatformLocation,[2,S.APP_BASE_HREF],yi]),r["\u0275mpd"](512,S.Location,S.Location,[S.LocationStrategy]),r["\u0275mpd"](512,r.Compiler,r.Compiler,[]),r["\u0275mpd"](512,r.NgModuleFactoryLoader,r.SystemJsNgModuleLoader,[r.Compiler,[2,r.SystemJsNgModuleLoaderConfig]]),r["\u0275mpd"](1024,Qr,function(){return[[{path:"",component:ji,pathMatch:"full"},{path:"map",component:ka,pathMatch:"full"},{path:"map/:id",component:ka,pathMatch:"full"},{path:"new",component:xu,pathMatch:"full"},{path:"new/data",component:xu,pathMatch:"full"},{path:"nosotros",component:Du,pathMatch:"full"},{path:"approval",component:ju,pathMatch:"full",canActivate:[Vp]},{path:"adminLogin",component:Wu,pathMatch:"full"}]]},[]),r["\u0275mpd"](1024,ni,Ti,[r.ApplicationRef,Bn,li,S.Location,r.Injector,r.NgModuleFactoryLoader,r.Compiler,Qr,yi,[2,Yr],[2,Kr]]),r["\u0275mpd"](1073742336,wi,wi,[[2,vi],[2,ni]]),r["\u0275mpd"](1073742336,Ye,Ye,[]),r["\u0275mpd"](1073742336,ap,ap,[]),r["\u0275mpd"](1073742336,Up,Up,[]),r["\u0275mpd"](1073742336,rp,rp,[]),r["\u0275mpd"](1073742336,ip,ip,[]),r["\u0275mpd"](1073742336,z,z,[]),r["\u0275mpd"](1073742336,Ms,Ms,[]),r["\u0275mpd"](1073742336,Rs,Rs,[]),r["\u0275mpd"](1073742336,Q,Q,[]),r["\u0275mpd"](1073742336,vu,vu,[]),r["\u0275mpd"](1073742336,_u.DeviceDetectorModule,_u.DeviceDetectorModule,[]),r["\u0275mpd"](1073742336,Th,Th,[]),r["\u0275mpd"](1073742336,zp,zp,[]),r["\u0275mpd"](256,L,{apiKey:"AIzaSyAyLJnt_FCiyFQ3ztPTdYBDzqlNsj56F_Y",authDomain:"semillasdiasporavenezuela.firebaseapp.com",databaseURL:"https://semillasdiasporavenezuela.firebaseio.com",projectId:"semillasdiasporavenezuela",storageBucket:"semillasdiasporavenezuela.appspot.com",messagingSenderId:"997349370911"},[]),r["\u0275mpd"](256,F,void 0,[]),r["\u0275mpd"](512,X,X,[L,[2,F],[2,q],[2,H],r.PLATFORM_ID,r.NgZone,[2,G]]),r["\u0275mpd"](1073742336,Z,Z,[X]),r["\u0275mpd"](256,r["\u0275APP_ROOT"],!0,[]),r["\u0275mpd"](256,Yh,"XSRF-TOKEN",[]),r["\u0275mpd"](256,Jh,"X-XSRF-TOKEN",[]),r["\u0275mpd"](256,Sh,"BrowserAnimations",[])])});i.production&&Object(r.enableProdMode)(),document.addEventListener("DOMContentLoaded",function(){qe().bootstrapModuleFactory(qp)})},zVF4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("+7AZ"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=(15&s)<<2|l>>6,h=63&l;u||(h=64,a||(c=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[c],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!=s&&(r.push(a<<4&240|s>>2),64!=u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},l=function(t){try{return u.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=c(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}(),p=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},f=Error.captureStackTrace,d=function(){return function(t,e){if(this.code=t,this.message=e,f)f(this,m.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name="FirebaseError",Object.defineProperty(this,"stack",{get:function(){return t.stack}})}}}();d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="FirebaseError";var m=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],i=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"});var o=new d(i,n=this.serviceName+": "+n+" ("+i+").");for(var a in e)e.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=e[a]);return o},t}();function g(t){return JSON.parse(t)}var y=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=g(l(o[0])||""),n=g(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},v=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},b=function(t,e){return v(e,function(e,n){t[e]=n}),t},_=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},w=function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}return r.__extends(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=l^s&(u^l),o=1518500249):(i=s^u^l,o=1859775393):r<60?(i=s&u|l&(s|u),o=2400959708):(i=s^u^l,o=3395469782);var h=(a<<5|a>>>27)+i+c+o+n[r]&4294967295;c=l,l=u,u=4294967295&(s<<30|s>>>2),s=a,a=h}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},e}(function(){this.blockSize=-1}),x=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function C(){}function E(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}e.assert=o,e.assertionError=a,e.base64=u,e.base64Decode=l,e.base64Encode=function(t){var e=s(t);return u.encodeByteArray(e,!0)},e.CONSTANTS=i,e.deepCopy=function(t){return c(void 0,t)},e.deepExtend=c,e.patchProperty=function(t,e,n){t[e]=n},e.Deferred=h,e.getUA=p,e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.ErrorFactory=m,e.FirebaseError=d,e.patchCapture=function(t){var e=f;return f=t,e},e.jsonEval=g,e.stringify=function(t){return JSON.stringify(t)},e.decode=y,e.isAdmin=function(t){var e=y(t).claims;return"object"==typeof e&&!0===e.admin},e.issuedAtTime=function(t){var e=y(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.isValidFormat=function(t){var e=y(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e,n,r=y(t).claims,i=Math.floor((new Date).getTime()/1e3);return"object"==typeof r&&(r.hasOwnProperty("nbf")?e=r.nbf:r.hasOwnProperty("iat")&&(e=r.iat),n=r.hasOwnProperty("exp")?r.exp:e+86400),i&&e&&n&&i>=e&&i<=n},e.clone=function(t){return b({},t)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.every=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0},e.extend=b,e.findKey=_,e.findValue=function(t,e,n){var r=_(t,e,n);return r&&t[r]},e.forEach=v,e.getAnyKey=function(t){for(var e in t)return e},e.getCount=function(t){var e=0;for(var n in t)e++;return e},e.getValues=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},e.isEmpty=function(t){for(var e in t)return!1;return!0},e.isNonNullObject=function(t){return"object"==typeof t&&null!==t},e.map=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},e.safeGet=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},e.querystring=function(t){var e=[];return v(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e},e.Sha1=w,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}},e.createSubscribe=function(t,e){var n=new x(t,e);return n.subscribe.bind(n)},e.errorPrefix=E,e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(E(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(E(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(E(t,e,r)+"must be a valid firebase namespace.")},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;o(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}},zotm:function(t,e,n){"use strict";var r=n("mrSG"),i=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.c(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n("FFOo").a),o=n("Fxb1");function a(t,e,n,r){var a=new i(t,n,r);return Object(o.a)(e)(a)}n.d(e,"a",function(){return a})},"zrt+":function(t,e,n){"use strict";n.r(e),n.d(e,"isObservable",function(){return i});var r=n("6blF");function i(t){return!!t&&(t instanceof r.a||"function"==typeof t.lift&&"function"==typeof t.subscribe)}}},[[3,0]]]);